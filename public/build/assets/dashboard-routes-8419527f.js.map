{"version":3,"mappings":"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","names":["DashboardLayoutContext","createContext","useBlockBodyOverflow","disable","useEffect","DashboardLayout","children","leftSidenav","onLeftSidenavChange","rightSidenav","initialRightSidenavStatus","onRightSidenavChange","name","leftSidenavCanBeCompact","height","className","gridClassName","blockBodyOverflow","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","leftSidenavStatus","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","rightSidenavStatus","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","jsx","jsxs","clsx","AnimatePresence","Underlay","DashboardContent","isScrollable","cloneElement","DashboardSidenav","position","size","mode","overlayPosition","display","overflow","forceClosed","isMobileMode","useContext","isOverlayMode","variants","sizeClassName","getSize","m","e","target","MenuOpenIcon","createSvgIcon","DashboardNavbar","hideToggleButton","props","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","FilterControlType","FilterOperator","ALL_PRIMITIVE_OPERATORS","startOfDay","date","endOfDay","getUserTimezone","defaultTimezone","_a","getBootstrapData","preferredTimezone","_c","_b","getLocalTimeZone","Now","now","locale","DateRangePresets","message","startOfWeek","endOfWeek","start","startOfMonth","endOfMonth","startOfYear","endOfYear","DateRangeIcon","Input","React","ref","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","Field","mergeProps","focusManager","createFocusManager","getDefaultGranularity","CalendarDate","dateIsInvalid","min","max","useBaseDatePickerState","selectedDate","timezone","useUserTimezone","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","toZoned","useCurrentDateTime","useDateRangePickerState","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","completeRange","value","clear","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","ArrowRightAltIcon","adjustSegment","part","amount","options","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","onChange","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","useFocusManager","formatter","useDateFormatter","parser","NumberParser","setSegmentValue","newValue","adjustSegmentValue","backspace","parsed","today","onKeyDown","onInput","amPmFormatter","am","amDate","pm","pmDate","key","numberValue","allowsZero","shouldSetValue","spinButtonProps","LiteralDateSegment","getSegmentLimits","type","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","state","memoOptions","dateValue","segments","limits","textValue","index","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isDisabled","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","CalendarMonthHeader","WeekdayHeader","weekIndex","dayIndex","shiftCalendars","direction","count","newDates","monthFormatter","isBackwardDisabled","isForwardDisabled","KeyboardArrowLeftIcon","dayFormatter","dateDay","weekday","Calendar","visibleMonths","Fragment","FormattedDateTimeRange","memo","preset","dates","useSettings","DateFormatPresets","castToDate","shallowEqual","parseAbsolute","DatePresetList","onPresetSelected","selectedValue","List","ListItem","Trans","useIsTabletMediaQuery","Switch","description","invalid","errorMessage","iconRight","useAutoFocus","getSizeClassName","descriptionId","useId","FormSwitch","error","useController","formProps","DateRangeComparePresets","diffInMinutes","DateRangeComparePresetList","originalRangeValue","DateRangeDialog","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","close","useDialogContext","initialStateRef","hasPlaceholder","compareVisible","setCompareVisible","footer","DialogFooter","Button","Dialog","DialogBody","Calendars","InlineDatePickerField","label","DateRangePicker","hideCalendarIcon","dialog","DialogTrigger","openOnClick","isHourSegment","FormDateRangePicker","dateRangeToAbsoluteRange","absoluteRangeToDateRange","dateRange","parseAbsoluteToLocal","absoluteRange","timestampFilter","createdAtFilter","updatedAtFilter","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filterValues","filters","item","transformValue","fm","filterConfig","f","option","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","a","b","getDecodedWithoutKeys","values","newFilters","replaceAll","add","remove","DatatableDataQueryKey","endpoint","params","useDatatableData","onLoad","useQuery","signal","paginate","keepPreviousData","resolve","response","apiClient","DataTableContext","useDataTable","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","_d","cellOpCount","_e","_f","_g","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","useTableCellStyle","isHeader","columns","cellHeight","headerCellHeight","column","userPadding","justify","TableCell","rowIsHovered","id","rowContext","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","preventDefault","stopPropagation","onPress","onLongPress","addGlobalListener","removeGlobalListener","useGlobalListeners","onPointerDown","onPointerMove","onPointerUp","deltaX","deltaY","longPressTriggered","createEventHandler","isCtrlOrShiftPressed","useTableRowStyle","isSelected","isDarkMode","useIsDarkMode","hideBorder","enableSelection","collapseOnMobile","onAction","interactableElements","TableRow","renderAs","selectedRows","toggleRow","selectRow","selectRowOnContextMenu","selectionStyle","hideHeaderRow","isTouchDevice","isHovered","setIsHovered","clickedOnInteractable","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","styleClassName","RowElement","CheckboxColumnConfig","SelectAllCheckbox","Skeleton","SelectRowCheckbox","Checkbox","trans","useTrans","data","onSelectionChange","allRowsSelected","someRowsSelected","d","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","enableSorting","sortingKey","allowSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","TableHeaderRow","columnIndex","Table","userColumns","propsSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","onDelete","ariaLabelledBy","renderRowAs","tableBody","meta","propsTableRef","closeOnInteractOutside","isCollapsedMode","newValues","merge","filteredColumns","c","visibleInMode","contextValue","navProps","tableBodyProps","BasicTableBody","tableRef","useInteractOutside","defaultPerPage","perPageOptions","DataTablePaginationFooter","query","onPerPageChange","onPageChange","numberFormatter","useNumberFormatter","pagination","perPageSelect","Select","Item","hasNextPage","FilterAltIcon","AccordionAnimation","Accordion","variant","isLazy","expandedValues","setExpandedValues","itemsCount","child","isValidElement","AccordionItem","disabled","bodyClassName","labelClassName","buttonPadding","startIcon","endAppend","chevronPosition","footerContent","onHeaderMouseEnter","onHeaderMouseLeave","isExpanded","wasExpandedOnce","buttonId","panelId","toggle","i","newKeys","chevron","ArrowDropDownIcon","SelectFilterPanel","filter","FormSelect","DateRangeFilterPanel","Avatar","forwardRef","circle","src","link","fallback","lazy","renderedAvatar","AvatarPlaceholderIcon","Tooltip","Link","useNormalizedModels","queryParams","queryOptions","fetchModels","r","useNormalizedModel","fetchModel","NormalizedModelField","background","defaultValue","placeholder","searchPlaceholder","required","inputValue","setInputValue","SelectedModelPreview","model","modelId","onEditClick","isLoading","LoadingSkeleton","opacityAnimation","EditIcon","FormNormalizedModelField","clearErrors","useFormContext","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","control","operator","FormTextField","BooleanFilterPanel","ChipList","color","radius","selectable","wrap","Children","chip","stringToChipValue","ChipFieldInner","fieldRef","displayWith","v","validateWith","suggestions","onInputValueChange","onItemSelected","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","propsValue","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","onChipClick","inputFieldProps","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","ProgressCircle","dropdownArrow","KeyboardArrowDownIcon","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","cr","newItems","Chip","setChips","chips","addItems","listbox","useListbox","handleItemSelection","activeIndex","setActiveIndex","isOpen","setIsOpen","refs","listboxId","collection","onInputChange","useLayoutEffect","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","Listbox","Popover","emails","selection","email","input","mixedValueToChipValue","propsDefaultValue","handleChange","ChipField","FormChipField","ChipFieldFilterPanel","o","AddFilterDialog","formId","expandedFilters","setExpandedFilters","clearButton","applyButton","DialogHeader","FilterList","defaultValues","appliedFilter","form","useForm","Form","formValue","fieldValue","AddFilterDialogPanel","CustomComponent","AddFilterButton","icon","desktopButton","mobileButton","DataTableHeader","actions","filtersLoading","searchValue","onSearchChange","HeaderLayout","TextField","SearchIcon","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","isBoolean","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","ChipFieldControl","InputControl","SelectModelControl","Control","valueLabel","MultipleValues","maxShownCount","notShownCount","names","operatorLabel","formattedValue","FormattedNumber","skeleton","modelPreview","field","handleValueChange","payload","CloseIcon","SelectedStateDatatableHeader","selectedItemsCount","FilterListSkeleton","DataTable","selectedActions","emptyStateMessage","tableDomProps","onRowAction","collapseTableOnMobile","setParams","setSelectedRows","isFiltering","ProgressBar","descriptor","page","perPage","DataTablePage","title","headerContent","headerItemsAlign","padding","dataTableProps","titleId","StaticPageTitle","useDeleteSelectedRows","useMutation","deleteSelectedRows","queryClient","toast","err","showHttpErrorToast","ids","DeleteSelectedItemsAction","DeleteItemsDialog","ConfirmationDialog","DataTableEmptyStateMessage","filteringTitle","image","IllustratedMessage","SvgImage","AddIcon","DataTableAddItemButton","to","elementType","href","download","FileDownloadIcon","useExportCsv","exportCsv","downloadFileFromUrl","url","CsvExportInfoDialog","DataTableExportCsvButton","dialogIsOpen","setDialogIsOpen","NameWithAvatar","avatarSize","useDatePickerState","DatePicker","showCalendarFooter","FormDatePicker","format","parsedValue","chunkArray","array","chunkSize","resultArray","chunkIndex","ColorIcon","u","t","n","s","h","l","g","p","_","x","C","E","H","L","w","K","I","y","q","D","S","T","F","X","Y","V","$","J","Q","U","W","Z","qe","ke","Ie","Oe","ColorSwatch","colors","presetButtons","ButtonBase","ColorPresets","DefaultPresets","ColorPicker","colorPresets","showInput","setColor","presets","HexColorPicker","newColor","hex","parseColor","HexColorInput","ColorPickerDialog","hideFooter","setValue","initialValue","DragIndicatorIcon","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","entry","width","left","top","useDraggable","preview","hidePreview","dragHandleRef","removeAllGlobalListeners","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","reject","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","sortableLineStrategy","sortSession","onDropPositionChange","previousPosition","newPosition","midY","overIndex","clearLinePreview","addLinePreview","droppableId","droppable","itemIndex","side","moveItemInArray","fromIndex","toIndex","from","clamp","delta","moveItemInNewArray","newArray","transition","sortableTransformStrategy","sortable","currentIndex","rects","newRects","oldRect","sortableTarget","sortableMoveNodeStrategy","moveNode","newIndex","parentEl","strategies","useSortable","onSortEnd","onSortStart","onDragEnd","strategy","draggableProps","getScrollParent","droppableProps","oldIndex","AceEditor","__vitePreload","AceDialog","onSave","isSaving","footerStartAction","beautify","editorRef","isValid","setIsValid","Suspense","Footer","startAction","articlesSvg","USER_MODEL","CustomPageDatatableFilters","dynamicFilters","TuneIcon","MoreVertIcon","themeValueToHex","TabContext","Tabs","tabsRef","selectedTab","setSelectedTab","ContextValue","TabLine","setStyle","prevState","TabList","center","expand","childrenArray","Tab","paddingProp","relative","mergedClassname","textColor","tabIndex","Element","TabPanels","panelArray","rendered","TabPanel","setTabIndex","update","useStickySentinel","isSticky","setIsSticky","observerRef","sentinelRef","sentinel","root","factory","module","this","charMap","locales","replace","string","replacement","trim","slug","result","ch","appendChar","customMap","slugifyString","text","strict","slugified","slugify","useCreateWorkspace","createWorkspace","WorkspaceQueryKeys","onFormQueryError","NewWorkspaceDialog","fetchWorkspaceWithMembers","workspaceId","useWorkspaceWithMembers","GroupIcon","InviteMembers","useInviteMembers","ResendInvite","inviteId","useResendInvite","matcher","isEmail","ChangeRole","member","modelType","memberId","useChangeRole","removeMember","memberType","useRemoveMember","setWorkspaceId","useActiveWorkspaceId","user","useAuth","PersonalWorkspace","LeaveWorkspaceConfirmation","onConfirm","WorkspaceMembersDialog","workspace","Manager","can","usePermissions","members","shouldHideOtherMembers","InviteChipField","MemberListItem","MemberDisplayNameAppend","MemberActions","authUser","permissions","authMember","mb","permission","selectedRole","setSelectedRole","changeRole","isOwner","isCurrentUser","roleSelector","RoleMenuTrigger","roleId","RemoveMemberButton","allEmailsValid","inviteMembers","useValueLists","isConfirmed","ExitToAppIcon","RemoveMemberConfirmation","role","MenuTrigger","Menu","MenuItem","ResendInviteDialogTrigger","resendInvite","PersonAddIcon","updateWorkspace","useUpdateWorkspace","RenameWorkspaceDialog","deleteWorkspace","useDeleteWorkspace","PolicyFailMessage","resourceName","reason","MessageText","SectionHelper","billing","upgradeMsgValues","LinkStyle","WorkspaceSelector","trigger","placement","workspaces","isFetched","isFetching","useUserWorkspaces","activeWorkspace","useActiveWorkspace","selectorIsOpen","setSelectorIsOpen","hasPermission","DefaultTrigger","WorkspaceItem","CreateWorkspaceButton","onCreated","workspaceCount","checkOverQuotaOrNoPermission","overQuotaOrNoPermission","openDialog","UnfoldMoreIcon","CheckIcon","ManageButton","LeaveWorkspaceDialog","DeleteWorkspaceConfirmation","useLinkSummary","fetchLinkUsage","Meter","ProgressBarBase","InfoIcon","resourceTranslationMap","ResourceUsageList","unlimited","usage","UsageDetailsTrigger","subscription","planName","renewalDate","FormattedDate","UsageMeter","links","UpgradeButton","isSubscribed","BelinkDashboardSidenav","isCompactMode","CustomMenu","BelinkDashboardLayout","dash_footer","BelinkNavbar","AdHost","Outlet","selectedTheme","useThemeSelector","buttonColor","monthDayFormat","ReportDateSelector","compactOnMobile","enableCompare","DateSelectorDialog","compareHasInitialValue","ChartLayout","contentIsFlex","contentClassName","contentRef","minHeight","ChartLoadingIndicator","LazyChart","BaseChart","formatReportData","report","shareFirstDatasetLabels","firstDatasetLabels","dataset","datasetIndex","datasetItem","generateDatasetLabels","datum","generateTimeLabels","isoDate","isoEndDate","endDate","getFormatter","memoize","DateFormatter","primaryColor","ChartColors","LineChartOptions","LineChart","formattedData","PolarAreaChartOptions","PolarAreaChart","ReferrerChart","layoutProps","dataItems","dataItem","RemoteFavicon","removeProtocol","loaderUrl","useGoogleGeoChart","placeholderRef","country","onCountrySelected","analytics","apiKey","geoChartRef","regionInteractivity","drawGoogleChart","seedData","location","backgroundColor","initGoogleGeoChart","lazyLoader","ArrowBackIcon","InfoDialogTriggerIcon","InfoDialogTrigger","body","dialogSize","FormattedCountryName","countryCode","regionNames","formattedName","GeoChart","metricData","initialData","InfoTrigger","BarChart","individualBarColors","isHorizontal","useClicksReport","fetchClicksReport","ClicksReportCharts","rowClassName","AsyncChart","GeoChartWithCities","selectedCountry","handleCountrySelected","prev","metric","isEnabled","setIsEnabled","chart","ClicksReportPageLayout","setDateRange","AllClicksReportPage","LinksDatatableFilters","useLinkFormValueLists","prefetchLinkFormValueLists","prefetchValueLists","LinkTypeField","site_name","watch","overlay","upgradeSvg","UpgradeDialog","messageSuffix","FeatureLockedDialog","NoPermissionButton","iconButton","LockIcon","GenericButton","LinkFormSection","upgradeMessage","useLinkFeatureStatus","feature","LinkRestrictionFields","linkName","ScheduleFields","ExpirationClicksField","SwapVertIcon","LinkRetargetingFields","GeoFields","DeviceFields","PlatformFields","FieldsLayout","buttonLabel","defaultKey","fields","append","useFieldArray","RemoveButton","PublicIcon","LinkSeoFields","hideTitle","FileUploadProvider","FormImageSelector","AccountTreeIcon","LinkUtmFields","CustomTagsSection","useDefaultCustomDomainHost","allDomains","custom_domains","base_url","selectedHost","host","LinkDomainSelect","selectProps","defaultHost","domains","domain","LinkSettingsForm","defaultExpanded","multipleLinks","hiddenFields","retargeting","SettingsIcon","LinkOptionsFields","enable_type","pixels","linkCount","hideGroups","hideType","hideEnabled","LinkGroupsField","LinkPixelsField","group","pixel","SlugEditor","onInputBlur","showLinkIcon","pattern","minLength","maxLength","hideButton","prefix","suffix","isEditing","setIsEditing","handleSubmit","LinkIcon","AliasField","alias_min","alias_max","formState","currentAlias","aliasError","newAlias","CrupdateLinkForm","onSubmit","showButtonLabelField","min_len","max_len","hideAlias","urlIsValid","placeholderPassword","buildLinkeableDefaultFormValues","linkeable","rules","defaultUtm","customUtm","defaultUtmTags","rule","buildLinkeablePayload","addUtmAndCustomQueryParams","tag","utm","removeEmptyValuesFromObject","buildLinkPayload","useCreateLink","invalidateQueries","createLink","CreateLinkDialog","onSuccess","default_type","verify","isVerifying","useRecaptcha","nanoid","useUpdateLink","linkId","updateLink","UpdateLinkDialog","buildDefaultFormValues","LinkImage","OverQuotaDialog","PermissionAwareButton","resource","action","childProps","usageKey","camelCaseToSnakeCase","messageType","event","str","letter","BarChartIcon","linksDatatableColumns","LinkClipboardButton","RouterLink","ShareLinkButton","AddLinkIcon","ExportCsvIcon","useCreateMultipleLinks","createLinks","formToPayload","longUrls","CreateMultipleLinksDialog","createMultiple","LinksDatablePage","forCurrentUser","col","userId","Actions","shareLink","MoreHorizIcon","MoveDownIcon","useMoveLinksToGroup","moveLinks","groupId","MoveLinksToGroupDialog","selectedIds","setSelectedIds","paginationButtons","emptyStageMessage","linkSvg","list","LinksSkeleton","LinksList","skeletonCount","LinkGroupsLinksDatatablePage","useParams","PageTitle","linkGroup","Breadcrumb","BreadcrumbItem","ListAltIcon","CrupdateLinkGroupForm","useUpdateLinkGroup","updateLinkGroup","UpdateLinkGroupDialog","updateGroup","LinkGroupsDatatableColumns","LinkGroupsDatatableFilters","useCreateLinkGroup","createLinkGroup","CreateLinkGroupDialog","createGroup","LinkGroupsDatatablePage","useLinkGroup","fetchLinkGroup","seedInitialDataFromPaginatedList","LinkGroupClicksReportPage","useLink","fetchLink","LinkClicksReportPage","world","DomainsEmptyStateMessage","BooleanIndicator","useDeleteDomain","deleteDomain","DeleteDomainButton","domainsDatatableColumns","DomainsDatatableFilters","isSubdomain","DomainProgressIndicator","InfoStep","serverIp","Message","record","HostStep","stepper","ConnectDomainStep","useValidateDomainDns","authorize","ValidationFailedStep","goToNextStep","validationFailReason","subdomain","ErrorMessage","WarningIcon","useAuthorizeDomainConnect","useConnectDomain","useQueryClient","connectDomain","useConnectDomainStepper","showGlobalField","authorizeDomainConnect","validateDns","setState","startLoading","handleDomainValidation","handleDomainAuthorization","hasPreviousStep","validationResult","nextStep","FinalizeStep","ConnectDomainDialog","StepComponent","getStepComponent","step","datatableColumns","DomainsDatatablePage","SupportedTrackingPixels","HelpOutlineIcon","CrupdatePixelForm","CustomCodeFields","useUpdatePixel","pixelId","createPixel","UpdatePixelDialog","updatePixel","TrackingPixelsDatatableColumns","docsUrl","locationTracking","TrackingPixelsDatatableFilters","useCreatePixel","CreatePixelDialog","TrackingPixelsDatablePage","useUpdateLinkPageOptions","pageId","updatePage","LinkPageOptionsTrigger","OptionsDialog","canChangeOptions","updateOptions","LinkPagesDatatableColumns","LinkPagesDatatablePage","SiteConfigContext","preferencesPopup","LinkOverlaysDatatableColumns","LinkOverlayThemes","LinkOverlayPositions","LinkOverlayColors","LinkOverlaysDatatableFilters","theme","LinkOverlaysDatatablePage","useCreateLinkOverlay","createOverlay","OverlayWebsiteBackground","CrupdateLinkOverlayForm","GeneralFields","SaveButton","StyleFields","OverlayPreview","BackgroundField","ColorField","FloatingLinkOverlay","CreateLinkOverlayPage","linkOverlayEndpoint","overlayId","useLinkOverlay","getLinkOverlay","useUpdateLinkOverlay","UpdateLinkOverlayPage","isError","PageContent","FullPageLoader","updateOverlay","marketing","BiolinksDatatableColumns","biolink","DomainColumn","BiolinksDatatableFilters","useCreateBiolink","CreateBiolinkDialog","createBiolink","BioLinksDatatablePage","biolinkQueryKey","biolinkId","useBiolink","fetchBiolink","BiolinkClicksReportPage","WidgetsIcon","AnimationIcon","ShortcutIcon","MoreTimeIcon","BaseColorBg","ColorBackgrounds","defaultAppearance","useBiolinkEditorStore","create","immer","set","get","isDirty","biolinkEditorState","useEditorBiolink","useEditorBiolinkId","setEditorBiolink","useUpdateBiolinkContentItem","updateItem","editorPayload","backendPayload","LinkScheduleDialog","activationDate","expirationMinDate","InfoSection","parts","LeapLinkDialog","LinkThumbnailDialog","LinkAnimationList","LinkAnimationDialog","animation","AnimationItem","animationName","isAnimating","setIsAnimating","selectedAnimation","useDetachBiolinkContentItem","detachItem","DetachContentItemButton","useSortBiolinkContent","sortContent","widgetToPin","content","order","BiolinkContentItemLayout","updateDialog","actionRow","itemRef","sortDisabled","sortableProps","linkDialogHiddenFields","LinkContentItem","ActionRow","ImageIcon","ClicksButton","clicksReportPath","button","useUpdateBiolink","updateBiolink","hiddenLinkSettingsFields","BiolinkSettingsForm","SettingsForm","updateSettings","useCrupdateBiolinkWidget","createWidget","widgetId","CrupdateWidgetDialog","widget","widgetListItem","WidgetList","cleanedValues","addWidget","transformedValues","WidgetType","ImageWidgetDialog","imageThumbnail","textImage","socialsImage","youtubeImage","soundcloudImage","vimeoImage","spotifyImage","twitchImage","tiktokImage","YoutubeWidgetDialog","getVideoId","TextWidgetDialog","SocialsWidgetDialog","SocialsList","social","Icon","TwitchWidgetDialog","SoundcloudWidgetDialog","encodedUrl","embedCode","res","div","embedUrl","VimeoWidgetDialog","SpotifyWidgetDialog","spotifyInfo","parse","TiktokWidgetDialog","SelectWidgetDialog","widgetType","NewWidgetDialogContainer","activeWidget","ArrowUpwardIcon","WidgetContentItem","WidgetRenderer","WidgetRenderers","WidgetDialog","handlePinToTop","pinnedCount","LivePreview","appearance","PhoneSkeleton","BiolinkLayout","appearanceHeaderClassnames","FormatColorFillIcon","GradientIcon","BackgroundSelectorButton","buttonProps","ColorBackgroundTab","isInsideDialog","CustomColorButton","isCustomColor","ArrowForwardIcon","BaseGradientBg","GradientBackgrounds","GradientBackgroundTab","CustomGradientButton","gradient","isCustomGradient","CustomGradientDialog","dialogValue","setLocalState","buildGradientBackground","newState","ColorPickerButton","DirectionButtons","activeStyle","UploadIcon","angledFocus","circularFocus","farseeingEyeball","canyonFunnel","looneyLoops","hurricaneAperture","icyExplosion","protrudingSquares","alternatingTriangles","monsteraPatch","confettiDoodles","threadsAhead","launchDay","sprinkle","circuitBoard","nuclearFocalPoint","snow","BaseImageBg","ImageBackgrounds","BackgroundPositions","SimpleBackgroundPositionSelector","imageBgValue","selectedPosition","positionKeyFromValue","RadioGroup","Radio","SegmentedRadio","labelRef","sizeClassNames","getSizeClassNames","ActiveIndicator","labelsRef","SegmentedRadioGroup","repeat","AdvancedBackgroundPositionSelector","RepeatSelector","SizeSelector","PositionSelector","repeatValue","sizeValue","PositionSelectorButton","urlFromBackgroundImage","backgroundImage","match","ImageBackgroundTab","positionSelector","diskPrefix","CustomImageTrigger","cssPropsFromBgConfig","imageUrl","CustomImageDialog","TabMap","BackgroundSelector","tabColWidth","activeTab","setActiveTab","TypeSelector","onTabChange","TypeButton","BiolinkBackgroundSelector","AvailableVariants","AvailableRadius","ButtonStyleSelector","StyleSelector","ShadowSelector","selectedVariant","selectedRadius","variantLabel","radiusLabel","AvailableShadows","selectedShadow","shadow","shadowLabel","fontImage","FontSelectorFilters","setFilters","useFilter","collator","useCollator","substring","scan","sliceLen","slice","BrowserSafeFonts","useFontSelectorState","currentPage","setCurrentPage","setFilterState","contains","allFonts","filteredFonts","font","pages","fonts","loadFonts","FontSelectorPagination","total","FontSelector","FontList","FontListSkeleton","FontButton","displayName","useSaveBiolinkAppearance","saveAppearance","ColorInput","BiolinkAppearanceEditor","ColorSelector","BrandingSelector","btnConfig","bgConfig","currentValue","CommonFontSelector","branding","TabsMap","BiolinkEditorPage","BiolinkEditorHeader","BiolinkEditor","createElement","tabName","BiolinkContent","activeWidgetDialog","setActiveWidgetDialog","renderedContent","notifySvg","BiolinkItemList","AddNewLinkButton","contentItem","ContentItem","BiolinkSkeleton","ArticleEditorTitle","editingTitle","setEditingTitle","watchedTitle","titlePlaceholder","UndoIcon","RedoIcon","HistoryButtons","editor","CodeIcon","ModeButton","Divider","FormatBoldIcon","FormatItalicIcon","FormatUnderlinedIcon","FontStyleButtons","FormatListBulletedIcon","FormatListNumberedIcon","ListButtons","bulletActive","orderedActive","insertLinkIntoTextEditor","LinkButton","LinkDialog","previousUrl","previousText","Option","TwoMB","ImageButton","selectAndUploadFile","useActiveUpload","handleUpload","UploadInputType","Disk","FormatClearIcon","ClearFormatButton","HorizontalRuleIcon","PriorityHighIcon","NoteIcon","SmartDisplayIcon","InsertMenuTrigger","setDialog","EmbedDialog","previousSrc","Keyboard","modifier","separator","modKey","FormatMenuTrigger","FormatColorTextIcon","ColorButtons","textActive","backgroundActive","FormatAlignLeftIcon","FormatAlignCenterIcon","FormatAlignRightIcon","FormatAlignJustifyIcon","iconMap","AlignButtons","activeKey","ActiveIcon","FormatIndentDecreaseIcon","FormatIndentIncreaseIcon","IndentButtons","CodeBlockMenuTrigger","language","MenubarRowClassName","ArticleBodyEditorMenubar","hideInsertButton","imageDiskPrefix","extendedVisible","setExtendedVisible","UnfoldLessIcon","ExtendedButtons","ArticleEditorStickyHeader","allowSlugEditing","saveButton","backLink","slugPrefix","FormSlugEditor","manuallyChanged","formVal","fieldName","useCreateLinkPage","createPage","ArticleBodyEditor","CreateLinkPage","handleSave","editorContent","FormProvider","useLinkPage","fetchLinkPage","slugOrId","useUpdateLinkPage","EditLinkPage","PageMetaTags","PageStatus","SharedDashboardRoutes","Navigate","DashboardRoutes","DashboardRouteConfig","AuthRoute","NotFoundPage","useRoutes"],"sources":["../../../common/resources/client/ui/layout/dashboard-layout-context.ts","../../../common/resources/client/utils/hooks/use-block-body-overflow.ts","../../../common/resources/client/ui/layout/dashboard-layout.tsx","../../../common/resources/client/ui/layout/dashboard-content.tsx","../../../common/resources/client/ui/layout/dashboard-sidenav.tsx","../../../common/resources/client/icons/material/MenuOpen.tsx","../../../common/resources/client/ui/layout/dashboard-navbar.tsx","../../../common/resources/client/datatable/filters/backend-filter.ts","../../../common/resources/client/utils/date/start-of-day.ts","../../../common/resources/client/utils/date/end-of-day.ts","../../../common/resources/client/i18n/get-user-timezone.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/resources/client/icons/material/DateRange.tsx","../../../common/resources/client/ui/forms/input-field/input.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../common/resources/client/ui/forms/input-field/date/utils.ts","../../../common/resources/client/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../common/resources/client/i18n/use-current-date-time.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../common/resources/client/icons/material/ArrowRightAlt.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/page-step.ts","../../../common/resources/client/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/literal-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../common/resources/client/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../common/resources/client/icons/material/KeyboardArrowRight.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar.tsx","../../../common/resources/client/i18n/formatted-date-time-range.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.tsx","../../../common/resources/client/utils/hooks/is-tablet-media-query.ts","../../../common/resources/client/ui/forms/toggle/switch.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../common/resources/client/datatable/filters/timestamp-filters.ts","../../../common/resources/client/datatable/filters/backend-filters-url-key.ts","../../../common/resources/client/datatable/filters/utils/decode-backend-filters.ts","../../../common/resources/client/datatable/filters/utils/encode-backend-filters.ts","../../../common/resources/client/datatable/filters/backend-filter-url-params.ts","../../../common/resources/client/datatable/requests/paginated-resources.ts","../../../common/resources/client/datatable/page/data-table-context.ts","../../../common/resources/client/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/resources/client/ui/tables/navigate-grid.ts","../../../common/resources/client/ui/tables/table-context.ts","../../../common/resources/client/ui/tables/style/use-table-cell-style.ts","../../../common/resources/client/ui/tables/table-cell.tsx","../../../common/resources/client/ui/interactions/use-pointer-events.ts","../../../common/resources/client/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/resources/client/ui/tables/style/use-table-row-style.ts","../../../common/resources/client/ui/tables/table-row.tsx","../../../common/resources/client/ui/tables/checkbox-column-config.tsx","../../../common/resources/client/icons/material/ArrowDownward.tsx","../../../common/resources/client/ui/tables/header-cell.tsx","../../../common/resources/client/ui/tables/table-header-row.tsx","../../../common/resources/client/ui/tables/table.tsx","../../../common/resources/client/datatable/data-table-pagination-footer.tsx","../../../common/resources/client/icons/material/FilterAlt.tsx","../../../common/resources/client/ui/accordion/accordtion-animation.ts","../../../common/resources/client/ui/accordion/accordion.tsx","../../../common/resources/client/datatable/filters/panels/select-filter-panel.tsx","../../../common/resources/client/datatable/filters/panels/date-range-filter-panel.tsx","../../../common/resources/client/ui/images/avatar.tsx","../../../common/resources/client/users/queries/use-normalized-models.ts","../../../common/resources/client/users/queries/use-normalized-model.ts","../../../common/resources/client/ui/forms/normalized-model-field.tsx","../../../common/resources/client/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-operator-names.ts","../../../common/resources/client/datatable/filters/panels/input-filter-panel.tsx","../../../common/resources/client/datatable/filters/panels/boolean-filter-panel.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/chip-list.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../common/resources/client/ui/forms/input-field/chip-field/chip-field.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/form-chip-field.tsx","../../../common/resources/client/datatable/filters/panels/chip-field-filter-panel.tsx","../../../common/resources/client/datatable/filters/add-filter-dialog.tsx","../../../common/resources/client/datatable/filters/add-filter-button.tsx","../../../common/resources/client/datatable/data-table-header.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/resources/client/datatable/selected-state-datatable-header.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-skeleton.tsx","../../../common/resources/client/datatable/data-table.tsx","../../../common/resources/client/datatable/page/data-table-page.tsx","../../../common/resources/client/datatable/requests/delete-selected-rows.ts","../../../common/resources/client/datatable/page/delete-selected-items-action.tsx","../../../common/resources/client/datatable/page/data-table-emty-state-message.tsx","../../../common/resources/client/icons/material/Add.tsx","../../../common/resources/client/datatable/data-table-add-item-button.tsx","../../../common/resources/client/icons/material/FileDownload.tsx","../../../common/resources/client/datatable/requests/use-export-csv.ts","../../../common/resources/client/uploads/utils/download-file-from-url.ts","../../../common/resources/client/datatable/csv-export/csv-export-info-dialog.tsx","../../../common/resources/client/datatable/csv-export/data-table-export-csv-button.tsx","../../../common/resources/client/datatable/column-templates/name-with-avatar.tsx","../../../common/resources/client/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/date-picker.tsx","../../../common/resources/client/utils/array/chunk-array.ts","../../../common/resources/client/admin/appearance/sections/themes/color-icon.tsx","../../../node_modules/react-colorful/dist/index.mjs","../../../common/resources/client/ui/color-picker/color-swatch.tsx","../../../common/resources/client/ui/color-picker/color-presets.ts","../../../common/resources/client/ui/color-picker/color-picker.tsx","../../../common/resources/client/ui/color-picker/color-picker-dialog.tsx","../../../common/resources/client/icons/material/DragIndicator.tsx","../../../common/resources/client/icons/material/Delete.tsx","../../../common/resources/client/ui/interactions/dnd/drag-state.ts","../../../common/resources/client/ui/interactions/interactable-event.ts","../../../common/resources/client/ui/interactions/active-interaction.ts","../../../common/resources/client/ui/interactions/utils/dom-rect-to-obj.ts","../../../common/resources/client/ui/interactions/dnd/update-rects.ts","../../../common/resources/client/ui/interactions/dnd/use-draggable.ts","../../../common/resources/client/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../common/resources/client/utils/array/async-iterable-to-array.ts","../../../common/resources/client/ui/interactions/dnd/use-droppable.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-line-strategy.ts","../../../common/resources/client/utils/array/move-item-in-array.ts","../../../common/resources/client/utils/array/move-item-in-new-array.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-transform-strategy.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-move-node-strategy.ts","../../../common/resources/client/ui/interactions/dnd/sortable/use-sortable.ts","../../../common/resources/client/ace-editor/ace-dialog.tsx","../../../common/resources/client/admin/custom-pages/articles.svg","../../../common/resources/client/auth/user.ts","../../../common/resources/client/admin/custom-pages/custom-page-datatable-filters.tsx","../../../common/resources/client/icons/material/Tune.tsx","../../../common/resources/client/icons/material/MoreVert.tsx","../../../common/resources/client/ui/themes/utils/theme-value-to-hex.ts","../../../common/resources/client/ui/tabs/tabs-context.tsx","../../../common/resources/client/ui/tabs/tabs.tsx","../../../common/resources/client/ui/tabs/tab-line.tsx","../../../common/resources/client/ui/tabs/tab-list.tsx","../../../common/resources/client/ui/tabs/tab.tsx","../../../common/resources/client/ui/tabs/tab-panels.tsx","../../../common/resources/client/utils/hooks/sticky-sentinel.ts","../../../node_modules/slugify/slugify.js","../../../common/resources/client/utils/string/slugify-string.ts","../../../common/resources/client/workspace/requests/create-workspace.ts","../../../common/resources/client/workspace/new-workspace-dialog.tsx","../../../common/resources/client/workspace/requests/workspace-with-members.ts","../../../common/resources/client/icons/material/Group.tsx","../../../common/resources/client/workspace/requests/invite-members.ts","../../../common/resources/client/workspace/requests/resend-invite.ts","../../../common/resources/client/utils/string/is-email.ts","../../../common/resources/client/workspace/requests/change-role.ts","../../../common/resources/client/workspace/requests/remove-member.ts","../../../common/resources/client/workspace/leave-workspace-confirmation.tsx","../../../common/resources/client/workspace/workspace-members-dialog.tsx","../../../common/resources/client/icons/material/PersonAdd.tsx","../../../common/resources/client/workspace/requests/update-workspace.ts","../../../common/resources/client/workspace/rename-workspace-dialog.tsx","../../../common/resources/client/workspace/requests/delete-workspace.ts","../../../common/resources/client/billing/upgrade/policy-fail-message.tsx","../../../common/resources/client/workspace/workspace-selector.tsx","../../../resources/client/dashboard/layout/sidenav/use-link-summary.ts","../../../common/resources/client/ui/progress/meter.tsx","../../../common/resources/client/icons/material/Info.tsx","../../../resources/client/dashboard/layout/sidenav/resource-usage-list.tsx","../../../resources/client/dashboard/layout/sidenav/usage-details-trigger.tsx","../../../resources/client/dashboard/layout/sidenav/usage-meter.tsx","../../../resources/client/dashboard/layout/sidenav/upgrade-button.tsx","../../../resources/client/dashboard/layout/sidenav/belink-dashboard-sidenav.tsx","../../../resources/client/dashboard/layout/belink-dasbboard-layout.tsx","../../../common/resources/client/admin/analytics/report-date-selector.tsx","../../../common/resources/client/charts/chart-layout.tsx","../../../common/resources/client/charts/chart-loading-indicator.tsx","../../../common/resources/client/charts/base-chart.tsx","../../../common/resources/client/charts/data/format-report-data.ts","../../../common/resources/client/charts/chart-colors.tsx","../../../common/resources/client/charts/line-chart.tsx","../../../common/resources/client/charts/polar-area-chart.tsx","../../../resources/client/dashboard/reports/referrer-chart.tsx","../../../common/resources/client/admin/analytics/geo-chart/use-google-geo-chart.ts","../../../common/resources/client/icons/material/ArrowBack.tsx","../../../common/resources/client/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon.tsx","../../../common/resources/client/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger.tsx","../../../common/resources/client/i18n/formatted-country-name.tsx","../../../common/resources/client/admin/analytics/geo-chart/geo-chart.tsx","../../../common/resources/client/charts/bar-chart.tsx","../../../resources/client/dashboard/reports/clicks/use-clicks-report.ts","../../../resources/client/dashboard/reports/clicks/clicks-report-charts.tsx","../../../resources/client/dashboard/reports/clicks/clicks-report-page-layout.tsx","../../../resources/client/dashboard/all-clicks-report-page.tsx","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-filters.ts","../../../resources/client/dashboard/links/requests/use-link-form-value-lists.ts","../../../resources/client/dashboard/links/forms/link-type-field.tsx","../../../common/resources/client/billing/upgrade/upgrade.svg","../../../common/resources/client/billing/upgrade/upgrade-dialog.tsx","../../../common/resources/client/billing/upgrade/feature-locked-dialog.tsx","../../../common/resources/client/billing/upgrade/no-permission-button.tsx","../../../resources/client/dashboard/links/forms/link-form-section.tsx","../../../resources/client/dashboard/upgrade/use-link-feature-status.ts","../../../resources/client/dashboard/links/forms/link-restriction-fields.tsx","../../../common/resources/client/icons/material/SwapVert.tsx","../../../resources/client/dashboard/links/forms/link-retargeting-fields.tsx","../../../common/resources/client/icons/material/Public.tsx","../../../resources/client/dashboard/links/forms/link-seo-fields.tsx","../../../common/resources/client/icons/material/AccountTree.tsx","../../../resources/client/dashboard/links/forms/link-utm-fields.tsx","../../../common/resources/client/custom-domains/use-default-custom-domain-host.ts","../../../resources/client/dashboard/links/forms/link-domain-select.tsx","../../../resources/client/dashboard/links/forms/link-settings-form.tsx","../../../common/resources/client/ui/slug-editor.tsx","../../../resources/client/dashboard/links/forms/alias-field.tsx","../../../resources/client/dashboard/links/forms/crupdate-link-form.tsx","../../../resources/client/dashboard/links/utils/build-linkeable-default-form-values.ts","../../../resources/client/dashboard/links/utils/build-linkeable-payload.ts","../../../resources/client/dashboard/links/requests/build-link-payload.ts","../../../resources/client/dashboard/links/requests/use-create-link.ts","../../../resources/client/dashboard/links/dialogs/create-link-dialog.tsx","../../../resources/client/dashboard/links/requests/use-update-link.ts","../../../resources/client/dashboard/links/dialogs/update-link-dialog.tsx","../../../resources/client/dashboard/links/link-image.tsx","../../../common/resources/client/billing/upgrade/over-quota-dialog.tsx","../../../resources/client/dashboard/upgrade/permission-aware-button.tsx","../../../common/resources/client/icons/material/BarChart.tsx","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-columns.tsx","../../../common/resources/client/icons/material/AddLink.tsx","../../../common/resources/client/datatable/csv-export/export-csv-icon.tsx","../../../resources/client/dashboard/links/requests/use-create-multiple-links.ts","../../../resources/client/dashboard/links/dialogs/create-multiple-links-dialog.tsx","../../../resources/client/dashboard/links/links-datatable-page/links-datatable-page.tsx","../../../common/resources/client/icons/material/MoveDown.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/requests/use-move-links-to-group.ts","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/move-links-to-group-dialog.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/link-group-links-datatable-page.tsx","../../../common/resources/client/icons/material/ListAlt.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/crupdate-link-group-form.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/requests/use-update-link-group.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/update-link-group-dialog.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-columns.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-filters.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/requests/use-create-link-group.ts","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/crupdate/create-link-group-dialog.tsx","../../../resources/client/dashboard/link-groups/link-groups-datatable-page/link-groups-datatable-page.tsx","../../../resources/client/dashboard/link-groups/link-group-links-datatable-page/requests/use-link-group.ts","../../../resources/client/dashboard/link-groups/link-group-clicks-report-page.tsx","../../../resources/client/dashboard/layout/sidenav/use-link.ts","../../../resources/client/dashboard/links/link-clicks-report-page.tsx","../../../common/resources/client/custom-domains/datatable/world.svg","../../../common/resources/client/custom-domains/datatable/domains-empty-state-message.tsx","../../../common/resources/client/datatable/column-templates/boolean-indicator.tsx","../../../common/resources/client/custom-domains/datatable/requests/use-delete-domain.ts","../../../common/resources/client/custom-domains/datatable/delete-domain-button.tsx","../../../common/resources/client/custom-domains/datatable/domains-datatable-columns.tsx","../../../common/resources/client/custom-domains/datatable/domains-datatable-filters.ts","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/is-subdomain.ts","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator.tsx","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/info-step.tsx","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/host-step.tsx","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/connect-domain-step.tsx","../../../common/resources/client/custom-domains/datatable/requests/use-validate-domain-dns.ts","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/validation-failed-step.tsx","../../../common/resources/client/custom-domains/datatable/requests/use-authorize-domain-connect.ts","../../../common/resources/client/custom-domains/datatable/requests/use-connect-domain.ts","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper.ts","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/finalize-step.tsx","../../../common/resources/client/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog.tsx","../../../resources/client/dashboard/custom-domains/domains-datatable-page.tsx","../../../resources/client/dashboard/tracking-pixels/supported-tracking-pixels.ts","../../../common/resources/client/icons/material/HelpOutline.tsx","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form.tsx","../../../resources/client/dashboard/tracking-pixels/requests/use-update-pixel.ts","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/update-pixel-dialog.tsx","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-columns.tsx","../../../resources/client/dashboard/tracking-pixels/location-tracking.svg","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-filters.ts","../../../resources/client/dashboard/tracking-pixels/requests/use-create-pixel.ts","../../../resources/client/dashboard/tracking-pixels/crupdate-dialog/create-pixel-dialog.tsx","../../../resources/client/dashboard/tracking-pixels/tracking-pixels-datatable-page.tsx","../../../resources/client/dashboard/link-pages/requests/use-update-link-page-options.ts","../../../resources/client/dashboard/link-pages/link-page-options-trigger.tsx","../../../resources/client/dashboard/link-pages/link-pages-datatable-columns.tsx","../../../resources/client/dashboard/link-pages/link-pages-datatable-page.tsx","../../../resources/client/dashboard/link-overlays/preferences-popup.svg","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-columns.tsx","../../../resources/client/dashboard/link-overlays/crupdate/link-overlay-constants.ts","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-filters.ts","../../../resources/client/dashboard/link-overlays/link-overlays-datatable-page.tsx","../../../resources/client/dashboard/link-overlays/requests/use-create-link-overlay.ts","../../../resources/client/dashboard/link-overlays/crupdate/overlay-website-background.tsx","../../../resources/client/dashboard/link-overlays/crupdate/crupdate-link-overlay-form.tsx","../../../resources/client/dashboard/link-overlays/crupdate/create-link-overlay-page.tsx","../../../resources/client/dashboard/link-overlays/requests/use-link-overlay.ts","../../../resources/client/dashboard/link-overlays/requests/use-update-link-overlay.ts","../../../resources/client/dashboard/link-overlays/crupdate/update-link-overlay-page.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/marketing.svg","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-columns.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-filters.ts","../../../resources/client/dashboard/biolink/biolinks-datatable-page/requests/use-create-biolink.ts","../../../resources/client/dashboard/biolink/biolinks-datatable-page/crupdate/create-biolink-dialog.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-page.tsx","../../../resources/client/dashboard/biolink/biolinks-datatable-page/requests/use-biolink.ts","../../../resources/client/dashboard/biolink/biolink-clicks-report-page.tsx","../../../common/resources/client/icons/material/Widgets.tsx","../../../common/resources/client/icons/material/Animation.tsx","../../../common/resources/client/icons/material/Shortcut.tsx","../../../common/resources/client/icons/material/MoreTime.tsx","../../../common/resources/client/background-selector/color-backgrounds.ts","../../../resources/client/dashboard/biolink/biolink-editor/biolink-editor-store.ts","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-editor-biolink.ts","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-schedule-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/leap-link-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-thumbnail-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-list.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-detach-biolink-content-item.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/detach-content-item-button.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/biolink-content-item-layout.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/link-content-item/link-content-item.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-update-biolink.ts","../../../resources/client/dashboard/biolink/biolink-editor/biolink-settings-form.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-crupdate-biolink-widget.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/image-widget/image-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/image.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/text.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/socials.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/youtube.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/soundcloud.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/vimeo.jpeg","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/spotify.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/twitch.svg","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/widget-images/tiktok.png","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/youtube-widget/youtube-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/text-widget/text-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/twitch-widget/twitch-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/soundcloud-widget/soundcloud-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/vimeo-widget/vimeo-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/tiktok-widget/tiktok-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-list.ts","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/select-widget-dialog.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-selector/new-widget-dialog-container.tsx","../../../common/resources/client/icons/material/ArrowUpward.tsx","../../../resources/client/dashboard/biolink/biolink-editor/content/widgets/widget-content-item.tsx","../../../resources/client/dashboard/biolink/biolink-editor/live-preview.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/header-classnames.ts","../../../common/resources/client/icons/material/FormatColorFill.tsx","../../../common/resources/client/icons/material/Gradient.tsx","../../../common/resources/client/background-selector/background-selector-button.tsx","../../../common/resources/client/background-selector/color-background-tab.tsx","../../../common/resources/client/icons/material/ArrowForward.tsx","../../../common/resources/client/background-selector/gradient-backgrounds.ts","../../../common/resources/client/background-selector/gradient-background-tab.tsx","../../../common/resources/client/icons/material/Upload.tsx","../../../common/resources/client/background-selector/svg-bgs/Angled-Focus.svg","../../../common/resources/client/background-selector/svg-bgs/Circular-Focus.svg","../../../common/resources/client/background-selector/svg-bgs/Farseeing-Eyeball.svg","../../../common/resources/client/background-selector/svg-bgs/Canyon-Funnel.svg","../../../common/resources/client/background-selector/svg-bgs/Looney-Loops.svg","../../../common/resources/client/background-selector/svg-bgs/Hurricane-Aperture.svg","../../../common/resources/client/background-selector/svg-bgs/Icy-Explosion.svg","../../../common/resources/client/background-selector/svg-bgs/Protruding-Squares.svg","../../../common/resources/client/background-selector/svg-bgs/Alternating-Triangles.svg","../../../common/resources/client/background-selector/svg-bgs/Monstera-Patch.svg","../../../common/resources/client/background-selector/svg-bgs/Confetti-Doodles.svg","../../../common/resources/client/background-selector/svg-bgs/Threads-Ahead.svg","../../../common/resources/client/background-selector/svg-bgs/Launch-Day.svg","../../../common/resources/client/background-selector/svg-bgs/Sprinkle.svg","../../../common/resources/client/background-selector/svg-bgs/Circuit-Board.svg","../../../common/resources/client/background-selector/svg-bgs/nuclear-focalpoint.svg","../../../common/resources/client/background-selector/svg-bgs/Snow.svg","../../../common/resources/client/background-selector/image-backgrounds.ts","../../../common/resources/client/background-selector/image-background-tab/simple-background-position-selector.tsx","../../../common/resources/client/ui/forms/segmented-radio-group/segmented-radio.tsx","../../../common/resources/client/ui/forms/segmented-radio-group/active-indicator.tsx","../../../common/resources/client/ui/forms/segmented-radio-group/segmented-radio-group.tsx","../../../common/resources/client/background-selector/image-background-tab/advanced-background-position-selector.tsx","../../../common/resources/client/background-selector/bg-config-from-css-props.ts","../../../common/resources/client/background-selector/image-background-tab/image-background-tab.tsx","../../../common/resources/client/background-selector/background-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/biolink-background-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/button-style-selector.tsx","../../../common/resources/client/ui/font-selector/font.svg","../../../common/resources/client/ui/font-selector/font-selector-filters.tsx","../../../common/resources/client/i18n/use-filter.ts","../../../common/resources/client/ui/font-picker/browser-safe-fonts.ts","../../../common/resources/client/ui/font-selector/font-selector-state.ts","../../../common/resources/client/ui/font-selector/font-selector-pagination.tsx","../../../common/resources/client/ui/font-selector/font-selector.tsx","../../../resources/client/dashboard/biolink/biolink-editor/requests/use-save-biolink-appearance.ts","../../../resources/client/dashboard/biolink/biolink-editor/appearance/color-input.tsx","../../../resources/client/dashboard/biolink/biolink-editor/appearance/biolink-appearance-editor.tsx","../../../resources/client/dashboard/biolink/biolink-editor/biolink-editor-page.tsx","../../../common/resources/client/article-editor/article-editor-title.tsx","../../../common/resources/client/icons/material/Undo.tsx","../../../common/resources/client/icons/material/Redo.tsx","../../../common/resources/client/text-editor/menubar/history-buttons.tsx","../../../common/resources/client/icons/material/Code.tsx","../../../common/resources/client/text-editor/menubar/mode-button.tsx","../../../common/resources/client/text-editor/menubar/divider.tsx","../../../common/resources/client/icons/material/FormatBold.tsx","../../../common/resources/client/icons/material/FormatItalic.tsx","../../../common/resources/client/icons/material/FormatUnderlined.tsx","../../../common/resources/client/text-editor/menubar/font-style-buttons.tsx","../../../common/resources/client/icons/material/FormatListBulleted.tsx","../../../common/resources/client/icons/material/FormatListNumbered.tsx","../../../common/resources/client/text-editor/menubar/list-buttons.tsx","../../../common/resources/client/text-editor/insert-link-into-text-editor.ts","../../../common/resources/client/text-editor/menubar/link-button.tsx","../../../common/resources/client/text-editor/menubar/image-button.tsx","../../../common/resources/client/icons/material/FormatClear.tsx","../../../common/resources/client/text-editor/menubar/clear-format-button.tsx","../../../common/resources/client/icons/material/HorizontalRule.tsx","../../../common/resources/client/icons/material/PriorityHigh.tsx","../../../common/resources/client/icons/material/Note.tsx","../../../common/resources/client/icons/material/SmartDisplay.tsx","../../../common/resources/client/text-editor/menubar/insert-menu-trigger.tsx","../../../common/resources/client/ui/keyboard/keyboard.tsx","../../../common/resources/client/text-editor/menubar/format-menu-trigger.tsx","../../../common/resources/client/icons/material/FormatColorText.tsx","../../../common/resources/client/text-editor/menubar/color-buttons.tsx","../../../common/resources/client/icons/material/FormatAlignLeft.tsx","../../../common/resources/client/icons/material/FormatAlignCenter.tsx","../../../common/resources/client/icons/material/FormatAlignRight.tsx","../../../common/resources/client/icons/material/FormatAlignJustify.tsx","../../../common/resources/client/text-editor/menubar/align-buttons.tsx","../../../common/resources/client/icons/material/FormatIndentDecrease.tsx","../../../common/resources/client/icons/material/FormatIndentIncrease.tsx","../../../common/resources/client/text-editor/menubar/indent-buttons.tsx","../../../common/resources/client/text-editor/menubar/code-block-menu-trigger.tsx","../../../common/resources/client/article-editor/article-body-editor-menubar.tsx","../../../common/resources/client/article-editor/article-editor-sticky-header.tsx","../../../resources/client/dashboard/link-pages/requests/use-create-link-page.ts","../../../resources/client/dashboard/link-pages/create-link-page.tsx","../../../resources/client/dashboard/link-pages/requests/use-link-page.ts","../../../resources/client/dashboard/link-pages/requests/use-update-link-page.ts","../../../resources/client/dashboard/link-pages/edit-link-page.tsx","../../../resources/client/dashboard/dashboard-routes.tsx"],"sourcesContent":["import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('no-page-overflow');\n    } else {\n      document.documentElement.classList.add('no-page-overflow');\n    }\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, [disable]);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {Underlay} from '../overlays/underlay';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '../../utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\nimport clsx from 'clsx';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  initialRightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n  height?: string;\n  gridClassName?: string;\n  blockBodyOverflow?: boolean;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  initialRightSidenavStatus,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  height = 'h-screen',\n  className,\n  gridClassName = 'dashboard-grid',\n  blockBodyOverflow = true,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow(!blockBodyOverflow);\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange,\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    if (isMobile) {\n      return 'closed';\n    }\n    if (initialRightSidenavStatus != null) {\n      return initialRightSidenavStatus;\n    }\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open',\n    );\n    if (userSelected != null) {\n      return userSelected;\n    }\n    return initialRightSidenavStatus || 'closed';\n  }, [isMobile, name, initialRightSidenavStatus]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange,\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name],\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className={clsx('relative isolate', gridClassName, className, height)}\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n  isScrollable?: boolean;\n}\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      isScrollable && 'overflow-y-auto stable-scrollbar',\n      'dashboard-grid-content'\n    ),\n  });\n}\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface DashboardSidenavChildrenProps {\n  className?: string;\n  isCompactMode?: boolean;\n}\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement<DashboardSidenavChildrenProps>;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg' | string;\n  mode?: 'overlay';\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\n  overlayPosition?: 'absolute' | 'fixed';\n  display?: 'flex' | 'block';\n  overflow?: string;\n  forceClosed?: boolean;\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  size = 'md',\n  mode,\n  overlayPosition = 'fixed',\n  display = 'flex',\n  overflow = 'overflow-hidden',\n  forceClosed = false,\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n  const isOverlayMode = isMobileMode || mode === 'overlay';\n\n  const variants = {\n    open: {display, width: null as any},\n    compact: {\n      display,\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const sizeClassName = getSize(status === 'compact' ? 'compact' : size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={forceClosed ? 'closed' : status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'will-change-[width]',\n        overflow,\n        sizeClassName,\n        isOverlayMode && `${overlayPosition} bottom-0 top-0 z-20 shadow-2xl`,\n        isOverlayMode && position === 'left' && 'left-0',\n        isOverlayMode && position === 'right' && 'right-0',\n      )}\n    >\n      {cloneElement<DashboardSidenavChildrenProps>(children, {\n        className: clsx(\n          children.props.className,\n          'w-full h-full',\n          status === 'compact' && 'compact-scrollbar',\n        ),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact'): string {\n  switch (size) {\n    case 'compact':\n      return 'w-80';\n    case 'sm':\n      return 'w-224';\n    case 'md':\n      return 'w-240';\n    case 'lg':\n      return 'w-288';\n    default:\n      return size || '';\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '../buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@common/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {ComponentType} from 'react';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\nimport {ChipValue} from '@common/ui/forms/input-field/chip-field/chip-field';\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {DateValue} from '@internationalized/date';\nimport {FilterListControlProps} from '@common/datatable/filters/filter-list/filter-list-control';\n\nexport interface FilterSelectControl {\n  type: FilterControlType.Select;\n  options: {label: MessageDescriptor; key: string | number; value: any}[];\n  defaultValue?: string | number | boolean;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  showSearchField?: boolean;\n}\n\nexport interface FilterNumberInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'number';\n  minValue?: number;\n  maxValue?: number;\n  defaultValue: number;\n}\n\nexport interface FilterTextInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'string';\n  minLength?: number;\n  maxLength?: number;\n  defaultValue: string;\n}\n\nexport interface FilterSelectModelControl {\n  type: FilterControlType.SelectModel;\n  model: string;\n  defaultValue?: NormalizedModel;\n}\n\nexport interface FilterChipFieldControl {\n  type: FilterControlType.ChipField;\n  options: FilterSelectControl['options'];\n  placeholder?: MessageDescriptor;\n  defaultValue: ChipValue[];\n}\n\nexport interface FilterBooleanToggleControl {\n  type: FilterControlType.BooleanToggle;\n  // value can be something other than boolean, toggling will either send that value or nothing\n  defaultValue: string | number | boolean | null;\n}\n\nexport interface DatePickerFilterControl {\n  type: FilterControlType.DateRangePicker;\n  defaultValue: AbsoluteDateRange;\n  min?: DateValue;\n  max?: DateValue;\n}\n\nexport interface CustomFilterControl {\n  type: FilterControlType.Custom;\n  panel: ComponentType<{filter: BackendFilter<CustomFilterControl>}>;\n  listItem: ComponentType<FilterListControlProps<number, CustomFilterControl>>;\n  defaultValue?: any;\n}\n\nexport type FilterControl =\n  | FilterSelectControl\n  | FilterNumberInputControl\n  | FilterTextInputControl\n  | FilterSelectModelControl\n  | FilterChipFieldControl\n  | DatePickerFilterControl\n  | FilterBooleanToggleControl\n  | CustomFilterControl;\n\nexport interface BackendFilter<T = FilterControl> {\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  control: T;\n  defaultOperator: FilterOperator;\n  operators?: FilterOperator[];\n  extraFilters?: {key: string; operator: FilterOperator; value: any}[];\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DateRangePicker = 'dateRangePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n  ChipField = 'chipField',\n  Custom = 'custom',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  hasAll = 'hasAll',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_PRIMITIVE_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n];\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {getBootstrapData} from '../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getLocalTimeZone} from '@internationalized/date';\n\nexport function getUserTimezone(): string {\n  const defaultTimezone = getBootstrapData()?.settings.dates.default_timezone;\n  const preferredTimezone =\n    getBootstrapData()?.user?.timezone || defaultTimezone || 'auto';\n\n  if (!preferredTimezone || preferredTimezone === 'auto') {\n    return getLocalTimeZone();\n  }\n  return preferredTimezone;\n}\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '@common/i18n/message';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {\n  endOfMonth,\n  endOfWeek,\n  endOfYear,\n  now,\n  startOfMonth,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\nimport {getUserTimezone} from '@common/i18n/get-user-timezone';\n\nconst Now = startOfDay(now(getUserTimezone()));\nconst locale = getBootstrapData()?.i18n?.language || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => {\n      const start = startOfWeek(Now, locale).subtract({days: 7});\n      return {\n        preset: 3,\n        start,\n        end: start.add({days: 6}),\n      };\n    },\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This month'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfMonth(Now),\n      end: endOfMonth(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 11,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 11,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n  showCalendarFooter?: boolean;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  fieldClassNames.wrapper = clsx(\n    fieldClassNames.wrapper,\n    other.disabled && 'pointer-events-none',\n  );\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (!objRef.current.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager?.focusFirst();\n          },\n        },\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {useState} from 'react';\nimport {DateValue, toZoned, ZonedDateTime} from '@internationalized/date';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n) {\n  const timezone = useUserTimezone();\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toZoned(props.min, timezone) : undefined;\n  const max = props.max ? toZoned(props.max, timezone) : undefined;\n\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {useMemo} from 'react';\nimport {now} from '@internationalized/date';\nimport {useUserTimezone} from './use-user-timezone';\n\nexport function useCurrentDateTime() {\n  const timezone = useUserTimezone();\n  return useMemo(() => {\n    return now(timezone);\n  }, [timezone]);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    value => {\n      setIsPlaceholder({start: false, end: false});\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min);\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax);\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin);\n\n      if (max) {\n        end = minDate(end, max);\n      }\n\n      return {start: toZoned(start, timezone), end: toZoned(end, timezone)};\n    },\n    [min, max, timezone],\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max],\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder],\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting],\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange],\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange],\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone}),\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: anchorDate!,\n              end: date,\n              timezone,\n            });\n            // cast to start and end of day after making range, because \"makeRange\"\n            // will flip start and end dates, if they are out of order\n            finalRange.start = startOfDay(finalRange.start);\n            finalRange.end = endOfDay(finalRange.end);\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue,\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toZoned(props.start, props.timezone);\n  const end = toZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime,\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '@common/i18n/selected-locale';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone: timezone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode],\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions()),\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions()),\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager?.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager?.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager?.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager?.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions(),\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\n        isDisabled && 'text-disabled pointer-events-none',\n        !sameMonth && 'invisible pointer-events-none'\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary text-on-primary font-semibold',\n          dayIsToday && !isActive && 'bg-chip'\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute w-full h-full inset-0 bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full'\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\nimport {IconButton} from '../../../../buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"flex mb-6\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timezone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count}))\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count}))\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"text-sm font-semibold select-none\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timezone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\n            key={index}\n          >\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <Fragment>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </Fragment>\n  );\n}\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {Fragment, memo} from 'react';\nimport {useDateFormatter} from './use-date-formatter';\nimport {useSettings} from '../core/settings/use-settings';\nimport {shallowEqual} from '../utils/shallow-equal';\nimport {useUserTimezone} from './use-user-timezone';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n}\nexport const FormattedDateTimeRange = memo(\n  ({start, end, options, preset}: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const timezone = useUserTimezone();\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format\n        ]\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone)\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import {List, ListItem} from '@common/ui/list/list';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {Trans} from '@common/i18n/trans';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\n\ninterface DateRangePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\n\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n  iconRight?: ReactNode;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      iconRight,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex select-none items-center\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark',\n              invalid && 'checked:border-danger checked:bg-danger',\n              'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary',\n              'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'cursor-not-allowed opacity-80',\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled',\n              )}\n            >\n              {children}\n            </span>\n          )}\n          {iconRight}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","import {message} from '@common/i18n/message';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport interface DateRangeComparePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: (range: DateRangeValue) => DateRangeValue;\n}\n\nexport const DateRangeComparePresets: DateRangeComparePreset[] = [\n  {\n    key: 0,\n    label: message('Preceding period'),\n    getRangeValue: (range: DateRangeValue) => {\n      const startDate = range.start;\n      const endDate = range.end;\n\n      const diffInMilliseconds =\n        endDate.toDate().getTime() - startDate.toDate().getTime();\n      const diffInMinutes = diffInMilliseconds / (1000 * 60);\n      const newStart = startDate.subtract({minutes: diffInMinutes});\n      return {\n        preset: 0,\n        start: newStart,\n        end: startDate,\n      };\n    },\n  },\n  {\n    key: 1,\n    label: message('Same period last year'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({years: 1}),\n        end: range.end.subtract({years: 1}),\n        preset: 1,\n      };\n    },\n  },\n  {\n    key: 2,\n    label: message('Custom'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({weeks: 1}),\n        end: range.end.subtract({weeks: 1}),\n        preset: 2,\n      };\n    },\n  },\n];\n","import {List, ListItem} from '@common/ui/list/list';\nimport {Trans} from '@common/i18n/trans';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangeComparePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\n\ninterface DateRangePresetList {\n  originalRangeValue: DateRangeValue;\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DateRangeComparePresetList({\n  originalRangeValue,\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangeComparePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue(originalRangeValue);\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import React, {Fragment, ReactNode, useRef, useState} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '@common/icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-range-preset-list';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {DateRangeComparePresetList} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  compareVisibleDefault?: boolean;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  compareState,\n  showInlineDatePickerField = false,\n  compareVisibleDefault = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          const value = state.selectedValue;\n          if (compareState && compareVisible) {\n            value.compareStart = compareState.selectedValue.start;\n            value.compareEnd = compareState.selectedValue.end;\n          }\n          close(value);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <div className=\"min-w-192 py-14\">\n            <DatePresetList\n              selectedValue={state.selectedValue}\n              onPresetSelected={preset => {\n                state.setSelectedValue(preset);\n                if (state.closeDialogOnSelection) {\n                  close(preset);\n                }\n              }}\n            />\n            {!!compareState && (\n              <Fragment>\n                <Switch\n                  className=\"mx-20 mb-10 mt-14\"\n                  checked={compareVisible}\n                  onChange={e => setCompareVisible(e.target.checked)}\n                >\n                  <Trans message=\"Compare\" />\n                </Switch>\n                {compareVisible && (\n                  <DateRangeComparePresetList\n                    originalRangeValue={state.selectedValue}\n                    selectedValue={compareState.selectedValue}\n                    onPresetSelected={preset => {\n                      compareState.setSelectedValue(preset);\n                    }}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            compareState={compareState}\n            showInlineDatePickerField={showInlineDatePickerField}\n            compareVisible={compareVisible}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n  compareVisible: boolean;\n}\nfunction Calendars({\n  state,\n  compareState,\n  showInlineDatePickerField,\n  compareVisible,\n}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pb-20 pt-10\"\n    >\n      {showInlineDatePickerField && (\n        <div>\n          <InlineDatePickerField state={state} />\n          {!!compareState && compareVisible && (\n            <InlineDatePickerField\n              state={compareState}\n              label={<Trans message=\"Compare\" />}\n            />\n          )}\n        </div>\n      )}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n  label?: ReactNode;\n}\nfunction InlineDatePickerField({state, label}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\" label={label}>\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '../../../../../icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {}\nexport function DateRangePicker(props: DateRangePickerProps) {\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <DateRangeDialog state={state} />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...fieldProps}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({start: newValue, end: value.end});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({start: value.start, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\nexport interface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\n  const {start, end, preset} = props || {};\n  const dateRange: Partial<DateRangeValue> = {preset};\n  try {\n    if (start) {\n      dateRange.start =\n        typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n    }\n    if (end) {\n      dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n    }\n  } catch (e) {\n    // ignore\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}): AbsoluteDateRange {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {\n  BackendFilter,\n  DatePickerFilterControl,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '../../i18n/message';\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {PartialWithRequired} from '@common/utils/ts/partial-with-required';\n\nexport function timestampFilter(\n  options: PartialWithRequired<\n    BackendFilter<DatePickerFilterControl>,\n    'key' | 'label'\n  >\n): BackendFilter<DatePickerFilterControl> {\n  return {\n    ...options,\n    defaultOperator: FilterOperator.between,\n    control: {\n      type: FilterControlType.DateRangePicker,\n      defaultValue:\n        options.control?.defaultValue ||\n        dateRangeToAbsoluteRange(\n          (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue()\n        ),\n    },\n  };\n}\n\nexport function createdAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'created_at',\n    label: message('Date created'),\n    ...options,\n  });\n}\n\nexport function updatedAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'updated_at',\n    label: message('Last updated'),\n    ...options,\n  });\n}\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey != null) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: string | number;\n  value: BackendFilter['control']['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: string | number;\n  isInactive?: boolean;\n  extraFilters?: {key: string; operator: string; value: any}[];\n}\n\nexport function encodeBackendFilters(\n  filterValues: FilterListValue[] | null,\n  filters?: BackendFilter[],\n): string {\n  if (!filterValues) return '';\n\n  // prepare values for backend\n  filterValues = !filters\n    ? filterValues\n    : filterValues\n        .filter(item => item.value !== '')\n        .map(item => transformValue(item, filters));\n\n  // remove all placeholder filters\n  filterValues = filterValues.filter(fm => !fm.isInactive);\n\n  if (!filterValues.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValues)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[],\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, because we can't use objects as\n  // value. Map over select options and replace key with actual value\n  if (filterConfig?.control.type === 'select') {\n    const option = (filterConfig.control.options || []).find(\n      o => o.key === filterValue.value,\n    );\n    // if it's language or country select, there might not be an option\n    if (option) {\n      return {...filterValue, value: option.value, valueKey: option.key};\n    }\n  }\n\n  if (filterConfig?.extraFilters?.length) {\n    filterValue['extraFilters'] = filterConfig.extraFilters;\n  }\n\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[]\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.control.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key)\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters]\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams]\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import {\n  keepPreviousData,\n  useQuery,\n  UseQueryOptions,\n} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '../../http/backend-response/pagination-response';\nimport {apiClient} from '../../http/query-client';\n\nexport interface GetDatatableDataParams {\n  orderBy?: string;\n  orderDir?: 'asc' | 'desc';\n  filters?: string | null;\n  query?: string;\n  with?: string;\n  perPage?: number | string | null;\n  page?: number | string;\n  [key: string]: string | number | boolean | undefined | null;\n}\n\nexport const DatatableDataQueryKey = (\n  endpoint: string,\n  params?: GetDatatableDataParams | Record<string, string | number | boolean>,\n) => {\n  // split endpoint by slash, so we can clear cache from the root later,\n  // for example, 'link-group' will clear 'link-group/1/links' endpoint\n  const key: (string | GetDatatableDataParams)[] = endpoint.split('/');\n  if (params) {\n    key.push(params);\n  }\n  return key;\n};\n\nexport function useDatatableData<T = object>(\n  endpoint: string,\n  params: GetDatatableDataParams,\n  options?: Omit<\n    UseQueryOptions<\n      PaginatedBackendResponse<T>,\n      unknown,\n      PaginatedBackendResponse<T>,\n      any[]\n    >,\n    'queryKey' | 'queryFn'\n  >,\n  onLoad?: (data: PaginatedBackendResponse<T>) => void,\n) {\n  return useQuery({\n    queryKey: DatatableDataQueryKey(endpoint, params),\n    queryFn: ({signal}) => paginate<T>(endpoint, params, onLoad, signal),\n    placeholderData: keepPreviousData,\n    ...options,\n  });\n}\n\nasync function paginate<T>(\n  endpoint: string,\n  params: GetDatatableDataParams,\n  onLoad?: (data: PaginatedBackendResponse<T>) => void,\n  signal?: AbortSignal,\n): Promise<PaginatedBackendResponse<T>> {\n  if (params.query) {\n    await new Promise(resolve => setTimeout(resolve, 300));\n  }\n  const response = await apiClient\n    .get(endpoint, {params, signal: params.query ? signal : undefined})\n    .then(response => response.data);\n  onLoad?.(response);\n  return response;\n}\n","import React, {useContext} from 'react';\nimport {GetDatatableDataParams} from '../requests/paginated-resources';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '../../http/backend-response/pagination-response';\n\nexport interface DataTableContextValue<T = unknown, A = unknown> {\n  selectedRows: (string | number)[];\n  setSelectedRows: (keys: (string | number)[]) => void;\n  endpoint: string;\n  params: GetDatatableDataParams;\n  setParams: (value: GetDatatableDataParams) => void;\n  query: UseQueryResult<PaginatedBackendResponse<T> & A, unknown>;\n}\n\nexport const DataTableContext = React.createContext<DataTableContextValue>(\n  null!,\n);\n\nexport function useDataTable<T = unknown, A = unknown>() {\n  return useContext(DataTableContext) as DataTableContextValue<T, A>;\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  isCollapsedMode: boolean;\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  enableSorting?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  meta?: any;\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T | null, merge?: boolean) => void;\n  hideBorder: boolean;\n  hideHeaderRow: boolean;\n  collapseOnMobile: boolean;\n  onAction: TableProps<T>['onAction'];\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\n  cellHeight: string | undefined;\n  headerCellHeight: string | undefined;\n}\nexport const TableContext = createContext<TableContextValue>(null!);\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\ninterface Props {\n  index: number;\n  isHeader: boolean;\n}\nexport function useTableCellStyle({index, isHeader}: Props) {\n  const {\n    columns,\n    cellHeight = 'h-46',\n    headerCellHeight = 'h-46',\n  } = useContext(TableContext);\n  const column = columns[index];\n\n  const userPadding = column?.padding;\n\n  let justify = 'justify-start';\n  if (column?.align === 'center') {\n    justify = 'justify-center';\n  } else if (column?.align === 'end') {\n    justify = 'justify-end';\n  }\n\n  return clsx(\n    'flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2',\n    isHeader ? headerCellHeight : cellHeight,\n    column?.width ?? 'flex-1',\n    column?.maxWidth,\n    column?.minWidth,\n    justify,\n    userPadding,\n    column?.className\n  );\n}\n","import {useContext, useMemo} from 'react';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\nimport {RowContext} from '@common/datatable/column-config';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface TableCellProps {\n  rowIsHovered: boolean;\n  rowIndex: number;\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({\n  rowIndex,\n  rowIsHovered,\n  index,\n  item,\n  id,\n}: TableCellProps) {\n  const {columns} = useContext(TableContext);\n  const column = columns[index];\n\n  const rowContext: RowContext = useMemo(() => {\n    return {\n      index: rowIndex,\n      isHovered: rowIsHovered,\n      isPlaceholder: item.isPlaceholder,\n    };\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: false,\n  });\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"gridcell\"\n      aria-colindex={index + 1}\n      id={id}\n      className={style}\n    >\n      <div className=\"overflow-x-hidden overflow-ellipsis min-w-0 w-full\">\n        {column.body(item, rowContext)}\n      </div>\n    </div>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  index: number;\n  isSelected: boolean;\n  isHeader?: boolean;\n}\nexport function useTableRowStyle({index, isSelected, isHeader}: Props) {\n  const isDarkMode = useIsDarkMode();\n  const isMobile = useIsMobileMediaQuery();\n  const {hideBorder, enableSelection, collapseOnMobile, onAction} =\n    useContext(TableContext);\n  const isFirst = index === 0;\n  return clsx(\n    'flex gap-x-16 break-inside-avoid outline-none border border-transparent',\n    onAction && 'cursor-pointer',\n    isMobile && collapseOnMobile && hideBorder\n      ? 'mb-8 pl-8 pr-0 rounded'\n      : 'px-16',\n    !hideBorder && 'border-b-divider',\n    !hideBorder && isFirst && 'border-t-divider',\n    isSelected &&\n      !isDarkMode &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    isSelected &&\n      isDarkMode &&\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\n    !isSelected &&\n      !isHeader &&\n      (enableSelection || onAction) &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport {TableContext} from './table-context';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useTableRowStyle} from '@common/ui/tables/style/use-table-row-style';\nimport clsx from 'clsx';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T & {isPlaceholder?: boolean};\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n  className?: string;\n  style?: React.CSSProperties;\n}\nexport function TableRow({\n  item,\n  index,\n  renderAs,\n  className,\n  style,\n}: TableRowProps) {\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    enableSelection,\n    selectionStyle,\n    hideHeaderRow,\n  } = useContext(TableContext);\n\n  const isTouchDevice = useRef(false);\n  const isSelected = selectedRows.includes(item.id);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice.current &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle === 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice.current) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPointerDown: e => {\n      isTouchDevice.current = e.pointerType === 'touch';\n    },\n    onPress: handleRowTap,\n    onLongPress: enableSelection\n      ? () => {\n          if (isTouchDevice.current) {\n            toggleRow(item);\n          }\n        }\n      : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (selectRowOnContextMenu && enableSelection) {\n      if (!selectedRows.includes(item.id)) {\n        selectRow(item);\n      }\n    }\n    // prevent context menu on mobile\n    if (isTouchDevice.current) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const styleClassName = useTableRowStyle({index, isSelected});\n\n  const RowElement = renderAs || 'div';\n  return (\n    <RowElement\n      role=\"row\"\n      aria-rowindex={index + 1 + (hideHeaderRow ? 0 : 1)}\n      aria-selected={isSelected}\n      tabIndex={-1}\n      className={clsx(className, styleClassName)}\n      item={RowElement === 'div' ? (undefined as any) : item}\n      onDoubleClick={createEventHandler(doubleClickHandler)}\n      onKeyDown={createEventHandler(keyboardHandler)}\n      onContextMenu={createEventHandler(contextMenuHandler)}\n      onPointerEnter={createEventHandler(() => setIsHovered(true))}\n      onPointerLeave={createEventHandler(() => setIsHovered(false))}\n      style={style}\n      {...domProps}\n    >\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          rowIndex={index}\n          rowIsHovered={isHovered}\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport React, {useContext} from 'react';\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport const CheckboxColumnConfig: ColumnConfig<TableDataItem> = {\n  key: 'checkbox',\n  header: () => <SelectAllCheckbox />,\n  align: 'center',\n  width: 'w-24 flex-shrink-0',\n  body: (item, row) => {\n    if (row.isPlaceholder) {\n      return <Skeleton size=\"w-24 h-24\" variant=\"rect\" />;\n    }\n    return <SelectRowCheckbox item={item} />;\n  },\n};\n\ninterface SelectRowCheckboxProps {\n  item: TableDataItem;\n}\nfunction SelectRowCheckbox({item}: SelectRowCheckboxProps) {\n  const {selectedRows, toggleRow} = useContext(TableContext);\n  return (\n    <Checkbox\n      checked={selectedRows.includes(item.id)}\n      onChange={() => toggleRow(item)}\n    />\n  );\n}\n\nfunction SelectAllCheckbox() {\n  const {trans} = useTrans();\n\n  const {data, selectedRows, onSelectionChange} = useContext(TableContext);\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <Checkbox\n      aria-label={trans({message: 'Select all'})}\n      isIndeterminate={someRowsSelected}\n      checked={allRowsSelected}\n      onChange={() => {\n        if (allRowsSelected) {\n          onSelectionChange([]);\n        } else {\n          onSelectionChange(data.map(d => d.id));\n        }\n      }}\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {columns, sortDescriptor, onSortChange, enableSorting} =\n    useContext(TableContext);\n  const column = columns[index];\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: true,\n  });\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting && enableSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <div\n      role=\"columnheader\"\n      tabIndex={-1}\n      aria-colindex={index + 1}\n      aria-sort={ariaSort}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import {HeaderCell} from '@common/ui/tables/header-cell';\nimport React, {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport function TableHeaderRow() {\n  const {columns} = useContext(TableContext);\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1}\n      tabIndex={-1}\n      className=\"flex gap-x-16 px-16\"\n    >\n      {columns.map((column, columnIndex) => (\n        <HeaderCell index={columnIndex} key={column.key} />\n      ))}\n    </div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentPropsWithoutRef,\n  Fragment,\n  JSXElementConstructor,\n  MutableRefObject,\n  ReactElement,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\nimport {useInteractOutside} from '@react-aria/interactions';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {CheckboxColumnConfig} from '@common/ui/tables/checkbox-column-config';\nimport {TableHeaderRow} from '@common/ui/tables/table-header-row';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentPropsWithoutRef<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  meta?: any;\n  tableRef?: MutableRefObject<HTMLTableElement>;\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSorting?: boolean;\n  onDelete?: (items: T[]) => void;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  selectRowOnContextMenu?: boolean;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n  tableBody?: ReactElement<TableBodyProps>;\n  hideBorder?: boolean;\n  closeOnInteractOutside?: boolean;\n  collapseOnMobile?: boolean;\n  cellHeight?: string;\n  headerCellHeight?: string;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns: userColumns,\n  collapseOnMobile = true,\n  hideHeaderRow = false,\n  hideBorder = false,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSorting = true,\n  onDelete,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  selectRowOnContextMenu,\n  onAction,\n  renderRowAs,\n  tableBody,\n  meta,\n  tableRef: propsTableRef,\n  closeOnInteractOutside = false,\n  cellHeight,\n  headerCellHeight,\n  ...domProps\n}: TableProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const isCollapsedMode = !!isMobile && collapseOnMobile;\n  if (isCollapsedMode) {\n    hideHeaderRow = true;\n    hideBorder = true;\n  }\n\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange,\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange,\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  const selectRow = useCallback(\n    // allow deselecting all rows by passing in null\n    (item: TableDataItem | null, merge?: boolean) => {\n      let newValues: (string | number)[] = [];\n      if (item) {\n        newValues = merge\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\n          : [item.id];\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  // add checkbox columns to config, if selection is enabled\n  const columns = useMemo(() => {\n    const filteredColumns = userColumns.filter(c => {\n      const visibleInMode = c.visibleInMode || 'regular';\n      if (visibleInMode === 'all') {\n        return true;\n      }\n      if (visibleInMode === 'compact' && isCollapsedMode) {\n        return true;\n      }\n      if (visibleInMode === 'regular' && !isCollapsedMode) {\n        return true;\n      }\n    });\n    const showCheckboxCell =\n      enableSelection && selectionStyle !== 'highlight' && !isMobile;\n    if (showCheckboxCell) {\n      filteredColumns.unshift(CheckboxColumnConfig);\n    }\n    return filteredColumns;\n  }, [isMobile, userColumns, enableSelection, selectionStyle, isCollapsedMode]);\n\n  const contextValue: TableContextValue<T> = {\n    isCollapsedMode,\n    cellHeight,\n    headerCellHeight,\n    hideBorder,\n    hideHeaderRow,\n    selectedRows,\n    onSelectionChange,\n    enableSorting,\n    enableSelection,\n    selectionStyle,\n    data,\n    columns,\n    sortDescriptor,\n    onSortChange,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    meta,\n    collapseOnMobile,\n  };\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const tableBodyProps: TableBodyProps = {\n    renderRowAs: renderRowAs as any,\n  };\n\n  if (!tableBody) {\n    tableBody = <BasicTableBody {...tableBodyProps} />;\n  } else {\n    tableBody = cloneElement(tableBody, tableBodyProps);\n  }\n\n  // deselect rows when clicking outside the table\n  const tableRef = useObjectRef(propsTableRef);\n  useInteractOutside({\n    ref: tableRef,\n    onInteractOutside: e => {\n      if (\n        closeOnInteractOutside &&\n        enableSelection &&\n        selectedRows?.length &&\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\n      ) {\n        onSelectionChange([]);\n      }\n    },\n  });\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <div\n        {...mergeProps(domProps, navProps, {\n          onKeyDown: (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onSelectionChange([]);\n              }\n            } else if (e.key === 'Delete') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onDelete?.(\n                  data.filter(item => selectedRows?.includes(item.id)),\n                );\n              }\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (enableSelection) {\n                onSelectionChange(data.map(item => item.id));\n              }\n            }\n          },\n        })}\n        role=\"grid\"\n        tabIndex={0}\n        aria-rowcount={data.length + 1}\n        aria-colcount={columns.length + 1}\n        ref={tableRef}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'isolate select-none text-sm outline-none focus-visible:ring-2',\n        )}\n      >\n        {!hideHeaderRow && <TableHeaderRow />}\n        {tableBody}\n      </div>\n    </TableContext.Provider>\n  );\n}\n\nexport interface TableBodyProps {\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\n}\nfunction BasicTableBody({renderRowAs}: TableBodyProps) {\n  const {data} = useContext(TableContext);\n  return (\n    <Fragment>\n      {data.map((item, rowIndex) => (\n        <TableRow\n          item={item}\n          index={rowIndex}\n          key={item.id}\n          renderAs={renderRowAs}\n        />\n      ))}\n    </Fragment>\n  );\n}\n","import {UseQueryResult} from '@tanstack/react-query';\nimport {\n  hasNextPage,\n  LengthAwarePaginationResponse,\n  PaginatedBackendResponse,\n} from '../http/backend-response/pagination-response';\nimport {useNumberFormatter} from '../i18n/use-number-formatter';\nimport {Select} from '../ui/forms/select/select';\nimport {Trans} from '../i18n/trans';\nimport {Item} from '../ui/forms/listbox/item';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '../icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '../icons/material/KeyboardArrowRight';\nimport React from 'react';\nimport {useIsMobileMediaQuery} from '../utils/hooks/is-mobile-media-query';\nimport clsx from 'clsx';\n\nconst defaultPerPage = 15;\nconst perPageOptions = [{key: 10}, {key: 15}, {key: 20}, {key: 50}, {key: 100}];\n\ntype DataTablePaginationFooterProps = {\n  query: UseQueryResult<PaginatedBackendResponse<unknown>, unknown>;\n  onPerPageChange?: (perPage: number) => void;\n  onPageChange?: (page: number) => void;\n  className?: string;\n};\nexport function DataTablePaginationFooter({\n  query,\n  onPerPageChange,\n  onPageChange,\n  className,\n}: DataTablePaginationFooterProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const numberFormatter = useNumberFormatter();\n  const pagination = query.data\n    ?.pagination as LengthAwarePaginationResponse<any>;\n\n  if (!pagination) return null;\n\n  const perPageSelect = onPerPageChange ? (\n    <Select\n      minWidth=\"min-w-auto\"\n      selectionMode=\"single\"\n      disabled={query.isLoading}\n      labelPosition=\"side\"\n      size=\"xs\"\n      label={<Trans message=\"Items per page\" />}\n      selectedValue={pagination.per_page || defaultPerPage}\n      onSelectionChange={value => onPerPageChange(value as number)}\n    >\n      {perPageOptions.map(option => (\n        <Item key={option.key} value={option.key}>\n          {option.key}\n        </Item>\n      ))}\n    </Select>\n  ) : null;\n\n  return (\n    <div\n      className={clsx(\n        'flex h-54 select-none items-center justify-end gap-20 px-20',\n        className,\n      )}\n    >\n      {!isMobile && perPageSelect}\n      {pagination.from && pagination.to && 'total' in pagination ? (\n        <div className=\"text-sm\">\n          <Trans\n            message=\":from - :to of :total\"\n            values={{\n              from: pagination.from,\n              to: pagination.to,\n              total: numberFormatter.format(pagination.total),\n            }}\n          />\n        </div>\n      ) : null}\n      <div className=\"text-muted\">\n        <IconButton\n          disabled={query.isFetching || pagination.current_page < 2}\n          onClick={() => {\n            onPageChange?.(pagination?.current_page - 1);\n          }}\n        >\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton\n          disabled={query.isFetching || !hasNextPage(pagination)}\n          onClick={() => {\n            onPageChange?.(pagination?.current_page + 1);\n          }}\n        >\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FilterAltIcon = createSvgIcon(\n  <path d=\"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z\" />\n, 'FilterAltOutlined');\n","export const AccordionAnimation = {\n  variants: {\n    open: {\n      height: 'auto',\n      visibility: 'visible',\n      transitionEnd: {\n        overflow: 'auto',\n      },\n    },\n    closed: {\n      height: 0,\n      overflow: 'hidden',\n      transitionEnd: {\n        visibility: 'hidden',\n      },\n    },\n  },\n  transition: {type: 'tween', duration: 0.2},\n} as const;\n","import React, {\n  cloneElement,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n  useId,\n  useRef,\n} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {AccordionAnimation} from '@common/ui/accordion/accordtion-animation';\nimport {ArrowDropDownIcon} from '@common/icons/material/ArrowDropDown';\n\ntype Props = {\n  variant?: 'outline' | 'default' | 'minimal';\n  children?: ReactNode;\n  mode?: 'single' | 'multiple';\n  expandedValues?: (string | number)[];\n  defaultExpandedValues?: (string | number)[];\n  onExpandedChange?: (key: (string | number)[]) => void;\n  className?: string;\n  isLazy?: boolean;\n};\nexport const Accordion = React.forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      variant = 'default',\n      mode = 'single',\n      children,\n      className,\n      isLazy,\n      ...other\n    },\n    ref,\n  ) => {\n    const [expandedValues, setExpandedValues] = useControlledState(\n      other.expandedValues,\n      other.defaultExpandedValues || [],\n      other.onExpandedChange,\n    );\n\n    const itemsCount = React.Children.count(children);\n\n    return (\n      <div\n        className={clsx(variant === 'outline' && 'space-y-10', className)}\n        ref={ref}\n        role=\"presentation\"\n      >\n        <AnimatePresence>\n          <FocusScope>\n            {React.Children.map(children, (child, index) => {\n              if (!isValidElement<AccordionItemProps>(child)) return null;\n              return cloneElement<AccordionItemProps>(child, {\n                key: child.key || index,\n                value: child.props.value || index,\n                isFirst: index === 0,\n                isLast: index === itemsCount - 1,\n                mode,\n                variant,\n                expandedValues,\n                setExpandedValues,\n                isLazy,\n              });\n            })}\n          </FocusScope>\n        </AnimatePresence>\n      </div>\n    );\n  },\n);\n\ninterface AccordionItemProps {\n  children: ReactNode;\n  disabled?: boolean;\n  label: ReactNode;\n  description?: ReactNode;\n  value?: string | number;\n  isFirst?: boolean;\n  isLast?: boolean;\n  bodyClassName?: string;\n  labelClassName?: string;\n  buttonPadding?: string;\n  chevronPosition?: 'left' | 'right';\n  startIcon?: ReactElement;\n  endAppend?: ReactElement;\n  variant?: 'outline' | 'default' | 'minimal';\n  expandedValues?: (string | number)[];\n  setExpandedValues?: (keys: (string | number)[]) => void;\n  mode?: 'single' | 'multiple';\n  footerContent?: ReactNode;\n  isLazy?: boolean;\n  onHeaderMouseEnter?: () => void;\n  onHeaderMouseLeave?: () => void;\n}\nexport function AccordionItem(props: AccordionItemProps) {\n  const {\n    children,\n    label,\n    disabled,\n    bodyClassName,\n    labelClassName,\n    buttonPadding = 'py-10 pl-14 pr-10',\n    startIcon,\n    description,\n    endAppend,\n    chevronPosition = 'right',\n    isFirst,\n    mode,\n    isLazy,\n    variant,\n    footerContent,\n    onHeaderMouseEnter,\n    onHeaderMouseLeave,\n  } = props;\n  const expandedValues = props.expandedValues || [];\n  const value = props.value || 0;\n  const setExpandedValues = props.setExpandedValues || (() => {});\n  const ref = useRef<HTMLButtonElement>(null);\n  const isExpanded = !disabled && expandedValues!.includes(value!);\n  const wasExpandedOnce = useRef(false);\n  if (isExpanded) {\n    wasExpandedOnce.current = true;\n  }\n  const focusManager = useFocusManager();\n  const id = useId();\n  const buttonId = `${id}-button`;\n  const panelId = `${id}-panel`;\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        focusManager?.focusNext();\n        break;\n      case 'ArrowUp':\n        focusManager?.focusPrevious();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n\n  const toggle = () => {\n    const i = expandedValues.indexOf(value);\n    if (i > -1) {\n      const newKeys = [...expandedValues];\n      newKeys.splice(i, 1);\n      setExpandedValues(newKeys);\n    } else if (mode === 'single') {\n      setExpandedValues([value]);\n    } else {\n      setExpandedValues([...expandedValues, value]);\n    }\n  };\n\n  const chevron = (\n    <div className={clsx(variant === 'minimal' && '')}>\n      <ArrowDropDownIcon\n        aria-hidden=\"true\"\n        size=\"md\"\n        className={clsx(\n          disabled ? 'text-disabled' : 'text-muted',\n          isExpanded && 'rotate-180 transition-transform',\n        )}\n      />\n    </div>\n  );\n\n  return (\n    <div\n      className={clsx(\n        variant === 'default' && 'border-b',\n        variant === 'outline' && 'rounded-panel border',\n        disabled && 'text-disabled',\n      )}\n    >\n      <h3\n        className={clsx(\n          'flex w-full items-center justify-between text-sm',\n          disabled && 'pointer-events-none',\n          isFirst && variant === 'default' && 'border-t',\n          isExpanded && variant !== 'minimal'\n            ? 'border-b'\n            : 'border-b border-b-transparent',\n          variant === 'outline'\n            ? isExpanded\n              ? 'rounded-panel-t'\n              : 'rounded-panel'\n            : undefined,\n        )}\n        onMouseEnter={onHeaderMouseEnter}\n        onMouseLeave={onHeaderMouseLeave}\n      >\n        <button\n          disabled={disabled}\n          aria-expanded={isExpanded}\n          id={buttonId}\n          aria-controls={panelId}\n          type=\"button\"\n          ref={ref}\n          onKeyDown={onKeyDown}\n          onClick={() => {\n            if (!disabled) {\n              toggle();\n            }\n          }}\n          className={clsx(\n            'flex flex-auto items-center gap-10 text-left outline-none hover:bg-hover focus-visible:bg-primary/focus',\n            buttonPadding,\n          )}\n        >\n          {chevronPosition === 'left' && chevron}\n          {startIcon &&\n            cloneElement(startIcon, {\n              size: 'md',\n              className: clsx(\n                startIcon.props.className,\n                disabled ? 'text-disabled' : 'text-muted',\n              ),\n            })}\n          <div className=\"flex-auto overflow-hidden overflow-ellipsis\">\n            <div className={labelClassName} data-testid=\"accordion-label\">\n              {label}\n            </div>\n            {description && (\n              <div className=\"text-xs text-muted\">{description}</div>\n            )}\n          </div>\n          {chevronPosition === 'right' && chevron}\n        </button>\n        {endAppend && (\n          <div className=\"flex-shrink-0 px-4 text-sm text-muted\">\n            {endAppend}\n          </div>\n        )}\n      </h3>\n      <m.div\n        aria-labelledby={id}\n        role=\"region\"\n        variants={AccordionAnimation.variants}\n        transition={AccordionAnimation.transition}\n        initial={false}\n        animate={isExpanded ? 'open' : 'closed'}\n      >\n        <div className={clsx('p-16', bodyClassName)}>\n          {!isLazy || wasExpandedOnce ? children : null}\n        </div>\n        {footerContent}\n      </m.div>\n    </div>\n  );\n}\n","import {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {FilterSelectControl} from '@common/datatable/filters/backend-filter';\n\nexport function SelectFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectControl>) {\n  const {trans} = useTrans();\n\n  return (\n    <FormSelect\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n      showSearchField={filter.control.showSearchField}\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      searchPlaceholder={\n        filter.control.searchPlaceholder\n          ? trans(filter.control.searchPlaceholder)\n          : undefined\n      }\n    >\n      {filter.control.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          <Trans {...option.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import {FormDateRangePicker} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {DatePickerFilterControl} from '@common/datatable/filters/backend-filter';\n\nexport function DateRangeFilterPanel({\n  filter,\n}: FilterPanelProps<DatePickerFilterControl>) {\n  return (\n    <FormDateRangePicker\n      min={filter.control.min}\n      max={filter.control.max}\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      granularity=\"day\"\n      closeDialogOnSelection={true}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport React, {\n  ComponentProps,\n  ComponentPropsWithoutRef,\n  forwardRef,\n} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AvatarPlaceholderIcon} from '@common/auth/ui/account-settings/avatar/avatar-placeholder-icon';\n\ntype Size = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | string;\n\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\n  className?: string;\n  src?: string;\n  label?: string;\n  circle?: boolean;\n  size?: Size;\n  link?: string;\n  fallback?: 'initials' | 'generic';\n  lazy?: boolean;\n}\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  (\n    {\n      className,\n      circle,\n      size = 'md',\n      src,\n      link,\n      label,\n      fallback = 'generic',\n      lazy = true,\n      ...domProps\n    },\n    ref,\n  ) => {\n    let renderedAvatar = src ? (\n      <img\n        ref={ref}\n        src={src}\n        alt={label}\n        loading={lazy ? 'lazy' : undefined}\n        className=\"block h-full w-full object-cover\"\n      />\n    ) : (\n      <div className=\"h-full w-full bg-alt dark:bg-chip\">\n        <AvatarPlaceholderIcon\n          viewBox=\"0 0 48 48\"\n          className=\"h-full w-full text-muted\"\n        />\n      </div>\n    );\n\n    if (label) {\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n    }\n\n    const wrapperProps: ComponentProps<any> = {\n      ...domProps,\n      className: clsx(\n        className,\n        'relative block overflow-hidden select-none flex-shrink-0',\n        getSizeClassName(size),\n        circle ? 'rounded-full' : 'rounded',\n      ),\n    };\n\n    return link ? (\n      <Link {...wrapperProps} to={link}>\n        {renderedAvatar}\n      </Link>\n    ) : (\n      <div {...wrapperProps}>{renderedAvatar}</div>\n    );\n  },\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    case 'xl':\n      return 'w-60 h-60';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","import {\n  keepPreviousData,\n  useQuery,\n  UseQueryOptions,\n} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n  with?: string;\n}\n\nexport function useNormalizedModels(\n  endpoint: string,\n  queryParams: Params,\n  queryOptions?: Omit<\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\n    'queryKey' | 'queryFn'\n  > | null,\n) {\n  return useQuery({\n    queryKey: [endpoint, queryParams],\n    queryFn: () => fetchModels(endpoint, queryParams),\n    placeholderData: keepPreviousData,\n    ...queryOptions,\n  });\n}\n\nasync function fetchModels(endpoint: string, params: Params) {\n  return apiClient.get<Response>(endpoint, {params}).then(r => r.data);\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(\n  endpoint: string,\n  queryParams?: Record<string, string>,\n  queryOptions?: {enabled?: boolean},\n) {\n  return useQuery({\n    queryKey: [endpoint, queryParams],\n    queryFn: () => fetchModel(endpoint, queryParams),\n    ...queryOptions,\n  });\n}\n\nasync function fetchModel(\n  endpoint: string,\n  params?: Record<string, string>,\n): Promise<Response> {\n  return apiClient.get(endpoint, {params}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '../../i18n/use-trans';\nimport {Trans} from '../../i18n/trans';\nimport {Avatar} from '../images/avatar';\nimport {Tooltip} from '../tooltip/tooltip';\nimport {IconButton} from '../buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {message} from '../../i18n/message';\nimport {Item} from './listbox/item';\nimport {useController, useFormContext} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\nimport {Select} from '@common/ui/forms/select/select';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {BaseFieldProps} from '@common/ui/forms/input-field/base-field-props';\n\ninterface NormalizedModelFieldProps {\n  label?: ReactNode;\n  className?: string;\n  background?: BaseFieldProps['background'];\n  value?: string | number;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  autoFocus?: boolean;\n  queryParams?: Record<string, string>;\n  endpoint: string;\n  disabled?: boolean;\n  required?: boolean;\n}\nexport function NormalizedModelField({\n  label,\n  className,\n  background,\n  value,\n  defaultValue = '',\n  placeholder = message('Select item...'),\n  searchPlaceholder = message('Find an item...'),\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  autoFocus,\n  queryParams,\n  endpoint,\n  disabled,\n  required,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLButtonElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange,\n  );\n  const query = useNormalizedModels(endpoint, {\n    query: inputValue,\n    ...queryParams,\n  });\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx(\n            'rounded-input border p-8',\n            background,\n            invalid && 'border-danger',\n          )}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              disabled={disabled}\n              endpoint={endpoint}\n              modelId={selectedValue}\n              queryParams={queryParams}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                  inputRef.current?.click();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Select\n      className={className}\n      showSearchField\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      color=\"white\"\n      isAsync\n      background={background}\n      placeholder={trans(placeholder)}\n      searchPlaceholder={trans(searchPlaceholder)}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      autoFocus={autoFocus}\n      disabled={disabled}\n      required={required}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </Select>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n  endpoint?: string;\n  disabled?: boolean;\n  queryParams?: NormalizedModelFieldProps['queryParams'];\n}\nfunction SelectedModelPreview({\n  modelId,\n  onEditClick,\n  endpoint,\n  disabled,\n  queryParams,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(\n    `${endpoint}/${modelId}`,\n    queryParams,\n  );\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className={clsx(\n        'flex items-center gap-10',\n        disabled && 'pointer-events-none cursor-not-allowed text-disabled',\n      )}\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      {data.model.image && <Avatar src={data.model.image} />}\n      <div>\n        <div className=\"text-sm leading-4\">{data.model.name}</div>\n        <div className=\"text-xs text-muted\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n          disabled={disabled}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"max-h-[36px] flex-auto\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"max-h-8 text-xs\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {clearErrors} = useFormContext();\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={value => {\n        onChange(value);\n        clearErrors(name);\n      }}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\nimport {FilterSelectModelControl} from '@common/datatable/filters/backend-filter';\n\nexport function NormalizedModelFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectModelControl>) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      endpoint={`normalized-models/${filter.control.model}`}\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '../../i18n/message';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n    hasAll: message('Include all'),\n  };\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {FilterOperatorNames} from '@common/datatable/filters/filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {\n  FilterNumberInputControl,\n  FilterTextInputControl,\n} from '@common/datatable/filters/backend-filter';\n\nexport function InputFilterPanel({\n  filter,\n}: FilterPanelProps<FilterTextInputControl | FilterNumberInputControl>) {\n  const control = filter.control;\n  return (\n    <Fragment>\n      <FormSelect\n        selectionMode=\"single\"\n        name={`${filter.key}.operator`}\n        className=\"mb-14\"\n        size=\"sm\"\n        required\n      >\n        {filter.operators?.map(operator => (\n          <Item key={operator} value={operator}>\n            {<Trans {...FilterOperatorNames[operator]} />}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        size=\"sm\"\n        name={`${filter.key}.value`}\n        type={filter.control.inputType}\n        min={'minValue' in control ? control.minValue : undefined}\n        max={'maxValue' in control ? control.maxValue : undefined}\n        minLength={'minLength' in control ? control.minLength : undefined}\n        maxLength={'maxLength' in control ? control.maxLength : undefined}\n        required\n      />\n    </Fragment>\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FilterBooleanToggleControl} from '@common/datatable/filters/backend-filter';\n\nexport function BooleanFilterPanel({\n  filter,\n}: FilterPanelProps<FilterBooleanToggleControl>) {\n  // Toggling accordion in the dialog will already apply boolean filter, no need for any extra fields here\n  return null;\n}\n","import React, {\n  Children,\n  cloneElement,\n  isValidElement,\n  ReactElement,\n} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\nexport interface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n  wrap?: boolean;\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n  wrap = true,\n}: ChipListProps) {\n  return (\n    <div\n      className={clsx(\n        'flex items-center gap-8',\n        wrap && 'flex-wrap',\n        className,\n      )}\n    >\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(value: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: value, name: `${value}`, description: `${value}`};\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field, FieldProps} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '../../../progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Avatar} from '../../../images/avatar';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {Popover} from '../../../overlays/popover';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    allowCustomValue?: boolean;\n    showDropdownArrow?: boolean;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n    onChipClick?: (value: ChipValue) => void;\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>,\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'sm',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    onChipClick,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex flex-wrap items-center', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          onChipClick={onChipClick}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n        />\n        <ChipInput\n          size={props.size}\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n          allowCustomValue={allowCustomValue}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n  onChipClick?: (value: ChipValue) => void;\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n  onChipClick,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems],\n  );\n\n  return (\n    <ChipList\n      className={clsx(\n        'max-w-full flex-shrink-0 flex-wrap',\n        chipSize === 'xs' ? 'my-6' : 'my-8',\n      )}\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\n          onClick={() => onChipClick?.(item)}\n          onRemove={() => {\n            const newItems = removeItem(item.id);\n            if (newItems.length) {\n              // focus previous chip\n              manager?.focusPrevious({tabbable: true});\n            } else {\n              // focus input\n              manager?.focusLast();\n            }\n          }}\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  allowCustomValue: boolean;\n  children: ListBoxChildren<T>['children'];\n  size: FieldProps['size'];\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n    isLoading,\n    size,\n  } = props;\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith],\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      isLoading={isLoading}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        type=\"text\"\n        className={clsx(\n          'mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none',\n          size === 'xs' ? 'h-20' : 'h-30',\n        )}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi,\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager?.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: handleFocusAndClick,\n          onClick: handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey],\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange,\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null,\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n\n  return value.map(v => {\n    return typeof v !== 'object' ? stringToChipValue(v as string) : v;\n  });\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>},\n) => ReactElement;\n","import {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {ChipField, ChipFieldProps} from './chip-field';\n\nexport type FormChipFieldProps<T> = ChipFieldProps<T> & {\n  name: string;\n};\n\nexport function FormChipField<T>({children, ...props}: FormChipFieldProps<T>) {\n  const {\n    field: {onChange, onBlur, value = [], ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<ChipFieldProps<T>> = {\n    onChange,\n    onBlur,\n    value,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return (\n    <ChipField ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>\n  );\n}\n","import {Item} from '@common/ui/forms/listbox/item';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {FilterChipFieldControl} from '@common/datatable/filters/backend-filter';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ChipFieldFilterPanel({\n  filter,\n}: FilterPanelProps<FilterChipFieldControl>) {\n  const {trans} = useTrans();\n  return (\n    <FormChipField\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      valueKey=\"id\"\n      allowCustomValue={false}\n      showDropdownArrow\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      displayWith={chip =>\n        filter.control.options.find(o => o.key === chip.id)?.label.message\n      }\n      suggestions={filter.control.options.map(o => ({\n        id: o.key,\n        name: o.label.message,\n      }))}\n    >\n      {chip => (\n        <Item key={chip.id} value={chip.id}>\n          {<Trans message={chip.name} />}\n        </Item>\n      )}\n    </FormChipField>\n  );\n}\n","import {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {\n  BackendFilter,\n  CustomFilterControl,\n  DatePickerFilterControl,\n  FilterBooleanToggleControl,\n  FilterChipFieldControl,\n  FilterControlType,\n  FilterOperator,\n  FilterSelectControl,\n  FilterSelectModelControl,\n  FilterTextInputControl,\n} from './backend-filter';\nimport {Trans} from '../../i18n/trans';\nimport {useState} from 'react';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {useBackendFilterUrlParams} from './backend-filter-url-params';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Accordion, AccordionItem} from '../../ui/accordion/accordion';\nimport {Button} from '../../ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {Form} from '../../ui/forms/form';\nimport {Checkbox} from '../../ui/forms/toggle/checkbox';\nimport {SelectFilterPanel} from './panels/select-filter-panel';\nimport {DateRangeFilterPanel} from './panels/date-range-filter-panel';\nimport {NormalizedModelFilterPanel} from './panels/normalized-model-filter-panel';\nimport {InputFilterPanel} from './panels/input-filter-panel';\nimport {BooleanFilterPanel} from './panels/boolean-filter-panel';\nimport clsx from 'clsx';\nimport {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\n\nexport interface FilterItemFormValue<T = any> {\n  value: T;\n  operator?: FilterOperator;\n}\n\ninterface AddFilterDialogProps {\n  filters: BackendFilter[];\n}\nexport function AddFilterDialog({filters}: AddFilterDialogProps) {\n  const {decodedFilters} = useBackendFilterUrlParams(filters);\n  const {formId} = useDialogContext();\n\n  // expand currently active filters\n  const [expandedFilters, setExpandedFilters] = useState<(string | number)[]>(\n    () => {\n      return decodedFilters.map(f => f.key);\n    },\n  );\n\n  const clearButton = (\n    <Button\n      size=\"xs\"\n      variant=\"outline\"\n      className=\"mr-auto\"\n      onClick={() => {\n        setExpandedFilters([]);\n      }}\n    >\n      <Trans message=\"Clear\" />\n    </Button>\n  );\n\n  const applyButton = (\n    <Button\n      size=\"xs\"\n      variant=\"flat\"\n      color=\"primary\"\n      className=\"ml-auto\"\n      type=\"submit\"\n      form={formId}\n    >\n      <Trans message=\"Apply\" />\n    </Button>\n  );\n\n  return (\n    <Dialog className=\"min-w-[300px]\" maxWidth=\"max-w-400\" size=\"auto\">\n      <DialogHeader\n        padding=\"px-14 py-10\"\n        leftAdornment={clearButton}\n        rightAdornment={applyButton}\n      >\n        <Trans message=\"Filter\" />\n      </DialogHeader>\n      <DialogBody padding=\"p-0\">\n        <FilterList\n          filters={filters}\n          expandedFilters={expandedFilters}\n          setExpandedFilters={setExpandedFilters}\n        />\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  expandedFilters: (string | number)[];\n  setExpandedFilters: (value: (string | number)[]) => void;\n}\nfunction FilterList({\n  filters,\n  expandedFilters,\n  setExpandedFilters,\n}: FilterListProps) {\n  const {decodedFilters, replaceAll} = useBackendFilterUrlParams(filters);\n\n  // either get value and operator from url params if filter is active, or get defaults from filter config\n  const defaultValues: Record<string, FilterItemFormValue> = {};\n  filters.forEach(filter => {\n    const appliedFilter = decodedFilters.find(f => f.key === filter.key);\n    defaultValues[filter.key] =\n      appliedFilter?.value !== undefined\n        ? // there might be some extra keys set on filter besides\n          // \"value\" and \"operator\", so add the whole object to form\n          appliedFilter\n        : {\n            value: filter.control.defaultValue,\n            operator: filter.defaultOperator,\n          };\n  });\n  const form = useForm<Record<string, FilterItemFormValue>>({defaultValues});\n  const {formId, close} = useDialogContext();\n\n  return (\n    <Form\n      form={form}\n      id={formId}\n      onSubmit={formValue => {\n        const filterValue = Object.entries(formValue)\n          // remove undefined and non-expanded filters, so \"clear\" button will correctly remove active filters\n          .filter(\n            ([key, fieldValue]) =>\n              expandedFilters.includes(key) && fieldValue !== undefined,\n          )\n          .map(([key, fieldValue]) => ({\n            key,\n            ...fieldValue, // value and operator from form\n          }));\n\n        replaceAll(filterValue);\n        close();\n      }}\n    >\n      <Accordion\n        mode=\"multiple\"\n        expandedValues={expandedFilters}\n        onExpandedChange={setExpandedFilters}\n      >\n        {filters.map(filter => (\n          <AccordionItem\n            startIcon={\n              <Checkbox checked={expandedFilters.includes(filter.key)} />\n            }\n            key={filter.key}\n            value={filter.key}\n            label={<Trans {...filter.label} />}\n            bodyClassName=\"max-h-288 overflow-y-auto compact-scrollbar\"\n          >\n            {filter.description && (\n              <div\n                className={clsx(\n                  'text-xs text-muted',\n                  // boolean filter will have nothing in the panel, no need to add margin\n                  filter.control.type !== FilterControlType.BooleanToggle &&\n                    'mb-14',\n                )}\n              >\n                <Trans {...filter.description} />\n              </div>\n            )}\n            <AddFilterDialogPanel filter={filter} />\n          </AccordionItem>\n        ))}\n      </Accordion>\n    </Form>\n  );\n}\n\ninterface ActiveFilterPanelProps {\n  filter: BackendFilter;\n}\nexport function AddFilterDialogPanel({filter}: ActiveFilterPanelProps) {\n  switch (filter.control.type) {\n    case FilterControlType.Select:\n      return (\n        <SelectFilterPanel\n          filter={filter as BackendFilter<FilterSelectControl>}\n        />\n      );\n    case FilterControlType.ChipField:\n      return (\n        <ChipFieldFilterPanel\n          filter={filter as BackendFilter<FilterChipFieldControl>}\n        />\n      );\n    case FilterControlType.DateRangePicker:\n      return (\n        <DateRangeFilterPanel\n          filter={filter as BackendFilter<DatePickerFilterControl>}\n        />\n      );\n    case FilterControlType.SelectModel:\n      return (\n        <NormalizedModelFilterPanel\n          filter={filter as BackendFilter<FilterSelectModelControl>}\n        />\n      );\n    case FilterControlType.Input:\n      return (\n        <InputFilterPanel\n          filter={filter as BackendFilter<FilterTextInputControl>}\n        />\n      );\n    case FilterControlType.BooleanToggle:\n      return (\n        <BooleanFilterPanel\n          filter={filter as BackendFilter<FilterBooleanToggleControl>}\n        />\n      );\n    case 'custom':\n      const CustomComponent = filter.control.panel;\n      return (\n        <CustomComponent\n          filter={filter as BackendFilter<CustomFilterControl>}\n        />\n      );\n    default:\n      return null;\n  }\n}\n","import {Button, ButtonProps} from '../../ui/buttons/button';\nimport {BackendFilter} from './backend-filter';\nimport {FilterAltIcon} from '../../icons/material/FilterAlt';\nimport {Trans} from '../../i18n/trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {AddFilterDialog} from './add-filter-dialog';\nimport {ReactElement} from 'react';\n\ninterface AddFilterButtonProps {\n  filters: BackendFilter[];\n  icon?: ReactElement;\n  color?: ButtonProps['color'];\n  variant?: ButtonProps['variant'];\n  disabled?: boolean;\n  size?: ButtonProps['size'];\n  className?: string;\n}\nexport function AddFilterButton({\n  filters,\n  icon = <FilterAltIcon />,\n  color = 'primary',\n  variant = 'outline',\n  size = 'sm',\n  disabled,\n  className,\n}: AddFilterButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  const desktopButton = (\n    <Button\n      variant={variant}\n      color={color}\n      startIcon={icon}\n      disabled={disabled}\n      size={size}\n      className={className}\n    >\n      <Trans message=\"Filter\" />\n    </Button>\n  );\n\n  const mobileButton = (\n    <IconButton\n      color={color}\n      size=\"sm\"\n      variant={variant}\n      disabled={disabled}\n      className={className}\n    >\n      {icon}\n    </IconButton>\n  );\n\n  return (\n    <DialogTrigger type=\"popover\">\n      {isMobile ? mobileButton : desktopButton}\n      <AddFilterDialog filters={filters} />\n    </DialogTrigger>\n  );\n}\n","import React, {ComponentPropsWithoutRef, ReactNode} from 'react';\nimport {BackendFilter} from './filters/backend-filter';\nimport {useTrans} from '../i18n/use-trans';\nimport {TextField} from '../ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '../icons/material/Search';\nimport {AddFilterButton} from './filters/add-filter-button';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\n\ninterface Props {\n  actions?: ReactNode;\n  filters?: BackendFilter[];\n  filtersLoading?: boolean;\n  searchPlaceholder?: MessageDescriptor;\n  searchValue?: string;\n  onSearchChange: (value: string) => void;\n}\nexport function DataTableHeader({\n  actions,\n  filters,\n  filtersLoading,\n  searchPlaceholder = message('Type to search...'),\n  searchValue = '',\n  onSearchChange,\n}: Props) {\n  const {trans} = useTrans();\n  return (\n    <HeaderLayout>\n      <TextField\n        size=\"sm\"\n        className=\"mr-auto min-w-180 max-w-440 flex-auto\"\n        inputWrapperClassName=\"mr-24 md:mr-0\"\n        placeholder={trans(searchPlaceholder)}\n        startAdornment={<SearchIcon size=\"sm\" />}\n        value={searchValue}\n        onChange={e => {\n          onSearchChange(e.target.value);\n        }}\n      />\n      {filters && (\n        <AddFilterButton filters={filters} disabled={filtersLoading} />\n      )}\n      {actions}\n    </HeaderLayout>\n  );\n}\n\ninterface AnimatedHeaderProps extends ComponentPropsWithoutRef<'div'> {\n  children: ReactNode;\n}\nexport function HeaderLayout({children, ...domProps}: AnimatedHeaderProps) {\n  return (\n    <div\n      className=\"hidden-scrollbar relative mb-24 flex h-42 items-center gap-8 overflow-x-auto text-muted md:gap-12\"\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.control.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../../../i18n/trans';\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\nimport {Form} from '../../../ui/forms/form';\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../../ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4 max-h-288\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"text-muted text-xs mb-14\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {\n  BackendFilter,\n  CustomFilterControl,\n  DatePickerFilterControl,\n  FilterBooleanToggleControl,\n  FilterChipFieldControl,\n  FilterControl,\n  FilterControlType,\n  FilterNumberInputControl,\n  FilterOperator,\n  FilterSelectControl,\n  FilterSelectModelControl,\n  FilterTextInputControl,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '@common/i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '@common/ui/images/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateRangeFilterPanel} from '../panels/date-range-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '@common/users/queries/use-normalized-model';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\nexport interface FilterListControlProps<T = unknown, E = FilterControl> {\n  filter: BackendFilter<E>;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any, any>) {\n  switch (props.filter.control.type) {\n    case FilterControlType.DateRangePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select:\n      return <SelectControl {...props} />;\n    case FilterControlType.ChipField:\n      return <ChipFieldControl {...props} />;\n    case FilterControlType.Input:\n      return <InputControl {...props} />;\n    case FilterControlType.SelectModel:\n      return <SelectModelControl {...props} />;\n    case FilterControlType.Custom:\n      const Control = (props.filter.control as CustomFilterControl).listItem;\n      return <Control {...props} />;\n    default:\n      return null;\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<\n    Required<AbsoluteDateRange>,\n    DatePickerFilterControl\n  >,\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateRangeFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<\n  FilterBooleanToggleControl['defaultValue'],\n  FilterBooleanToggleControl\n>) {\n  // todo: toggle control on or off here\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: filter.control.defaultValue});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(\n  props: FilterListControlProps<Key, FilterSelectControl>,\n) {\n  const {filter, value} = props;\n  const option = filter.control.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={option ? <Trans {...option.label} /> : null}\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction ChipFieldControl(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={<MultipleValues {...props} />}\n      panel={<ChipFieldFilterPanel filter={props.filter} />}\n    />\n  );\n}\n\nfunction MultipleValues(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  const {trans} = useTrans();\n  const {filter, value} = props;\n  const options = value.map(v => filter.control.options.find(o => o.key === v));\n  const maxShownCount = 3;\n  const notShownCount = value.length - maxShownCount;\n\n  // translate names, add commas and limit to 3\n  const names = (\n    <Fragment>\n      {options\n        .filter(Boolean)\n        .slice(0, maxShownCount)\n        .map((o, i) => {\n          let name = '';\n          if (i !== 0) {\n            name += ', ';\n          }\n          name += trans(o!.label);\n          return name;\n        })}\n    </Fragment>\n  );\n\n  // indicate that there are some names not shown\n  return notShownCount > 0 ? (\n    <Trans\n      message=\":names + :count more\"\n      values={{names: names, count: notShownCount}}\n    />\n  ) : (\n    names\n  );\n}\n\nfunction InputControl(\n  props: FilterListControlProps<\n    string,\n    FilterTextInputControl | FilterNumberInputControl\n  >,\n) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  const formattedValue =\n    filter.control.inputType === 'number' ? (\n      <FormattedNumber value={value as any} />\n    ) : (\n      value\n    );\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {formattedValue}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(\n  props: FilterListControlProps<string, FilterSelectModelControl>,\n) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(\n    `normalized-models/${filter.control.model}/${value}`,\n    undefined,\n    {enabled: !!value},\n  );\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key);\n\n        if (!filter) return null;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React, {ReactNode} from 'react';\nimport {HeaderLayout} from '@common/datatable/data-table-header';\n\ninterface Props {\n  actions?: ReactNode;\n  selectedItemsCount: number;\n}\nexport function SelectedStateDatatableHeader({\n  actions,\n  selectedItemsCount,\n}: Props) {\n  return (\n    <HeaderLayout data-testid=\"datatable-selected-header\">\n      <div className=\"mr-auto\">\n        <Trans\n          message=\"[one 1 item|other :count items] selected\"\n          values={{count: selectedItemsCount}}\n        />\n      </div>\n      {actions}\n    </HeaderLayout>\n  );\n}\n","import {m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport React from 'react';\n\nexport function FilterListSkeleton() {\n  return (\n    <m.div\n      className=\"flex items-center gap-6 h-30\"\n      key=\"filter-list-skeleton\"\n      {...opacityAnimation}\n    >\n      <Skeleton variant=\"rect\" size=\"h-full w-144\" radius=\"rounded-md\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-112\" radius=\"rounded-md\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-172\" radius=\"rounded-md\" />\n    </m.div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentProps,\n  ReactElement,\n  ReactNode,\n  useState,\n} from 'react';\nimport {TableDataItem} from '../ui/tables/types/table-data-item';\nimport {BackendFilter} from './filters/backend-filter';\nimport {MessageDescriptor} from '../i18n/message-descriptor';\nimport {ColumnConfig} from './column-config';\nimport {useTrans} from '../i18n/use-trans';\nimport {useBackendFilterUrlParams} from './filters/backend-filter-url-params';\nimport {\n  GetDatatableDataParams,\n  useDatatableData,\n} from './requests/paginated-resources';\nimport {DataTableContext} from './page/data-table-context';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {ProgressBar} from '../ui/progress/progress-bar';\nimport {Table, TableProps} from '../ui/tables/table';\nimport {DataTablePaginationFooter} from './data-table-pagination-footer';\nimport {DataTableHeader} from './data-table-header';\nimport {FilterList} from './filters/filter-list/filter-list';\nimport {SelectedStateDatatableHeader} from '@common/datatable/selected-state-datatable-header';\nimport clsx from 'clsx';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {BackendFiltersUrlKey} from '@common/datatable/filters/backend-filters-url-key';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {FilterListSkeleton} from '@common/datatable/filters/filter-list/filter-list-skeleton';\n\nexport interface DataTableProps<T extends TableDataItem> {\n  filters?: BackendFilter[];\n  filtersLoading?: boolean;\n  columns: ColumnConfig<T>[];\n  searchPlaceholder?: MessageDescriptor;\n  queryParams?: Record<string, string | number | undefined | null>;\n  endpoint: string;\n  resourceName?: ReactNode;\n  emptyStateMessage: ReactElement<{isFiltering: boolean}>;\n  actions?: ReactNode;\n  enableSelection?: boolean;\n  selectionStyle?: TableProps<T>['selectionStyle'];\n  selectedActions?: ReactNode;\n  onRowAction?: TableProps<T>['onAction'];\n  tableDomProps?: ComponentProps<'table'>;\n  children?: ReactNode;\n  collapseTableOnMobile?: boolean;\n  cellHeight?: string;\n}\nexport function DataTable<T extends TableDataItem>({\n  filters,\n  filtersLoading,\n  columns,\n  searchPlaceholder,\n  queryParams,\n  endpoint,\n  actions,\n  selectedActions,\n  emptyStateMessage,\n  tableDomProps,\n  onRowAction,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  children,\n  cellHeight,\n  collapseTableOnMobile = true,\n}: DataTableProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const {trans} = useTrans();\n  const {encodedFilters} = useBackendFilterUrlParams(filters);\n  const [params, setParams] = useState<GetDatatableDataParams>({perPage: 15});\n  const [selectedRows, setSelectedRows] = useState<(string | number)[]>([]);\n  const query = useDatatableData<T>(\n    endpoint,\n    {\n      ...params,\n      ...queryParams,\n      [BackendFiltersUrlKey]: encodedFilters,\n    },\n    undefined,\n    () => setSelectedRows([]),\n  );\n\n  const isFiltering = !!(params.query || params.filters || encodedFilters);\n  const pagination = query.data?.pagination;\n\n  return (\n    <DataTableContext.Provider\n      value={{\n        selectedRows,\n        setSelectedRows,\n        endpoint,\n        params,\n        setParams,\n        query,\n      }}\n    >\n      {children}\n      <AnimatePresence initial={false} mode=\"wait\">\n        {selectedRows.length ? (\n          <SelectedStateDatatableHeader\n            selectedItemsCount={selectedRows.length}\n            actions={selectedActions}\n            key=\"selected\"\n          />\n        ) : (\n          <DataTableHeader\n            searchPlaceholder={searchPlaceholder}\n            searchValue={params.query}\n            onSearchChange={query => setParams({...params, query})}\n            actions={actions}\n            filters={filters}\n            filtersLoading={filtersLoading}\n            key=\"default\"\n          />\n        )}\n      </AnimatePresence>\n\n      {filters && (\n        <div className=\"mb-14\">\n          <AnimatePresence initial={false} mode=\"wait\">\n            {filtersLoading && encodedFilters ? (\n              <FilterListSkeleton />\n            ) : (\n              <m.div key=\"filter-list\" {...opacityAnimation}>\n                <FilterList filters={filters} />\n              </m.div>\n            )}\n          </AnimatePresence>\n        </div>\n      )}\n\n      <div\n        className={clsx(\n          'relative rounded-panel',\n          (!isMobile || !collapseTableOnMobile) && 'border',\n        )}\n      >\n        {query.isFetching && (\n          <ProgressBar\n            isIndeterminate\n            className=\"absolute left-0 top-0 z-10 w-full\"\n            aria-label={trans({message: 'Loading'})}\n            size=\"xs\"\n          />\n        )}\n\n        <div className=\"relative overflow-x-auto md:overflow-hidden\">\n          <Table\n            {...tableDomProps}\n            columns={columns}\n            data={pagination?.data || []}\n            sortDescriptor={params}\n            onSortChange={descriptor => {\n              setParams({...params, ...descriptor});\n            }}\n            selectedRows={selectedRows}\n            enableSelection={enableSelection}\n            selectionStyle={selectionStyle}\n            onSelectionChange={setSelectedRows}\n            onAction={onRowAction}\n            collapseOnMobile={collapseTableOnMobile}\n            cellHeight={cellHeight}\n          />\n        </div>\n\n        {(query.isFetched || query.isPlaceholderData) &&\n        !pagination?.data.length ? (\n          <div className=\"pt-50\">\n            {cloneElement(emptyStateMessage, {\n              isFiltering,\n            })}\n          </div>\n        ) : undefined}\n\n        <DataTablePaginationFooter\n          query={query}\n          onPageChange={page => setParams({...params, page})}\n          onPerPageChange={perPage => setParams({...params, perPage})}\n        />\n      </div>\n    </DataTableContext.Provider>\n  );\n}\n","import React, {ReactElement, ReactNode, useId} from 'react';\nimport {TableDataItem} from '../../ui/tables/types/table-data-item';\nimport {DataTable, DataTableProps} from '../data-table';\nimport {TableProps} from '../../ui/tables/table';\nimport {StaticPageTitle} from '../../seo/static-page-title';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport clsx from 'clsx';\n\ninterface Props<T extends TableDataItem> extends DataTableProps<T> {\n  title?: ReactElement<MessageDescriptor>;\n  headerContent?: ReactNode;\n  headerItemsAlign?: string;\n  enableSelection?: boolean;\n  onRowAction?: TableProps<T>['onAction'];\n  padding?: string;\n  className?: string;\n}\nexport function DataTablePage<T extends TableDataItem>({\n  title,\n  headerContent,\n  headerItemsAlign = 'items-end',\n  className,\n  padding,\n  ...dataTableProps\n}: Props<T>) {\n  const titleId = useId();\n\n  return (\n    <div className={clsx(padding ?? 'p-12 md:p-24', className)}>\n      {title && (\n        <div\n          className={clsx(\n            'mb-16',\n            headerContent && `flex ${headerItemsAlign} gap-4`,\n          )}\n        >\n          <StaticPageTitle>{title}</StaticPageTitle>\n          <h1 className=\"text-3xl font-light first:capitalize\" id={titleId}>\n            {title}\n          </h1>\n          {headerContent}\n        </div>\n      )}\n\n      <DataTable\n        {...dataTableProps}\n        tableDomProps={{\n          'aria-labelledby': title ? titleId : undefined,\n        }}\n      />\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {DatatableDataQueryKey} from './paginated-resources';\nimport {useDataTable} from '../page/data-table-context';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\nimport {Key} from 'react';\n\ninterface Response extends BackendResponse {\n  //\n}\n\nexport function useDeleteSelectedRows() {\n  const {endpoint, selectedRows, setSelectedRows} = useDataTable();\n  return useMutation({\n    mutationFn: () => deleteSelectedRows(endpoint, selectedRows),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey(endpoint),\n      });\n      toast(\n        message('Deleted [one 1 record|other :count records]', {\n          values: {count: selectedRows.length},\n        }),\n      );\n      setSelectedRows([]);\n    },\n    onError: err =>\n      showHttpErrorToast(err, message('Could not delete records')),\n  });\n}\n\nfunction deleteSelectedRows(endpoint: string, ids: Key[]): Promise<Response> {\n  return apiClient.delete(`${endpoint}/${ids.join(',')}`).then(r => r.data);\n}\n","import {Button} from '../../ui/buttons/button';\nimport {Trans} from '../../i18n/trans';\nimport {ConfirmationDialog} from '../../ui/overlays/dialog/confirmation-dialog';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport React from 'react';\nimport {useDeleteSelectedRows} from '../requests/delete-selected-rows';\nimport {useDataTable} from './data-table-context';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\n\nexport function DeleteSelectedItemsAction() {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Button variant=\"flat\" color=\"danger\" className=\"ml-auto\">\n        <Trans message=\"Delete\" />\n      </Button>\n      <DeleteItemsDialog />\n    </DialogTrigger>\n  );\n}\n\nfunction DeleteItemsDialog() {\n  const deleteSelectedRows = useDeleteSelectedRows();\n  const {selectedRows} = useDataTable();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      isLoading={deleteSelectedRows.isPending}\n      title={\n        <Trans\n          message=\"Delete [one 1 item|other :count items]?\"\n          values={{count: selectedRows.length}}\n        />\n      }\n      body={\n        <Trans message=\"This will permanently remove the items and cannot be undone.\" />\n      }\n      confirm={<Trans message=\"Delete\" />}\n      isDanger\n      onConfirm={() => {\n        deleteSelectedRows.mutate(undefined, {onSuccess: () => close()});\n      }}\n    />\n  );\n}\n","import React, {ReactNode} from 'react';\nimport {IllustratedMessage} from '../../ui/images/illustrated-message';\nimport {SvgImage} from '../../ui/images/svg-image/svg-image';\nimport {Trans} from '../../i18n/trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\nexport interface DataTableEmptyStateMessageProps {\n  isFiltering?: boolean;\n  title: ReactNode;\n  filteringTitle?: ReactNode;\n  image: string;\n  size?: 'sm' | 'md';\n  className?: string;\n}\nexport function DataTableEmptyStateMessage({\n  isFiltering,\n  title,\n  filteringTitle,\n  image,\n  size,\n  className,\n}: DataTableEmptyStateMessageProps) {\n  const isMobile = useIsMobileMediaQuery();\n  if (!size) {\n    size = isMobile ? 'sm' : 'md';\n  }\n\n  // allow user to disable filtering message variation by not passing in \"filteringTitle\"\n  return (\n    <IllustratedMessage\n      className={className}\n      size={size}\n      image={<SvgImage src={image} />}\n      title={isFiltering && filteringTitle ? filteringTitle : title}\n      description={\n        isFiltering && filteringTitle ? (\n          <Trans message=\"Try another search query or different filters\" />\n        ) : undefined\n      }\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {AddIcon} from '../icons/material/Add';\nimport {Button} from '../ui/buttons/button';\nimport React, {ReactElement, ReactNode} from 'react';\nimport {useIsMobileMediaQuery} from '../utils/hooks/is-mobile-media-query';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {To} from 'react-router-dom';\nimport {ButtonBaseProps} from '../ui/buttons/button-base';\n\nexport interface DataTableAddItemButtonProps {\n  children: ReactNode;\n  to?: To;\n  href?: string;\n  download?: boolean | string;\n  elementType?: ButtonBaseProps['elementType'];\n  onClick?: ButtonBaseProps['onClick'];\n  icon?: ReactElement;\n  disabled?: boolean;\n}\nexport const DataTableAddItemButton = React.forwardRef<\n  HTMLButtonElement,\n  DataTableAddItemButtonProps\n>(\n  (\n    {children, to, elementType, onClick, href, download, icon, disabled},\n    ref,\n  ) => {\n    const isMobile = useIsMobileMediaQuery();\n\n    if (isMobile) {\n      return (\n        <IconButton\n          ref={ref}\n          variant=\"flat\"\n          color=\"primary\"\n          className=\"flex-shrink-0\"\n          size=\"sm\"\n          to={to}\n          href={href}\n          download={download}\n          elementType={elementType}\n          onClick={onClick}\n          disabled={disabled}\n        >\n          {icon || <AddIcon />}\n        </IconButton>\n      );\n    }\n\n    return (\n      <Button\n        ref={ref}\n        startIcon={icon || <AddIcon />}\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"sm\"\n        to={to}\n        href={href}\n        download={download}\n        elementType={elementType}\n        onClick={onClick}\n        disabled={disabled}\n      >\n        {children}\n      </Button>\n    );\n  },\n);\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","import {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  downloadPath?: string;\n  result?: 'jobQueued';\n}\n\nexport type ExportCsvPayload = Record<string, string | number | undefined>;\n\nexport function useExportCsv(endpoint: string) {\n  return useMutation({\n    mutationFn: (payload?: ExportCsvPayload) => exportCsv(endpoint, payload),\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction exportCsv(\n  endpoint: string,\n  payload: ExportCsvPayload | undefined,\n): Promise<Response> {\n  return apiClient.post(endpoint, payload).then(r => r.data);\n}\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '../../ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {Button} from '../../ui/buttons/button';\nimport {Trans} from '../../i18n/trans';\n\nexport function CsvExportInfoDialog() {\n  const {close} = useDialogContext();\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Csv export\" />\n      </DialogHeader>\n      <DialogBody>\n        <Trans\n          message=\"Your request is being processed. We'll email you when the report is ready to download. In\n            certain cases, it might take a little longer, depending on the number of items beings\n            exported and the volume of activity.\"\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"flat\" color=\"primary\" onClick={close}>\n          <Trans message=\"Got it\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {IconButton} from '../../ui/buttons/icon-button';\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\nimport React, {Fragment, useState} from 'react';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {ExportCsvPayload, useExportCsv} from '../requests/use-export-csv';\nimport {downloadFileFromUrl} from '../../uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from './csv-export-info-dialog';\n\ninterface DataTableExportCsvButtonProps {\n  endpoint: string;\n  payload?: ExportCsvPayload;\n}\nexport function DataTableExportCsvButton({\n  endpoint,\n  payload,\n}: DataTableExportCsvButtonProps) {\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n  const exportCsv = useExportCsv(endpoint);\n\n  return (\n    <Fragment>\n      <IconButton\n        variant=\"outline\"\n        color=\"primary\"\n        size=\"sm\"\n        className=\"flex-shrink-0\"\n        disabled={exportCsv.isPending}\n        onClick={() => {\n          exportCsv.mutate(payload, {\n            onSuccess: response => {\n              if (response.downloadPath) {\n                downloadFileFromUrl(response.downloadPath);\n              } else {\n                setDialogIsOpen(true);\n              }\n            },\n          });\n        }}\n      >\n        <FileDownloadIcon />\n      </IconButton>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={dialogIsOpen}\n        onOpenChange={setDialogIsOpen}\n      >\n        <CsvExportInfoDialog />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n","import React, {ReactNode} from 'react';\nimport {Avatar, AvatarProps} from '../../ui/images/avatar';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport clsx from 'clsx';\n\ninterface Props {\n  image?: string;\n  label: ReactNode;\n  description?: ReactNode;\n  labelClassName?: string;\n  avatarSize?: AvatarProps['size'];\n}\nexport function NameWithAvatar({\n  image,\n  label,\n  description,\n  labelClassName,\n  avatarSize = 'md',\n}: Props) {\n  return (\n    <div className=\"flex items-center gap-12\">\n      {image && (\n        <Avatar size={avatarSize} className=\"flex-shrink-0\" src={image} />\n      )}\n      <div className=\"min-w-0 overflow-hidden\">\n        <div\n          className={clsx(labelClassName, 'overflow-hidden overflow-ellipsis')}\n        >\n          {label}\n        </div>\n        {description && (\n          <div className=\"overflow-hidden overflow-ellipsis text-xs text-muted\">\n            {description}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function NameWithAvatarPlaceholder({\n  labelClassName,\n  showDescription,\n}: Partial<Props> & {\n  showDescription?: boolean;\n}) {\n  return (\n    <div className=\"flex w-full max-w-4/5 items-center gap-12\">\n      <Skeleton size=\"w-40 h-40 md:w-32 md:h-32\" variant=\"rect\" />\n      <div className=\"flex-auto\">\n        <div className={clsx(labelClassName, 'leading-3')}>\n          <Skeleton />\n        </div>\n        {showDescription && (\n          <div className=\"mt-4 leading-3 text-muted\">{<Skeleton />}</div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean,\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>,\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue,\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    value => {\n      setIsPlaceholder(false);\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone],\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder],\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {useTrans} from '@common/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","export function chunkArray<T>(array: T[], chunkSize: number): T[][] {\n  return array.reduce<any>((resultArray, item, index) => {\n    const chunkIndex = Math.floor(index / chunkSize);\n\n    if (!resultArray[chunkIndex]) {\n      resultArray[chunkIndex] = [];\n    }\n\n    resultArray[chunkIndex].push(item);\n\n    return resultArray;\n  }, []);\n}\n","import {createSvgIcon} from '../../../../icons/create-svg-icon';\n\nexport const ColorIcon = createSvgIcon(\n  <path\n    stroke=\"#E0E0E0\"\n    d=\"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z\"\n  />\n);\n","import e,{useRef as r,useMemo as t,useEffect as n,useState as o,useCallback as a,useLayoutEffect as l}from\"react\";function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}function i(e){var t=r(e),n=r(function(e){t.current&&t.current(e)});return t.current=e,n.current}var s=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),e>t?t:e<r?r:e},f=function(e){return\"touches\"in e},v=function(e){return e&&e.ownerDocument.defaultView||self},d=function(e,r,t){var n=e.getBoundingClientRect(),o=f(r)?function(e,r){for(var t=0;t<e.length;t++)if(e[t].identifier===r)return e[t];return e[0]}(r.touches,t):r;return{left:s((o.pageX-(n.left+v(e).pageXOffset))/n.width),top:s((o.pageY-(n.top+v(e).pageYOffset))/n.height)}},h=function(e){!f(e)&&e.preventDefault()},m=e.memo(function(o){var a=o.onMove,l=o.onKey,s=c(o,[\"onMove\",\"onKey\"]),m=r(null),g=i(a),p=i(l),b=r(null),_=r(!1),x=t(function(){var e=function(e){h(e),(f(e)?e.touches.length>0:e.buttons>0)&&m.current?g(d(m.current,e,b.current)):t(!1)},r=function(){return t(!1)};function t(t){var n=_.current,o=v(m.current),a=t?o.addEventListener:o.removeEventListener;a(n?\"touchmove\":\"mousemove\",e),a(n?\"touchend\":\"mouseup\",r)}return[function(e){var r=e.nativeEvent,n=m.current;if(n&&(h(r),!function(e,r){return r&&!f(e)}(r,_.current)&&n)){if(f(r)){_.current=!0;var o=r.changedTouches||[];o.length&&(b.current=o[0].identifier)}n.focus(),g(d(n,r,b.current)),t(!0)}},function(e){var r=e.which||e.keyCode;r<37||r>40||(e.preventDefault(),p({left:39===r?.05:37===r?-.05:0,top:40===r?.05:38===r?-.05:0}))},t]},[p,g]),C=x[0],E=x[1],H=x[2];return n(function(){return H},[H]),e.createElement(\"div\",u({},s,{onTouchStart:C,onMouseDown:C,className:\"react-colorful__interactive\",ref:m,onKeyDown:E,tabIndex:0,role:\"slider\"}))}),g=function(e){return e.filter(Boolean).join(\" \")},p=function(r){var t=r.color,n=r.left,o=r.top,a=void 0===o?.5:o,l=g([\"react-colorful__pointer\",r.className]);return e.createElement(\"div\",{className:l,style:{top:100*a+\"%\",left:100*n+\"%\"}},e.createElement(\"div\",{className:\"react-colorful__pointer-fill\",style:{backgroundColor:t}}))},b=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=Math.pow(10,r)),Math.round(t*e)/t},_={grad:.9,turn:360,rad:360/(2*Math.PI)},x=function(e){return L(C(e))},C=function(e){return\"#\"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?b(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?b(parseInt(e.substring(6,8),16)/255,2):1}},E=function(e,r){return void 0===r&&(r=\"deg\"),Number(e)*(_[r]||1)},H=function(e){var r=/hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?N({h:E(r[1],r[2]),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},M=H,N=function(e){var r=e.s,t=e.l;return{h:e.h,s:(r*=(t<50?t:100-t)/100)>0?2*r/(t+r)*100:0,v:t+r,a:e.a}},w=function(e){return K(I(e))},y=function(e){var r=e.s,t=e.v,n=e.a,o=(200-r)*t/100;return{h:b(e.h),s:b(o>0&&o<200?r*t/100/(o<=100?o:200-o)*100:0),l:b(o/2),a:b(n,2)}},q=function(e){var r=y(e);return\"hsl(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%)\"},k=function(e){var r=y(e);return\"hsla(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%, \"+r.a+\")\"},I=function(e){var r=e.h,t=e.s,n=e.v,o=e.a;r=r/360*6,t/=100,n/=100;var a=Math.floor(r),l=n*(1-t),u=n*(1-(r-a)*t),c=n*(1-(1-r+a)*t),i=a%6;return{r:b(255*[n,u,l,l,c,n][i]),g:b(255*[c,n,n,u,l,l][i]),b:b(255*[l,l,c,n,n,u][i]),a:b(o,2)}},O=function(e){var r=/hsva?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?A({h:E(r[1],r[2]),s:Number(r[3]),v:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},j=O,z=function(e){var r=/rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?L({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:void 0===r[7]?1:Number(r[7])/(r[8]?100:1)}):{h:0,s:0,v:0,a:1}},B=z,D=function(e){var r=e.toString(16);return r.length<2?\"0\"+r:r},K=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=o<1?D(b(255*o)):\"\";return\"#\"+D(r)+D(t)+D(n)+a},L=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=Math.max(r,t,n),l=a-Math.min(r,t,n),u=l?a===r?(t-n)/l:a===t?2+(n-r)/l:4+(r-t)/l:0;return{h:b(60*(u<0?u+6:u)),s:b(a?l/a*100:0),v:b(a/255*100),a:o}},A=function(e){return{h:b(e.h),s:b(e.s),v:b(e.v),a:b(e.a,2)}},S=e.memo(function(r){var t=r.hue,n=r.onChange,o=g([\"react-colorful__hue\",r.className]);return e.createElement(\"div\",{className:o},e.createElement(m,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:s(t+360*e.left,0,360)})},\"aria-label\":\"Hue\",\"aria-valuenow\":b(t),\"aria-valuemax\":\"360\",\"aria-valuemin\":\"0\"},e.createElement(p,{className:\"react-colorful__hue-pointer\",left:t/360,color:q({h:t,s:100,v:100,a:1})})))}),T=e.memo(function(r){var t=r.hsva,n=r.onChange,o={backgroundColor:q({h:t.h,s:100,v:100,a:1})};return e.createElement(\"div\",{className:\"react-colorful__saturation\",style:o},e.createElement(m,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:s(t.s+100*e.left,0,100),v:s(t.v-100*e.top,0,100)})},\"aria-label\":\"Color\",\"aria-valuetext\":\"Saturation \"+b(t.s)+\"%, Brightness \"+b(t.v)+\"%\"},e.createElement(p,{className:\"react-colorful__saturation-pointer\",top:1-t.v/100,left:t.s/100,color:q(t)})))}),F=function(e,r){if(e===r)return!0;for(var t in e)if(e[t]!==r[t])return!1;return!0},P=function(e,r){return e.replace(/\\s/g,\"\")===r.replace(/\\s/g,\"\")},X=function(e,r){return e.toLowerCase()===r.toLowerCase()||F(C(e),C(r))};function Y(e,t,l){var u=i(l),c=o(function(){return e.toHsva(t)}),s=c[0],f=c[1],v=r({color:t,hsva:s});n(function(){if(!e.equal(t,v.current.color)){var r=e.toHsva(t);v.current={hsva:r,color:t},f(r)}},[t,e]),n(function(){var r;F(s,v.current.hsva)||e.equal(r=e.fromHsva(s),v.current.color)||(v.current={hsva:s,color:r},u(r))},[s,e,u]);var d=a(function(e){f(function(r){return Object.assign({},r,e)})},[]);return[s,d]}var R,V=\"undefined\"!=typeof window?l:n,$=function(){return R||(\"undefined\"!=typeof __webpack_nonce__?__webpack_nonce__:void 0)},G=function(e){R=e},J=new Map,Q=function(e){V(function(){var r=e.current?e.current.ownerDocument:document;if(void 0!==r&&!J.has(r)){var t=r.createElement(\"style\");t.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:\"\";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\\'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>\\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',J.set(r,t);var n=$();n&&t.setAttribute(\"nonce\",n),r.head.appendChild(t)}},[])},U=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h,className:\"react-colorful__last-control\"}))},W={defaultColor:\"000\",toHsva:x,fromHsva:function(e){return w({h:e.h,s:e.s,v:e.v,a:1})},equal:X},Z=function(r){return e.createElement(U,u({},r,{colorModel:W}))},ee=function(r){var t=r.className,n=r.hsva,o=r.onChange,a={backgroundImage:\"linear-gradient(90deg, \"+k(Object.assign({},n,{a:0}))+\", \"+k(Object.assign({},n,{a:1}))+\")\"},l=g([\"react-colorful__alpha\",t]),u=b(100*n.a);return e.createElement(\"div\",{className:l},e.createElement(\"div\",{className:\"react-colorful__alpha-gradient\",style:a}),e.createElement(m,{onMove:function(e){o({a:e.left})},onKey:function(e){o({a:s(n.a+e.left)})},\"aria-label\":\"Alpha\",\"aria-valuetext\":u+\"%\",\"aria-valuenow\":u,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"},e.createElement(p,{className:\"react-colorful__alpha-pointer\",left:n.a,color:k(n)})))},re=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h}),e.createElement(ee,{hsva:d,onChange:h,className:\"react-colorful__last-control\"}))},te={defaultColor:\"0001\",toHsva:x,fromHsva:w,equal:X},ne=function(r){return e.createElement(re,u({},r,{colorModel:te}))},oe={defaultColor:{h:0,s:0,l:0,a:1},toHsva:N,fromHsva:y,equal:F},ae=function(r){return e.createElement(re,u({},r,{colorModel:oe}))},le={defaultColor:\"hsla(0, 0%, 0%, 1)\",toHsva:H,fromHsva:k,equal:P},ue=function(r){return e.createElement(re,u({},r,{colorModel:le}))},ce={defaultColor:{h:0,s:0,l:0},toHsva:function(e){return N({h:e.h,s:e.s,l:e.l,a:1})},fromHsva:function(e){return{h:(r=y(e)).h,s:r.s,l:r.l};var r},equal:F},ie=function(r){return e.createElement(U,u({},r,{colorModel:ce}))},se={defaultColor:\"hsl(0, 0%, 0%)\",toHsva:M,fromHsva:q,equal:P},fe=function(r){return e.createElement(U,u({},r,{colorModel:se}))},ve={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(e){return e},fromHsva:A,equal:F},de=function(r){return e.createElement(re,u({},r,{colorModel:ve}))},he={defaultColor:\"hsva(0, 0%, 0%, 1)\",toHsva:O,fromHsva:function(e){var r=A(e);return\"hsva(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%, \"+r.a+\")\"},equal:P},me=function(r){return e.createElement(re,u({},r,{colorModel:he}))},ge={defaultColor:{h:0,s:0,v:0},toHsva:function(e){return{h:e.h,s:e.s,v:e.v,a:1}},fromHsva:function(e){var r=A(e);return{h:r.h,s:r.s,v:r.v}},equal:F},pe=function(r){return e.createElement(U,u({},r,{colorModel:ge}))},be={defaultColor:\"hsv(0, 0%, 0%)\",toHsva:j,fromHsva:function(e){var r=A(e);return\"hsv(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%)\"},equal:P},_e=function(r){return e.createElement(U,u({},r,{colorModel:be}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(r){return e.createElement(re,u({},r,{colorModel:xe}))},Ee={defaultColor:\"rgba(0, 0, 0, 1)\",toHsva:z,fromHsva:function(e){var r=I(e);return\"rgba(\"+r.r+\", \"+r.g+\", \"+r.b+\", \"+r.a+\")\"},equal:P},He=function(r){return e.createElement(re,u({},r,{colorModel:Ee}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return L({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(r=I(e)).r,g:r.g,b:r.b};var r},equal:F},Ne=function(r){return e.createElement(U,u({},r,{colorModel:Me}))},we={defaultColor:\"rgb(0, 0, 0)\",toHsva:B,fromHsva:function(e){var r=I(e);return\"rgb(\"+r.r+\", \"+r.g+\", \"+r.b+\")\"},equal:P},ye=function(r){return e.createElement(U,u({},r,{colorModel:we}))},qe=/^#?([0-9A-F]{3,8})$/i,ke=function(r){var t=r.color,l=void 0===t?\"\":t,s=r.onChange,f=r.onBlur,v=r.escape,d=r.validate,h=r.format,m=r.process,g=c(r,[\"color\",\"onChange\",\"onBlur\",\"escape\",\"validate\",\"format\",\"process\"]),p=o(function(){return v(l)}),b=p[0],_=p[1],x=i(s),C=i(f),E=a(function(e){var r=v(e.target.value);_(r),d(r)&&x(m?m(r):r)},[v,m,d,x]),H=a(function(e){d(e.target.value)||_(v(l)),C(e)},[l,v,d,C]);return n(function(){_(v(l))},[l,v]),e.createElement(\"input\",u({},g,{value:h?h(b):b,spellCheck:\"false\",onChange:E,onBlur:H}))},Ie=function(e){return\"#\"+e},Oe=function(r){var t=r.prefixed,n=r.alpha,o=c(r,[\"prefixed\",\"alpha\"]),l=a(function(e){return e.replace(/([^0-9A-F]+)/gi,\"\").substring(0,n?8:6)},[n]),i=a(function(e){return function(e,r){var t=qe.exec(e),n=t?t[1].length:0;return 3===n||6===n||!!r&&4===n||!!r&&8===n}(e,n)},[n]);return e.createElement(ke,u({},o,{escape:l,format:t?Ie:void 0,process:Ie,validate:i}))};export{ne as HexAlphaColorPicker,Oe as HexColorInput,Z as HexColorPicker,ie as HslColorPicker,fe as HslStringColorPicker,ae as HslaColorPicker,ue as HslaStringColorPicker,pe as HsvColorPicker,_e as HsvStringColorPicker,de as HsvaColorPicker,me as HsvaStringColorPicker,Ne as RgbColorPicker,ye as RgbStringColorPicker,Ce as RgbaColorPicker,He as RgbaStringColorPicker,G as setNonce};\n//# sourceMappingURL=index.module.js.map\n","import React from 'react';\nimport clsx from 'clsx';\nimport {ButtonBase} from '../buttons/button-base';\n\ntype Props = {\n  onChange?: (e: string) => void;\n  value?: string;\n  colors: string[];\n};\nexport function ColorSwatch({onChange, value, colors}: Props) {\n  const presetButtons = colors.map(color => {\n    const isSelected = value === color;\n    return (\n      <ButtonBase\n        key={color}\n        onClick={() => {\n          onChange?.(color);\n        }}\n        className={clsx(\n          'relative block flex-shrink-0 w-26 h-26 border rounded',\n          isSelected && 'shadow-md'\n        )}\n        style={{backgroundColor: color}}\n      >\n        {isSelected && (\n          <span className=\"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white\" />\n        )}\n      </ButtonBase>\n    );\n  });\n\n  return <div className=\"flex flex-wrap gap-6\">{presetButtons}</div>;\n}\n","import {message} from '@common/i18n/message';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport const ColorPresets: {\n  color: string;\n  name: MessageDescriptor;\n  foreground?: string;\n}[] = [\n  {\n    color: 'rgb(255, 255, 255)',\n    name: message('White'),\n  },\n  {\n    color: 'rgb(239,245,245)',\n    name: message('Solitude'),\n  },\n  {\n    color: 'rgb(245,213,174)',\n    name: message('Wheat'),\n  },\n  {\n    color: 'rgb(253,227,167)',\n    name: message('Cape Honey'),\n  },\n  {\n    color: 'rgb(242,222,186)',\n    name: message('Milk punch'),\n  },\n  {\n    color: 'rgb(97,118,75)',\n    name: message('Dingy'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(4, 147, 114)',\n    name: message('Aquamarine'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(222,245,229)',\n    name: message('Cosmic Latte'),\n  },\n  {\n    color: 'rgb(233,119,119)',\n    name: message('Geraldine'),\n    foreground: 'rgb(90,14,14)',\n  },\n  {\n    color: 'rgb(247,164,164)',\n    name: message('Sundown'),\n  },\n  {\n    color: 'rgb(30,139,195)',\n    name: message('Pelorous'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(142,68,173)',\n    name: message('Deep Lilac'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(108,74,182)',\n    name: message('Blue marguerite'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(139,126,116)',\n    name: message('Americano'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(0,0,0)',\n    name: message('Black'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(64,66,88)',\n    name: message('Blue zodiac'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n  {\n    color: 'rgb(101,100,124)',\n    name: message('Comet'),\n    foreground: 'rgb(255, 255, 255)',\n  },\n];\n","import {HexColorInput, HexColorPicker} from 'react-colorful';\nimport React, {useState} from 'react';\nimport {parseColor} from '@react-stately/color';\nimport {ColorSwatch} from './color-swatch';\nimport {getInputFieldClassNames} from '../forms/input-field/get-input-field-class-names';\nimport {ColorPresets} from '@common/ui/color-picker/color-presets';\n\nconst DefaultPresets = ColorPresets.map(({color}) => color).slice(0, 14);\n\ntype Props = {\n  defaultValue?: string;\n  onChange?: (e: string) => void;\n  colorPresets?: string[];\n  showInput?: boolean;\n};\nexport function ColorPicker({\n  defaultValue,\n  onChange,\n  colorPresets,\n  showInput,\n}: Props) {\n  const [color, setColor] = useState<string | undefined>(defaultValue);\n\n  const presets: string[] = colorPresets || DefaultPresets;\n\n  const style = getInputFieldClassNames({size: 'sm'});\n\n  return (\n    <div>\n      <HexColorPicker\n        className=\"!w-auto\"\n        color={color}\n        onChange={newColor => {\n          onChange?.(newColor);\n          setColor(newColor);\n        }}\n      />\n      <div className=\"py-20 px-12\">\n        {presets && (\n          <ColorSwatch\n            colors={presets}\n            onChange={newColor => {\n              if (newColor) {\n                const hex = parseColor(newColor).toString('hex');\n                onChange?.(hex);\n                setColor(hex);\n              }\n            }}\n            value={color}\n          />\n        )}\n        {showInput && (\n          <div className=\"pt-20\">\n            <HexColorInput\n              autoComplete=\"off\"\n              role=\"textbox\"\n              autoCorrect=\"off\"\n              spellCheck=\"false\"\n              required\n              aria-label=\"Hex color\"\n              prefixed\n              className={style.input}\n              color={color}\n              onChange={newColor => {\n                onChange?.(newColor);\n                setColor(newColor);\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import {ColorPicker} from './color-picker';\nimport {DialogFooter} from '../overlays/dialog/dialog-footer';\nimport {Button} from '../buttons/button';\nimport {useDialogContext} from '../overlays/dialog/dialog-context';\nimport {Dialog} from '../overlays/dialog/dialog';\nimport {Trans} from '../../i18n/trans';\n\ninterface ColorPickerDialogProps {\n  hideFooter?: boolean;\n  showInput?: boolean;\n}\nexport function ColorPickerDialog({\n  hideFooter = false,\n  showInput = true,\n}: ColorPickerDialogProps) {\n  const {close, value, setValue, initialValue} = useDialogContext<\n    string | null\n  >();\n  // todo: remove this once pixie and bedrive are refactored to use dialogTrigger currentValue (use \"currentValue\" for defaultValue as well)\n  //const initialValue = useRef(defaultValue);\n\n  return (\n    <Dialog size=\"2xs\">\n      <ColorPicker\n        showInput={showInput}\n        defaultValue={initialValue ? initialValue : ''}\n        onChange={newValue => setValue(newValue)}\n      />\n      {!hideFooter && (\n        <DialogFooter dividerTop>\n          <Button variant=\"text\" size=\"xs\" onClick={() => close()}>\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            size=\"xs\"\n            onClick={() => close(value)}\n          >\n            <Trans message=\"Apply\" />\n          </Button>\n        </DialogFooter>\n      )}\n    </Dialog>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DragIndicatorIcon = createSvgIcon(\n  <path d=\"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'DragIndicatorOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  const entries: FileSystemEntry[] = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry as FileSystemFileEntry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n    }\n  }\n}\n\nasync function* getEntriesFromDirectory(\n  item: FileSystemDirectoryEntry\n): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@common/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {\n  DropPosition,\n  SortSession,\n} from '@common/ui/interactions/dnd/sortable/use-sortable';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\n\nexport const sortableLineStrategy: SortableStrategy = {\n  onDragStart: () => {},\n  onDragEnter: () => {},\n  onDragOver: ({e, ref, item, sortSession, onDropPositionChange}) => {\n    const previousPosition = sortSession.dropPosition;\n    let newPosition: DropPosition = null;\n\n    const rect = droppables.get(item)?.rect;\n    if (rect) {\n      const midY = rect.top + rect.height / 2;\n      if (e.clientY <= midY) {\n        newPosition = 'before';\n      } else if (e.clientY >= midY) {\n        newPosition = 'after';\n      }\n    }\n\n    if (newPosition !== previousPosition) {\n      const overIndex = sortSession.sortables.indexOf(item);\n      sortSession.dropPosition = newPosition;\n      onDropPositionChange?.(sortSession.dropPosition);\n\n      clearLinePreview(sortSession);\n      if (ref.current) {\n        if (sortSession.dropPosition === 'after') {\n          addLinePreview(ref.current, 'bottom', sortSession);\n        } else {\n          // if it's the first row, add preview to the top border, as there's no previous element\n          if (overIndex === 0) {\n            addLinePreview(ref.current, 'top', sortSession);\n            // otherwise add preview to the bottom border of the previous row\n          } else {\n            const droppableId = sortSession.sortables[overIndex - 1];\n            const droppable = droppables.get(droppableId);\n            if (droppable?.ref.current) {\n              addLinePreview(droppable.ref.current, 'bottom', sortSession);\n            }\n          }\n        }\n      }\n\n      const itemIndex = sortSession.sortables.indexOf(item);\n\n      // don't move item at all if hovering over itself\n      if (sortSession.activeIndex === itemIndex) {\n        sortSession.finalIndex = sortSession.activeIndex;\n        return;\n      }\n\n      // adjust final drop index based on whether we're dropping drag target after or before it's original index\n      // this is needed, so we get the same index if target is dropped after current item or before next item\n      const dragDirection =\n        overIndex > sortSession.activeIndex ? 'after' : 'before';\n      if (dragDirection === 'after') {\n        sortSession.finalIndex =\n          sortSession.dropPosition === 'before' ? itemIndex - 1 : itemIndex;\n      } else {\n        sortSession.finalIndex =\n          sortSession.dropPosition === 'after' ? itemIndex + 1 : itemIndex;\n      }\n    }\n  },\n  onDragEnd: sortSession => {\n    clearLinePreview(sortSession);\n  },\n};\n\nfunction clearLinePreview(sortSession: SortSession) {\n  if (sortSession?.linePreviewEl) {\n    sortSession.linePreviewEl.style.borderBottomColor = '';\n    sortSession.linePreviewEl.style.borderTopColor = '';\n    sortSession.linePreviewEl = undefined;\n  }\n}\n\nfunction addLinePreview(\n  el: HTMLElement,\n  side: 'top' | 'bottom',\n  sortSession: SortSession,\n) {\n  const color = 'rgb(var(--be-primary))';\n  if (side === 'top') {\n    el.style.borderTopColor = color;\n  } else {\n    el.style.borderBottomColor = color;\n  }\n  if (sortSession) {\n    sortSession.linePreviewEl = el;\n  }\n}\n","import {clamp} from '../number/clamp';\n\nexport function moveItemInArray<T = any>(\n  array: T[],\n  fromIndex: number,\n  toIndex: number\n): T[] {\n  const from = clamp(fromIndex, 0, array.length - 1);\n  const to = clamp(toIndex, 0, array.length - 1);\n\n  if (from === to) {\n    return array;\n  }\n\n  const target = array[from];\n  const delta = to < from ? -1 : 1;\n\n  for (let i = from; i !== to; i += delta) {\n    array[i] = array[i + delta];\n  }\n\n  array[to] = target;\n\n  return array;\n}\n","export function moveItemInNewArray<T>(\n  array: T[],\n  from: number,\n  to: number\n): T[] {\n  const newArray = array.slice();\n  newArray.splice(\n    to < 0 ? newArray.length + to : to,\n    0,\n    newArray.splice(from, 1)[0]\n  );\n\n  return newArray;\n}\n","import {moveItemInArray} from '@common/utils/array/move-item-in-array';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\nimport {moveItemInNewArray} from '@common/utils/array/move-item-in-new-array';\nimport type {SortSession} from '@common/ui/interactions/dnd/sortable/use-sortable';\nimport type {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nconst transition = 'transform 0.2s cubic-bezier(0.2, 0, 0, 1)';\n\nexport const sortableTransformStrategy: SortableStrategy = {\n  onDragStart: sortSession => {\n    sortSession.sortables.forEach((sortable, index) => {\n      const droppable = droppables.get(sortable);\n      if (!droppable?.ref.current) return;\n\n      droppable.ref.current.style.transition = transition;\n\n      if (sortSession?.activeIndex === index) {\n        droppable.ref.current.style.opacity = '0.4';\n      }\n    });\n  },\n  onDragEnter: (\n    sortSession: SortSession,\n    overIndex: number,\n    currentIndex: number,\n  ) => {\n    moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n    const rects = sortSession.sortables.map(s => droppables.get(s)?.rect);\n\n    sortSession.sortables.forEach((sortable, index) => {\n      if (!sortSession) return;\n\n      const newRects = moveItemInNewArray(\n        rects,\n        overIndex,\n        sortSession.activeIndex,\n      );\n      const oldRect = rects[index];\n      const newRect = newRects[index];\n      const sortableTarget = droppables.get(sortable);\n\n      if (sortableTarget?.ref.current && newRect && oldRect) {\n        const x = newRect.left - oldRect.left;\n        const y = newRect.top - oldRect.top;\n        sortableTarget.ref.current.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n      }\n    });\n\n    sortSession.finalIndex = overIndex;\n  },\n  onDragOver: () => {},\n  onDragEnd: sortSession => {\n    // clear any styles and transforms applied to sortables during sorting\n    sortSession.sortables.forEach(sortable => {\n      const droppable = droppables.get(sortable);\n      if (droppable?.ref.current) {\n        droppable.ref.current.style.transform = '';\n        droppable.ref.current.style.transition = '';\n        droppable.ref.current.style.opacity = '';\n        droppable.ref.current.style.zIndex = '';\n      }\n    });\n  },\n};\n","import {moveItemInArray} from '@common/utils/array/move-item-in-array';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nexport const sortableMoveNodeStrategy: SortableStrategy = {\n  onDragStart: () => {},\n  onDragOver: () => {},\n  onDragEnter: (sortSession, overIndex: number, currentIndex: number) => {\n    const node = droppables.get(sortSession.sortables[currentIndex])?.ref\n      .current;\n    if (node) {\n      moveNode(node, currentIndex, overIndex);\n      moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n      sortSession.finalIndex = overIndex;\n    }\n  },\n  onDragEnd: () => {},\n};\n\nfunction moveNode(el: HTMLElement, currentIndex: number, newIndex: number) {\n  const parentEl = el.parentElement!;\n  if (newIndex < 0) {\n    parentEl.prepend(el);\n  } else {\n    // if parent already contains this node, and we're changing\n    // node's index within parent, need to adjust index by one\n    if (currentIndex > -1 && currentIndex <= newIndex) {\n      newIndex++;\n    }\n    const ref = parentEl.children.item(newIndex);\n    if (ref) {\n      ref.before(el);\n    } else {\n      parentEl.append(el);\n    }\n  }\n}\n","import {DraggableId, DragPreviewRenderer, useDraggable} from '../use-draggable';\nimport {useDroppable} from '../use-droppable';\nimport {RefObject, useEffect} from 'react';\nimport {getScrollParent, mergeProps} from '@react-aria/utils';\nimport {droppables} from '../drag-state';\nimport {updateRects} from '@common/ui/interactions/dnd/update-rects';\nimport {sortableLineStrategy} from '@common/ui/interactions/dnd/sortable/sortable-line-strategy';\nimport {sortableTransformStrategy} from '@common/ui/interactions/dnd/sortable/sortable-transform-strategy';\nimport {sortableMoveNodeStrategy} from '@common/ui/interactions/dnd/sortable/sortable-move-node-strategy';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nexport interface SortSession {\n  // items in this list will be moved when user is sorting\n  sortables: DraggableId[];\n\n  // sortable user started dragging to start this session\n  activeSortable: DraggableId;\n  activeIndex: number;\n\n  // final index sortable was dropped in and should be moved to\n  finalIndex: number;\n\n  // drop position for displaying line preview\n  dropPosition: DropPosition;\n  // element that currently has a line preview at the top or bottom\n  linePreviewEl?: HTMLElement;\n  scrollParent?: Element;\n  scrollListener: () => void;\n  ref: RefObject<HTMLElement>;\n}\n\nlet sortSession: null | SortSession = null;\n\nexport type DropPosition = 'before' | 'after' | null;\n\ntype StrategyName = 'line' | 'liveSort' | 'moveNode';\n\nconst strategies: Record<StrategyName, SortableStrategy> = {\n  line: sortableLineStrategy,\n  liveSort: sortableTransformStrategy,\n  moveNode: sortableMoveNodeStrategy,\n};\n\nexport interface UseSortableProps {\n  item: DraggableId;\n  items: DraggableId[];\n  onSortStart?: () => void;\n  onSortEnd?: (oldIndex: number, newIndex: number) => void;\n  onDragEnd?: () => void;\n  onDropPositionChange?: (dropPosition: DropPosition) => void;\n  ref: RefObject<HTMLElement>;\n  type: string;\n  preview?: RefObject<DragPreviewRenderer>;\n  strategy?: StrategyName;\n  disabled?: boolean;\n}\nexport function useSortable({\n  item,\n  items,\n  type,\n  ref,\n  onSortEnd,\n  onSortStart,\n  onDragEnd,\n  preview,\n  disabled,\n  onDropPositionChange,\n  strategy = 'liveSort',\n}: UseSortableProps) {\n  // todo: issue with sorting after scrolling menu editor item list\n\n  // update sortables and active index, in case we lazy load more items while sorting\n  useEffect(() => {\n    if (sortSession && sortSession.sortables.length !== items.length) {\n      sortSession.sortables = [...items];\n      sortSession.activeIndex = items.indexOf(item);\n    }\n  }, [items, item]);\n\n  const {draggableProps, dragHandleRef} = useDraggable({\n    id: item,\n    ref,\n    type,\n    preview,\n    disabled,\n    onDragStart: () => {\n      sortSession = {\n        sortables: [...items],\n        activeSortable: item,\n        activeIndex: items.indexOf(item),\n        finalIndex: items.indexOf(item),\n        dropPosition: null,\n        ref,\n        scrollParent: ref.current ? getScrollParent(ref.current) : undefined,\n        scrollListener: () => {\n          updateRects(droppables);\n        },\n      };\n      strategies[strategy].onDragStart(sortSession);\n\n      onSortStart?.();\n      sortSession.scrollParent?.addEventListener(\n        'scroll',\n        sortSession.scrollListener,\n      );\n    },\n    onDragEnd: () => {\n      if (!sortSession) return;\n\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n      if (sortSession.activeIndex !== sortSession.finalIndex) {\n        onSortEnd?.(sortSession.activeIndex, sortSession.finalIndex);\n      }\n      sortSession.scrollParent?.removeEventListener(\n        'scroll',\n        sortSession.scrollListener,\n      );\n      strategies[strategy].onDragEnd(sortSession);\n      // call \"onDragEnd\" after \"onSortEnd\", so listener has a chance to use sort session data\n      onDragEnd?.();\n      sortSession = null;\n    },\n    getData: () => {},\n  });\n\n  const {droppableProps} = useDroppable({\n    id: item,\n    ref,\n    types: [type],\n    disabled,\n    allowDragEventsFromItself: true,\n    onDragOver: (target, e) => {\n      if (!sortSession) return;\n      strategies[strategy].onDragOver({\n        e,\n        ref,\n        item,\n        sortSession,\n        onDropPositionChange,\n      });\n    },\n    onDragEnter: () => {\n      if (!sortSession) return;\n      const overIndex = sortSession.sortables.indexOf(item);\n      const oldIndex = sortSession.sortables.indexOf(\n        sortSession.activeSortable,\n      );\n      strategies[strategy].onDragEnter(sortSession, overIndex, oldIndex);\n    },\n    onDragLeave: () => {\n      if (!sortSession) return;\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n    },\n  });\n\n  return {\n    sortableProps: {...mergeProps(draggableProps, droppableProps)},\n    dragHandleRef,\n  };\n}\n","import React, {MutableRefObject, ReactNode, Suspense, useState} from 'react';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../i18n/trans';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {ProgressCircle} from '../ui/progress/progress-circle';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../ui/buttons/button';\nimport type ReactAce from 'react-ace';\n\nconst AceEditor = React.lazy(() => import('./ace-editor'));\n\ninterface TextEditorSourcecodeDialogProps {\n  defaultValue: string;\n  mode?: 'css' | 'html' | 'php_laravel_blade';\n  title: ReactNode;\n  onSave?: (value?: string) => void;\n  isSaving?: boolean;\n  footerStartAction?: ReactNode;\n  beautify?: boolean;\n  editorRef?: MutableRefObject<ReactAce | null>;\n}\nexport function AceDialog({\n  defaultValue,\n  mode = 'html',\n  title,\n  onSave,\n  isSaving,\n  footerStartAction,\n  beautify,\n  editorRef,\n}: TextEditorSourcecodeDialogProps) {\n  const [value, setValue] = useState(defaultValue);\n  const [isValid, setIsValid] = useState<boolean>(true);\n\n  return (\n    <Dialog size=\"fullscreen\" className=\"h-full w-full\">\n      <DialogHeader>{title}</DialogHeader>\n      <DialogBody className=\"relative flex-auto\" padding=\"p-0\">\n        <Suspense\n          fallback={\n            <div className=\"flex h-400 w-full items-center justify-center\">\n              <ProgressCircle\n                aria-label=\"Loading editor...\"\n                isIndeterminate\n                size=\"md\"\n              />\n            </div>\n          }\n        >\n          <AceEditor\n            beautify={beautify}\n            mode={mode}\n            onChange={newValue => setValue(newValue)}\n            defaultValue={value || ''}\n            onIsValidChange={setIsValid}\n            editorRef={editorRef}\n          />\n        </Suspense>\n      </DialogBody>\n      <Footer\n        disabled={!isValid || isSaving}\n        value={value}\n        onSave={onSave}\n        startAction={footerStartAction}\n      />\n    </Dialog>\n  );\n}\n\ninterface FooterProps {\n  disabled: boolean | undefined;\n  value?: string;\n  onSave?: (value?: string) => void;\n  startAction?: ReactNode;\n}\nfunction Footer({disabled, value, onSave, startAction}: FooterProps) {\n  const {close} = useDialogContext();\n  return (\n    <DialogFooter dividerTop startAction={startAction}>\n      <Button onClick={() => close()}>\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        disabled={disabled}\n        variant=\"flat\"\n        color=\"primary\"\n        onClick={() => {\n          if (onSave) {\n            onSave(value);\n          } else {\n            close(value);\n          }\n        }}\n      >\n        <Trans message=\"Save\" />\n      </Button>\n    </DialogFooter>\n  );\n}\n","export default \"__VITE_ASSET__8acde003__\"","import {Permission} from './permission';\nimport {Subscription} from '../billing/subscription';\nimport {Role} from './role';\nimport {SocialProfile} from './social-profile';\nimport {AccessToken} from './access-token';\nimport type {ActiveSession} from '@common/auth/ui/account-settings/sessions-panel/requests/use-user-sessions';\n\nexport const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  display_name: string;\n  username?: string;\n  first_name?: string;\n  last_name?: string;\n  avatar?: string;\n  email_verified_at: string;\n  permissions?: Permission[];\n  email: string;\n  password: string;\n  language: string;\n  timezone: string;\n  country: string;\n  created_at: string;\n  updated_at: string;\n  subscriptions?: Omit<Subscription, 'user'>[];\n  roles: Role[];\n  social_profiles: SocialProfile[];\n  tokens?: AccessToken[];\n  has_password: boolean;\n  available_space: number | null;\n  unread_notifications_count?: number;\n  card_last_four?: number;\n  card_brand?: string;\n  card_expires?: string;\n  model_type: typeof USER_MODEL;\n  banned_at?: string;\n  followed_users?: Omit<User, 'followed_users' | 'followers'>[];\n  followers_count?: number;\n  followed_users_count?: number;\n  followers?: Omit<User, 'followed_users' | 'followers'>[];\n  last_login?: ActiveSession;\n  bans?: {\n    id: number;\n    comment: string;\n    expired_at?: string;\n  }[];\n  two_factor_confirmed_at?: string;\n  two_factor_recovery_codes?: string[];\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../../datatable/filters/backend-filter';\nimport {message} from '../../i18n/message';\nimport {USER_MODEL} from '../../auth/user';\nimport {SiteConfigContextValue} from '@common/core/settings/site-config-context';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const CustomPageDatatableFilters = (\n  config: SiteConfigContextValue\n): BackendFilter[] => {\n  const dynamicFilters: BackendFilter[] =\n    config.customPages.types.length > 1\n      ? [\n          {\n            control: {\n              type: FilterControlType.Select,\n              defaultValue: 'default',\n              options: config.customPages.types.map(type => ({\n                value: type.type,\n                label: type.label,\n                key: type.type,\n              })),\n            },\n\n            key: 'type',\n            label: message('Type'),\n            description: message('Type of the page'),\n            defaultOperator: FilterOperator.eq,\n          },\n        ]\n      : [];\n\n  return [\n    {\n      key: 'user_id',\n      label: message('User'),\n      description: message('User page was created by'),\n      defaultOperator: FilterOperator.eq,\n      control: {\n        type: FilterControlType.SelectModel,\n        model: USER_MODEL,\n      },\n    },\n    ...dynamicFilters,\n    createdAtFilter({\n      description: message('Date page was created'),\n    }),\n    updatedAtFilter({\n      description: message('Date page was last updated'),\n    }),\n  ];\n};\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const TuneIcon = createSvgIcon(\n  <path d=\"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z\" />\n, 'TuneOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","import {parseColor} from '@react-stately/color';\n\nexport function themeValueToHex(value: string): string {\n  try {\n    return parseColor(`rgb(${value.split(' ').join(',')})`).toString('hex');\n  } catch (e) {\n    return value;\n  }\n}\n","import React, {RefObject} from 'react';\n\nexport interface TabsContext {\n  selectedTab: number;\n  setSelectedTab: (newTab: number) => void;\n  tabsRef: RefObject<HTMLElement[]>;\n  size: 'sm' | 'md';\n  isLazy?: boolean;\n  id: string;\n}\n\nexport const TabContext = React.createContext<TabsContext>(null!);\n","import React, {ReactElement, useId, useMemo, useRef} from 'react';\nimport clsx from 'clsx';\nimport {useControlledState} from '@react-stately/utils';\nimport {TabContext, TabsContext} from './tabs-context';\nimport {TabListProps} from './tab-list';\nimport {TabPanelsProps} from './tab-panels';\n\nexport interface TabsProps {\n  children: [ReactElement<TabListProps>, ReactElement<TabPanelsProps>];\n  size?: 'sm' | 'md';\n  className?: string;\n  selectedTab?: number;\n  defaultSelectedTab?: number;\n  onTabChange?: (newTab: number) => void;\n  isLazy?: boolean;\n  overflow?: string;\n}\n\nexport function Tabs(props: TabsProps) {\n  const {\n    size = 'md',\n    children,\n    className,\n    isLazy,\n    overflow = 'overflow-hidden',\n  } = props;\n\n  const tabsRef = useRef<HTMLButtonElement[]>([]);\n  const id = useId();\n\n  const [selectedTab, setSelectedTab] = useControlledState(\n    props.selectedTab,\n    props.defaultSelectedTab || 0,\n    props.onTabChange\n  );\n\n  const ContextValue: TabsContext = useMemo(() => {\n    return {\n      selectedTab,\n      setSelectedTab,\n      tabsRef,\n      size,\n      isLazy,\n      id,\n    };\n  }, [selectedTab, id, isLazy, setSelectedTab, size]);\n\n  return (\n    <TabContext.Provider value={ContextValue}>\n      <div className={clsx(className, overflow, 'max-w-full')}>{children}</div>\n    </TabContext.Provider>\n  );\n}\n","import React, {useContext, useState} from 'react';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport clsx from 'clsx';\nimport {TabContext} from './tabs-context';\n\ninterface TabLineStyle {\n  width?: string;\n  transform?: string;\n  className?: string;\n}\n\nexport function TabLine() {\n  const {tabsRef, selectedTab} = useContext(TabContext);\n  const [style, setStyle] = useState<TabLineStyle>({\n    width: undefined,\n    transform: undefined,\n    className: undefined,\n  });\n\n  useLayoutEffect(() => {\n    if (selectedTab != null && tabsRef.current) {\n      const el = tabsRef.current[selectedTab];\n      if (!el) return;\n\n      setStyle(prevState => {\n        return {\n          width: `${el.offsetWidth}px`,\n          transform: `translateX(${el.offsetLeft}px)`,\n          // disable initial transition for tabline\n          className: prevState.width === undefined ? '' : 'transition-all',\n        };\n      });\n    }\n  }, [setStyle, selectedTab, tabsRef]);\n\n  return (\n    <div\n      className={clsx(\n        'absolute bottom-0 left-0 h-2 bg-primary',\n        style.className\n      )}\n      role=\"presentation\"\n      style={{width: style.width, transform: style.transform}}\n    />\n  );\n}\n","import React, {Children, cloneElement, isValidElement, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {FocusScope} from '@react-aria/focus';\nimport {TabProps} from './tab';\nimport {TabLine} from './tab-line';\n\nexport interface TabListProps {\n  children: ReactNode;\n  // center tabs within tablist\n  center?: boolean;\n  // expand tabs to fill in tablist space fully. By default, tabs are only as wide as their content.\n  expand?: boolean;\n  className?: string;\n}\nexport function TabList({children, center, expand, className}: TabListProps) {\n  const childrenArray = Children.toArray(children);\n\n  return (\n    <FocusScope>\n      <div\n        className={clsx(\n          // hide scrollbar completely on mobile, show compact one on desktop\n          'flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar',\n          className\n        )}\n        role=\"tablist\"\n        aria-orientation=\"horizontal\"\n      >\n        {childrenArray.map((child, index) => {\n          if (isValidElement<TabProps>(child)) {\n            return cloneElement<TabProps>(child, {\n              index,\n              className: clsx(\n                child.props.className,\n                expand && 'flex-auto',\n                center && index === 0 && 'ml-auto',\n                center && index === childrenArray.length - 1 && 'mr-auto'\n              ),\n            });\n          }\n          return null;\n        })}\n        <TabLine />\n      </div>\n    </FocusScope>\n  );\n}\n","import React, {JSXElementConstructor, ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {useFocusManager} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\nimport {LinkProps} from 'react-router-dom';\n\nexport interface TabProps {\n  className?: string;\n  index?: number;\n  children: ReactNode;\n  isDisabled?: boolean;\n  padding?: string;\n  elementType?: 'button' | 'a' | JSXElementConstructor<any>;\n  to?: LinkProps['to'];\n  relative?: LinkProps['relative'];\n  replace?: LinkProps['replace'];\n  width?: string;\n}\nexport function Tab({\n  index,\n  className,\n  isDisabled,\n  children,\n  padding: paddingProp,\n  elementType = 'button',\n  to,\n  relative,\n  width = 'min-w-min',\n}: TabProps) {\n  const {\n    selectedTab,\n    setSelectedTab,\n    tabsRef,\n    size = 'md',\n    id,\n  } = useContext(TabContext);\n  const isSelected = index === selectedTab;\n  const focusManager = useFocusManager();\n  const padding = paddingProp || (size === 'sm' ? 'px-12' : 'px-18');\n\n  const mergedClassname = clsx(\n    'tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors',\n    'focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer',\n    width,\n    textColor({isDisabled, isSelected}),\n    className,\n    size === 'md' && `${padding} h-48`,\n    size === 'sm' && `${padding} h-32`,\n    isDisabled && 'pointer-events-none',\n  );\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        focusManager?.focusNext();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n\n  const tabIndex = isSelected ? 0 : -1;\n  const Element = elementType;\n\n  return (\n    <Element\n      disabled={isDisabled}\n      id={`${id}-${index}-tab`}\n      aria-controls={`${id}-${index}-tabpanel`}\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={isSelected}\n      tabIndex={isDisabled ? undefined : tabIndex}\n      onKeyDown={onKeyDown}\n      onClick={() => {\n        setSelectedTab(index!);\n      }}\n      to={to}\n      relative={relative}\n      className={mergedClassname}\n      ref={(el: HTMLElement) => {\n        if (tabsRef.current && el) {\n          tabsRef.current[index!] = el;\n        }\n      }}\n    >\n      {children}\n    </Element>\n  );\n}\n\ninterface TextColorProps {\n  isDisabled?: boolean;\n  isSelected: boolean;\n}\nfunction textColor({isDisabled, isSelected}: TextColorProps): string {\n  if (isDisabled) {\n    return 'text-disabled cursor-default';\n  }\n  if (isSelected) {\n    return 'text-primary';\n  }\n  return 'text-muted hover:text-main';\n}\n","import React, {\n  Children,\n  cloneElement,\n  ComponentPropsWithoutRef,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\n\nexport interface TabPanelsProps {\n  children: ReactNode;\n  className?: string;\n}\nexport function TabPanels({children, className}: TabPanelsProps) {\n  const {selectedTab, isLazy} = useContext(TabContext);\n\n  // filter out falsy values, in case of conditional rendering\n  const panelArray = Children.toArray(children).filter(p => !!p);\n\n  let rendered: ReactNode;\n  if (isLazy) {\n    const el = panelArray[selectedTab] as ReactElement;\n    rendered = isValidElement(el)\n      ? cloneElement<TabPanelProps>(panelArray[selectedTab] as ReactElement, {\n          index: selectedTab,\n        })\n      : null;\n  } else {\n    rendered = panelArray.map((panel, index) => {\n      if (isValidElement<TabPanelsProps>(panel)) {\n        const isSelected = index === selectedTab;\n        return cloneElement<TabPanelProps>(panel, {\n          index,\n          'aria-hidden': !isSelected,\n          className: !isSelected\n            ? clsx(panel.props.className, 'hidden')\n            : panel.props.className,\n        });\n      }\n      return null;\n    });\n  }\n\n  return <div className={className}>{rendered}</div>;\n}\n\ninterface TabPanelProps extends ComponentPropsWithoutRef<'div'> {\n  className?: string;\n  children: ReactNode;\n  index?: number;\n}\nexport function TabPanel({\n  className,\n  children,\n  index,\n  ...domProps\n}: TabPanelProps) {\n  const {id} = useContext(TabContext);\n\n  const [tabIndex, setTabIndex] = useState<number | undefined>(0);\n  const ref = useRef<HTMLDivElement>(null);\n\n  // The tabpanel should have tabIndex=0 when there are no tabbable elements within it.\n  // Otherwise, tabbing from the focused tab should go directly to the first tabbable element\n  // within the tabpanel.\n  useLayoutEffect(() => {\n    if (ref?.current) {\n      const update = () => {\n        // Detect if there are any tabbable elements and update the tabIndex accordingly.\n        const walker = getFocusableTreeWalker(ref.current!, {tabbable: true});\n        setTabIndex(walker.nextNode() ? undefined : 0);\n      };\n\n      update();\n\n      // Update when new elements are inserted, or the tabIndex/disabled attribute updates.\n      const observer = new MutationObserver(update);\n      observer.observe(ref.current, {\n        subtree: true,\n        childList: true,\n        attributes: true,\n        attributeFilter: ['tabIndex', 'disabled'],\n      });\n\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [ref]);\n\n  return (\n    <div\n      tabIndex={tabIndex}\n      ref={ref}\n      id={`${id}-${index}-tabpanel`}\n      aria-labelledby={`${id}-${index}-tab`}\n      className={clsx(className, 'focus-visible:outline-primary-light')}\n      role=\"tabpanel\"\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","import {useCallback, useRef, useState} from 'react';\n\nexport function useStickySentinel() {\n  const [isSticky, setIsSticky] = useState(false);\n\n  const observerRef = useRef<IntersectionObserver>();\n\n  const sentinelRef = useCallback((sentinel: HTMLDivElement | null) => {\n    if (sentinel) {\n      const observer = new IntersectionObserver(\n        ([e]) => setIsSticky(e.intersectionRatio < 1),\n        {threshold: [1]}\n      );\n      observerRef.current = observer;\n      observer.observe(sentinel);\n    } else if (observerRef.current) {\n      observerRef.current?.disconnect();\n    }\n  }, []);\n\n  return {isSticky, sentinelRef};\n}\n","\n;(function (name, root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n    module.exports['default'] = factory()\n  }\n  /* istanbul ignore next */\n  else if (typeof define === 'function' && define.amd) {\n    define(factory)\n  }\n  else {\n    root[name] = factory()\n  }\n}('slugify', this, function () {\n  var charMap = JSON.parse('{\"$\":\"dollar\",\"%\":\"percent\",\"&\":\"and\",\"<\":\"less\",\">\":\"greater\",\"|\":\"or\",\"¢\":\"cent\",\"£\":\"pound\",\"¤\":\"currency\",\"¥\":\"yen\",\"©\":\"(c)\",\"ª\":\"a\",\"®\":\"(r)\",\"º\":\"o\",\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ã\":\"A\",\"Ä\":\"A\",\"Å\":\"A\",\"Æ\":\"AE\",\"Ç\":\"C\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ë\":\"E\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ï\":\"I\",\"Ð\":\"D\",\"Ñ\":\"N\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Õ\":\"O\",\"Ö\":\"O\",\"Ø\":\"O\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ü\":\"U\",\"Ý\":\"Y\",\"Þ\":\"TH\",\"ß\":\"ss\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ã\":\"a\",\"ä\":\"a\",\"å\":\"a\",\"æ\":\"ae\",\"ç\":\"c\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ë\":\"e\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ï\":\"i\",\"ð\":\"d\",\"ñ\":\"n\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"õ\":\"o\",\"ö\":\"o\",\"ø\":\"o\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ü\":\"u\",\"ý\":\"y\",\"þ\":\"th\",\"ÿ\":\"y\",\"Ā\":\"A\",\"ā\":\"a\",\"Ă\":\"A\",\"ă\":\"a\",\"Ą\":\"A\",\"ą\":\"a\",\"Ć\":\"C\",\"ć\":\"c\",\"Č\":\"C\",\"č\":\"c\",\"Ď\":\"D\",\"ď\":\"d\",\"Đ\":\"DJ\",\"đ\":\"dj\",\"Ē\":\"E\",\"ē\":\"e\",\"Ė\":\"E\",\"ė\":\"e\",\"Ę\":\"e\",\"ę\":\"e\",\"Ě\":\"E\",\"ě\":\"e\",\"Ğ\":\"G\",\"ğ\":\"g\",\"Ģ\":\"G\",\"ģ\":\"g\",\"Ĩ\":\"I\",\"ĩ\":\"i\",\"Ī\":\"i\",\"ī\":\"i\",\"Į\":\"I\",\"į\":\"i\",\"İ\":\"I\",\"ı\":\"i\",\"Ķ\":\"k\",\"ķ\":\"k\",\"Ļ\":\"L\",\"ļ\":\"l\",\"Ľ\":\"L\",\"ľ\":\"l\",\"Ł\":\"L\",\"ł\":\"l\",\"Ń\":\"N\",\"ń\":\"n\",\"Ņ\":\"N\",\"ņ\":\"n\",\"Ň\":\"N\",\"ň\":\"n\",\"Ō\":\"O\",\"ō\":\"o\",\"Ő\":\"O\",\"ő\":\"o\",\"Œ\":\"OE\",\"œ\":\"oe\",\"Ŕ\":\"R\",\"ŕ\":\"r\",\"Ř\":\"R\",\"ř\":\"r\",\"Ś\":\"S\",\"ś\":\"s\",\"Ş\":\"S\",\"ş\":\"s\",\"Š\":\"S\",\"š\":\"s\",\"Ţ\":\"T\",\"ţ\":\"t\",\"Ť\":\"T\",\"ť\":\"t\",\"Ũ\":\"U\",\"ũ\":\"u\",\"Ū\":\"u\",\"ū\":\"u\",\"Ů\":\"U\",\"ů\":\"u\",\"Ű\":\"U\",\"ű\":\"u\",\"Ų\":\"U\",\"ų\":\"u\",\"Ŵ\":\"W\",\"ŵ\":\"w\",\"Ŷ\":\"Y\",\"ŷ\":\"y\",\"Ÿ\":\"Y\",\"Ź\":\"Z\",\"ź\":\"z\",\"Ż\":\"Z\",\"ż\":\"z\",\"Ž\":\"Z\",\"ž\":\"z\",\"Ə\":\"E\",\"ƒ\":\"f\",\"Ơ\":\"O\",\"ơ\":\"o\",\"Ư\":\"U\",\"ư\":\"u\",\"ǈ\":\"LJ\",\"ǉ\":\"lj\",\"ǋ\":\"NJ\",\"ǌ\":\"nj\",\"Ș\":\"S\",\"ș\":\"s\",\"Ț\":\"T\",\"ț\":\"t\",\"ə\":\"e\",\"˚\":\"o\",\"Ά\":\"A\",\"Έ\":\"E\",\"Ή\":\"H\",\"Ί\":\"I\",\"Ό\":\"O\",\"Ύ\":\"Y\",\"Ώ\":\"W\",\"ΐ\":\"i\",\"Α\":\"A\",\"Β\":\"B\",\"Γ\":\"G\",\"Δ\":\"D\",\"Ε\":\"E\",\"Ζ\":\"Z\",\"Η\":\"H\",\"Θ\":\"8\",\"Ι\":\"I\",\"Κ\":\"K\",\"Λ\":\"L\",\"Μ\":\"M\",\"Ν\":\"N\",\"Ξ\":\"3\",\"Ο\":\"O\",\"Π\":\"P\",\"Ρ\":\"R\",\"Σ\":\"S\",\"Τ\":\"T\",\"Υ\":\"Y\",\"Φ\":\"F\",\"Χ\":\"X\",\"Ψ\":\"PS\",\"Ω\":\"W\",\"Ϊ\":\"I\",\"Ϋ\":\"Y\",\"ά\":\"a\",\"έ\":\"e\",\"ή\":\"h\",\"ί\":\"i\",\"ΰ\":\"y\",\"α\":\"a\",\"β\":\"b\",\"γ\":\"g\",\"δ\":\"d\",\"ε\":\"e\",\"ζ\":\"z\",\"η\":\"h\",\"θ\":\"8\",\"ι\":\"i\",\"κ\":\"k\",\"λ\":\"l\",\"μ\":\"m\",\"ν\":\"n\",\"ξ\":\"3\",\"ο\":\"o\",\"π\":\"p\",\"ρ\":\"r\",\"ς\":\"s\",\"σ\":\"s\",\"τ\":\"t\",\"υ\":\"y\",\"φ\":\"f\",\"χ\":\"x\",\"ψ\":\"ps\",\"ω\":\"w\",\"ϊ\":\"i\",\"ϋ\":\"y\",\"ό\":\"o\",\"ύ\":\"y\",\"ώ\":\"w\",\"Ё\":\"Yo\",\"Ђ\":\"DJ\",\"Є\":\"Ye\",\"І\":\"I\",\"Ї\":\"Yi\",\"Ј\":\"J\",\"Љ\":\"LJ\",\"Њ\":\"NJ\",\"Ћ\":\"C\",\"Џ\":\"DZ\",\"А\":\"A\",\"Б\":\"B\",\"В\":\"V\",\"Г\":\"G\",\"Д\":\"D\",\"Е\":\"E\",\"Ж\":\"Zh\",\"З\":\"Z\",\"И\":\"I\",\"Й\":\"J\",\"К\":\"K\",\"Л\":\"L\",\"М\":\"M\",\"Н\":\"N\",\"О\":\"O\",\"П\":\"P\",\"Р\":\"R\",\"С\":\"S\",\"Т\":\"T\",\"У\":\"U\",\"Ф\":\"F\",\"Х\":\"H\",\"Ц\":\"C\",\"Ч\":\"Ch\",\"Ш\":\"Sh\",\"Щ\":\"Sh\",\"Ъ\":\"U\",\"Ы\":\"Y\",\"Ь\":\"\",\"Э\":\"E\",\"Ю\":\"Yu\",\"Я\":\"Ya\",\"а\":\"a\",\"б\":\"b\",\"в\":\"v\",\"г\":\"g\",\"д\":\"d\",\"е\":\"e\",\"ж\":\"zh\",\"з\":\"z\",\"и\":\"i\",\"й\":\"j\",\"к\":\"k\",\"л\":\"l\",\"м\":\"m\",\"н\":\"n\",\"о\":\"o\",\"п\":\"p\",\"р\":\"r\",\"с\":\"s\",\"т\":\"t\",\"у\":\"u\",\"ф\":\"f\",\"х\":\"h\",\"ц\":\"c\",\"ч\":\"ch\",\"ш\":\"sh\",\"щ\":\"sh\",\"ъ\":\"u\",\"ы\":\"y\",\"ь\":\"\",\"э\":\"e\",\"ю\":\"yu\",\"я\":\"ya\",\"ё\":\"yo\",\"ђ\":\"dj\",\"є\":\"ye\",\"і\":\"i\",\"ї\":\"yi\",\"ј\":\"j\",\"љ\":\"lj\",\"њ\":\"nj\",\"ћ\":\"c\",\"ѝ\":\"u\",\"џ\":\"dz\",\"Ґ\":\"G\",\"ґ\":\"g\",\"Ғ\":\"GH\",\"ғ\":\"gh\",\"Қ\":\"KH\",\"қ\":\"kh\",\"Ң\":\"NG\",\"ң\":\"ng\",\"Ү\":\"UE\",\"ү\":\"ue\",\"Ұ\":\"U\",\"ұ\":\"u\",\"Һ\":\"H\",\"һ\":\"h\",\"Ә\":\"AE\",\"ә\":\"ae\",\"Ө\":\"OE\",\"ө\":\"oe\",\"Ա\":\"A\",\"Բ\":\"B\",\"Գ\":\"G\",\"Դ\":\"D\",\"Ե\":\"E\",\"Զ\":\"Z\",\"Է\":\"E\\'\",\"Ը\":\"Y\\'\",\"Թ\":\"T\\'\",\"Ժ\":\"JH\",\"Ի\":\"I\",\"Լ\":\"L\",\"Խ\":\"X\",\"Ծ\":\"C\\'\",\"Կ\":\"K\",\"Հ\":\"H\",\"Ձ\":\"D\\'\",\"Ղ\":\"GH\",\"Ճ\":\"TW\",\"Մ\":\"M\",\"Յ\":\"Y\",\"Ն\":\"N\",\"Շ\":\"SH\",\"Չ\":\"CH\",\"Պ\":\"P\",\"Ջ\":\"J\",\"Ռ\":\"R\\'\",\"Ս\":\"S\",\"Վ\":\"V\",\"Տ\":\"T\",\"Ր\":\"R\",\"Ց\":\"C\",\"Փ\":\"P\\'\",\"Ք\":\"Q\\'\",\"Օ\":\"O\\'\\'\",\"Ֆ\":\"F\",\"և\":\"EV\",\"ء\":\"a\",\"آ\":\"aa\",\"أ\":\"a\",\"ؤ\":\"u\",\"إ\":\"i\",\"ئ\":\"e\",\"ا\":\"a\",\"ب\":\"b\",\"ة\":\"h\",\"ت\":\"t\",\"ث\":\"th\",\"ج\":\"j\",\"ح\":\"h\",\"خ\":\"kh\",\"د\":\"d\",\"ذ\":\"th\",\"ر\":\"r\",\"ز\":\"z\",\"س\":\"s\",\"ش\":\"sh\",\"ص\":\"s\",\"ض\":\"dh\",\"ط\":\"t\",\"ظ\":\"z\",\"ع\":\"a\",\"غ\":\"gh\",\"ف\":\"f\",\"ق\":\"q\",\"ك\":\"k\",\"ل\":\"l\",\"م\":\"m\",\"ن\":\"n\",\"ه\":\"h\",\"و\":\"w\",\"ى\":\"a\",\"ي\":\"y\",\"ً\":\"an\",\"ٌ\":\"on\",\"ٍ\":\"en\",\"َ\":\"a\",\"ُ\":\"u\",\"ِ\":\"e\",\"ْ\":\"\",\"٠\":\"0\",\"١\":\"1\",\"٢\":\"2\",\"٣\":\"3\",\"٤\":\"4\",\"٥\":\"5\",\"٦\":\"6\",\"٧\":\"7\",\"٨\":\"8\",\"٩\":\"9\",\"پ\":\"p\",\"چ\":\"ch\",\"ژ\":\"zh\",\"ک\":\"k\",\"گ\":\"g\",\"ی\":\"y\",\"۰\":\"0\",\"۱\":\"1\",\"۲\":\"2\",\"۳\":\"3\",\"۴\":\"4\",\"۵\":\"5\",\"۶\":\"6\",\"۷\":\"7\",\"۸\":\"8\",\"۹\":\"9\",\"฿\":\"baht\",\"ა\":\"a\",\"ბ\":\"b\",\"გ\":\"g\",\"დ\":\"d\",\"ე\":\"e\",\"ვ\":\"v\",\"ზ\":\"z\",\"თ\":\"t\",\"ი\":\"i\",\"კ\":\"k\",\"ლ\":\"l\",\"მ\":\"m\",\"ნ\":\"n\",\"ო\":\"o\",\"პ\":\"p\",\"ჟ\":\"zh\",\"რ\":\"r\",\"ს\":\"s\",\"ტ\":\"t\",\"უ\":\"u\",\"ფ\":\"f\",\"ქ\":\"k\",\"ღ\":\"gh\",\"ყ\":\"q\",\"შ\":\"sh\",\"ჩ\":\"ch\",\"ც\":\"ts\",\"ძ\":\"dz\",\"წ\":\"ts\",\"ჭ\":\"ch\",\"ხ\":\"kh\",\"ჯ\":\"j\",\"ჰ\":\"h\",\"Ṣ\":\"S\",\"ṣ\":\"s\",\"Ẁ\":\"W\",\"ẁ\":\"w\",\"Ẃ\":\"W\",\"ẃ\":\"w\",\"Ẅ\":\"W\",\"ẅ\":\"w\",\"ẞ\":\"SS\",\"Ạ\":\"A\",\"ạ\":\"a\",\"Ả\":\"A\",\"ả\":\"a\",\"Ấ\":\"A\",\"ấ\":\"a\",\"Ầ\":\"A\",\"ầ\":\"a\",\"Ẩ\":\"A\",\"ẩ\":\"a\",\"Ẫ\":\"A\",\"ẫ\":\"a\",\"Ậ\":\"A\",\"ậ\":\"a\",\"Ắ\":\"A\",\"ắ\":\"a\",\"Ằ\":\"A\",\"ằ\":\"a\",\"Ẳ\":\"A\",\"ẳ\":\"a\",\"Ẵ\":\"A\",\"ẵ\":\"a\",\"Ặ\":\"A\",\"ặ\":\"a\",\"Ẹ\":\"E\",\"ẹ\":\"e\",\"Ẻ\":\"E\",\"ẻ\":\"e\",\"Ẽ\":\"E\",\"ẽ\":\"e\",\"Ế\":\"E\",\"ế\":\"e\",\"Ề\":\"E\",\"ề\":\"e\",\"Ể\":\"E\",\"ể\":\"e\",\"Ễ\":\"E\",\"ễ\":\"e\",\"Ệ\":\"E\",\"ệ\":\"e\",\"Ỉ\":\"I\",\"ỉ\":\"i\",\"Ị\":\"I\",\"ị\":\"i\",\"Ọ\":\"O\",\"ọ\":\"o\",\"Ỏ\":\"O\",\"ỏ\":\"o\",\"Ố\":\"O\",\"ố\":\"o\",\"Ồ\":\"O\",\"ồ\":\"o\",\"Ổ\":\"O\",\"ổ\":\"o\",\"Ỗ\":\"O\",\"ỗ\":\"o\",\"Ộ\":\"O\",\"ộ\":\"o\",\"Ớ\":\"O\",\"ớ\":\"o\",\"Ờ\":\"O\",\"ờ\":\"o\",\"Ở\":\"O\",\"ở\":\"o\",\"Ỡ\":\"O\",\"ỡ\":\"o\",\"Ợ\":\"O\",\"ợ\":\"o\",\"Ụ\":\"U\",\"ụ\":\"u\",\"Ủ\":\"U\",\"ủ\":\"u\",\"Ứ\":\"U\",\"ứ\":\"u\",\"Ừ\":\"U\",\"ừ\":\"u\",\"Ử\":\"U\",\"ử\":\"u\",\"Ữ\":\"U\",\"ữ\":\"u\",\"Ự\":\"U\",\"ự\":\"u\",\"Ỳ\":\"Y\",\"ỳ\":\"y\",\"Ỵ\":\"Y\",\"ỵ\":\"y\",\"Ỷ\":\"Y\",\"ỷ\":\"y\",\"Ỹ\":\"Y\",\"ỹ\":\"y\",\"–\":\"-\",\"‘\":\"\\'\",\"’\":\"\\'\",\"“\":\"\\\\\\\"\",\"”\":\"\\\\\\\"\",\"„\":\"\\\\\\\"\",\"†\":\"+\",\"•\":\"*\",\"…\":\"...\",\"₠\":\"ecu\",\"₢\":\"cruzeiro\",\"₣\":\"french franc\",\"₤\":\"lira\",\"₥\":\"mill\",\"₦\":\"naira\",\"₧\":\"peseta\",\"₨\":\"rupee\",\"₩\":\"won\",\"₪\":\"new shequel\",\"₫\":\"dong\",\"€\":\"euro\",\"₭\":\"kip\",\"₮\":\"tugrik\",\"₯\":\"drachma\",\"₰\":\"penny\",\"₱\":\"peso\",\"₲\":\"guarani\",\"₳\":\"austral\",\"₴\":\"hryvnia\",\"₵\":\"cedi\",\"₸\":\"kazakhstani tenge\",\"₹\":\"indian rupee\",\"₺\":\"turkish lira\",\"₽\":\"russian ruble\",\"₿\":\"bitcoin\",\"℠\":\"sm\",\"™\":\"tm\",\"∂\":\"d\",\"∆\":\"delta\",\"∑\":\"sum\",\"∞\":\"infinity\",\"♥\":\"love\",\"元\":\"yuan\",\"円\":\"yen\",\"﷼\":\"rial\",\"ﻵ\":\"laa\",\"ﻷ\":\"laa\",\"ﻹ\":\"lai\",\"ﻻ\":\"la\"}')\n  var locales = JSON.parse('{\"bg\":{\"Й\":\"Y\",\"Ц\":\"Ts\",\"Щ\":\"Sht\",\"Ъ\":\"A\",\"Ь\":\"Y\",\"й\":\"y\",\"ц\":\"ts\",\"щ\":\"sht\",\"ъ\":\"a\",\"ь\":\"y\"},\"de\":{\"Ä\":\"AE\",\"ä\":\"ae\",\"Ö\":\"OE\",\"ö\":\"oe\",\"Ü\":\"UE\",\"ü\":\"ue\",\"ß\":\"ss\",\"%\":\"prozent\",\"&\":\"und\",\"|\":\"oder\",\"∑\":\"summe\",\"∞\":\"unendlich\",\"♥\":\"liebe\"},\"es\":{\"%\":\"por ciento\",\"&\":\"y\",\"<\":\"menor que\",\">\":\"mayor que\",\"|\":\"o\",\"¢\":\"centavos\",\"£\":\"libras\",\"¤\":\"moneda\",\"₣\":\"francos\",\"∑\":\"suma\",\"∞\":\"infinito\",\"♥\":\"amor\"},\"fr\":{\"%\":\"pourcent\",\"&\":\"et\",\"<\":\"plus petit\",\">\":\"plus grand\",\"|\":\"ou\",\"¢\":\"centime\",\"£\":\"livre\",\"¤\":\"devise\",\"₣\":\"franc\",\"∑\":\"somme\",\"∞\":\"infini\",\"♥\":\"amour\"},\"pt\":{\"%\":\"porcento\",\"&\":\"e\",\"<\":\"menor\",\">\":\"maior\",\"|\":\"ou\",\"¢\":\"centavo\",\"∑\":\"soma\",\"£\":\"libra\",\"∞\":\"infinito\",\"♥\":\"amor\"},\"uk\":{\"И\":\"Y\",\"и\":\"y\",\"Й\":\"Y\",\"й\":\"y\",\"Ц\":\"Ts\",\"ц\":\"ts\",\"Х\":\"Kh\",\"х\":\"kh\",\"Щ\":\"Shch\",\"щ\":\"shch\",\"Г\":\"H\",\"г\":\"h\"},\"vi\":{\"Đ\":\"D\",\"đ\":\"d\"},\"da\":{\"Ø\":\"OE\",\"ø\":\"oe\",\"Å\":\"AA\",\"å\":\"aa\",\"%\":\"procent\",\"&\":\"og\",\"|\":\"eller\",\"$\":\"dollar\",\"<\":\"mindre end\",\">\":\"større end\"},\"nb\":{\"&\":\"og\",\"Å\":\"AA\",\"Æ\":\"AE\",\"Ø\":\"OE\",\"å\":\"aa\",\"æ\":\"ae\",\"ø\":\"oe\"},\"it\":{\"&\":\"e\"},\"nl\":{\"&\":\"en\"},\"sv\":{\"&\":\"och\",\"Å\":\"AA\",\"Ä\":\"AE\",\"Ö\":\"OE\",\"å\":\"aa\",\"ä\":\"ae\",\"ö\":\"oe\"}}')\n\n  function replace (string, options) {\n    if (typeof string !== 'string') {\n      throw new Error('slugify: string argument expected')\n    }\n\n    options = (typeof options === 'string')\n      ? {replacement: options}\n      : options || {}\n\n    var locale = locales[options.locale] || {}\n\n    var replacement = options.replacement === undefined ? '-' : options.replacement\n\n    var trim = options.trim === undefined ? true : options.trim\n\n    var slug = string.normalize().split('')\n      // replace characters based on charMap\n      .reduce(function (result, ch) {\n        var appendChar = locale[ch];\n        if (appendChar === undefined) appendChar = charMap[ch];\n        if (appendChar === undefined) appendChar = ch;\n        if (appendChar === replacement) appendChar = ' ';\n        return result + appendChar\n          // remove not allowed characters\n          .replace(options.remove || /[^\\w\\s$*_+~.()'\"!\\-:@]+/g, '')\n      }, '');\n\n    if (options.strict) {\n      slug = slug.replace(/[^A-Za-z0-9\\s]/g, '');\n    }\n\n    if (trim) {\n      slug = slug.trim()\n    }\n\n    // Replace spaces with replacement character, treating multiple consecutive\n    // spaces as a single space.\n    slug = slug.replace(/\\s+/g, replacement);\n\n    if (options.lower) {\n      slug = slug.toLowerCase()\n    }\n\n    return slug\n  }\n\n  replace.extend = function (customMap) {\n    Object.assign(charMap, customMap)\n  }\n\n  return replace\n}))\n","import slugify from 'slugify';\n\nexport function slugifyString(\n  text: string,\n  replacement = '-',\n  strict = false,\n): string {\n  if (!text) return text;\n  let slugified = slugify(text, {\n    lower: true,\n    replacement,\n    strict,\n    remove: /[*+~.()'\"!:@?\\|/\\\\#]/g,\n  });\n  // some chinese text might not get slugified properly,\n  // just replace whitespace with dash in that case\n  if (!slugified) {\n    slugified = text.replace(/\\s+/g, '-').toLowerCase();\n  }\n  return slugified;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {onFormQueryError} from '../../errors/on-form-query-error';\nimport {message} from '../../i18n/message';\n\ninterface Response extends BackendResponse {\n  workspace: Workspace;\n}\n\ninterface Props {\n  name: string;\n}\n\nexport function useCreateWorkspace(form: UseFormReturn<Props>) {\n  return useMutation({\n    mutationFn: (props: Props) => createWorkspace(props),\n    onSuccess: () => {\n      toast(message('Created workspace'));\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.fetchUserWorkspaces,\n      });\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n\nfunction createWorkspace(props: Props): Promise<Response> {\n  return apiClient.post('workspace', props).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {FormTextField} from '../ui/forms/input-field/text-field/text-field';\nimport {Form} from '../ui/forms/form';\nimport {Button} from '../ui/buttons/button';\nimport {useCreateWorkspace} from './requests/create-workspace';\nimport {DialogFooter} from '../ui/overlays/dialog/dialog-footer';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../i18n/trans';\n\nexport function NewWorkspaceDialog() {\n  const form = useForm<{name: string}>();\n  const {formId, close} = useDialogContext();\n  const createWorkspace = useCreateWorkspace(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Create workspace\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={() => {\n            createWorkspace.mutate(form.getValues(), {\n              onSuccess: response => {\n                close(response.workspace.id);\n              },\n            });\n          }}\n        >\n          <FormTextField\n            name=\"name\"\n            autoFocus\n            label={<Trans message=\"Workspace name\" />}\n            minLength={3}\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createWorkspace.isPending}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {apiClient} from '../../http/query-client';\n\nexport interface FetchWorkspaceWithMembersResponse extends BackendResponse {\n  workspace: Workspace;\n}\n\nfunction fetchWorkspaceWithMembers(\n  workspaceId: number,\n): Promise<FetchWorkspaceWithMembersResponse> {\n  return apiClient\n    .get(`workspace/${workspaceId}`)\n    .then(response => response.data);\n}\n\nexport function useWorkspaceWithMembers(workspaceId: number) {\n  return useQuery({\n    queryKey: WorkspaceQueryKeys.workspaceWithMembers(workspaceId),\n    queryFn: () => fetchWorkspaceWithMembers(workspaceId),\n  });\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const GroupIcon = createSvgIcon(\n  <path d=\"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z\" />\n, 'GroupOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  invites: WorkspaceInvite[];\n}\n\ninterface Props {\n  workspaceId: number;\n  emails: string[];\n  roleId: number;\n}\n\nfunction InviteMembers({workspaceId, ...other}: Props): Promise<Response> {\n  return apiClient\n    .post(`workspace/${workspaceId}/invite`, other)\n    .then(r => r.data);\n}\n\nexport function useInviteMembers() {\n  return useMutation({\n    mutationFn: (props: Props) => InviteMembers(props),\n    onSuccess: (response, props) => {\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId),\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient} from '../../http/query-client';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  invite: WorkspaceInvite;\n}\n\ninterface Props {\n  workspaceId: number;\n  inviteId: string;\n}\n\nfunction ResendInvite({\n  workspaceId,\n  inviteId,\n  ...other\n}: Props): Promise<Response> {\n  return apiClient\n    .post(`workspace/${workspaceId}/${inviteId}/resend`, other)\n    .then(r => r.data);\n}\n\nexport function useResendInvite() {\n  return useMutation({\n    mutationFn: (props: Props) => ResendInvite(props),\n    onSuccess: () => {\n      toast('Invite sent');\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","const matcher =\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\nexport function isEmail(string?: string): boolean {\n  if (!string) return false;\n  if (string.length > 320) return false;\n  return matcher.test(string);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {WorkspaceMember} from '../types/workspace-member';\nimport {WorkspaceInvite} from '../types/workspace-invite';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Props {\n  workspaceId: number;\n  member: WorkspaceMember | WorkspaceInvite;\n  roleId: number;\n}\n\nfunction ChangeRole({workspaceId, member, ...other}: Props): Promise<Response> {\n  const modelType = member.model_type;\n  const memberId =\n    member.model_type === 'invite' ? member.id : member.member_id;\n  return apiClient\n    .post(\n      `workspace/${workspaceId}/${modelType}/${memberId}/change-role`,\n      other,\n    )\n    .then(r => r.data);\n}\n\nexport function useChangeRole() {\n  return useMutation({\n    mutationFn: (props: Props) => ChangeRole(props),\n    onSuccess: (response, props) => {\n      toast(message('Role changed'));\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId),\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {useAuth} from '../../auth/use-auth';\nimport {useActiveWorkspaceId} from '../active-workspace-id-context';\nimport {PersonalWorkspace} from '../user-workspaces';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Props {\n  workspaceId: number;\n  memberId: number | string;\n  memberType: 'invite' | 'member';\n}\n\nfunction removeMember({\n  workspaceId,\n  memberId,\n  memberType,\n}: Props): Promise<Response> {\n  const endpoint =\n    memberType === 'invite'\n      ? `workspace/invite/${memberId}`\n      : `workspace/${workspaceId}/member/${memberId}`;\n  return apiClient.delete(endpoint).then(r => r.data);\n}\n\nexport function useRemoveMember() {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  const {user} = useAuth();\n  return useMutation({\n    mutationFn: (props: Props) => removeMember(props),\n    onSuccess: (response, props) => {\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.fetchUserWorkspaces,\n      });\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.workspaceWithMembers(props.workspaceId),\n      });\n\n      // if user left workspace that is currently active, switch to personal workspace\n      if (props.memberId === user?.id && workspaceId === props.workspaceId) {\n        setWorkspaceId(PersonalWorkspace.id);\n      }\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '../i18n/trans';\n\ninterface Props {\n  onConfirm?: () => void;\n  isLoading?: boolean;\n}\nexport function LeaveWorkspaceConfirmation({onConfirm, isLoading}: Props) {\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Leave workspace\" />}\n      isLoading={isLoading}\n      onConfirm={onConfirm}\n      body={\n        <div>\n          <Trans message=\"Are you sure you want to leave this workspace?\" />\n          <div className=\"mt-8 font-semibold\">\n            <Trans message=\"All resources you've created in the workspace will be transferred to workspace owner.\" />\n          </div>\n        </div>\n      }\n      confirm={<Trans message=\"Leave\" />}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {useWorkspaceWithMembers} from './requests/workspace-with-members';\nimport {ProgressCircle} from '../ui/progress/progress-circle';\nimport {Workspace} from './types/workspace';\nimport {GroupIcon} from '../icons/material/Group';\nimport {WorkspaceMember} from './types/workspace-member';\nimport {useAuth} from '../auth/use-auth';\nimport {\n  ChipField,\n  ChipValue,\n} from '../ui/forms/input-field/chip-field/chip-field';\nimport {useValueLists} from '../http/value-lists';\nimport {Button} from '../ui/buttons/button';\nimport {ArrowDropDownIcon} from '../icons/material/ArrowDropDown';\nimport {useInviteMembers} from './requests/invite-members';\nimport {WorkspaceInvite} from './types/workspace-invite';\nimport {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {useResendInvite} from './requests/resend-invite';\nimport {isEmail} from '../utils/string/is-email';\nimport {ButtonSize} from '../ui/buttons/button-size';\nimport {useChangeRole} from './requests/change-role';\nimport {IconButton} from '../ui/buttons/icon-button';\nimport {useRemoveMember} from './requests/remove-member';\nimport {CloseIcon} from '../icons/material/Close';\nimport {ExitToAppIcon} from '../icons/material/ExitToApp';\nimport {toast} from '../ui/toast/toast';\nimport {DialogTrigger} from '../ui/overlays/dialog/dialog-trigger';\nimport {Menu, MenuItem, MenuTrigger} from '../ui/navigation/menu/menu-trigger';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../i18n/trans';\nimport {useTrans} from '../i18n/use-trans';\nimport {message} from '../i18n/message';\nimport {LeaveWorkspaceConfirmation} from './leave-workspace-confirmation';\n\ninterface WorkspaceMembersDialogProps {\n  workspace: Workspace;\n}\nexport function WorkspaceMembersDialog({\n  workspace,\n}: WorkspaceMembersDialogProps) {\n  const {data, isLoading} = useWorkspaceWithMembers(workspace.id);\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Manage workspace members\" />\n      </DialogHeader>\n      <DialogBody>\n        {isLoading ? (\n          <div className=\"flex min-h-[238px] items-center justify-center\">\n            <ProgressCircle isIndeterminate aria-label=\"Loading workspace...\" />\n          </div>\n        ) : (\n          <Manager workspace={data!.workspace} />\n        )}\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface ManagerProps {\n  workspace: Workspace;\n}\nfunction Manager({workspace}: ManagerProps) {\n  const {user} = useAuth();\n  const can = usePermissions(workspace);\n  const members: (WorkspaceMember | WorkspaceInvite)[] = [\n    ...(workspace.members || []),\n    ...(workspace.invites || []),\n  ];\n  const shouldHideOtherMembers = !can.update && !can.delete;\n\n  return (\n    <div>\n      {can.invite && <InviteChipField workspace={workspace} />}\n      <div className=\"mb-14 flex items-center gap-10 text-base\">\n        <GroupIcon className=\"icon-sm\" />\n        <Trans\n          message=\"Members of `:workspace`\"\n          values={{workspace: workspace.name}}\n        />\n      </div>\n      <AnimatePresence initial={false}>\n        {members.map(member => {\n          if (shouldHideOtherMembers && member.id !== user?.id) {\n            return null;\n          }\n          return (\n            <MemberListItem\n              key={`${member.model_type}.${member.id}`}\n              workspace={workspace}\n              member={member}\n            />\n          );\n        })}\n        {shouldHideOtherMembers && (\n          <div className=\"text-muted\">\n            <Trans\n              message=\"And [one one other member|:count other members]\"\n              values={{count: members.length}}\n            />\n          </div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\ninterface MemberListItemProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n}\nfunction MemberListItem({workspace, member}: MemberListItemProps) {\n  return (\n    <m.div\n      initial={{x: '-100%', opacity: 0}}\n      animate={{x: 0, opacity: 1}}\n      exit={{x: '100%', opacity: 0}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"mb-20 flex items-start gap-14 text-sm\"\n      key={`${member.model_type}.${member.id}`}\n    >\n      <img\n        className=\"h-36 w-36 flex-shrink-0 rounded\"\n        src={member.avatar}\n        alt=\"\"\n      />\n      <div className=\"min-w-0 flex-auto items-center justify-between gap-14 md:flex\">\n        <div className=\"mb-10 overflow-hidden md:mb-0 md:mr-10\">\n          <div className=\"flex items-center justify-start gap-6\">\n            <div className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n              {member.display_name}\n            </div>\n            <MemberDisplayNameAppend workspace={workspace} member={member} />\n          </div>\n          <div className=\"text-muted\">{member.email}</div>\n        </div>\n        <MemberActions workspace={workspace} member={member} />\n      </div>\n    </m.div>\n  );\n}\n\nfunction usePermissions(workspace: Workspace) {\n  const {user: authUser} = useAuth();\n  const response = {update: false, invite: false, delete: false};\n  const permissions = ['update', 'invite', 'delete'] as const;\n  const authMember = workspace.members?.find(mb => mb.id === authUser?.id);\n\n  if (authMember) {\n    permissions.forEach(permission => {\n      response[permission] =\n        authMember.is_owner ||\n        !!authMember.permissions?.find(\n          p => p.name === `workspace_members.${permission}`,\n        );\n    });\n  }\n\n  return response;\n}\n\ninterface MemberActionsProps {\n  workspace: Workspace;\n  member: WorkspaceMember | WorkspaceInvite;\n}\nfunction MemberActions({workspace, member}: MemberActionsProps) {\n  const [selectedRole, setSelectedRole] = useState<number>(member.role_id);\n  const changeRole = useChangeRole();\n  const {user} = useAuth();\n\n  const can = usePermissions(workspace);\n  const isOwner = member.model_type === 'member' && member.is_owner;\n  const isCurrentUser =\n    member.model_type === 'member' && user?.id === member.id;\n\n  const roleSelector =\n    !can.update || isOwner || isCurrentUser ? (\n      <div className=\"ml-auto text-muted first:capitalize\">\n        <Trans message={member.role_name} />\n      </div>\n    ) : (\n      <RoleMenuTrigger\n        className=\"ml-auto flex-shrink-0\"\n        size=\"xs\"\n        value={selectedRole}\n        isDisabled={changeRole.isPending}\n        onChange={roleId => {\n          setSelectedRole(roleId);\n          changeRole.mutate({\n            roleId,\n            workspaceId: workspace.id,\n            member,\n          });\n        }}\n      />\n    );\n\n  return (\n    <>\n      {roleSelector}\n      {!isOwner && (isCurrentUser || can.delete) && (\n        <RemoveMemberButton\n          type={isCurrentUser ? 'leave' : 'remove'}\n          member={member}\n          workspace={workspace}\n        />\n      )}\n    </>\n  );\n}\n\ninterface InviteChipFieldProps {\n  workspace: Workspace;\n}\nfunction InviteChipField({workspace}: InviteChipFieldProps) {\n  const {trans} = useTrans();\n  const [chips, setChips] = useState<ChipValue[]>([]);\n  const allEmailsValid = chips.every(chip => !chip.invalid);\n  const displayWith = (chip: ChipValue) => chip.description || chip.name;\n  const [selectedRole, setSelectedRole] = useState<number>();\n  const inviteMembers = useInviteMembers();\n  const {data} = useValueLists(['workspaceRoles']);\n\n  useEffect(() => {\n    if (!selectedRole && data?.workspaceRoles?.length) {\n      setSelectedRole(data.workspaceRoles[0].id);\n    }\n  }, [data, selectedRole]);\n\n  return (\n    <div className=\"mb-30\">\n      <ChipField\n        value={chips}\n        onChange={setChips}\n        displayWith={displayWith}\n        validateWith={chip => {\n          const invalid = !isEmail(chip.description);\n          return {\n            ...chip,\n            invalid,\n            errorMessage: invalid\n              ? trans({message: 'Not a valid email'})\n              : undefined,\n          };\n        }}\n        placeholder={trans({message: 'Enter email addresses'})}\n        label={<Trans message=\"Invite people\" />}\n      />\n      <div className=\"mt-14 flex items-center justify-between gap-14\">\n        <RoleMenuTrigger onChange={setSelectedRole} value={selectedRole} />\n        {chips.length && selectedRole ? (\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            size=\"sm\"\n            disabled={inviteMembers.isPending || !allEmailsValid}\n            onClick={() => {\n              inviteMembers.mutate(\n                {\n                  emails: chips.map(c => displayWith(c)),\n                  roleId: selectedRole,\n                  workspaceId: workspace.id,\n                },\n                {\n                  onSuccess: () => {\n                    setChips([]);\n                  },\n                },\n              );\n            }}\n          >\n            <Trans message=\"Invite\" />\n          </Button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\ninterface RemoveMemberButtonProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n  type: 'leave' | 'remove';\n}\nfunction RemoveMemberButton({\n  member,\n  workspace,\n  type,\n}: RemoveMemberButtonProps) {\n  const removeMember = useRemoveMember();\n  const {close} = useDialogContext();\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          removeMember.mutate({\n            workspaceId: workspace.id,\n            memberId: member.id,\n            memberType: member.model_type,\n          });\n          if (type === 'leave') {\n            close();\n            toast(message('Left workspace'));\n          }\n        }\n      }}\n    >\n      <IconButton\n        size=\"md\"\n        className=\"flex-shrink-0 text-muted\"\n        disabled={removeMember.isPending}\n      >\n        {type === 'leave' ? <ExitToAppIcon /> : <CloseIcon />}\n      </IconButton>\n      {type === 'leave' ? (\n        <LeaveWorkspaceConfirmation />\n      ) : (\n        <RemoveMemberConfirmation member={member} />\n      )}\n    </DialogTrigger>\n  );\n}\n\ninterface RemoveMemberConfirmationProps {\n  member: WorkspaceMember | WorkspaceInvite;\n}\nfunction RemoveMemberConfirmation({member}: RemoveMemberConfirmationProps) {\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Remove member\" />}\n      body={\n        <div>\n          <Trans\n            message=\"Are you sure you want to remove `:name`?\"\n            values={{name: member.display_name}}\n          />\n          <div className=\"mt-8 font-semibold\">\n            <Trans\n              message=\"All workspace resources created by `:name` will be transferred to workspace owner.\"\n              values={{\n                name: member.display_name,\n              }}\n            />\n          </div>\n        </div>\n      }\n      confirm={<Trans message=\"Remove\" />}\n    />\n  );\n}\n\ninterface RoleMenuTriggerProps {\n  onChange: (value: number) => void;\n  value?: number;\n  size?: ButtonSize;\n  className?: string;\n  isDisabled?: boolean;\n}\nfunction RoleMenuTrigger({\n  value,\n  onChange,\n  size = 'xs',\n  className,\n  isDisabled,\n}: RoleMenuTriggerProps) {\n  const {data} = useValueLists(['workspaceRoles']);\n  const role = data?.workspaceRoles?.find(r => r.id === value);\n  if (!value || !role || !data?.workspaceRoles) return null;\n\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      selectedValue={value}\n      onSelectionChange={newValue => {\n        onChange(newValue as number);\n      }}\n    >\n      <Button\n        className={className}\n        size={size}\n        variant=\"flat\"\n        color=\"chip\"\n        disabled={isDisabled}\n        endIcon={<ArrowDropDownIcon />}\n      >\n        <Trans message={role.name} />\n      </Button>\n      <Menu>\n        {data.workspaceRoles.map(r => (\n          <MenuItem value={r.id} key={r.id} description={r.description}>\n            <Trans message={r.name} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\ninterface MemberDisplayNameAppendProps {\n  member: WorkspaceMember | WorkspaceInvite;\n  workspace: Workspace;\n}\nfunction MemberDisplayNameAppend({\n  member,\n  workspace,\n}: MemberDisplayNameAppendProps) {\n  const {user} = useAuth();\n  const can = usePermissions(workspace);\n\n  if (user?.id === member.id) {\n    return (\n      <div className=\"font-medium\">\n        (<Trans message=\"You\" />)\n      </div>\n    );\n  }\n  if (member.model_type === 'invite') {\n    return (\n      <div className=\"flex items-center gap-4\">\n        <div>·</div>\n        <div className=\"font-medium\">\n          <Trans message=\"Invited\" />\n        </div>\n        {can.invite ? (\n          <>\n            <div>·</div>\n            <ResendInviteDialogTrigger member={member} workspace={workspace} />\n          </>\n        ) : null}\n      </div>\n    );\n  }\n  return null;\n}\n\nfunction ResendInviteDialogTrigger({\n  member,\n  workspace,\n}: MemberDisplayNameAppendProps) {\n  const resendInvite = useResendInvite();\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          resendInvite.mutate({\n            workspaceId: workspace.id,\n            inviteId: member.id as string,\n          });\n        }\n      }}\n    >\n      <Button\n        variant=\"link\"\n        size=\"sm\"\n        color=\"primary\"\n        disabled={resendInvite.isPending}\n      >\n        <Trans message=\"Resend invite\" />\n      </Button>\n      <ConfirmationDialog\n        title={<Trans message=\"Resend invite\" />}\n        body={\n          <Trans message=\"Are you sure you want to send this invite again?\" />\n        }\n        confirm={<Trans message=\"Send\" />}\n      />\n    </DialogTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const PersonAddIcon = createSvgIcon(\n  <path d=\"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z\" />\n, 'PersonAddOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {Workspace} from '../types/workspace';\nimport {onFormQueryError} from '../../errors/on-form-query-error';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {message} from '../../i18n/message';\n\ninterface Response extends BackendResponse {\n  workspace: Workspace;\n}\n\nexport interface UpdateWorkspacePayload {\n  id: number;\n  name: string;\n}\n\nfunction updateWorkspace({\n  id,\n  ...props\n}: UpdateWorkspacePayload): Promise<Response> {\n  return apiClient.put(`workspace/${id}`, props).then(r => r.data);\n}\n\nexport function useUpdateWorkspace(\n  form: UseFormReturn<UpdateWorkspacePayload>,\n) {\n  const {close} = useDialogContext();\n  return useMutation({\n    mutationFn: (props: UpdateWorkspacePayload) => updateWorkspace(props),\n    onSuccess: response => {\n      close();\n      toast(message('Updated workspace'));\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.fetchUserWorkspaces,\n      });\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.workspaceWithMembers(\n          response.workspace.id,\n        ),\n      });\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n","import {useForm} from 'react-hook-form';\nimport {FormTextField} from '../ui/forms/input-field/text-field/text-field';\nimport {Form} from '../ui/forms/form';\nimport {Button} from '../ui/buttons/button';\nimport {DialogFooter} from '../ui/overlays/dialog/dialog-footer';\nimport {useDialogContext} from '../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {\n  UpdateWorkspacePayload,\n  useUpdateWorkspace,\n} from './requests/update-workspace';\nimport {Workspace} from './types/workspace';\nimport {Trans} from '../i18n/trans';\n\ninterface Props {\n  workspace: Workspace;\n}\nexport function RenameWorkspaceDialog({workspace}: Props) {\n  const form = useForm<UpdateWorkspacePayload>({\n    defaultValues: {id: workspace.id, name: workspace.name},\n  });\n  const {formId, close} = useDialogContext();\n  const updateWorkspace = useUpdateWorkspace(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Rename workspace\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={() => {\n            updateWorkspace.mutate(form.getValues());\n          }}\n        >\n          <FormTextField\n            name=\"name\"\n            autoFocus\n            label={<Trans message=\"Name\" />}\n            minLength={3}\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateWorkspace.isPending}\n        >\n          <Trans message=\"Rename\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {toast} from '../../ui/toast/toast';\nimport {apiClient, queryClient} from '../../http/query-client';\nimport {WorkspaceQueryKeys} from './workspace-query-keys';\nimport {useActiveWorkspaceId} from '../active-workspace-id-context';\nimport {PersonalWorkspace} from '../user-workspaces';\nimport {message} from '../../i18n/message';\nimport {showHttpErrorToast} from '../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\nexport interface DeleteWorkspacePayload {\n  id: number;\n}\n\nfunction deleteWorkspace({id}: DeleteWorkspacePayload): Promise<Response> {\n  return apiClient.delete(`workspace/${id}`).then(r => r.data);\n}\n\nexport function useDeleteWorkspace() {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  return useMutation({\n    mutationFn: (props: DeleteWorkspacePayload) => deleteWorkspace(props),\n    onSuccess: (r, payload) => {\n      toast(message('Deleted workspace'));\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.fetchUserWorkspaces,\n      });\n      queryClient.invalidateQueries({\n        queryKey: WorkspaceQueryKeys.workspaceWithMembers(payload.id),\n      });\n\n      // if user deleted workspace that is currently active, switch to personal workspace\n      if (workspaceId === payload.id) {\n        setWorkspaceId(PersonalWorkspace.id);\n      }\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {ReactElement, ReactNode} from 'react';\nimport {SectionHelper, SectionHelperProps} from '@common/ui/section-helper';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {PolicyFailReason} from '@common/billing/upgrade/policy-fail-reason';\n\ninterface Props {\n  className?: string;\n  // plural name in lowercase (e.g. 'projects')\n  resourceName?: ReactElement | string;\n  reason?: PolicyFailReason;\n  size?: SectionHelperProps['size'];\n  color?: SectionHelperProps['color'];\n  message?: ReactNode;\n}\nexport function PolicyFailMessage({\n  resourceName,\n  className,\n  size = 'md',\n  color = 'bgAlt',\n  reason = 'overQuota',\n  ...other\n}: Props) {\n  const message = other.message ?? (\n    <MessageText resourceName={resourceName!} reason={reason} />\n  );\n\n  return (\n    <SectionHelper\n      color={color}\n      size={size}\n      className={className}\n      description={message}\n    />\n  );\n}\n\ninterface MessageTextProps {\n  resourceName: ReactElement | string;\n  reason?: PolicyFailReason;\n}\nfunction MessageText({resourceName, reason}: MessageTextProps) {\n  const {billing} = useSettings();\n\n  if (reason === 'noWorkspacePermission') {\n    return (\n      <Trans\n        message=\"You can't create new :name in this workspace.\"\n        values={{name: resourceName}}\n      />\n    );\n  }\n\n  const upgradeMsgValues = {\n    name: resourceName,\n    a: (text: ReactNode) => (\n      <Link className={LinkStyle} to=\"/pricing\">\n        {text}\n      </Link>\n    ),\n  };\n\n  if (reason === 'overQuota' && billing.enable) {\n    return (\n      <Trans\n        message=\"Your plan is at its maximum number of :name allowed. <a>Upgrade to add more.</a>\"\n        values={upgradeMsgValues}\n      />\n    );\n  }\n\n  if (reason === 'noPermission' && billing.enable) {\n    return (\n      <Trans\n        message=\"To unlock ability to create :name. <a>Upgrade your plan.</a>\"\n        values={upgradeMsgValues}\n      />\n    );\n  }\n\n  return <Trans message=\"You don't have permissions to create :name.\" />;\n}\n","import clsx from 'clsx';\nimport {\n  cloneElement,\n  forwardRef,\n  Fragment,\n  ReactElement,\n  useEffect,\n  useState,\n} from 'react';\nimport {ButtonBase} from '../ui/buttons/button-base';\nimport {PersonalWorkspace, useUserWorkspaces} from './user-workspaces';\nimport {UnfoldMoreIcon} from '../icons/material/UnfoldMore';\nimport {AddIcon} from '../icons/material/Add';\nimport {NewWorkspaceDialog} from './new-workspace-dialog';\nimport {WorkspaceMembersDialog} from './workspace-members-dialog';\nimport {\n  useActiveWorkspace,\n  useActiveWorkspaceId,\n} from './active-workspace-id-context';\nimport {DialogTrigger} from '../ui/overlays/dialog/dialog-trigger';\nimport {Workspace} from './types/workspace';\nimport {Dialog} from '../ui/overlays/dialog/dialog';\nimport {DialogBody} from '../ui/overlays/dialog/dialog-body';\nimport {Button, ButtonProps} from '../ui/buttons/button';\nimport {CheckIcon} from '../icons/material/Check';\nimport {Menu, MenuItem, MenuTrigger} from '../ui/navigation/menu/menu-trigger';\nimport {KeyboardArrowDownIcon} from '../icons/material/KeyboardArrowDown';\nimport {PersonAddIcon} from '../icons/material/PersonAdd';\nimport {DeleteIcon} from '../icons/material/Delete';\nimport {ExitToAppIcon} from '../icons/material/ExitToApp';\nimport {EditIcon} from '../icons/material/Edit';\nimport {RenameWorkspaceDialog} from './rename-workspace-dialog';\nimport {ConfirmationDialog} from '../ui/overlays/dialog/confirmation-dialog';\nimport {useDeleteWorkspace} from './requests/delete-workspace';\nimport {useRemoveMember} from './requests/remove-member';\nimport {useAuth} from '../auth/use-auth';\nimport {Trans} from '../i18n/trans';\nimport {LeaveWorkspaceConfirmation} from './leave-workspace-confirmation';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {PolicyFailMessage} from '@common/billing/upgrade/policy-fail-message';\n\ninterface WorkspaceSelectorProps {\n  className?: string;\n  onChange?: (id: number) => void;\n  trigger?: ReactElement<ButtonProps>;\n  placement?: 'top' | 'bottom';\n}\nexport function WorkspaceSelector({\n  onChange,\n  className,\n  trigger,\n  placement = 'top',\n}: WorkspaceSelectorProps) {\n  const {data: workspaces, isFetched, isFetching} = useUserWorkspaces();\n  const {setWorkspaceId} = useActiveWorkspaceId();\n  const activeWorkspace = useActiveWorkspace();\n  const [selectorIsOpen, setSelectorIsOpen] = useState(false);\n  const {hasPermission} = useAuth();\n\n  // if user no longer has access to previously selected workspace, select personal one\n  useEffect(() => {\n    // make sure we don't unset active workspace while user workspaces are being re-fetched\n    if (isFetched && !isFetching && !activeWorkspace) {\n      setWorkspaceId(PersonalWorkspace.id);\n    }\n  }, [activeWorkspace, workspaces, setWorkspaceId, isFetched, isFetching]);\n\n  if (\n    // if we have a custom trigger, leave rendering up to the customer trigger\n    !trigger &&\n    (!activeWorkspace ||\n      (!hasPermission('workspaces.create') && workspaces?.length === 1))\n  ) {\n    return null;\n  }\n\n  return (\n    <Fragment>\n      <DialogTrigger\n        type=\"popover\"\n        placement={placement}\n        isOpen={selectorIsOpen}\n        onClose={() => {\n          setSelectorIsOpen(false);\n        }}\n      >\n        {trigger ? (\n          cloneElement(trigger, {\n            onClick: () => setSelectorIsOpen(!selectorIsOpen),\n          })\n        ) : (\n          <DefaultTrigger\n            onClick={() => setSelectorIsOpen(!selectorIsOpen)}\n            workspace={activeWorkspace!}\n            className={className}\n          />\n        )}\n        <Dialog size=\"min-w-320\">\n          <DialogBody padding=\"p-10\">\n            <div className=\"mb-16 border-b pb-10\">\n              {workspaces?.map(workspace => (\n                <WorkspaceItem\n                  key={workspace.id}\n                  workspace={workspace}\n                  setSelectorIsOpen={setSelectorIsOpen}\n                  onChange={onChange}\n                />\n              ))}\n            </div>\n            <div className=\"mb-4 px-4 text-center\">\n              <CreateWorkspaceButton\n                onClick={() => setSelectorIsOpen(false)}\n                onCreated={id => onChange?.(id)}\n                workspaceCount={workspaces ? workspaces.length - 1 : 0}\n              />\n            </div>\n          </DialogBody>\n        </Dialog>\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface CreateWorkspaceButtonProps {\n  onClick: () => void;\n  onCreated?: (id: number) => void;\n  workspaceCount: number;\n}\nfunction CreateWorkspaceButton({\n  onClick,\n  onCreated,\n  workspaceCount,\n}: CreateWorkspaceButtonProps) {\n  const {setWorkspaceId} = useActiveWorkspaceId();\n  const {checkOverQuotaOrNoPermission} = useAuth();\n  const {overQuotaOrNoPermission} = checkOverQuotaOrNoPermission(\n    'workspaces.create',\n    'count',\n    workspaceCount,\n  );\n\n  return (\n    <Fragment>\n      <Button\n        disabled={overQuotaOrNoPermission}\n        onClick={async e => {\n          e.preventDefault();\n          e.stopPropagation();\n          onClick();\n          const workspaceId = await openDialog(NewWorkspaceDialog);\n          if (workspaceId) {\n            setWorkspaceId(workspaceId);\n            onCreated?.(workspaceId);\n          }\n        }}\n        variant=\"outline\"\n        startIcon={<AddIcon />}\n        color=\"primary\"\n        className=\"h-40 w-full\"\n      >\n        <Trans message=\"Create new workspace\" />\n      </Button>\n      {overQuotaOrNoPermission && (\n        <PolicyFailMessage\n          size=\"sm\"\n          className=\"mt-12 max-w-288\"\n          resourceName={<Trans message=\"worksapces\" />}\n        />\n      )}\n    </Fragment>\n  );\n}\n\ninterface DefaultTriggerProps {\n  onClick: () => void;\n  workspace: Workspace;\n  className?: string;\n}\nconst DefaultTrigger = forwardRef<HTMLButtonElement, DefaultTriggerProps>(\n  ({workspace, className, onClick, ...other}, ref) => {\n    return (\n      <ButtonBase\n        ref={ref}\n        onClick={onClick}\n        className={clsx(\n          'flex items-center gap-10 rounded ring-inset hover:bg-hover focus-visible:ring-2',\n          className,\n        )}\n        {...other}\n      >\n        <span className=\"mr-auto block flex-auto overflow-hidden text-left\">\n          <span className=\"block overflow-hidden overflow-ellipsis text-sm font-medium text-main\">\n            {workspace.default ? (\n              <Trans message={workspace.name} />\n            ) : (\n              workspace.name\n            )}\n          </span>\n          <span className=\"block text-xs text-muted\">\n            {workspace.default ? (\n              <Trans message=\"Personal workspace\" />\n            ) : (\n              <Trans\n                message=\":count members\"\n                values={{count: workspace.members_count}}\n              />\n            )}\n          </span>\n        </span>\n        <UnfoldMoreIcon className=\"shrink-0 icon-md\" />\n      </ButtonBase>\n    );\n  },\n);\n\ninterface WorkspaceItemProps {\n  workspace: Workspace;\n  onChange: WorkspaceSelectorProps['onChange'];\n  setSelectorIsOpen: (value: boolean) => void;\n}\nfunction WorkspaceItem({\n  workspace,\n  onChange,\n  setSelectorIsOpen,\n}: WorkspaceItemProps) {\n  const {workspaceId, setWorkspaceId} = useActiveWorkspaceId();\n  const isActive = workspaceId === workspace.id;\n\n  return (\n    <div\n      onClick={() => {\n        setWorkspaceId(workspace.id);\n        onChange?.(workspace.id);\n        setSelectorIsOpen(false);\n      }}\n      className={clsx(\n        'mb-4 flex cursor-pointer items-center gap-12 rounded-lg p-10 text-left',\n        isActive && 'bg-primary/5',\n        !isActive && 'hover:bg-hover',\n      )}\n    >\n      <CheckIcon\n        size=\"sm\"\n        className={clsx('flex-shrink-0 text-primary', !isActive && 'invisible')}\n      />\n      <div className=\"flex-auto\">\n        <div className={clsx('text-sm', isActive && 'font-semibold')}>\n          {workspace.name}\n        </div>\n        <div className=\"text-sm text-muted\">\n          {workspace.default ? (\n            <Trans message=\"Personal workspace\" />\n          ) : (\n            <Trans\n              message=\":count members\"\n              values={{count: workspace.members_count}}\n            />\n          )}\n        </div>\n      </div>\n      {workspace.id !== 0 && (\n        <ManageButton\n          setSelectorIsOpen={setSelectorIsOpen}\n          workspace={workspace}\n          onChange={onChange}\n        />\n      )}\n    </div>\n  );\n}\n\ninterface LeaveWorkspaceDialogProps {\n  workspace: Workspace;\n  onChange?: (id: number) => void;\n}\nfunction LeaveWorkspaceDialog({\n  workspace,\n  onChange,\n}: LeaveWorkspaceDialogProps) {\n  const removeMember = useRemoveMember();\n  const {user} = useAuth();\n  const {close} = useDialogContext();\n  return (\n    <LeaveWorkspaceConfirmation\n      isLoading={removeMember.isPending}\n      onConfirm={() => {\n        removeMember.mutate(\n          {\n            workspaceId: workspace.id,\n            memberId: user!.id,\n            memberType: 'member',\n          },\n          {\n            onSuccess: () => {\n              close();\n              onChange?.(PersonalWorkspace.id);\n            },\n          },\n        );\n      }}\n    />\n  );\n}\n\ninterface DeleteWorkspaceConfirmationProps {\n  workspace: Workspace;\n  onChange?: (id: number) => void;\n}\nfunction DeleteWorkspaceConfirmation({\n  workspace,\n  onChange,\n}: DeleteWorkspaceConfirmationProps) {\n  const deleteWorkspace = useDeleteWorkspace();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Delete workspace\" />}\n      body={\n        <Trans\n          message=\"Are you sure you want to delete “:name“?\"\n          values={{name: workspace.name}}\n        />\n      }\n      confirm={<Trans message=\"Delete\" />}\n      isLoading={deleteWorkspace.isPending}\n      onConfirm={() => {\n        deleteWorkspace.mutate(\n          {id: workspace.id},\n          {\n            onSuccess: () => {\n              close();\n              onChange?.(PersonalWorkspace.id);\n            },\n          },\n        );\n      }}\n    />\n  );\n}\n\ninterface ManageButtonProps {\n  setSelectorIsOpen: (value: boolean) => void;\n  workspace: Workspace;\n  onChange?: (id: number) => void;\n}\nfunction ManageButton({\n  setSelectorIsOpen,\n  workspace,\n  onChange,\n}: ManageButtonProps) {\n  const {user} = useAuth();\n\n  return (\n    <MenuTrigger onItemSelected={() => setSelectorIsOpen(false)}>\n      <Button\n        onClick={e => {\n          e.preventDefault();\n          e.stopPropagation();\n        }}\n        color=\"primary\"\n        size=\"xs\"\n        variant=\"outline\"\n        endIcon={<KeyboardArrowDownIcon />}\n      >\n        <Trans message=\"Manage\" />\n      </Button>\n      <Menu>\n        <MenuItem\n          onClick={e => {\n            e.stopPropagation();\n            openDialog(WorkspaceMembersDialog, {workspace});\n          }}\n          value=\"workspaceMembers\"\n          startIcon={<PersonAddIcon />}\n        >\n          <Trans message=\"Members\" />\n        </MenuItem>\n        {workspace.owner_id === user?.id && (\n          <MenuItem\n            onClick={e => {\n              e.stopPropagation();\n              openDialog(RenameWorkspaceDialog, {workspace});\n            }}\n            value=\"updateWorkspace\"\n            startIcon={<EditIcon />}\n          >\n            <Trans message=\"Rename\" />\n          </MenuItem>\n        )}\n        {workspace.owner_id !== user?.id && (\n          <MenuItem\n            onClick={e => {\n              e.stopPropagation();\n              openDialog(LeaveWorkspaceDialog, {workspace, onChange});\n            }}\n            value=\"leaveWorkspace\"\n            startIcon={<ExitToAppIcon />}\n          >\n            <Trans message=\"Leave\" />\n          </MenuItem>\n        )}\n        {workspace.owner_id === user?.id && (\n          <MenuItem\n            onClick={e => {\n              e.stopPropagation();\n              openDialog(DeleteWorkspaceConfirmation, {workspace, onChange});\n            }}\n            value=\"deleteWorkspace\"\n            startIcon={<DeleteIcon />}\n          >\n            <Trans message=\"Delete\" />\n          </MenuItem>\n        )}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\nconst endpoint = 'link/usage';\n\nexport interface ResourceUsage {\n  used: number;\n  total: number | null;\n  create?: boolean;\n  update?: boolean;\n  delete?: boolean;\n  createMsgType?: CreateMsgType;\n}\n\nexport interface LinkFeaturePermissions {\n  alias: boolean;\n  password: boolean;\n  expiration: boolean;\n  utm: boolean;\n  retargeting: boolean;\n}\n\nexport type CreateMsgType =\n  | 'overQuota'\n  | 'noPermission'\n  | 'noWorkspacePermission'\n  | keyof LinkFeaturePermissions;\n\nexport interface FetchLinkUsageResponse extends BackendResponse {\n  forWorkspace?: boolean;\n  userOwnsWorkspace?: boolean;\n  usage: {\n    links: ResourceUsage & LinkFeaturePermissions;\n    biolinks: ResourceUsage;\n    link_clicks: ResourceUsage;\n    link_overlays: ResourceUsage;\n    custom_pages: ResourceUsage & {options: boolean};\n    custom_domains: ResourceUsage;\n    link_groups: ResourceUsage;\n    tracking_pixels: ResourceUsage;\n  };\n}\n\nexport function useLinkSummary() {\n  return useQuery({\n    queryKey: [endpoint],\n    queryFn: () => fetchLinkUsage(),\n  });\n}\n\nfunction fetchLinkUsage(): Promise<FetchLinkUsageResponse> {\n  return apiClient.get(endpoint).then(response => response.data);\n}\n","import React from 'react';\nimport {ProgressBarBase, ProgressBarBaseProps} from './progress-bar-base';\n\nexport function Meter(props: ProgressBarBaseProps) {\n  return <ProgressBarBase {...props} role=\"meter progressbar\" />;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const InfoIcon = createSvgIcon(\n  <path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n, 'InfoOutlined');\n","import {FetchLinkUsageResponse, useLinkSummary} from './use-link-summary';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\ntype ResourceKey = keyof FetchLinkUsageResponse['usage'];\n\nexport const resourceTranslationMap: Record<ResourceKey, MessageDescriptor> = {\n  links: message('Links'),\n  biolinks: message('Biolinks'),\n  link_clicks: message('Visitors'),\n  link_overlays: message('Link overlays'),\n  custom_pages: message('Custom link pages'),\n  custom_domains: message('Custom domains'),\n  link_groups: message('Link groups'),\n  tracking_pixels: message('Tracking pixels'),\n} as const;\n\nexport function ResourceUsageList() {\n  const {data} = useLinkSummary();\n  if (!data) {\n    return null;\n  }\n\n  const unlimited = <Trans message=\"Unlimited\" />;\n\n  return (\n    <ul>\n      {Object.entries(resourceTranslationMap).map(([key, label]) => {\n        const usage = data?.usage[key as ResourceKey];\n        if (!usage) return null;\n        const name = <Trans {...label} />;\n        return (\n          <li key={key} className=\"mt-8\">\n            {usage.total ? (\n              <Trans\n                message=\":used out of :total :name\"\n                values={{\n                  used: <FormattedNumber value={usage.used} />,\n                  total: usage.total ? (\n                    <FormattedNumber value={usage.total} />\n                  ) : (\n                    unlimited\n                  ),\n                  name,\n                }}\n              />\n            ) : (\n              <Trans\n                message=\":count :name created\"\n                values={{count: usage.used, name}}\n              />\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {InfoIcon} from '@common/icons/material/Info';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Trans} from '@common/i18n/trans';\nimport {ResourceUsageList} from '@app/dashboard/layout/sidenav/resource-usage-list';\n\ninterface UsageDetailsTriggerProps {\n  className?: string;\n}\nexport function UsageDetailsTrigger({className}: UsageDetailsTriggerProps) {\n  const {user} = useAuth();\n  const subscription = user?.subscriptions?.[0];\n  const planName = subscription?.product?.name;\n  const renewalDate = subscription?.renews_at ? (\n    <FormattedDate date={subscription.renews_at} />\n  ) : null;\n\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      <IconButton size=\"md\" className={className}>\n        <InfoIcon />\n      </IconButton>\n      <Dialog size=\"auto\">\n        <DialogBody>\n          <div className=\"border-b pb-10 mb-10\">\n            <div className=\"font-semibold\">\n              <Trans\n                message=\"Current plan: :planName\"\n                values={{\n                  planName: planName || <Trans message=\"Free\" />,\n                }}\n              />\n            </div>\n            <div className=\"text-muted text-xs\">\n              <Trans\n                message=\"Next payment: :date\"\n                values={{\n                  date: renewalDate || <Trans message=\"Never\" />,\n                }}\n              />\n            </div>\n          </div>\n          <ResourceUsageList />\n        </DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n}\n","import {useLinkSummary} from './use-link-summary';\nimport clsx from 'clsx';\nimport {Trans} from '@common/i18n/trans';\nimport {Meter} from '@common/ui/progress/meter';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {UsageDetailsTrigger} from '@app/dashboard/layout/sidenav/usage-details-trigger';\n\nexport function UsageMeter() {\n  const {isLoading, data} = useLinkSummary();\n  const links = data?.usage.links;\n\n  // prevent layout shift while usage is loading\n  if (!links) {\n    return <div className=\"h-[53px] pt-24 mt-24 border-t\" />;\n  }\n\n  // prevent translation placeholders from showing if summary is not loaded yet\n  const label = (\n    <span className={clsx('whitespace-nowrap', isLoading && 'invisible')}>\n      {links.total ? (\n        <Trans\n          message=\":used of :available links created\"\n          values={{\n            used: <FormattedNumber value={links.used} />,\n            available: <FormattedNumber value={links.total} />,\n          }}\n        />\n      ) : (\n        <Trans message=\":count links created\" values={{count: links.used}} />\n      )}\n    </span>\n  );\n  return (\n    <div className=\"border-t items-start gap-8 flex pl-6 pt-24 mt-24\">\n      <UsageDetailsTrigger className=\"-mt-14\" />\n      <Meter\n        className=\"flex-auto max-w-144\"\n        size=\"xs\"\n        value={links.total && links.used ? (links.used / links.total) * 100 : 0}\n        label={label}\n        showValueLabel={false}\n        labelPosition=\"bottom\"\n      />\n    </div>\n  );\n}\n","import {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function UpgradeButton(props: ButtonProps) {\n  const {isSubscribed} = useAuth();\n  return (\n    <Button\n      elementType={Link}\n      to={isSubscribed ? '/billing/change-plan' : '/pricing'}\n      variant=\"outline\"\n      color=\"primary\"\n      size=\"xs\"\n      {...props}\n    >\n      <Trans message=\"Upgrade\" />\n    </Button>\n  );\n}\n","import clsx from 'clsx';\nimport {CustomMenu} from '@common/menus/custom-menu';\nimport React from 'react';\nimport {WorkspaceSelector} from '@common/workspace/workspace-selector';\nimport {UsageMeter} from './usage-meter';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {UpgradeButton} from '@app/dashboard/layout/sidenav/upgrade-button';\nimport {UsageDetailsTrigger} from '@app/dashboard/layout/sidenav/usage-details-trigger';\n\ninterface Props {\n  className?: string;\n  isCompactMode?: boolean;\n}\nexport function BelinkDashboardSidenav({className, isCompactMode}: Props) {\n  const {billing} = useSettings();\n\n  return (\n    <div\n      className={clsx(\n        'text-sm pt-26 text-muted font-medium bg-alt flex flex-col gap-20 border-r overflow-y-auto relative',\n        className\n      )}\n    >\n      <div className=\"flex-auto px-12\">\n        <CustomMenu\n          matchDescendants={to => to === '/dashboard'}\n          menu=\"dashboard-sidebar\"\n          orientation=\"vertical\"\n          onlyShowIcons={isCompactMode}\n          gap=\"gap-8\"\n          itemClassName={({isActive}) =>\n            clsx(\n              'block w-full rounded py-12 px-16 border-l-4',\n              isActive\n                ? 'bg-primary/hover border-l-primary'\n                : 'border-l-transparent hover:bg-hover'\n            )\n          }\n        />\n        {!isCompactMode && <UsageMeter />}\n        {billing.enable && !isCompactMode && (\n          <div className=\"mt-14 pl-60\">\n            <UpgradeButton />\n          </div>\n        )}\n      </div>\n      {!isCompactMode && (\n        <WorkspaceSelector className=\"w-full px-24 py-18 border-t flex-shrink-0 mt-auto\" />\n      )}\n      {isCompactMode && (\n        <UsageDetailsTrigger className=\"flex-shrink-0 mx-auto mb-10\" />\n      )}\n    </div>\n  );\n}\n","import {DashboardLayout} from '@common/ui/layout/dashboard-layout';\nimport {DashboardSidenav} from '@common/ui/layout/dashboard-sidenav';\nimport {DashboardContent} from '@common/ui/layout/dashboard-content';\nimport {Outlet} from 'react-router-dom';\nimport {DashboardNavbar} from '@common/ui/layout/dashboard-navbar';\nimport {BelinkDashboardSidenav} from './sidenav/belink-dashboard-sidenav';\nimport {useContext} from 'react';\nimport {DashboardLayoutContext} from '@common/ui/layout/dashboard-layout-context';\nimport {UpgradeButton} from '@app/dashboard/layout/sidenav/upgrade-button';\nimport {Button} from '@common/ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport {WorkspaceSelector} from '@common/workspace/workspace-selector';\nimport {Footer} from '@common/ui/footer/footer';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {AdHost} from '@common/admin/ads/ad-host';\nimport {useThemeSelector} from '@common/ui/themes/theme-selector-context';\n\nexport function BelinkDashboardLayout() {\n  const {\n    links: {dash_footer},\n  } = useSettings();\n  return (\n    <DashboardLayout name=\"belink-dashboard\" leftSidenavCanBeCompact>\n      <BelinkNavbar />\n      <DashboardSidenav position=\"left\">\n        <BelinkDashboardSidenav />\n      </DashboardSidenav>\n      <DashboardContent>\n        <div className=\"bg dark:bg-alt\">\n          <AdHost slot=\"dashboard\" className=\"mb-20 mt-50\" />\n          <Outlet />\n          {dash_footer && (\n            <Footer padding=\"px-16 md:px-28 pt-24 pb-28 md:pb-24\" />\n          )}\n        </div>\n      </DashboardContent>\n    </DashboardLayout>\n  );\n}\n\ninterface DashboardNavbarProps {}\nfunction BelinkNavbar(props: DashboardNavbarProps) {\n  const {billing} = useSettings();\n  const {leftSidenavStatus} = useContext(DashboardLayoutContext);\n  const {selectedTheme} = useThemeSelector();\n  const buttonColor =\n    selectedTheme.values?.['--be-navbar-color'] === 'bg' ? 'primary' : 'paper';\n  return (\n    <DashboardNavbar\n      {...props}\n      size=\"sm\"\n      menuPosition=\"dashboard-navbar\"\n      rightChildren={\n        leftSidenavStatus === 'compact' &&\n        billing.enable && <UpgradeButton variant=\"flat\" color={buttonColor} />\n      }\n    >\n      {leftSidenavStatus === 'compact' && (\n        <WorkspaceSelector\n          trigger={\n            <Button variant=\"text\" endIcon={<KeyboardArrowDownIcon />}>\n              <Trans message=\"Workspaces\" />\n            </Button>\n          }\n        />\n      )}\n    </DashboardNavbar>\n  );\n}\n","import {useDateRangePickerState} from '@common/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {DateRangeDialog} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog';\nimport React from 'react';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\nimport {DateRangeComparePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\nimport {Granularity} from '@common/ui/forms/input-field/date/date-picker/use-date-picker-state';\n\nconst monthDayFormat: Intl.DateTimeFormatOptions = {\n  month: 'short',\n  day: '2-digit',\n};\n\ninterface ReportDataSelectorProps {\n  value: DateRangeValue;\n  disabled?: boolean;\n  onChange: (value: DateRangeValue) => void;\n  compactOnMobile?: boolean;\n  enableCompare?: boolean;\n  granularity?: Granularity;\n}\nexport function ReportDateSelector({\n  value,\n  onChange,\n  disabled,\n  compactOnMobile = true,\n  enableCompare = false,\n  granularity = 'minute',\n}: ReportDataSelectorProps) {\n  const isMobile = useIsMobileMediaQuery();\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      onClose={value => {\n        if (value) {\n          onChange(value);\n        }\n      }}\n    >\n      <Button\n        variant=\"outline\"\n        color=\"chip\"\n        endIcon={<DateRangeIcon />}\n        disabled={disabled}\n      >\n        <FormattedDateTimeRange\n          start={value.start}\n          end={value.end}\n          options={\n            isMobile && compactOnMobile\n              ? monthDayFormat\n              : DateFormatPresets.short\n          }\n        />\n      </Button>\n      <DateSelectorDialog\n        value={value}\n        enableCompare={enableCompare}\n        granularity={granularity}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface DateSelectorDialogProps {\n  value: DateRangeValue;\n  enableCompare: boolean;\n  granularity: Granularity;\n}\nfunction DateSelectorDialog({\n  value,\n  enableCompare,\n  granularity,\n}: DateSelectorDialogProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const state = useDateRangePickerState({\n    granularity,\n    defaultValue: {\n      start: value.start,\n      end: value.end,\n      preset: value.preset,\n    },\n    closeDialogOnSelection: false,\n  });\n  const compareHasInitialValue = !!value.compareStart && !!value.compareEnd;\n  const compareState = useDateRangePickerState({\n    granularity,\n    defaultValue: compareHasInitialValue\n      ? {\n          start: value.compareStart,\n          end: value.compareEnd,\n          preset: value.comparePreset,\n        }\n      : DateRangeComparePresets[0].getRangeValue(state.selectedValue),\n  });\n  return (\n    <DateRangeDialog\n      state={state}\n      compareState={enableCompare ? compareState : undefined}\n      compareVisibleDefault={compareHasInitialValue}\n      showInlineDatePickerField={!isMobile}\n    />\n  );\n}\n","import {ReactNode, Ref} from 'react';\nimport clsx from 'clsx';\n\nexport interface ChartLayoutProps {\n  title: ReactNode;\n  description?: ReactNode;\n  className?: string;\n  children: ReactNode;\n  contentIsFlex?: boolean;\n  contentClassName?: string;\n  minHeight?: string;\n  contentRef?: Ref<HTMLDivElement>;\n  isLoading?: boolean;\n}\nexport function ChartLayout(props: ChartLayoutProps) {\n  const {\n    title,\n    description,\n    children,\n    className,\n    contentIsFlex = true,\n    contentClassName,\n    contentRef,\n    minHeight = 'min-h-440',\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        'rounded-panel flex h-full flex-auto flex-col border bg',\n        minHeight,\n        className,\n      )}\n    >\n      <div className=\"flex flex-shrink-0 items-center justify-between p-14 text-xs\">\n        <div className=\"text-sm font-semibold\">{title}</div>\n        {description && <div className=\"text-muted\">{description}</div>}\n      </div>\n      <div\n        ref={contentRef}\n        className={clsx(\n          'relative p-14',\n          contentIsFlex && 'flex flex-auto items-center justify-center',\n          contentClassName,\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n","import {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ChartLoadingIndicator() {\n  return (\n    <div className=\"flex items-center gap-10 text-sm absolute mx-auto\">\n      <ProgressCircle isIndeterminate size=\"sm\" />\n      <Trans message=\"Chart loading\" />\n    </div>\n  );\n}\n","import type {ChartData, ChartOptions, ChartType} from 'chart.js';\nimport {lazy, Suspense} from 'react';\nimport {ChartLayout, ChartLayoutProps} from './chart-layout';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\n\nconst LazyChart = lazy(() => import('./lazy-chart'));\n\nexport interface BaseChartProps<Type extends ChartType = ChartType>\n  extends Omit<ChartLayoutProps, 'children'> {\n  type: Type;\n  data: ChartData<Type, unknown>;\n  options?: ChartOptions<Type>;\n  hideLegend?: boolean;\n}\nexport function BaseChart<Type extends ChartType = ChartType>(\n  props: BaseChartProps<Type>\n) {\n  const {title, description, className, contentRef, isLoading} = props;\n\n  return (\n    <ChartLayout\n      title={title}\n      description={description}\n      className={className}\n      contentRef={contentRef}\n    >\n      <Suspense fallback={<ChartLoadingIndicator />}>\n        <LazyChart {...props} />\n        {isLoading && <ChartLoadingIndicator />}\n      </Suspense>\n    </ChartLayout>\n  );\n}\n","import {DateFormatter, parseAbsoluteToLocal} from '@internationalized/date';\nimport memoize from 'nano-memoize';\nimport {ChartType} from 'chart.js';\nimport {\n  FormattedDatasetItem,\n  FormattedReportData,\n} from './formatted-dataset-item';\nimport {\n  DatasetItem,\n  RangedDatasetGranularity,\n  ReportMetric,\n} from '../../admin/analytics/report-metric';\nimport {shallowEqual} from '../../utils/shallow-equal';\n\ninterface Options {\n  localeCode: string;\n  shareFirstDatasetLabels?: boolean;\n}\n\ntype FormattedDatasetLabels = Omit<FormattedDatasetItem, 'value'>;\n\nexport function formatReportData(\n  report: ReportMetric<DatasetItem> | undefined,\n  {localeCode = 'en', shareFirstDatasetLabels = true}: Options,\n): FormattedReportData {\n  if (!report) return {datasets: []};\n\n  const firstDatasetLabels: FormattedDatasetLabels[] = [];\n\n  return {\n    ...report,\n    datasets: report.datasets.map((dataset, datasetIndex) => {\n      const data = dataset.data.map((datasetItem, itemIndex) => {\n        let label: FormattedDatasetLabels;\n        // when there are multiple datasets, we'll need to use labels from the first dataset, so charts are\n        // overlapped over one another, otherwise they will be side by side, if labels in all datasets are not identical.\n        if (datasetIndex === 0 || !shareFirstDatasetLabels) {\n          label = generateDatasetLabels(\n            datasetItem,\n            report.granularity,\n            localeCode,\n          );\n          firstDatasetLabels[itemIndex] = label;\n        } else {\n          label = firstDatasetLabels[itemIndex];\n        }\n        return {\n          ...label,\n          value: datasetItem.value,\n        };\n      });\n\n      return {...dataset, data};\n    }),\n  };\n}\n\nfunction generateDatasetLabels<T extends ChartType = ChartType>(\n  datum: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined,\n  locale: string,\n): FormattedDatasetLabels {\n  if (datum.label) {\n    return {label: datum.label};\n  }\n\n  if (!datum.date) {\n    return {label: ''};\n  }\n\n  return generateTimeLabels(datum, granularity, locale);\n}\n\nfunction generateTimeLabels(\n  {date: isoDate, endDate: isoEndDate}: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined = 'day',\n  locale: string,\n): Omit<FormattedDatasetItem, 'value'> {\n  const date = parseAbsoluteToLocal(isoDate!).toDate();\n  const endDate = isoEndDate ? parseAbsoluteToLocal(isoEndDate).toDate() : null;\n\n  switch (granularity) {\n    case 'minute':\n      return {\n        label: getFormatter(locale, {\n          second: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n          second: '2-digit',\n        }).format(date),\n      };\n    case 'hour':\n      return {\n        label: getFormatter(locale, {\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n      };\n    case 'day':\n      return {\n        label: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n          month: 'short',\n        }).format(date),\n      };\n    case 'week':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          month: 'long',\n          year: 'numeric',\n        }).formatRange(date, endDate as Date),\n      };\n    case 'month':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'long',\n          year: 'numeric',\n        }).format(date),\n      };\n    case 'year':\n      return {\n        label: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n      };\n  }\n}\n\nconst getFormatter = memoize(\n  (locale, options: Intl.DateTimeFormatOptions) => {\n    return new DateFormatter(locale, options);\n  },\n  {\n    equals: (a, b) => {\n      return shallowEqual(a, b);\n    },\n    callTimeout: undefined as any,\n  },\n);\n","import {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nconst primaryColor = getBootstrapData().themes.all[0].values['--be-primary'];\nexport const ChartColors = [\n  [\n    `rgb(${primaryColor.replaceAll(' ', ',')})`,\n    `rgba(${primaryColor.replaceAll(' ', ',')},0.2)`,\n  ],\n  ['rgb(255,112,67)', 'rgb(255,112,67,0.2)'],\n  ['rgb(255,167,38)', 'rgb(255,167,38,0.2)'],\n  ['rgb(141,110,99)', 'rgb(141,110,99,0.2)'],\n  ['rgb(102,187,106)', 'rgba(102,187,106,0.2)'],\n  ['rgb(92,107,192)', 'rgb(92,107,192,0.2)'],\n];\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {DatasetItem, ReportMetric} from '../admin/analytics/report-metric';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport clsx from 'clsx';\n\nconst LineChartOptions: ChartOptions<'line'> = {\n  parsing: {\n    xAxisKey: 'label',\n    yAxisKey: 'value',\n  },\n  datasets: {\n    line: {\n      fill: 'origin',\n      tension: 0.1,\n      pointBorderWidth: 4,\n      pointHitRadius: 10,\n    },\n  },\n  plugins: {\n    tooltip: {\n      intersect: false,\n      mode: 'index',\n    },\n  },\n};\n\ninterface LineChartProps extends Omit<BaseChartProps<'line'>, 'type' | 'data'> {\n  data?: ReportMetric<DatasetItem>;\n}\nexport function LineChart({data, className, ...props}: LineChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'line', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors[i][1],\n        borderColor: ChartColors[i][0],\n        pointBackgroundColor: ChartColors[i][0],\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      {...props}\n      className={clsx(className, 'min-w-500')}\n      data={formattedData}\n      type=\"line\"\n      options={LineChartOptions}\n    />\n  );\n}\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {DatasetItem, ReportMetric} from '../admin/analytics/report-metric';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport clsx from 'clsx';\n\nconst PolarAreaChartOptions: ChartOptions<'polarArea'> = {\n  parsing: {\n    key: 'value',\n  },\n  plugins: {\n    tooltip: {\n      intersect: true,\n    },\n  },\n};\n\ninterface PolarAreaChartProps\n  extends Omit<BaseChartProps<'polarArea'>, 'type' | 'data'> {\n  data?: ReportMetric<DatasetItem>;\n}\nexport function PolarAreaChart({\n  data,\n  className,\n  ...props\n}: PolarAreaChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'polarArea', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.labels = formattedData.datasets[0]?.data.map(d => d.label);\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors.map(c => c[1]),\n        borderColor: ChartColors.map(c => c[0]),\n        borderWidth: 2,\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      type=\"polarArea\"\n      data={formattedData}\n      options={PolarAreaChartOptions}\n      className={clsx(className, 'min-w-500')}\n      {...props}\n    />\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {ChartLayout, ChartLayoutProps} from '@common/charts/chart-layout';\nimport React from 'react';\nimport {DatasetItem, ReportMetric} from '@common/admin/analytics/report-metric';\nimport clsx from 'clsx';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\n\ninterface ReferrerChartProps extends Partial<ChartLayoutProps> {\n  data?: ReportMetric<DatasetItem>;\n}\nexport function ReferrerChart({\n  data,\n  isLoading,\n  ...layoutProps\n}: ReferrerChartProps) {\n  const dataItems = data?.datasets[0].data || [];\n  return (\n    <ChartLayout\n      {...layoutProps}\n      className=\"w-1/2 min-w-500 md:min-w-0\"\n      title={<Trans message=\"Referrers\" />}\n      contentIsFlex={isLoading}\n      contentClassName=\"max-h-[370px] overflow-y-auto\"\n    >\n      {isLoading && <ChartLoadingIndicator />}\n      {dataItems.map((dataItem, index) => (\n        <div\n          key={dataItem.label || index}\n          className=\"mb-20 flex items-center justify-between gap-24 text-sm\"\n        >\n          {dataItem.label ? (\n            <div className=\"flex items-center gap-8\">\n              <RemoteFavicon url={dataItem.label} />\n              <a\n                className={clsx(\n                  LinkStyle,\n                  'overflow-hidden overflow-ellipsis whitespace-nowrap lowercase',\n                )}\n                href={dataItem.label}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                {removeProtocol(dataItem.label)}\n              </a>\n            </div>\n          ) : (\n            <Trans message=\"Direct, Email, SMS\" />\n          )}\n          <Chip\n            radius=\"rounded\"\n            size=\"xs\"\n            color=\"primary\"\n            className=\"font-semibold\"\n          >\n            {dataItem.value}\n          </Chip>\n        </div>\n      ))}\n    </ChartLayout>\n  );\n}\n","import lazyLoader from '../../../utils/http/lazy-loader';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {RefObject, useCallback, useEffect, useRef} from 'react';\nimport {useThemeSelector} from '@common/ui/themes/theme-selector-context';\nimport {themeValueToHex} from '@common/ui/themes/utils/theme-value-to-hex';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LocationDatasetItem} from '@common/admin/analytics/report-metric';\n\nconst loaderUrl = 'https://www.gstatic.com/charts/loader.js';\n\ninterface UseGoogleGeoChartProps {\n  placeholderRef: RefObject<HTMLDivElement>;\n  data: LocationDatasetItem[];\n  onCountrySelected?: (countryCode: string) => void;\n  country?: string;\n}\nexport function useGoogleGeoChart({\n  placeholderRef,\n  data,\n  country,\n  onCountrySelected,\n}: UseGoogleGeoChartProps) {\n  const {trans} = useTrans();\n  const {analytics} = useSettings();\n  const apiKey = analytics?.gchart_api_key;\n  const {selectedTheme} = useThemeSelector();\n  const geoChartRef = useRef<google.visualization.GeoChart>();\n  // only allow selecting countries, not cities\n  const regionInteractivity = !!onCountrySelected && !country;\n  const drawGoogleChart = useCallback(() => {\n    if (typeof google === 'undefined') return;\n\n    const seedData = data.map(location => [location.label, location.value]);\n    seedData.unshift([\n      country ? trans(message('City')) : trans(message('Country')),\n      trans(message('Clicks')),\n    ]);\n\n    const backgroundColor = `${themeValueToHex(\n      selectedTheme.values['--be-paper'],\n    )}`;\n    const chartColor = `${themeValueToHex(\n      selectedTheme.values['--be-primary'],\n    )}`;\n\n    const options: google.visualization.GeoChartOptions = {\n      colorAxis: {colors: [chartColor]},\n      backgroundColor,\n      region: country ? country.toUpperCase() : undefined,\n      resolution: country ? 'provinces' : 'countries',\n      displayMode: country ? 'markers' : 'regions',\n      enableRegionInteractivity: regionInteractivity,\n    };\n\n    if (\n      !geoChartRef.current &&\n      placeholderRef.current &&\n      google?.visualization?.GeoChart\n    ) {\n      geoChartRef.current = new google.visualization.GeoChart(\n        placeholderRef.current,\n      );\n    }\n    geoChartRef.current?.draw(\n      google.visualization.arrayToDataTable(seedData),\n      options,\n    );\n  }, [\n    selectedTheme,\n    data,\n    placeholderRef,\n    trans,\n    country,\n    regionInteractivity,\n  ]);\n\n  const initGoogleGeoChart = useCallback(async () => {\n    if (lazyLoader.isLoadingOrLoaded(loaderUrl)) return;\n    await lazyLoader.loadAsset(loaderUrl, {type: 'js', id: 'google-charts-js'});\n    await google.charts.load('current', {\n      packages: ['geochart'],\n      mapsApiKey: apiKey,\n    });\n    drawGoogleChart();\n  }, [apiKey, drawGoogleChart]);\n\n  useEffect(() => {\n    if (geoChartRef.current && onCountrySelected) {\n      google.visualization.events.addListener(\n        geoChartRef.current,\n        'regionClick',\n        (a: {region: string}) => onCountrySelected?.(a.region),\n      );\n    }\n\n    return () => {\n      if (geoChartRef.current) {\n        google.visualization.events.removeAllListeners(geoChartRef.current);\n      }\n    };\n    // this will correctly run when geochart instance is set on ref\n  }, [onCountrySelected, geoChartRef.current]);\n\n  // on component load: load chart library then draw, otherwise just draw\n  useEffect(() => {\n    initGoogleGeoChart();\n  }, [initGoogleGeoChart]);\n\n  // redraw chart if data or theme changes\n  useEffect(() => {\n    drawGoogleChart();\n  }, [selectedTheme, drawGoogleChart, data]);\n\n  return {drawGoogleChart};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowBackIcon = createSvgIcon(\n  <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\n, 'ArrowBackOutlined');\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const InfoDialogTriggerIcon = createSvgIcon(\n  <path d=\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\" />,\n  'InfoDialogTrigger'\n);\n","import {IconButton} from '@common/ui/buttons/icon-button';\nimport {InfoDialogTriggerIcon} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon';\nimport {Dialog, DialogSize} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport React, {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InfoDialogTriggerProps {\n  title?: ReactNode;\n  body: ReactNode;\n  dialogSize?: DialogSize;\n  className?: string;\n}\nexport function InfoDialogTrigger({\n  title,\n  body,\n  dialogSize = 'sm',\n  className,\n}: InfoDialogTriggerProps) {\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      <IconButton\n        className={clsx('ml-4 text-muted opacity-70', className)}\n        iconSize=\"xs\"\n        size=\"2xs\"\n      >\n        <InfoDialogTriggerIcon viewBox=\"0 0 16 16\" />\n      </IconButton>\n      <Dialog size={dialogSize}>\n        {title && (\n          <DialogHeader padding=\"px-18 pt-12\" size=\"md\" hideDismissButton>\n            {title}\n          </DialogHeader>\n        )}\n        <DialogBody>{body}</DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n}\n","import {useSelectedLocale} from '@common/i18n/selected-locale';\nimport {Fragment, memo} from 'react';\n\ninterface Props {\n  code: string;\n}\nexport const FormattedCountryName = memo(({code: countryCode}: Props) => {\n  const {localeCode} = useSelectedLocale();\n  const regionNames = new Intl.DisplayNames([localeCode], {type: 'region'});\n  let formattedName: string | undefined;\n\n  try {\n    formattedName = regionNames.of(countryCode.toUpperCase());\n  } catch (e) {}\n\n  return <Fragment>{formattedName}</Fragment>;\n});\n","import {\n  LocationDatasetItem,\n  ReportMetric,\n} from '@common/admin/analytics/report-metric';\nimport React, {useMemo, useRef} from 'react';\nimport {useGoogleGeoChart} from './use-google-geo-chart';\nimport {ChartLayout, ChartLayoutProps} from '@common/charts/chart-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\nimport {Button} from '@common/ui/buttons/button';\nimport {ArrowBackIcon} from '@common/icons/material/ArrowBack';\nimport clsx from 'clsx';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {FormattedCountryName} from '@common/i18n/formatted-country-name';\n\ninterface GeoChartData extends Partial<ChartLayoutProps> {\n  data?: ReportMetric<LocationDatasetItem>;\n  onCountrySelected?: (countryCode: string | undefined) => void;\n  country?: string;\n}\nexport function GeoChart({\n  data: metricData,\n  isLoading,\n  onCountrySelected,\n  country,\n  ...layoutProps\n}: GeoChartData) {\n  const placeholderRef = useRef<HTMLDivElement>(null);\n  const regionInteractivity = !!onCountrySelected;\n\n  // memo data to avoid redrawing chart on rerender\n  const initialData = metricData?.datasets[0].data;\n  const data = useMemo(() => {\n    return initialData || [];\n  }, [initialData]);\n  useGoogleGeoChart({placeholderRef, data, country, onCountrySelected});\n\n  return (\n    <ChartLayout\n      {...layoutProps}\n      className=\"min-w-500\"\n      title={\n        <div className=\"flex items-center\">\n          <Trans message=\"Top Locations\" />\n          {country ? (\n            <span className=\"pl-4\">\n              ({<FormattedCountryName code={country} />})\n            </span>\n          ) : null}\n          {regionInteractivity && <InfoTrigger />}\n        </div>\n      }\n      contentIsFlex={isLoading}\n    >\n      {isLoading && <ChartLoadingIndicator />}\n      <div className=\"flex gap-24\">\n        <div\n          ref={placeholderRef}\n          className=\"flex-auto w-[480px] min-h-[340px]\"\n        />\n        <div className=\"w-[170px]\">\n          <div className=\"text-sm max-h-[340px] w-full flex-initial overflow-y-auto\">\n            {data.map(location => (\n              <div\n                key={location.label}\n                className={clsx(\n                  'flex items-center gap-4 mb-4',\n                  regionInteractivity && 'cursor-pointer hover:underline'\n                )}\n                role={regionInteractivity ? 'button' : undefined}\n                onClick={() => {\n                  onCountrySelected?.(location.code);\n                }}\n              >\n                <div className=\"max-w-110 whitespace-nowrap overflow-hidden overflow-ellipsis\">\n                  {location.label}\n                </div>\n                <div>({location.percentage})%</div>\n              </div>\n            ))}\n          </div>\n          {country && (\n            <Button\n              variant=\"outline\"\n              size=\"xs\"\n              className=\"mt-14\"\n              startIcon={<ArrowBackIcon />}\n              onClick={() => {\n                onCountrySelected?.(undefined);\n              }}\n            >\n              <Trans message=\"Back to countries\" />\n            </Button>\n          )}\n        </div>\n      </div>\n    </ChartLayout>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      title={<Trans message=\"Zooming in\" />}\n      body={\n        <Trans message=\"Click on a country inside the map or country list to zoom in and see city data for that country.\" />\n      }\n    />\n  );\n}\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {useSelectedLocale} from '../i18n/selected-locale';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {DatasetItem, ReportMetric} from '../admin/analytics/report-metric';\nimport clsx from 'clsx';\n\ninterface BarChartProps extends Omit<BaseChartProps<'bar'>, 'type' | 'data'> {\n  direction?: 'horizontal' | 'vertical';\n  individualBarColors?: boolean;\n  data?: ReportMetric<DatasetItem>;\n}\nexport function BarChart({\n  data,\n  direction = 'vertical',\n  individualBarColors = false,\n  className,\n  ...props\n}: BarChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'bar', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: individualBarColors\n          ? ChartColors.map(c => c[1])\n          : ChartColors[i][1],\n        borderColor: individualBarColors\n          ? ChartColors.map(c => c[0])\n          : ChartColors[i][0],\n        borderWidth: 2,\n      }));\n      return formattedData;\n    }, [data, localeCode, individualBarColors]);\n\n  const isHorizontal = direction === 'horizontal';\n  const options: ChartOptions<'bar'> = useMemo(() => {\n    return {\n      indexAxis: isHorizontal ? 'y' : 'x',\n      parsing: {\n        xAxisKey: isHorizontal ? 'value' : 'label',\n        yAxisKey: isHorizontal ? 'label' : 'value',\n      },\n    };\n  }, [isHorizontal]);\n\n  return (\n    <BaseChart\n      type=\"bar\"\n      className={clsx(className, 'min-w-500')}\n      data={formattedData}\n      options={options}\n      {...props}\n    />\n  );\n}\n","import {keepPreviousData, useQuery} from '@tanstack/react-query';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {apiClient} from '@common/http/query-client';\nimport {\n  LocationDatasetItem,\n  ReportMetric,\n} from '@common/admin/analytics/report-metric';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\nconst endpoint = 'reports/clicks';\n\nexport interface FetchLinkReportResponse extends BackendResponse {\n  report: {\n    totalClicks: number;\n    clicks: ReportMetric;\n    browsers: ReportMetric;\n    countries: ReportMetric<LocationDatasetItem>;\n    cities: ReportMetric;\n    devices: ReportMetric;\n    platforms: ReportMetric;\n    referrers: ReportMetric;\n  };\n}\n\nexport type ClicksReportMetric =\n  | 'clicks'\n  | 'devices'\n  | 'browsers'\n  | 'platforms'\n  | 'countries'\n  | 'cities'\n  | 'referrers';\n\ninterface Payload {\n  dateRange: DateRangeValue;\n  model?: string;\n  metrics?: ClicksReportMetric[];\n  country?: string | null;\n}\n\ninterface Options {\n  isEnabled: boolean;\n}\n\nexport function useClicksReport(payload: Payload, options: Options) {\n  return useQuery<FetchLinkReportResponse>({\n    queryKey: [endpoint, payload],\n    queryFn: () => fetchClicksReport(endpoint, payload),\n    placeholderData: keepPreviousData,\n    enabled: options.isEnabled,\n  });\n}\n\nfunction fetchClicksReport<\n  T extends FetchLinkReportResponse = FetchLinkReportResponse,\n>(endpoint: string, payload: Payload): Promise<T> {\n  const params: Record<string, any> = {\n    model: payload.model,\n    metrics: payload.metrics?.join(','),\n    country: payload.country,\n  };\n  params.startDate = payload.dateRange.start.toAbsoluteString();\n  params.endDate = payload.dateRange.end.toAbsoluteString();\n  params.timezone = payload.dateRange.start.timeZone;\n\n  return apiClient.get(endpoint, {params}).then(response => response.data);\n}\n","import React, {\n  cloneElement,\n  Fragment,\n  ReactElement,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport {LineChart} from '@common/charts/line-chart';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {PolarAreaChart} from '@common/charts/polar-area-chart';\nimport {ReferrerChart} from '@app/dashboard/reports/referrer-chart';\nimport {GeoChart} from '@common/admin/analytics/geo-chart/geo-chart';\nimport {BarChart} from '@common/charts/bar-chart';\nimport {\n  ClicksReportMetric,\n  FetchLinkReportResponse,\n  useClicksReport,\n} from '@app/dashboard/reports/clicks/use-clicks-report';\nimport {BaseChartProps} from '@common/charts/base-chart';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {useSearchParams} from 'react-router-dom';\n\ninterface Props {\n  dateRange: DateRangeValue;\n  model: string;\n}\nexport function ClicksReportCharts({dateRange, model}: Props) {\n  const colGap = 'gap-12 md:gap-24 mb-12 md:mb-24';\n  const rowClassName = `flex flex-col lg:flex-row lg:items-center overflow-x-auto ${colGap}`;\n\n  return (\n    <Fragment>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"clicks\" model={model} dateRange={dateRange}>\n          {({data}) => (\n            <LineChart\n              className=\"flex-auto\"\n              title={<Trans message=\"Click count\" />}\n              hideLegend\n              description={\n                <Trans\n                  message=\":count total clicks\"\n                  values={{\n                    count: (\n                      <FormattedNumber value={data?.report.clicks.total || 0} />\n                    ),\n                  }}\n                />\n              }\n            />\n          )}\n        </AsyncChart>\n        <AsyncChart metric=\"devices\" model={model} dateRange={dateRange}>\n          <PolarAreaChart\n            title={<Trans message=\"Top devices\" />}\n            className=\"max-w-500\"\n          />\n        </AsyncChart>\n      </div>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"referrers\" model={model} dateRange={dateRange}>\n          <ReferrerChart />\n        </AsyncChart>\n        <GeoChartWithCities dateRange={dateRange} model={model} />\n      </div>\n      <div className={rowClassName}>\n        <AsyncChart metric=\"browsers\" model={model} dateRange={dateRange}>\n          <BarChart\n            className=\"max-w-500\"\n            direction=\"horizontal\"\n            individualBarColors\n            hideLegend\n            title={<Trans message=\"Top browsers\" />}\n          />\n        </AsyncChart>\n        <AsyncChart metric=\"platforms\" model={model} dateRange={dateRange}>\n          <PolarAreaChart\n            className=\"max-w-500\"\n            title={<Trans message=\"Top platforms\" />}\n          />\n        </AsyncChart>\n      </div>\n    </Fragment>\n  );\n}\n\nfunction GeoChartWithCities({model, dateRange}: Props) {\n  const [params, setParams] = useSearchParams();\n  const selectedCountry = params.get('country') || undefined;\n\n  const handleCountrySelected = useCallback(\n    (country?: string) => {\n      setParams(prev => {\n        if (country) {\n          prev.set('country', country);\n        } else {\n          prev.delete('country');\n        }\n        return prev;\n      });\n    },\n    [setParams]\n  );\n\n  return (\n    <AsyncChart\n      metric={selectedCountry ? 'cities' : 'countries'}\n      model={model}\n      dateRange={dateRange}\n      country={selectedCountry}\n    >\n      <GeoChart\n        onCountrySelected={handleCountrySelected}\n        country={selectedCountry}\n        className=\"flex-auto w-1/2 lg:max-w-[740px]\"\n      />\n    </AsyncChart>\n  );\n}\n\ninterface AsyncChartProps {\n  children:\n    | ReactElement<BaseChartProps>\n    | ((\n        query: UseQueryResult<FetchLinkReportResponse>\n      ) => ReactElement<BaseChartProps>);\n  metric: ClicksReportMetric;\n  model: string;\n  dateRange: DateRangeValue;\n  country?: string;\n}\nfunction AsyncChart({children, metric, model, dateRange}: AsyncChartProps) {\n  const [isEnabled, setIsEnabled] = useState(false);\n  const [params] = useSearchParams();\n  const query = useClicksReport(\n    {metrics: [metric], model, dateRange, country: params.get('country')},\n    {isEnabled}\n  );\n  const chart = typeof children === 'function' ? children(query) : children;\n  const observerRef = useRef<IntersectionObserver>();\n\n  const contentRef = useCallback((el: HTMLDivElement | null) => {\n    if (el) {\n      const observer = new IntersectionObserver(\n        ([e]) => {\n          if (e.isIntersecting) {\n            setIsEnabled(true);\n            observerRef.current?.disconnect();\n            observerRef.current = undefined;\n          }\n        },\n        {threshold: 0.1} // if only header is visible, don't load\n      );\n      observerRef.current = observer;\n      observer.observe(el);\n    } else if (observerRef.current) {\n      observerRef.current?.disconnect();\n    }\n  }, []);\n\n  return cloneElement<BaseChartProps>(chart, {\n    data: query.data?.report?.[metric],\n    isLoading: query.isLoading,\n    contentRef,\n  });\n}\n","import {StaticPageTitle} from '@common/seo/static-page-title';\nimport {Trans} from '@common/i18n/trans';\nimport {ReportDateSelector} from '@common/admin/analytics/report-date-selector';\nimport {ClicksReportCharts} from '@app/dashboard/reports/clicks/clicks-report-charts';\nimport React, {ReactNode, useState} from 'react';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\n\ninterface ClicksReportPageLayoutProps {\n  model: string;\n  title: ReactNode;\n  actions?: ReactNode;\n}\nexport function ClicksReportPageLayout({\n  model,\n  title,\n  actions,\n}: ClicksReportPageLayoutProps) {\n  const [dateRange, setDateRange] = useState<DateRangeValue>(() => {\n    // This week\n    return DateRangePresets[2].getRangeValue();\n  });\n  return (\n    <div className=\"min-h-full gap-12 md:gap-24 p-12 md:p-24\">\n      <StaticPageTitle>\n        <Trans message=\"Clicks report\" />\n      </StaticPageTitle>\n      <div className=\"md:flex items-center justify-between gap-24 mb-24\">\n        {title}\n        <div className=\"flex-shrink-0 flex items-center md:justify-end mt-10 md:mt-0 gap-12\">\n          {actions}\n          <div className=\"text-sm font-semibold\">\n            <ReportDateSelector\n              value={dateRange}\n              onChange={setDateRange}\n              compactOnMobile={false}\n            />\n          </div>\n        </div>\n      </div>\n      <ClicksReportCharts dateRange={dateRange} model={model} />\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function AllClicksReportPage() {\n  const {workspaceId} = useActiveWorkspaceId();\n  const {user} = useAuth();\n\n  const model =\n    workspaceId && workspaceId > 0\n      ? `workspace=${workspaceId}`\n      : `user=${user?.id}`;\n\n  return (\n    <ClicksReportPageLayout\n      model={model}\n      title={\n        <h1 className=\"text-3xl font-light\">\n          <Trans message=\"Clicks report\" />\n        </h1>\n      }\n    />\n  );\n}\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {USER_MODEL} from '@common/auth/user';\nimport {\n  createdAtFilter,\n  timestampFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const LinksDatatableFilters: BackendFilter[] = [\n  {\n    key: 'type',\n    label: message('Type'),\n    description: message('Type of the link'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Direct'),\n          value: 'direct',\n        },\n        {\n          key: '02',\n          label: message('Overlay'),\n          value: 'overlay',\n        },\n        {\n          key: '03',\n          label: message('Frame'),\n          value: 'frame',\n        },\n        {\n          key: '04',\n          label: message('Custom page'),\n          value: 'link_page',\n        },\n      ],\n    },\n  },\n  {\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether link is disabled or not'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Enabled'),\n          value: true,\n        },\n        {\n          key: '02',\n          label: message('Disabled'),\n          value: false,\n        },\n      ],\n    },\n  },\n  {\n    key: 'password',\n    label: message('Password'),\n    description: message('Whether link is password protected'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Has a password'),\n          value: {value: null, operator: FilterOperator.ne},\n        },\n        {\n          key: '02',\n          label: message('Does not have a password'),\n          value: {value: null, operator: FilterOperator.eq},\n        },\n      ],\n    },\n  },\n  {\n    key: 'clicks_count',\n    label: message('Click count'),\n    description: message('Total number of clicks for link'),\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n    control: {\n      type: FilterControlType.Input,\n      inputType: 'number',\n      defaultValue: 1,\n    },\n  },\n  timestampFilter({\n    key: 'clicked_at',\n    label: message('Clicked at'),\n    description: message('Date link was last clicked'),\n  }),\n  timestampFilter({\n    key: 'expires_at',\n    label: message('Expires at'),\n    description: message('Date link will expire'),\n  }),\n  createdAtFilter({\n    description: message('Date link was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date link was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('User'),\n    description: message('User link was created by'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {\n  FetchValueListsResponse,\n  prefetchValueLists,\n  useValueLists,\n} from '@common/http/value-lists';\nimport {useAuth} from '@common/auth/use-auth';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nconst names: (keyof FetchValueListsResponse)[] = [\n  'countries',\n  'domains',\n  'pages',\n  'overlays',\n  'pixels',\n  'groups',\n];\n\nexport function useLinkFormValueLists() {\n  const {user} = useAuth();\n  return useValueLists(names, {userId: user?.id, pageType: 'link_page'});\n}\n\nexport function prefetchLinkFormValueLists() {\n  prefetchValueLists(names, {\n    userId: getBootstrapData().user?.id,\n    pageType: 'link_page',\n  });\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFormValueLists} from '../requests/use-link-form-value-lists';\nimport {useFormContext} from 'react-hook-form';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Trans} from '@common/i18n/trans';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\n\nexport function LinkTypeField() {\n  const {\n    branding: {site_name},\n  } = useSettings();\n  const {data} = useLinkFormValueLists();\n  const {watch, setValue} = useFormContext<CrupdateLinkFormValues>();\n  const type = watch('type');\n\n  return (\n    <div className=\"flex items-center gap-12\">\n      <FormSelect\n        className=\"mb-24 flex-auto\"\n        name=\"type\"\n        label={<Trans message=\"Type\" />}\n        selectionMode=\"single\"\n        onSelectionChange={() => {\n          // clear type id when link type changes\n          setValue('type_id', null);\n        }}\n      >\n        <Item\n          value=\"direct\"\n          description={<Trans message=\"Redirect user to url instantly\" />}\n        >\n          <Trans message=\"Direct\" />\n        </Item>\n        <Item\n          value=\"frame\"\n          description={\n            <Trans\n              message=\" Show url inside iframe with :siteName navigation bar.\"\n              values={{siteName: site_name}}\n            />\n          }\n        >\n          <Trans message=\"Frame\" />\n        </Item>\n        <Item\n          value=\"splash\"\n          description={\n            <Trans message=\"Show splash page with optional ads and redirect user to url after a delay.\" />\n          }\n        >\n          <Trans message=\"Splash\" />\n        </Item>\n        {data?.pages?.length ? (\n          <Item\n            value=\"page\"\n            description={\n              <Trans\n                message=\"Show specified link page with :siteName navigation bar and button to open\n      long url.\"\n                values={{siteName: site_name}}\n              />\n            }\n          >\n            <Trans message=\"Link page\" />\n          </Item>\n        ) : null}\n        {data?.overlays.length ? (\n          <Item\n            value=\"overlay\"\n            description={\n              <Trans message=\"Redirect user instantly and show specified overlay over the link.\" />\n            }\n          >\n            <Trans message=\"Overlay\" />\n          </Item>\n        ) : null}\n      </FormSelect>\n      {type === 'page' && (\n        <FormSelect\n          label={<Trans message=\"Link page\" />}\n          name=\"type_id\"\n          selectionMode=\"single\"\n          className=\"mb-24 flex-auto\"\n          required\n        >\n          {data?.pages?.map(page => (\n            <Item key={page.id} value={page.id}>\n              {page.title}\n            </Item>\n          ))}\n        </FormSelect>\n      )}\n      {type === 'overlay' && (\n        <FormSelect\n          label={<Trans message=\"Link overlay\" />}\n          name=\"type_id\"\n          selectionMode=\"single\"\n          className=\"mb-24 flex-auto\"\n          required\n        >\n          {data?.overlays?.map(overlay => (\n            <Item key={overlay.id} value={overlay.id}>\n              {overlay.name}\n            </Item>\n          ))}\n        </FormSelect>\n      )}\n    </div>\n  );\n}\n","export default \"__VITE_ASSET__4d22498a__\"","import {ReactNode} from 'react';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport upgradeSvg from '@common/billing/upgrade/upgrade.svg';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\n\ninterface UpgradeDialogProps {\n  message?: ReactNode;\n  messageSuffix?: ReactNode;\n}\nexport function UpgradeDialog({message, messageSuffix}: UpgradeDialogProps) {\n  const {close} = useDialogContext();\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Join the PROs\" />\n      </DialogHeader>\n      <DialogBody>\n        <div className=\"mb-20 text-center\">\n          <SvgImage src={upgradeSvg} className=\"mx-auto\" height=\"h-100\" />\n        </div>\n        <div>\n          {message} {messageSuffix}\n        </div>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          size=\"xs\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Maybe later\" />\n        </Button>\n        <Button\n          autoFocus\n          variant=\"flat\"\n          size=\"xs\"\n          color=\"primary\"\n          elementType={Link}\n          to=\"/pricing\"\n          target=\"_blank\"\n          onClick={() => close()}\n        >\n          <Trans message=\"Find out more\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\nimport {UpgradeDialog} from '@common/billing/upgrade/upgrade-dialog';\n\ninterface FeatureLockedDialogProps {\n  message?: ReactNode;\n  messageSuffix?: ReactNode;\n}\nexport function FeatureLockedDialog({\n  message,\n  messageSuffix,\n}: FeatureLockedDialogProps) {\n  return (\n    <UpgradeDialog\n      message={message}\n      messageSuffix={\n        messageSuffix === undefined ? (\n          <Trans message=\"Upgrade to unlock this feature and many more.\" />\n        ) : (\n          messageSuffix\n        )\n      }\n    />\n  );\n}\n","import {LockIcon} from '@common/icons/material/Lock';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ReactNode} from 'react';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {FeatureLockedDialog} from '@common/billing/upgrade/feature-locked-dialog';\nimport clsx from 'clsx';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {Button} from '@common/ui/buttons/button';\n\ninterface UpgradeButtonProps {\n  message?: ReactNode;\n  className?: string;\n  iconButton?: boolean;\n}\nexport function NoPermissionButton({\n  message,\n  className,\n  iconButton,\n}: UpgradeButtonProps) {\n  const {billing} = useSettings();\n\n  if (!billing.enable) {\n    return <GenericButton className={className} />;\n  }\n\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      {iconButton ? (\n        <IconButton className={className} color=\"primary\" size=\"sm\">\n          <LockIcon />\n        </IconButton>\n      ) : (\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"2xs\"\n          startIcon={<LockIcon />}\n          className={className}\n        >\n          <Trans message=\"Upgrade\" />\n        </Button>\n      )}\n      <FeatureLockedDialog message={message} />\n    </DialogTrigger>\n  );\n}\n\ninterface GenericButtonProps {\n  className?: string;\n}\nfunction GenericButton({className}: GenericButtonProps) {\n  return (\n    <Tooltip\n      label={\n        <Trans message=\"You don't have permissions to access this feature.\" />\n      }\n    >\n      <LockIcon size=\"sm\" className={clsx('text-muted', className)} />\n    </Tooltip>\n  );\n}\n","import {ReactElement, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {NoPermissionButton} from '@common/billing/upgrade/no-permission-button';\n\ninterface LinkFormSectionProps {\n  title: ReactElement;\n  description: ReactElement;\n  children: ReactNode;\n  upgradeMessage?: ReactNode;\n}\nexport function LinkFormSection({\n  title,\n  description,\n  children,\n  upgradeMessage,\n}: LinkFormSectionProps) {\n  return (\n    <div className=\"border-t pt-24\">\n      <div\n        className={clsx(\n          'font-semibold',\n          upgradeMessage && 'mb-8 flex items-center gap-10',\n        )}\n      >\n        <div className=\"text-sm\">{title}</div>\n        {upgradeMessage && <NoPermissionButton message={upgradeMessage} />}\n      </div>\n      <div className=\"text-sm text-muted\">{description}</div>\n      {children}\n    </div>\n  );\n}\n","import {\n  LinkFeaturePermissions,\n  useLinkSummary,\n} from '@app/dashboard/layout/sidenav/use-link-summary';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function useLinkFeatureStatus(feature: keyof LinkFeaturePermissions) {\n  const {data} = useLinkSummary();\n  const {hasPermission} = useAuth();\n  const disabled: boolean =\n    !data?.usage.links[feature] && !hasPermission('admin');\n  return {disabled};\n}\n","import {Fragment, ReactElement} from 'react';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LinkFormSection} from './link-form-section';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {NoPermissionButton} from '@common/billing/upgrade/no-permission-button';\n\ninterface LinkRestrictionFieldsProps {\n  linkName: ReactElement<MessageDescriptor>;\n}\nexport function LinkRestrictionFields({linkName}: LinkRestrictionFieldsProps) {\n  const {disabled} = useLinkFeatureStatus('password');\n\n  return (\n    <Fragment>\n      <FormTextField\n        type=\"password\"\n        name=\"password\"\n        label={<Trans message=\"Password\" />}\n        autoComplete=\"new-password\"\n        className=\"mb-24\"\n        labelSuffix={\n          disabled && (\n            <NoPermissionButton\n              message={\n                <Trans message=\"Your current plan doesn't include link password protection.\" />\n              }\n            />\n          )\n        }\n        disabled={disabled}\n      />\n      <ScheduleFields linkName={linkName} />\n      <ExpirationClicksField linkName={linkName} />\n    </Fragment>\n  );\n}\n\nfunction ScheduleFields({linkName}: LinkRestrictionFieldsProps) {\n  const now = useCurrentDateTime();\n  const {disabled} = useLinkFeatureStatus('expiration');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Schedule\" />}\n      description={\n        <Trans\n          message=\"Specify a date when :name should become active and when it should expire. Both activation and expiration dates are optional.\"\n          values={{name: linkName}}\n        />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans\n            message=\"Your current plan doesn't include :name scheduling.\"\n            values={{name: linkName}}\n          />\n        )\n      }\n    >\n      <div className=\"mt-24 block items-center gap-24 md:flex\">\n        <FormDatePicker\n          showCalendarFooter\n          label={<Trans message=\"Activation date\" />}\n          min={now}\n          name=\"activates_at\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormDatePicker\n          showCalendarFooter\n          label={<Trans message=\"Expiration date\" />}\n          min={now}\n          name=\"expires_at\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n    </LinkFormSection>\n  );\n}\n\nfunction ExpirationClicksField({linkName}: LinkRestrictionFieldsProps) {\n  const {trans} = useTrans();\n  const {disabled} = useLinkFeatureStatus('expiration');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Expiration clicks\" />}\n      description={\n        <Trans\n          message=\"After :name is visited specified amount of times, it will no longer be accessible.\nOptionally, after click amount is reached :name can redirect to specified url instead.\"\n          values={{name: linkName}}\n        />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include expiration clicks.\" />\n        )\n      }\n    >\n      <div className=\"mt-24 block items-center gap-24 md:flex\">\n        <FormTextField\n          type=\"number\"\n          label={<Trans message=\"Max clicks\" />}\n          name=\"exp_clicks_rule.key\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          type=\"url\"\n          label={<Trans message=\"Redirect URL\" />}\n          placeholder={trans(message('Optional'))}\n          name=\"exp_clicks_rule.value\"\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n    </LinkFormSection>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SwapVertIcon = createSvgIcon(\n  <path d=\"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z\" />\n, 'SwapVertOutlined');\n","import {LinkFormSection} from './link-form-section';\nimport {Trans} from '@common/i18n/trans';\nimport {useLinkFormValueLists} from '../requests/use-link-form-value-lists';\nimport {useFieldArray} from 'react-hook-form';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Button} from '@common/ui/buttons/button';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {cloneElement, Fragment, ReactElement} from 'react';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport function LinkRetargetingFields() {\n  return (\n    <div>\n      <GeoFields />\n      <DeviceFields />\n      <PlatformFields />\n    </div>\n  );\n}\n\nfunction GeoFields() {\n  const {trans} = useTrans();\n  const {data} = useLinkFormValueLists();\n  return (\n    <FieldsLayout\n      defaultKey=\"us\"\n      name=\"geo_rules\"\n      title={<Trans message=\"Location targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their location.\" />\n      }\n      buttonLabel={<Trans message=\"Add location\" />}\n    >\n      <FormSelect\n        required\n        showSearchField\n        searchPlaceholder={trans(message('Search countries'))}\n        selectionMode=\"single\"\n        items={data?.countries}\n        name=\"temp\"\n        label={<Trans message=\"Country\" />}\n        className=\"mt-24 flex-auto\"\n      >\n        {country => (\n          <Item key={country.code} value={country.code}>\n            {country.name}\n          </Item>\n        )}\n      </FormSelect>\n    </FieldsLayout>\n  );\n}\n\nfunction DeviceFields() {\n  return (\n    <FieldsLayout\n      name=\"device_rules\"\n      title={<Trans message=\"Device targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their device.\" />\n      }\n      buttonLabel={<Trans message=\"Add device\" />}\n      defaultKey=\"desktop\"\n    >\n      <FormSelect\n        required\n        selectionMode=\"single\"\n        name=\"temp\"\n        label={<Trans message=\"Device\" />}\n        className=\"mt-24 flex-auto\"\n      >\n        <Item value=\"desktop\">\n          <Trans message=\"Desktop\" />\n        </Item>\n        <Item value=\"table\">\n          <Trans message=\"Tablet\" />\n        </Item>\n        <Item value=\"mobile\">\n          <Trans message=\"Mobile\" />\n        </Item>\n      </FormSelect>\n    </FieldsLayout>\n  );\n}\n\nfunction PlatformFields() {\n  return (\n    <FieldsLayout\n      name=\"platform_rules\"\n      title={<Trans message=\"Platform targeting\" />}\n      description={\n        <Trans message=\"Redirect users to different url based on their platform.\" />\n      }\n      defaultKey=\"windows\"\n      buttonLabel={<Trans message=\"Add platform\" />}\n    >\n      <FormSelect\n        name=\"temp\"\n        required\n        selectionMode=\"single\"\n        label={<Trans message=\"Platform\" />}\n        className=\"mt-24 flex-auto\"\n      >\n        <Item value=\"windows\">\n          <Trans message=\"Windows\" />\n        </Item>\n        <Item value=\"osx\">\n          <Trans message=\"MacOs\" />\n        </Item>\n        <Item value=\"ios\">\n          <Trans message=\"iOS\" />\n        </Item>\n        <Item value=\"android\">\n          <Trans message=\"Android\" />\n        </Item>\n        <Item value=\"linux\">\n          <Trans message=\"Linux\" />\n        </Item>\n      </FormSelect>\n    </FieldsLayout>\n  );\n}\n\ninterface FieldsLayoutProps {\n  name: 'geo_rules' | 'device_rules' | 'platform_rules';\n  title: ReactElement;\n  description: ReactElement;\n  buttonLabel: ReactElement;\n  defaultKey: string;\n  children: ReactElement;\n}\nfunction FieldsLayout({\n  name,\n  title,\n  description,\n  buttonLabel,\n  defaultKey,\n  children,\n}: FieldsLayoutProps) {\n  const {fields, append, remove} = useFieldArray<CrupdateLinkFormValues>({\n    name,\n  });\n  const {disabled} = useLinkFeatureStatus('retargeting');\n\n  return (\n    <LinkFormSection\n      title={title}\n      description={description}\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include link retargeting.\" />\n        )\n      }\n    >\n      {fields.map((field, index) => (\n        <div key={field.id} className=\"block items-end gap-14 md:flex\">\n          {cloneElement(children, {name: `${name}.${index}.key`, disabled})}\n          <FormTextField\n            required\n            type=\"url\"\n            name={`${name}.${index}.value`}\n            label={<Trans message=\"URL\" />}\n            className=\"mt-24 flex-auto\"\n            disabled={disabled}\n          />\n          <RemoveButton onClick={() => remove(index)} />\n        </div>\n      ))}\n      <Button\n        className=\"my-8\"\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => {\n          append({key: defaultKey, value: ''} as any);\n        }}\n        disabled={disabled}\n      >\n        {buttonLabel}\n      </Button>\n    </LinkFormSection>\n  );\n}\n\ninterface RemoveButtonProps {\n  onClick: () => void;\n}\nfunction RemoveButton({onClick}: RemoveButtonProps) {\n  return (\n    <Fragment>\n      <div className=\"mt-12 md:hidden\">\n        <Button variant=\"outline\" color=\"danger\" size=\"xs\" onClick={onClick}>\n          <Trans message=\"Remove\" />\n        </Button>\n      </div>\n      <IconButton color=\"danger\" onClick={onClick} className=\"max-md:hidden\">\n        <CloseIcon />\n      </IconButton>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const PublicIcon = createSvgIcon(\n  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z\" />\n, 'PublicOutlined');\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\n\ninterface LinkSeoFieldsProps {\n  hideTitle?: boolean;\n}\nexport function LinkSeoFields({hideTitle}: LinkSeoFieldsProps) {\n  return (\n    <div>\n      <div className=\"block md:flex gap-24 mb-24\">\n        <FileUploadProvider>\n          <FormImageSelector\n            name=\"image\"\n            diskPrefix=\"links\"\n            variant=\"avatar\"\n            previewSize=\"w-90 h-90\"\n            previewRadius=\"rounded\"\n            placeholderIcon={<div className=\"w-full h-full bg-alt rounded\" />}\n            showRemoveButton\n          />\n        </FileUploadProvider>\n        <div className=\"flex-auto my-24 md:my-0\">\n          {!hideTitle && (\n            <FormTextField\n              name=\"name\"\n              label={<Trans message=\"Title\" />}\n              className=\"mb-24\"\n            />\n          )}\n          <FormTextField\n            inputElementType=\"textarea\"\n            name=\"description\"\n            rows={2}\n            label={<Trans message=\"description\" />}\n          />\n        </div>\n      </div>\n      <FormChipField\n        name=\"tags\"\n        label={<Trans message=\"Tags\" />}\n        valueKey=\"name\"\n      />\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AccountTreeIcon = createSvgIcon(\n  <path d=\"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z\" />\n, 'AccountTreeOutlined');\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {Button} from '@common/ui/buttons/button';\nimport {useFieldArray} from 'react-hook-form';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {LinkFormSection} from '@app/dashboard/links/forms/link-form-section';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport function LinkUtmFields() {\n  const {trans} = useTrans();\n  const {disabled} = useLinkFeatureStatus('utm');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"UTM tags\" />}\n      description={\n        <Trans message=\"Add UTMs to track web traffic in analytics tools.\" />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include UTM functionality.\" />\n        )\n      }\n    >\n      <div className=\"block md:flex gap-24 items-center mt-24\">\n        <FormTextField\n          name=\"utm.source\"\n          label={<Trans message=\"Source\" />}\n          placeholder={trans(message('e.g: adwords, google, facebook'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          name=\"utm.medium\"\n          label={<Trans message=\"Medium\" />}\n          placeholder={trans(message('e.g: banner, email, social post'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n      <div className=\"block md:flex gap-24 items-center\">\n        <FormTextField\n          name=\"utm.campaign\"\n          label={<Trans message=\"Campaign\" />}\n          placeholder={trans(message('e.g: holiday special, birthday promo'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n        <FormTextField\n          name=\"utm.term\"\n          label={<Trans message=\"Term\" />}\n          placeholder={trans(message('Use to identify ppc keywords'))}\n          className=\"mb-24 flex-auto\"\n          disabled={disabled}\n        />\n      </div>\n      <FormTextField\n        name=\"utm.content\"\n        label={<Trans message=\"Content\" />}\n        placeholder={trans(\n          message('Use to differentiate ads or words on a page')\n        )}\n        className=\"mb-24\"\n        disabled={disabled}\n      />\n      <CustomTagsSection />\n    </LinkFormSection>\n  );\n}\n\nfunction CustomTagsSection() {\n  const {fields, append, remove} = useFieldArray<CrupdateLinkFormValues>({\n    name: 'utm_custom',\n  });\n  const {disabled} = useLinkFeatureStatus('utm');\n\n  return (\n    <LinkFormSection\n      title={<Trans message=\"Custom parameters\" />}\n      description={\n        <Trans message=\"Add query parameters to track web traffic in analytics tools.\" />\n      }\n      upgradeMessage={\n        disabled && (\n          <Trans message=\"Your current plan doesn't include query parameters functionality.\" />\n        )\n      }\n    >\n      {fields.map((field, index) => (\n        <div key={field.id} className=\"block md:flex items-end gap-14\">\n          <FormTextField\n            required\n            name={`utm_custom.${index}.key`}\n            label={<Trans message=\"Key\" />}\n            className=\"flex-auto mt-24\"\n            disabled={disabled}\n          />\n          <FormTextField\n            required\n            name={`utm_custom.${index}.value`}\n            label={<Trans message=\"Value\" />}\n            className=\"flex-auto mt-24\"\n            disabled={disabled}\n          />\n          <RemoveButton onClick={() => remove(index)} />\n        </div>\n      ))}\n      <Button\n        className=\"mb-24 mt-12\"\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        onClick={() => {\n          append({key: '', value: ''});\n        }}\n        disabled={disabled}\n      >\n        <Trans message=\"Add parameter\" />\n      </Button>\n    </LinkFormSection>\n  );\n}\n\ninterface RemoveButtonProps {\n  onClick: () => void;\n}\nfunction RemoveButton({onClick}: RemoveButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    return (\n      <div className=\"mt-12\">\n        <Button variant=\"outline\" color=\"danger\" size=\"xs\" onClick={onClick}>\n          <Trans message=\"Remove\" />\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <IconButton color=\"danger\" onClick={onClick}>\n      <CloseIcon />\n    </IconButton>\n  );\n}\n","import {useMemo} from 'react';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\nexport function useDefaultCustomDomainHost(\n  allDomains?: CustomDomain[]\n): string {\n  const {custom_domains, base_url} = useSettings();\n  return useMemo(() => {\n    const selectedHost = custom_domains?.default_host;\n    if (selectedHost) {\n      const host = allDomains?.find(d => d.host === selectedHost)?.host;\n      if (host) return host;\n    }\n    return base_url.replace(/\\/$/, '').replace(/(^\\w+:|^)\\/\\//, '');\n  }, [custom_domains, base_url, allDomains]);\n}\n","import {FormSelect, FormSelectProps} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {useDefaultCustomDomainHost} from '@common/custom-domains/use-default-custom-domain-host';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\n\ninterface FormCustomDomainSelectProps\n  extends Omit<FormSelectProps<any>, 'children' | 'selectionMode'> {}\nexport function LinkDomainSelect({\n  ...selectProps\n}: FormCustomDomainSelectProps) {\n  const {data} = useLinkFormValueLists();\n  const defaultHost = useDefaultCustomDomainHost(data?.domains);\n  const {custom_domains} = useSettings();\n  const domains = data?.domains || [];\n\n  if (!custom_domains?.allow_select || !domains.length) return null;\n\n  return (\n    <FormSelect\n      selectionMode=\"single\"\n      label={<Trans message=\"Domain\" />}\n      {...selectProps}\n    >\n      {custom_domains.allow_all_option && (\n        <Item value={null} key=\"all\">\n          <Trans message=\"All my domains (including default)\" />\n        </Item>\n      )}\n      <Item\n        value={0}\n        key=\"default\"\n        startIcon={<RemoteFavicon url={defaultHost} />}\n      >\n        {removeProtocol(defaultHost)}\n      </Item>\n      {data?.domains?.map(domain => {\n        if (domain.host === defaultHost) return null;\n        return (\n          <Item\n            value={domain.id}\n            key={domain.id}\n            startIcon={<RemoteFavicon url={domain.host} />}\n          >\n            {removeProtocol(domain.host)}\n          </Item>\n        );\n      })}\n    </FormSelect>\n  );\n}\n","import {Accordion, AccordionItem} from '@common/ui/accordion/accordion';\nimport {Trans} from '@common/i18n/trans';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {LinkTypeField} from '@app/dashboard/links/forms/link-type-field';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {LockIcon} from '@common/icons/material/Lock';\nimport {LinkRestrictionFields} from '@app/dashboard/links/forms/link-restriction-fields';\nimport {SwapVertIcon} from '@common/icons/material/SwapVert';\nimport {LinkRetargetingFields} from '@app/dashboard/links/forms/link-retargeting-fields';\nimport {PublicIcon} from '@common/icons/material/Public';\nimport {LinkSeoFields} from '@app/dashboard/links/forms/link-seo-fields';\nimport {AccountTreeIcon} from '@common/icons/material/AccountTree';\nimport {LinkUtmFields} from '@app/dashboard/links/forms/link-utm-fields';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {Fragment, ReactElement, useState} from 'react';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\ntype AccordionKey = 'options' | 'restrictions' | 'retargeting' | 'seo' | 'utm';\nexport type HidableLinkSettingsField =\n  | 'type'\n  | 'groups'\n  | 'seo'\n  | 'enabled'\n  | 'alias'\n  | 'title';\n\ninterface LinkSettingsFormProps {\n  multipleLinks?: boolean;\n  defaultExpanded?: AccordionKey[];\n  hiddenFields?: HidableLinkSettingsField[];\n  linkName?: ReactElement<MessageDescriptor>;\n}\nexport function LinkSettingsForm({\n  defaultExpanded,\n  multipleLinks,\n  hiddenFields = [],\n  linkName = <Trans message=\"link\" />,\n}: LinkSettingsFormProps) {\n  const {\n    links: {retargeting},\n  } = useSettings();\n  const [expandedValues, setExpandedValues] = useState<AccordionKey[]>(\n    defaultExpanded || []\n  );\n\n  return (\n    <Accordion\n      className=\"-ml-14 -mr-14\"\n      mode=\"multiple\"\n      variant=\"minimal\"\n      expandedValues={expandedValues}\n      onExpandedChange={values => {\n        setExpandedValues(values as AccordionKey[]);\n      }}\n    >\n      <AccordionItem\n        value=\"options\"\n        label={<Trans message=\"Settings\" />}\n        startIcon={<SettingsIcon />}\n      >\n        <LinkOptionsFields\n          multipleLinks={multipleLinks}\n          hiddenFields={hiddenFields}\n          linkName={linkName}\n        />\n      </AccordionItem>\n      <AccordionItem\n        value=\"restrictions\"\n        label={<Trans message=\"Restrictions\" />}\n        startIcon={<LockIcon />}\n      >\n        <LinkRestrictionFields linkName={linkName} />\n      </AccordionItem>\n      {retargeting && (\n        <AccordionItem\n          value=\"retargeting\"\n          label={<Trans message=\"Retargeting\" />}\n          startIcon={<SwapVertIcon />}\n        >\n          <LinkRetargetingFields />\n        </AccordionItem>\n      )}\n      {!hiddenFields.includes('seo') && (\n        <AccordionItem\n          label={<Trans message=\"SEO\" />}\n          startIcon={<PublicIcon />}\n          value=\"seo\"\n        >\n          <LinkSeoFields hideTitle={hiddenFields?.includes('title')} />\n        </AccordionItem>\n      )}\n      <AccordionItem\n        value=\"utm\"\n        label={<Trans message=\"UTM\" />}\n        startIcon={<AccountTreeIcon />}\n      >\n        <LinkUtmFields />\n      </AccordionItem>\n    </Accordion>\n  );\n}\n\ninterface LinkOptionsFieldsProps {\n  multipleLinks?: boolean;\n  hiddenFields: HidableLinkSettingsField[];\n  linkName: ReactElement<MessageDescriptor>;\n}\nfunction LinkOptionsFields({\n  multipleLinks,\n  hiddenFields,\n  linkName,\n}: LinkOptionsFieldsProps) {\n  const {\n    links: {enable_type, pixels},\n  } = useSettings();\n  const linkCount = multipleLinks ? 2 : 1;\n  const hideGroups = hiddenFields.includes('groups');\n  const hideType = hiddenFields.includes('type');\n  const hideEnabled = hiddenFields.includes('enabled');\n\n  return (\n    <Fragment>\n      {enable_type && !hideType && <LinkTypeField />}\n      <LinkDomainSelect\n        name=\"domain_id\"\n        className=\"mb-24\"\n        description={\n          <Trans\n            message=\"Select which domain should [one :name|other :names] be accessible with.\"\n            values={{name: linkName, count: linkCount}}\n          />\n        }\n      />\n      {!hideGroups && <LinkGroupsField multipleLinks={multipleLinks} />}\n      {pixels && (\n        <LinkPixelsField multipleLinks={multipleLinks} linkName={linkName} />\n      )}\n      {!hideEnabled && (\n        <FormSwitch\n          name=\"active\"\n          description={\n            <Trans\n              message=\"When [one :name is|other :names are] disabled, 404 page will be shown when short URL is visited.\"\n              values={{name: linkName, count: linkCount}}\n            />\n          }\n        >\n          <Trans message=\"Enabled\" />\n        </FormSwitch>\n      )}\n    </Fragment>\n  );\n}\n\ninterface LinkGroupsFieldProps {\n  multipleLinks?: boolean;\n}\nfunction LinkGroupsField({multipleLinks}: LinkGroupsFieldProps) {\n  const {data} = useLinkFormValueLists();\n  return (\n    <FormChipField\n      suggestions={data?.groups}\n      openMenuOnFocus={true}\n      allowCustomValue={false}\n      showDropdownArrow\n      className=\"mb-24\"\n      name=\"groups\"\n      label={<Trans message=\"Groups\" />}\n      description={\n        <Trans\n          message=\"Which groups should [one link|other these links] belong to.\"\n          values={{count: multipleLinks ? 2 : 1}}\n        />\n      }\n    >\n      {group => <Item value={group.id}>{group.name}</Item>}\n    </FormChipField>\n  );\n}\n\ninterface LinkPixelsFieldProps {\n  multipleLinks?: boolean;\n  linkName: ReactElement<MessageDescriptor>;\n}\nfunction LinkPixelsField({multipleLinks, linkName}: LinkPixelsFieldProps) {\n  const {data} = useLinkFormValueLists();\n  return (\n    <FormChipField\n      suggestions={data?.pixels}\n      openMenuOnFocus={true}\n      className=\"mb-24\"\n      name=\"pixels\"\n      label={<Trans message=\"Pixels\" />}\n      description={\n        <Trans\n          message=\"Which tracking pixels should be used for [one this :name|other these :names].\"\n          values={{count: multipleLinks ? 2 : 1, name: linkName}}\n        />\n      }\n    >\n      {pixel => <Item value={pixel.id}>{pixel.name}</Item>}\n    </FormChipField>\n  );\n}\n","import React, {Fragment, useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {RefCallBack} from 'react-hook-form';\nimport {Button} from './buttons/button';\nimport {LinkIcon} from '../icons/material/Link';\nimport {TextField} from './forms/input-field/text-field/text-field';\nimport {Trans} from '../i18n/trans';\nimport {useSettings} from '../core/settings/use-settings';\nimport {slugifyString} from '@common/utils/string/slugify-string';\n\nexport interface SlugEditorProps {\n  prefix?: string;\n  suffix?: string;\n  host?: string;\n  value?: string | null;\n  placeholder?: string;\n  onChange?: (value: string) => void;\n  className?: string;\n  inputRef?: RefCallBack;\n  onInputBlur?: () => void;\n  showLinkIcon?: boolean;\n  pattern?: string;\n  minLength?: number;\n  maxLength?: number;\n  hideButton?: boolean;\n}\nexport function SlugEditor({\n  host,\n  value: initialValue = '',\n  placeholder,\n  onChange,\n  className,\n  inputRef,\n  onInputBlur,\n  showLinkIcon = true,\n  pattern,\n  minLength,\n  maxLength,\n  hideButton,\n  ...props\n}: SlugEditorProps) {\n  const {base_url} = useSettings();\n  const prefix = props.prefix ? `/${props.prefix}` : '';\n  const suffix = props.suffix ? `/${props.suffix}` : '';\n  const [isEditing, setIsEditing] = useState(false);\n  const [value, setValue] = useState(initialValue);\n  host = host || base_url;\n\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  const handleSubmit = () => {\n    if (!isEditing) {\n      setIsEditing(true);\n    } else {\n      setIsEditing(false);\n      if (value) {\n        onChange?.(value);\n      }\n    }\n  };\n\n  let preview: string = '';\n  if (value) {\n    preview = value;\n  } else if (placeholder) {\n    preview = slugifyString(placeholder);\n  }\n\n  return (\n    // can't use <form/> here as component might be used inside another form\n    <div className={clsx('flex items-center', className)}>\n      {showLinkIcon && <LinkIcon className=\"icon-md text-muted\" />}\n      <div className=\"text-primary ml-6 mr-14\">\n        {host}\n        {prefix}\n        {!isEditing && preview && (\n          <Fragment>\n            <span>/</span>\n            <span className=\"font-medium\">{preview}</span>\n          </Fragment>\n        )}\n        {!isEditing ? suffix : null}\n      </div>\n      {isEditing && (\n        <TextField\n          pattern={pattern}\n          minLength={minLength}\n          maxLength={maxLength}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              handleSubmit();\n            }\n          }}\n          ref={inputRef}\n          aria-label=\"slug\"\n          autoFocus\n          className=\"mr-14\"\n          size=\"2xs\"\n          value={value as string}\n          onBlur={onInputBlur}\n          onChange={e => {\n            setValue(e.target.value);\n          }}\n        />\n      )}\n      {!hideButton && (\n        <Button\n          type=\"button\"\n          color=\"chip\"\n          variant=\"outline\"\n          size=\"2xs\"\n          onClick={() => {\n            handleSubmit();\n          }}\n        >\n          {isEditing ? <Trans message=\"Save\" /> : <Trans message=\"Edit\" />}\n        </Button>\n      )}\n    </div>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useLinkFeatureStatus} from '@app/dashboard/upgrade/use-link-feature-status';\nimport {SlugEditor} from '@common/ui/slug-editor';\nimport {Trans} from '@common/i18n/trans';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {useDefaultCustomDomainHost} from '@common/custom-domains/use-default-custom-domain-host';\nimport {NoPermissionButton} from '@common/billing/upgrade/no-permission-button';\n\ninterface AliasFieldProps {\n  form: UseFormReturn<{hash: string; alias: string} | any>;\n  name: 'alias' | 'hash';\n}\nexport function AliasField({form, name}: AliasFieldProps) {\n  const {\n    links: {alias_min, alias_max},\n  } = useSettings();\n  const {data} = useLinkFormValueLists();\n  const defaultHost = useDefaultCustomDomainHost(data?.domains);\n  const {disabled} = useLinkFeatureStatus('alias');\n  const {watch, setValue, formState} = form;\n  const currentAlias = watch('alias') || watch('hash');\n  const aliasError =\n    formState.errors.alias?.message || formState.errors.hash?.message;\n\n  return (\n    <div className=\"mb-24\">\n      <div className=\"flex items-center\">\n        <SlugEditor\n          host={defaultHost}\n          pattern=\"[A-Za-z0-9\\-]+\"\n          minLength={alias_min}\n          maxLength={alias_max}\n          value={currentAlias}\n          onChange={newAlias => {\n            setValue(name, newAlias, {shouldDirty: true});\n          }}\n          hideButton={disabled}\n        />\n        {disabled && (\n          <NoPermissionButton\n            message={\n              <Trans message=\"Your current plan does not include alias editing.\" />\n            }\n          />\n        )}\n      </div>\n      {aliasError && (\n        <div className=\"mt-6 text-xs text-danger\">{aliasError as string}</div>\n      )}\n    </div>\n  );\n}\n","import {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {Link} from '../link';\nimport {\n  HidableLinkSettingsField,\n  LinkSettingsForm,\n} from '@app/dashboard/links/forms/link-settings-form';\nimport {urlIsValid} from '@app/dashboard/links/utils/url-is-valid';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\nimport {LinkeableFormValues} from '@app/dashboard/links/utils/build-linkeable-payload';\nimport clsx from 'clsx';\n\nexport interface CrupdateLinkFormValues\n  extends Omit<Link, 'id' | 'utm'>,\n    LinkeableFormValues {\n  position?: number;\n}\n\ninterface CrupdateLinkFormProps {\n  onSubmit: (values: CrupdateLinkFormValues) => void;\n  formId?: string;\n  form: UseFormReturn<CrupdateLinkFormValues>;\n  showButtonLabelField?: boolean;\n  hiddenFields?: HidableLinkSettingsField[];\n}\nexport function CrupdateLinkForm({\n  form,\n  onSubmit,\n  formId,\n  showButtonLabelField,\n  hiddenFields,\n}: CrupdateLinkFormProps) {\n  const {clearErrors} = form;\n  const {trans} = useTrans();\n  const {\n    links: {min_len, max_len},\n  } = useSettings();\n  const hideAlias = hiddenFields?.includes('alias');\n\n  return (\n    <Form\n      form={form}\n      onSubmit={values => {\n        if (!urlIsValid(values.long_url)) {\n          form.setError('long_url', {\n            message: trans(message('This url is invalid.')),\n          });\n        } else {\n          onSubmit(values);\n        }\n      }}\n      onBeforeSubmit={() => {\n        // hook form won't clear errors for fields that are not bound to input\n        clearErrors('alias');\n      }}\n      id={formId}\n    >\n      {showButtonLabelField && (\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Button label\" />}\n          className=\"mb-24 flex-auto\"\n          placeholder={trans(message('e.g. My Webpage'))}\n          autoFocus\n        />\n      )}\n      <FormTextField\n        label={<Trans message=\"Destination URL\" />}\n        name=\"long_url\"\n        placeholder=\"https://example.com\"\n        autoComplete=\"off\"\n        spellCheck=\"false\"\n        required\n        className={clsx(hideAlias ? 'mb-24' : 'mb-12')}\n        autoFocus={!showButtonLabelField}\n        minLength={min_len}\n        maxLength={max_len}\n      />\n      {!hideAlias && <AliasField form={form} name=\"alias\" />}\n      <LinkSettingsForm hiddenFields={hiddenFields} />\n    </Form>\n  );\n}\n","import {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {Link} from '@app/dashboard/links/link';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {defaultUtmTags} from '@app/dashboard/links/utils/build-linkeable-payload';\n\nexport const placeholderPassword = '********';\n\nexport function buildLinkeableDefaultFormValues(\n  linkeable: Biolink | LinkGroup | Link\n) {\n  const rules = linkeable.rules || [];\n  const defaultUtm: CrupdateLinkFormValues['utm'] = {};\n  const customUtm: CrupdateLinkFormValues['utm_custom'] = [];\n\n  if (linkeable.utm) {\n    const queryParams = new URLSearchParams(linkeable.utm);\n    for (const [key, value] of queryParams.entries()) {\n      if (defaultUtmTags.includes(key)) {\n        defaultUtm[key] = value;\n      } else {\n        customUtm.push({key, value});\n      }\n    }\n  }\n\n  return {\n    hash: linkeable.hash,\n    active: linkeable.active,\n    activates_at: linkeable.activates_at,\n    expires_at: linkeable.expires_at,\n    name: linkeable.name,\n    description: linkeable.description,\n    image: linkeable.image,\n    geo_rules: rules.filter(rule => rule.type === 'geo'),\n    device_rules: rules.filter(rule => rule.type === 'device'),\n    platform_rules: rules.filter(rule => rule.type === 'platform'),\n    exp_clicks_rule: rules.find(r => r.type === 'exp_clicks'),\n    // show an indication to user that password exists\n    password: linkeable.has_password ? placeholderPassword : '',\n    utm: defaultUtm,\n    utm_custom: customUtm,\n    domain_id: linkeable.domain_id,\n    pixels: linkeable.pixels,\n    tags: linkeable.tags,\n  };\n}\n","import {removeEmptyValuesFromObject} from '@common/utils/objects/remove-empty-values-from-object';\nimport {Tag} from '@common/tags/tag';\nimport {LinkRule} from '@app/dashboard/links/link-rule';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {placeholderPassword} from '@app/dashboard/links/utils/build-linkeable-default-form-values';\n\nexport const defaultUtmTags = [\n  'source',\n  'medium',\n  'campaign',\n  'term',\n  'content',\n];\n\nexport interface CrupdateLinkeablePayload\n  extends Omit<LinkeableFormValues, 'utm' | 'groups' | 'pixels' | 'tags'> {\n  utm?: string | null;\n  groups?: number[] | null;\n  pixels?: number[] | null;\n  tags?: string[] | null;\n}\n\nexport interface LinkeableFormValues {\n  exp_clicks_rule?: LinkRule;\n  geo_rules?: LinkRule[];\n  device_rules?: LinkRule[];\n  platform_rules?: LinkRule[];\n  pixels?: TrackingPixel[];\n  tags?: Tag[];\n  password?: string;\n  utm?: {\n    source?: string;\n    medium?: string;\n    campaign?: string;\n    term?: string;\n    content?: string;\n    [key: string]: string | undefined;\n  };\n  utm_custom?: {key: string; value: string}[];\n}\n\nexport function buildLinkeablePayload<R extends CrupdateLinkeablePayload>(\n  values: LinkeableFormValues\n): R {\n  // remove placeholder password, otherwise it will be set every time link is updated\n  if (values.password === placeholderPassword) {\n    delete values.password;\n  }\n  let payload: CrupdateLinkeablePayload = {\n    ...values,\n    utm: null,\n    groups: null,\n    pixels: null,\n    tags: null,\n  };\n  payload = addUtmAndCustomQueryParams(payload, values);\n  payload.pixels = values.pixels ? values.pixels.map(pixel => pixel.id) : [];\n  payload.tags = values.tags?.map((tag: Tag | string) =>\n    typeof tag === 'string' ? tag : tag.name\n  );\n  return payload as R;\n}\n\nfunction addUtmAndCustomQueryParams(\n  payload: CrupdateLinkeablePayload,\n  values: LinkeableFormValues\n): CrupdateLinkeablePayload {\n  if (!values.utm && !values.utm_custom) return payload;\n  const utm = removeEmptyValuesFromObject(values.utm || {}) as Record<\n    string,\n    string\n  >;\n  values.utm_custom?.forEach(({key, value}) => {\n    utm[key] = value;\n  });\n\n  payload.utm = new URLSearchParams(utm).toString();\n  return payload;\n}\n","import {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {\n  buildLinkeablePayload,\n  CrupdateLinkeablePayload,\n} from '@app/dashboard/links/utils/build-linkeable-payload';\n\nexport interface CrupdateLinkPayload\n  extends Omit<CrupdateLinkFormValues, 'utm' | 'groups' | 'pixels' | 'tags'>,\n    CrupdateLinkeablePayload {}\n\nexport function buildLinkPayload(\n  values: CrupdateLinkFormValues\n): CrupdateLinkPayload {\n  const payload = buildLinkeablePayload<CrupdateLinkPayload>(values);\n  payload.groups = values.groups?.map(group => group.id);\n  return payload;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkFormValues} from '@app/dashboard/links/forms/crupdate-link-form';\nimport {buildLinkPayload} from '@app/dashboard/links/requests/build-link-payload';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\ninterface Options {\n  endpoint?: string;\n  invalidateQueries?: boolean;\n}\n\nexport function useCreateLink(\n  form: UseFormReturn<CrupdateLinkFormValues>,\n  {endpoint, invalidateQueries = true}: Options = {},\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateLinkFormValues) =>\n      createLink(payload, endpoint),\n    onSuccess: () => {\n      toast.positive(trans(message('Link created')));\n      if (invalidateQueries) {\n        queryClient.invalidateQueries({\n          queryKey: DatatableDataQueryKey('link'),\n        });\n        queryClient.invalidateQueries({\n          queryKey: DatatableDataQueryKey('link-group'),\n        });\n        queryClient.invalidateQueries({\n          queryKey: DatatableDataQueryKey('biolink'),\n        });\n      }\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createLink(\n  values: CrupdateLinkFormValues,\n  endpoint?: string,\n): Promise<Response> {\n  return apiClient\n    .post(endpoint || `link`, buildLinkPayload(values))\n    .then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {\n  CrupdateLinkForm,\n  CrupdateLinkFormValues,\n} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCreateLink} from '../requests/use-create-link';\nimport {useForm} from 'react-hook-form';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {HidableLinkSettingsField} from '@app/dashboard/links/forms/link-settings-form';\n\nexport interface CreateLinkDialogProps {\n  group?: LinkGroup | Biolink | null;\n  showButtonLabelField?: boolean;\n  hiddenFields?: HidableLinkSettingsField[];\n  endpoint?: string;\n  position?: number;\n  invalidateQueries?: boolean;\n  onSuccess?: (response: any) => void;\n}\nexport function CreateLinkDialog({\n  group,\n  position,\n  showButtonLabelField,\n  hiddenFields,\n  endpoint,\n  onSuccess,\n  invalidateQueries,\n}: CreateLinkDialogProps) {\n  const {close, formId} = useDialogContext();\n  const {\n    links: {default_type},\n    custom_domains,\n  } = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateLinkFormValues>({\n    defaultValues: {\n      hash: nanoid(5),\n      active: true,\n      type: default_type || 'direct',\n      geo_rules: [],\n      device_rules: [],\n      platform_rules: [],\n      // set undefined if no group id specified, so existing groups are not cleared in backend\n      groups: group ? [group as LinkGroup] : [],\n      position: position, // for biolink\n      utm: {},\n      utm_custom: [],\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n  const createLink = useCreateLink(form, {endpoint, invalidateQueries});\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Create link\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkForm\n          hiddenFields={hiddenFields}\n          showButtonLabelField={showButtonLabelField}\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              createLink.mutate(values, {\n                onSuccess: response => {\n                  onSuccess?.(response);\n                  close();\n                },\n              });\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createLink.isPending || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkFormValues} from '../forms/crupdate-link-form';\nimport {buildLinkPayload} from '@app/dashboard/links/requests/build-link-payload';\nimport {Link} from '../link';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {\n  link: Link;\n}\n\ninterface Options {\n  endpoint?: string;\n  invalidateQueries?: boolean;\n}\n\nexport function useUpdateLink(\n  form: UseFormReturn<CrupdateLinkFormValues>,\n  linkId: number,\n  {endpoint, invalidateQueries = true}: Options = {},\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateLinkFormValues) =>\n      updateLink(linkId, payload, endpoint),\n    onSuccess: async () => {\n      if (invalidateQueries) {\n        await Promise.allSettled([\n          queryClient.invalidateQueries({\n            queryKey: DatatableDataQueryKey('link'),\n          }),\n          queryClient.invalidateQueries({\n            queryKey: DatatableDataQueryKey('link-group'),\n          }),\n          queryClient.invalidateQueries({\n            queryKey: DatatableDataQueryKey('biolink'),\n          }),\n        ]);\n      }\n      toast.positive(trans(message('Link updated')));\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction updateLink(\n  id: number,\n  values: CrupdateLinkFormValues,\n  endpoint?: string,\n): Promise<Response> {\n  return apiClient\n    .put(endpoint || `link/${id}`, buildLinkPayload(values))\n    .then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {\n  CrupdateLinkForm,\n  CrupdateLinkFormValues,\n} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useForm} from 'react-hook-form';\nimport {useUpdateLink} from '../requests/use-update-link';\nimport {Link} from '../link';\nimport {useMemo} from 'react';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {buildLinkeableDefaultFormValues} from '@app/dashboard/links/utils/build-linkeable-default-form-values';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {CreateLinkDialogProps} from '@app/dashboard/links/dialogs/create-link-dialog';\n\ninterface UpdateLinkDialogProps extends Omit<CreateLinkDialogProps, 'group'> {\n  link: Link;\n}\nexport function UpdateLinkDialog({\n  link,\n  showButtonLabelField,\n  hiddenFields,\n  invalidateQueries,\n  onSuccess,\n  endpoint,\n}: UpdateLinkDialogProps) {\n  const {close, formId} = useDialogContext();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const defaultValues = useMemo(() => buildDefaultFormValues(link), [link]);\n  const form = useForm<CrupdateLinkFormValues>({\n    defaultValues,\n  });\n  const updateLink = useUpdateLink(form, link.id, {\n    endpoint,\n    invalidateQueries,\n  });\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Update link\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkForm\n          hiddenFields={hiddenFields}\n          showButtonLabelField={showButtonLabelField}\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              updateLink.mutate(values, {\n                onSuccess: response => {\n                  onSuccess?.(response);\n                  close();\n                },\n              });\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateLink.isPending || isVerifying}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nexport function buildDefaultFormValues(link: Link) {\n  const values = buildLinkeableDefaultFormValues(link);\n  return {\n    ...values,\n    long_url: link.long_url,\n    alias: link.alias,\n    type: link.type,\n    type_id: link.type_id,\n    groups: link.groups as LinkGroup[],\n  };\n}\n","import {Link} from '@app/dashboard/links/link';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport React from 'react';\n\ninterface LinkImageProps {\n  link: Link;\n  className?: string;\n}\nexport function LinkImage({link, className}: LinkImageProps) {\n  return link.image ? (\n    <img className={className} alt=\"\" src={link.image} />\n  ) : (\n    <RemoteFavicon className={className} url={link.long_url} />\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {UpgradeDialog} from '@common/billing/upgrade/upgrade-dialog';\n\ninterface FeatureLockedDialogProps {\n  resourceName: MessageDescriptor;\n}\nexport function OverQuotaDialog({resourceName}: FeatureLockedDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <UpgradeDialog\n      message={\n        <Trans\n          message=\"You've reached the maximum number of :resource allowed for your current plan.\"\n          values={{resource: trans(resourceName)}}\n        />\n      }\n      messageSuffix={\n        <Trans message=\"Upgrade to increase this limit and unlock other features.\" />\n      }\n    />\n  );\n}\n","import React, {\n  cloneElement,\n  forwardRef,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  FetchLinkUsageResponse,\n  useLinkSummary,\n} from '@app/dashboard/layout/sidenav/use-link-summary';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {resourceTranslationMap} from '@app/dashboard/layout/sidenav/resource-usage-list';\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\nimport {Link} from '@app/dashboard/links/link';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {useAuth} from '@common/auth/use-auth';\nimport {OverQuotaDialog} from '@common/billing/upgrade/over-quota-dialog';\n\ntype ResourceName =\n  | Link['model_type']\n  | Biolink['model_type']\n  | LinkOverlay['model_type']\n  | CustomPage['model_type']\n  | CustomDomain['model_type']\n  | LinkGroup['model_type']\n  | TrackingPixel['model_type'];\n\ninterface PermissionAwareButtonProps {\n  resource:\n    | ResourceName\n    | Link\n    | LinkGroup\n    | Biolink\n    | CustomDomain\n    | LinkOverlay\n    | CustomPage\n    | TrackingPixel;\n  action: 'create' | 'update' | 'delete';\n  children: ReactElement;\n}\n\nexport const PermissionAwareButton = forwardRef<\n  HTMLElement,\n  PermissionAwareButtonProps\n>(({children, resource, action, ...childProps}, ref) => {\n  const {user} = useAuth();\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n  const {data} = useLinkSummary();\n\n  const usageKey = useMemo(() => {\n    // extract model type from resource\n    const resourceName =\n      typeof resource === 'string' ? resource : resource.model_type;\n\n    // pluralize model type and convert to snake case\n    return `${camelCaseToSnakeCase(\n      resourceName,\n    )}s` as keyof FetchLinkUsageResponse['usage'];\n  }, [resource]);\n\n  const hasPermission = data?.usage[usageKey][action];\n  const messageType = data?.usage[usageKey].createMsgType;\n\n  // user has permission or owns the resource\n  if (\n    hasPermission ||\n    (typeof resource === 'object' && resource.user_id === user?.id)\n  ) {\n    return cloneElement(children, {...childProps, ref});\n  }\n\n  if (!hasPermission && messageType !== 'overQuota') {\n    return null;\n  }\n\n  return (\n    <div\n      onPointerDown={createEventHandler(e => {\n        e.preventDefault();\n        e.stopPropagation();\n      })}\n      onClickCapture={createEventHandler(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDialogIsOpen(true);\n      })}\n      onKeyDownCapture={createEventHandler(event => {\n        const e = event as unknown as KeyboardEvent;\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.key === 'Enter' || e.key === ' ') {\n          setDialogIsOpen(true);\n        }\n      })}\n    >\n      {children}\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={dialogIsOpen}\n        onOpenChange={setDialogIsOpen}\n      >\n        <OverQuotaDialog resourceName={resourceTranslationMap[usageKey]} />\n      </DialogTrigger>\n    </div>\n  );\n});\n\nfunction camelCaseToSnakeCase(str: string) {\n  return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const BarChartIcon = createSvgIcon(\n  <path d=\"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z\" />\n, 'BarChartOutlined');\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Link} from '../link';\nimport {Trans} from '@common/i18n/trans';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {UpdateLinkDialog} from '../dialogs/update-link-dialog';\nimport React from 'react';\nimport {LinkImage} from '@app/dashboard/links/link-image';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {LinkClipboardButton} from '@app/dashboard/links/sharing/link-clipboard-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\n\nexport const linksDatatableColumns: ColumnConfig<Link>[] = [\n  {\n    key: 'summary',\n    header: () => <Trans message=\"Summary\" />,\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    body: link => (\n      <div>\n        <div className=\"flex items-center gap-6 whitespace-nowrap\">\n          <LinkImage link={link} className=\"w-16 h-16\" />\n          <a\n            className=\"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min\"\n            href={link.long_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            data-testid=\"long-url\"\n          >\n            {removeProtocol(link.long_url)}\n          </a>\n        </div>\n        <LinkClipboardButton\n          link={link}\n          variant=\"text\"\n          className=\"block text-muted hover:underline w-min\"\n          data-testid=\"short-url\"\n        />\n      </div>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    width: 'flex-2 min-w-140',\n    body: link => {\n      if (!link.user) return '';\n      return (\n        <NameWithAvatar\n          image={link.user.avatar}\n          label={link.user.display_name}\n          description={link.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'clicks',\n    sortingKey: 'clicks_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Clicks\" />,\n    body: link =>\n      link.clicks_count ? <FormattedNumber value={link.clicks_count} /> : '',\n  },\n  {\n    key: 'type',\n    sortingKey: 'type',\n    allowsSorting: true,\n    header: () => <Trans message=\"Type\" />,\n    body: link => (\n      <Chip size=\"xs\" radius=\"rounded\" className=\"capitalize\">\n        <Trans message={link.type} />\n      </Chip>\n    ),\n  },\n  {\n    key: 'password',\n    allowsSorting: true,\n    header: () => <Trans message=\"Password\" />,\n    body: link =>\n      link.has_password ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'expires_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Expires at\" />,\n    body: link =>\n      link.expires_at ? <FormattedDate date={link.expires_at} /> : '',\n  },\n  {\n    key: 'clicked_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last clicked\" />,\n    body: link =>\n      link.clicked_at ? <FormattedDate date={link.clicked_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-128 flex-shrink-0',\n    visibleInMode: 'all',\n    body: link => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Link statistics\" />}>\n          <RouterLink to={`${link.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={link} />\n        <PermissionAwareButton resource={link} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <Tooltip label={<Trans message=\"Edit link\" />}>\n              <IconButton size=\"md\">\n                <EditIcon />\n              </IconButton>\n            </Tooltip>\n            <UpdateLinkDialog link={link} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddLinkIcon = createSvgIcon(\n  <path d=\"M8 11h8v2H8v-2zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z\" />\n, 'AddLinkOutlined');\n","import {createSvgIcon} from '../../icons/create-svg-icon';\n\nexport const ExportCsvIcon = createSvgIcon(\n  <path d=\"M 7 2 C 5.895 2 5 2.895 5 4 L 5 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 16 C 2 17.105 2.895 18 4 18 L 5 18 L 5 20 C 5 21.105 5.895 22 7 22 L 15.171875 22 L 13.171875 20 L 7 20 L 7 18 L 17 18 L 17 16 C 17 14.895 17.895 14 19 14 L 21 14 L 21 7 L 16 2 L 7 2 z M 7 4 L 15 4 L 15 8 L 19 8 L 19 9 L 7 9 L 7 4 z M 6 11 C 7.105 11 8 11.895 8 13 L 7 13 C 7 12.449 6.551 12 6 12 C 5.449 12 5 12.449 5 13 L 5 14 C 5 14.551 5.449 15 6 15 C 6.551 15 7 14.551 7 14 L 8 14 C 8 15.105 7.105 16 6 16 C 4.895 16 4 15.105 4 14 L 4 13 C 4 11.895 4.895 11 6 11 z M 10.644531 11 C 12.067531 11.041 12.154297 12.282906 12.154297 12.503906 L 11.1875 12.503906 C 11.1875 12.400906 11.204906 11.806641 10.628906 11.806641 C 10.453906 11.806641 10.059844 11.884188 10.089844 12.367188 C 10.118844 12.810188 10.703547 13.019406 10.810547 13.066406 C 11.034547 13.148406 12.141391 13.642391 12.150391 14.650391 C 12.152391 14.864391 12.097062 15.985 10.664062 16 C 9.1050625 16.017 9 14.675438 9 14.398438 L 9.9746094 14.398438 C 9.9746094 14.545438 9.9870625 15.256172 10.664062 15.201172 C 11.071063 15.167172 11.159828 14.87425 11.173828 14.65625 C 11.196828 14.28925 10.846563 14.068625 10.476562 13.890625 C 9.9565625 13.640625 9.1341406 13.333375 9.1191406 12.359375 C 9.1061406 11.482375 9.7505312 10.975 10.644531 11 z M 13 11 L 14.052734 11 L 14.992188 14.646484 L 15.9375 11 L 17 11 L 15.646484 16 L 14.345703 16 L 13 11 z M 19 16 L 19 20 L 16 20 L 20 24 L 24 20 L 21 20 L 21 16 L 19 16 z\"></path>\n);\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {\n  buildLinkPayload,\n  CrupdateLinkPayload,\n} from '@app/dashboard/links/requests/build-link-payload';\nimport {CreateMultipleLinksFormValue} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {Link} from '@app/dashboard/links/link';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface CreateMultipleLinksPayload\n  extends Omit<CrupdateLinkPayload, 'hash' | 'long_url'> {\n  long_urls: string[];\n}\n\ninterface Response extends BackendResponse {\n  links: Link[];\n}\n\nexport function useCreateMultipleLinks(\n  form: UseFormReturn<CreateMultipleLinksFormValue>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (values: CreateMultipleLinksFormValue) => createLinks(values),\n    onSuccess: response => {\n      toast.positive(\n        trans(\n          message('[one 1 link|other :count links] shortened', {\n            values: {count: response.links.length},\n          }),\n        ),\n      );\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link'),\n      });\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-group'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createLinks(values: CreateMultipleLinksFormValue): Promise<Response> {\n  return apiClient\n    .post('link/batch/shorten', formToPayload(values))\n    .then(r => r.data);\n}\n\nfunction formToPayload(\n  values: CreateMultipleLinksFormValue,\n): CreateMultipleLinksPayload {\n  const payload = buildLinkPayload(values as any);\n  const longUrls = values.long_urls.split(/\\n/g);\n  return {\n    ...payload,\n    long_urls: longUrls,\n  };\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {CrupdateLinkFormValues} from '../forms/crupdate-link-form';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useForm} from 'react-hook-form';\nimport {useCreateMultipleLinks} from '@app/dashboard/links/requests/use-create-multiple-links';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {LinkSettingsForm} from '@app/dashboard/links/forms/link-settings-form';\nimport {urlIsValid} from '@app/dashboard/links/utils/url-is-valid';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\nexport interface CreateMultipleLinksFormValue\n  extends Omit<CrupdateLinkFormValues, 'hash' | 'long_url'> {\n  long_urls: string;\n}\n\ninterface CreateMultipleLinksDialogProps {\n  group?: LinkGroup | Biolink | null;\n}\nexport function CreateMultipleLinksDialog({\n  group,\n}: CreateMultipleLinksDialogProps) {\n  const {trans} = useTrans();\n  const {close, formId} = useDialogContext();\n  const form = useForm<CreateMultipleLinksFormValue>({\n    defaultValues: {\n      active: true,\n      type: 'direct',\n      geo_rules: [],\n      device_rules: [],\n      platform_rules: [],\n      // set undefined if no group id specified, so existing groups are not cleared in backend\n      groups: group ? [group as LinkGroup] : undefined,\n      utm: {},\n      utm_custom: [],\n    },\n  });\n  const createMultiple = useCreateMultipleLinks(form);\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Shorten links\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            const someUrlsInvalid = values.long_urls\n              .split(/\\r?\\n/)\n              .some(url => !urlIsValid(url));\n            if (someUrlsInvalid) {\n              form.setError('long_urls', {\n                message: trans(message('Some of the urls are not valid.')),\n              });\n            } else {\n              createMultiple.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        >\n          <FormTextField\n            label={<Trans message=\"Multiple URLs (one per line)\" />}\n            inputElementType=\"textarea\"\n            rows={10}\n            name=\"long_urls\"\n            autoComplete=\"off\"\n            spellCheck=\"false\"\n            required\n            className=\"mb-24\"\n            autoFocus\n          />\n          <LinkSettingsForm multipleLinks />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createMultiple.isPending}\n        >\n          <Trans message=\"Shorten\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React, {Fragment, useEffect, useMemo} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport shareLink from '../share-link.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {LinksDatatableFilters} from './links-datatable-filters';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {CreateLinkDialog} from '../dialogs/create-link-dialog';\nimport {useAuth} from '@common/auth/use-auth';\nimport {linksDatatableColumns} from './links-datatable-columns';\nimport {useExportCsv} from '@common/datatable/requests/use-export-csv';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {MoreHorizIcon} from '@common/icons/material/MoreHoriz';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {AddLinkIcon} from '@common/icons/material/AddLink';\nimport {ExportCsvIcon} from '@common/datatable/csv-export/export-csv-icon';\nimport {downloadFileFromUrl} from '@common/uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from '@common/datatable/csv-export/csv-export-info-dialog';\nimport {CreateMultipleLinksDialog} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\n\ninterface LinksDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinksDatablePage({forCurrentUser}: LinksDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? linksDatatableColumns\n      : linksDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinksDatatableFilters\n      : LinksDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  return (\n    <DataTablePage\n      endpoint=\"link\"\n      queryParams={{userId, workspaceId, with: 'user'}}\n      title={<Trans message=\"Links\" />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"link\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={shareLink}\n          title={<Trans message=\"No links have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching links\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  const exportCsv = useExportCsv('link/csv/export');\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton\n          variant=\"outline\"\n          color=\"primary\"\n          size=\"sm\"\n          className=\"flex-shrink-0\"\n        >\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu>\n          <Item\n            value=\"addMultiple\"\n            startIcon={<AddLinkIcon />}\n            onSelected={() => {\n              openDialog(CreateMultipleLinksDialog);\n            }}\n          >\n            <Trans message=\"Shorten multiple links\" />\n          </Item>\n          <Item\n            value=\"export\"\n            startIcon={<ExportCsvIcon />}\n            onSelected={() => {\n              exportCsv.mutate(\n                {},\n                {\n                  onSuccess: response => {\n                    if (response.downloadPath) {\n                      downloadFileFromUrl(response.downloadPath);\n                    } else {\n                      openDialog(CsvExportInfoDialog);\n                    }\n                  },\n                },\n              );\n            }}\n          >\n            <Trans message=\"Export links\" />\n          </Item>\n        </Menu>\n      </MenuTrigger>\n      <PermissionAwareButton resource=\"link\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"Shorten link\" />\n          </DataTableAddItemButton>\n          <CreateLinkDialog />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoveDownIcon = createSvgIcon(\n  <path d=\"M3 11c0 2.45 1.76 4.47 4.08 4.91l-1.49-1.49L7 13l4 4.01L7 21l-1.41-1.41 1.58-1.58v-.06C3.7 17.54 1 14.58 1 11c0-3.87 3.13-7 7-7h3v2H8c-2.76 0-5 2.24-5 5zm19 0V4h-9v7h9zm-2-2h-5V6h5v3zm-7 4h9v7h-9z\" />\n, 'MoveDownOutlined');\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  linkIds: number[];\n}\n\nexport function useMoveLinksToGroup(group: LinkGroup) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: Payload) => moveLinks(group.id, payload),\n    onSuccess: () => {\n      toast.positive(\n        trans(\n          message('Moved links to “:group“', {values: {group: group.name}}),\n        ),\n      );\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-group'),\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction moveLinks(groupId: number, payload: Payload): Promise<Response> {\n  return apiClient\n    .post(`link-group/${groupId}/attach`, payload)\n    .then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Trans} from '@common/i18n/trans';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {List, ListItem} from '@common/ui/list/list';\nimport {Link} from '@app/dashboard/links/link';\nimport {useMoveLinksToGroup} from '@app/dashboard/link-groups/link-group-links-datatable-page/requests/use-move-links-to-group';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport React, {useState} from 'react';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\nimport {LinkImage} from '@app/dashboard/links/link-image';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport linkSvg from '@app/dashboard/links/share-link.svg';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {\n  GetDatatableDataParams,\n  useDatatableData,\n} from '@common/datatable/requests/paginated-resources';\nimport {LengthAwarePaginationResponse} from '@common/http/backend-response/pagination-response';\n\ninterface MoveLinksToGroupDialogProps {\n  group: LinkGroup;\n}\nexport function MoveLinksToGroupDialog({group}: MoveLinksToGroupDialogProps) {\n  const {close} = useDialogContext();\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [params, setParams] = useState<GetDatatableDataParams>({\n    groupId: `!${group.id}`,\n    query: '',\n    perPage: 8,\n  });\n  const {data, isLoading} = useDatatableData<Link>('link', params);\n  const pagination = data?.pagination as LengthAwarePaginationResponse<Link>;\n  const moveLinks = useMoveLinksToGroup(group);\n\n  const paginationButtons = (\n    <div className=\"text-muted\">\n      <IconButton\n        disabled={isLoading || !pagination?.prev_page}\n        onClick={() => {\n          setParams({\n            ...params,\n            page: pagination?.prev_page!,\n          });\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <IconButton\n        disabled={isLoading || !pagination?.next_page}\n        onClick={() => {\n          setParams({\n            ...params,\n            page: pagination?.next_page!,\n          });\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n\n  const emptyStageMessage = (\n    <IllustratedMessage\n      image={<SvgImage src={linkSvg} />}\n      title={<Trans message=\"No links found\" />}\n    />\n  );\n\n  const list = (\n    <div className=\"min-h-[464px]\">\n      <List>\n        <AnimatePresence mode=\"wait\">\n          {isLoading ? (\n            <LinksSkeleton />\n          ) : (\n            <LinksList\n              links={pagination?.data}\n              selectedIds={selectedIds}\n              setSelectedIds={setSelectedIds}\n            />\n          )}\n        </AnimatePresence>\n      </List>\n    </div>\n  );\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Move links to “:group“\" values={{group: group.name}} />\n      </DialogHeader>\n      <DialogBody>\n        <TextField\n          className=\"mb-14\"\n          label={<Trans message=\"Search for links...\" />}\n          value={params.query}\n          onChange={e => {\n            setParams({...params, query: e.target.value});\n          }}\n        />\n        {!isLoading && !pagination?.data.length ? emptyStageMessage : list}\n      </DialogBody>\n      <DialogFooter startAction={paginationButtons}>\n        <Button variant=\"text\" onClick={close}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={() => {\n            moveLinks.mutate({linkIds: selectedIds}, {onSuccess: close});\n          }}\n          disabled={moveLinks.isPending}\n        >\n          <Trans message=\"Move\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface ListItemsProps {\n  links?: Link[];\n  selectedIds: number[];\n  setSelectedIds: (ids: number[]) => void;\n}\nfunction LinksList({links, selectedIds, setSelectedIds}: ListItemsProps) {\n  return (\n    <m.div key=\"links-list\" {...opacityAnimation}>\n      <List>\n        {(links || []).map(link => {\n          const isSelected = selectedIds.includes(link.id);\n          return (\n            <ListItem\n              key={link.id}\n              isSelected={isSelected}\n              onSelected={() => {\n                if (isSelected) {\n                  setSelectedIds(selectedIds.filter(id => id !== link.id));\n                } else {\n                  setSelectedIds([...selectedIds, link.id]);\n                }\n              }}\n              startIcon={<Checkbox checked={isSelected} />}\n              description={removeProtocol(link.short_url)}\n            >\n              <div className=\"flex items-center gap-8\">\n                <LinkImage className=\"w-14 h-14\" link={link} />\n                <div>{removeProtocol(link.long_url)}</div>\n              </div>\n            </ListItem>\n          );\n        })}\n      </List>\n    </m.div>\n  );\n}\n\nconst skeletonCount = 8;\nfunction LinksSkeleton() {\n  return (\n    <m.div key=\"links-skeleton\" {...opacityAnimation}>\n      <List>\n        {Array.from({length: skeletonCount}).map((_, index) => (\n          <ListItem key={index} isDisabled>\n            <Skeleton variant=\"text\" className=\"min-h-40\" />\n          </ListItem>\n        ))}\n      </List>\n    </m.div>\n  );\n}\n","import React, {Fragment, useContext} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport {LinksDatatableFilters} from '@app/dashboard/links/links-datatable-page/links-datatable-filters';\nimport {linksDatatableColumns} from '@app/dashboard/links/links-datatable-page/links-datatable-columns';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport shareLink from '../../links/share-link.svg';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {useParams} from 'react-router-dom';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {DataTable} from '@common/datatable/data-table';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {Link} from '@app/dashboard/links/link';\nimport {StaticPageTitle} from '@common/seo/static-page-title';\nimport {CreateLinkDialog} from '@app/dashboard/links/dialogs/create-link-dialog';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {AddLinkIcon} from '@common/icons/material/AddLink';\nimport {ExportCsvIcon} from '@common/datatable/csv-export/export-csv-icon';\nimport {MoreHorizIcon} from '@common/icons/material/MoreHoriz';\nimport {MoveDownIcon} from '@common/icons/material/MoveDown';\nimport {useExportCsv} from '@common/datatable/requests/use-export-csv';\nimport {downloadFileFromUrl} from '@common/uploads/utils/download-file-from-url';\nimport {CsvExportInfoDialog} from '@common/datatable/csv-export/csv-export-info-dialog';\nimport {MoveLinksToGroupDialog} from '@app/dashboard/link-groups/link-group-links-datatable-page/move-links-to-group-dialog';\nimport {DataTableContext} from '@common/datatable/page/data-table-context';\nimport {CreateMultipleLinksDialog} from '@app/dashboard/links/dialogs/create-multiple-links-dialog';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\n\ninterface LinkGroupLinksResponse extends PaginatedBackendResponse<Link> {\n  linkGroup: LinkGroup;\n}\n\nexport function LinkGroupsLinksDatatablePage() {\n  const {groupId} = useParams();\n\n  return (\n    <div className=\"p-12 md:p-24\">\n      <DataTable\n        endpoint={`link-group/${groupId}/links`}\n        filters={LinksDatatableFilters}\n        columns={linksDatatableColumns}\n        actions={<Actions groupId={groupId ? +groupId : undefined} />}\n        selectedActions={\n          <PermissionAwareButton resource=\"link\" action=\"delete\">\n            <DeleteSelectedItemsAction />\n          </PermissionAwareButton>\n        }\n        emptyStateMessage={\n          <DataTableEmptyStateMessage\n            image={shareLink}\n            title={<Trans message=\"There are no links in this group yet\" />}\n            filteringTitle={<Trans message=\"No matching links\" />}\n          />\n        }\n      >\n        <PageTitle />\n      </DataTable>\n    </div>\n  );\n}\n\nfunction PageTitle() {\n  const navigate = useNavigate();\n  const {query} = useContext(DataTableContext);\n  const linkGroup = (query.data as LinkGroupLinksResponse)?.linkGroup;\n\n  // avoid layout shift when link group is not loaded yet\n  if (!linkGroup) return <Breadcrumb size=\"xl\" className=\"mb-16\" />;\n\n  const title = (\n    <Trans message=\"“:group“ links\" values={{group: linkGroup.name}} />\n  );\n  return (\n    <Fragment>\n      <StaticPageTitle>{title}</StaticPageTitle>\n      <Breadcrumb size=\"xl\" className=\"mb-16\">\n        <BreadcrumbItem\n          onSelected={() => {\n            navigate('/dashboard/link-groups');\n          }}\n        >\n          <Trans message=\"Link groups\" />\n        </BreadcrumbItem>\n        <BreadcrumbItem className=\"first-letter:capitalize\">\n          {title}\n        </BreadcrumbItem>\n      </Breadcrumb>\n    </Fragment>\n  );\n}\n\ninterface ActionsProps {\n  groupId?: number;\n}\nfunction Actions({groupId}: ActionsProps) {\n  const exportCsv = useExportCsv('link/csv/export');\n  const {query} = useContext(DataTableContext);\n  const linkGroup = (query.data as LinkGroupLinksResponse)?.linkGroup;\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton\n          variant=\"outline\"\n          color=\"primary\"\n          size=\"sm\"\n          className=\"flex-shrink-0\"\n        >\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu>\n          <Item\n            value=\"moveLinks\"\n            startIcon={<MoveDownIcon />}\n            onSelected={() => {\n              openDialog(MoveLinksToGroupDialog, {group: linkGroup});\n            }}\n          >\n            <Trans message=\"Move links to this group\" />\n          </Item>\n          <Item\n            value=\"addMultiple\"\n            startIcon={<AddLinkIcon />}\n            onSelected={() => {\n              openDialog(CreateMultipleLinksDialog, {group: linkGroup});\n            }}\n          >\n            <Trans message=\"Add multiple links\" />\n          </Item>\n          <Item\n            value=\"export\"\n            startIcon={<ExportCsvIcon />}\n            onSelected={() => {\n              exportCsv.mutate(\n                {groupId},\n                {\n                  onSuccess: response => {\n                    if (response.downloadPath) {\n                      downloadFileFromUrl(response.downloadPath);\n                    } else {\n                      openDialog(CsvExportInfoDialog);\n                    }\n                  },\n                },\n              );\n            }}\n          >\n            <Trans message=\"Export links\" />\n          </Item>\n        </Menu>\n      </MenuTrigger>\n      <PermissionAwareButton resource=\"link\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"Add link\" />\n          </DataTableAddItemButton>\n          <CreateLinkDialog group={linkGroup} />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ListAltIcon = createSvgIcon(\n  <path d=\"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM19 19H5V5h14v14z\" />\n, 'ListAltOutlined');\n","import {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {LinkGroup} from '../../link-group';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\n\nexport interface CrupdateLinkGroupPayload\n  extends Pick<\n    LinkGroup,\n    'name' | 'description' | 'hash' | 'active' | 'rotator' | 'domain_id'\n  > {}\n\ninterface CrupdateLinkGroupFormProps {\n  formId: string;\n  form: UseFormReturn<CrupdateLinkGroupPayload>;\n  onSubmit: (values: CrupdateLinkGroupPayload) => void;\n}\nexport function CrupdateLinkGroupForm({\n  onSubmit,\n  form,\n  formId,\n}: CrupdateLinkGroupFormProps) {\n  const {clearErrors} = form;\n  return (\n    <Form\n      form={form}\n      id={formId}\n      onBeforeSubmit={() => {\n        // hook form won't clear errors for fields that are not bound to input\n        clearErrors('hash');\n      }}\n      onSubmit={onSubmit}\n    >\n      <div className=\"mb-24\">\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Name\" />}\n          minLength={3}\n          className=\"mb-8\"\n          autoFocus\n        />\n        <AliasField form={form} name=\"hash\" />\n      </div>\n      <LinkDomainSelect name=\"domain_id\" className=\"mb-24\" />\n      <FormTextField\n        name=\"description\"\n        className=\"mb-24\"\n        label={<Trans message=\"Description\" />}\n        inputElementType=\"textarea\"\n        rows={2}\n      />\n      <FormSwitch\n        name=\"active\"\n        description={\n          <Trans message=\"Whether this link group is viewable publicly.\" />\n        }\n        className=\"mb-24\"\n      >\n        <Trans message=\"Active\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"rotator\"\n        description={\n          <Trans message=\"When checked, url above will redirect to random link from the group, instead of showing all links belonging to group.\" />\n        }\n      >\n        <Trans message=\"Rotator\" />\n      </FormSwitch>\n    </Form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateLinkGroupPayload} from '../crupdate/crupdate-link-group-form';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateLinkGroup(\n  form: UseFormReturn<CrupdateLinkGroupPayload>,\n  groupId: number,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateLinkGroupPayload) =>\n      updateLinkGroup(groupId, payload),\n    onSuccess: () => {\n      toast.positive(trans(message('Link group updated')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-group'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction updateLinkGroup(\n  id: number,\n  payload: CrupdateLinkGroupPayload,\n): Promise<Response> {\n  return apiClient.put(`link-group/${id}`, payload).then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdateLinkGroupForm,\n  CrupdateLinkGroupPayload,\n} from './crupdate-link-group-form';\nimport {useForm} from 'react-hook-form';\nimport {useUpdateLinkGroup} from '../requests/use-update-link-group';\nimport {LinkGroup} from '../../link-group';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\n\ninterface UpdateLinkGroupDialogProps {\n  group: LinkGroup;\n}\nexport function UpdateLinkGroupDialog({group}: UpdateLinkGroupDialogProps) {\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n  const {formId, close} = useDialogContext();\n  const form = useForm<CrupdateLinkGroupPayload>({\n    defaultValues: {\n      name: group.name,\n      hash: group.hash,\n      description: group.description,\n      active: group.active,\n      rotator: group.rotator,\n    },\n  });\n  const updateGroup = useUpdateLinkGroup(form, group.id);\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Update link group\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkGroupForm\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              updateGroup.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateGroup.isPending || isVerifying}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport React from 'react';\nimport {LinkGroup} from '../link-group';\nimport {ListAltIcon} from '@common/icons/material/ListAlt';\nimport {UpdateLinkGroupDialog} from '@app/dashboard/link-groups/link-groups-datatable-page/crupdate/update-link-group-dialog';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const LinkGroupsDatatableColumns: ColumnConfig<LinkGroup>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    body: group => (\n      <a\n        href={group.short_url}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className={LinkStyle}\n      >\n        {group.name}\n      </a>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    width: 'flex-2 min-w-140',\n    header: () => <Trans message=\"Owner\" />,\n    body: group => {\n      if (!group.user) return '';\n      return (\n        <NameWithAvatar\n          image={group.user.avatar}\n          label={group.user.display_name}\n          description={group.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'links_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Links\" />,\n    body: group =>\n      group.links_count ? <FormattedNumber value={group.links_count} /> : '-',\n  },\n  {\n    key: 'active',\n    allowsSorting: true,\n    header: () => <Trans message=\"Active\" />,\n    body: group =>\n      group.active ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'rotator',\n    allowsSorting: true,\n    header: () => <Trans message=\"Rotator\" />,\n    body: group =>\n      group.rotator ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: link =>\n      link.updated_at ? <FormattedDate date={link.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-160 flex-shrink-0',\n    visibleInMode: 'all',\n    body: group => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Clicks report\" />}>\n          <RouterLink to={`${group.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <Tooltip label={<Trans message=\"Manage links\" />}>\n          <RouterLink to={`${group.id}/links`}>\n            <IconButton size=\"md\">\n              <ListAltIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={group} />\n        <PermissionAwareButton resource={group} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <Tooltip label={<Trans message=\"Edit link\" />}>\n              <IconButton size=\"md\">\n                <EditIcon />\n              </IconButton>\n            </Tooltip>\n            <UpdateLinkGroupDialog group={group} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {USER_MODEL} from '@common/auth/user';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const LinkGroupsDatatableFilters: BackendFilter[] = [\n  {\n    key: 'rotator',\n    label: message('Type'),\n    defaultOperator: FilterOperator.eq,\n    description: message('Type of the group'),\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Default'),\n          value: false,\n        },\n        {\n          key: '02',\n          label: message('Rotator'),\n          value: true,\n        },\n      ],\n    },\n  },\n  {\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether group is disabled or not'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Enabled'),\n          value: true,\n        },\n        {\n          key: '02',\n          label: message('Disabled'),\n          value: false,\n        },\n      ],\n    },\n  },\n  {\n    key: 'links_count',\n    label: message('Link count'),\n    description: message('Number of links in the group'),\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n    control: {\n      type: FilterControlType.Input,\n      inputType: 'number',\n      defaultValue: 1,\n    },\n  },\n  createdAtFilter({\n    description: message('Date group was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date group was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('User'),\n    description: message('User group was created by'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateLinkGroupPayload} from '../crupdate/crupdate-link-group-form';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreateLinkGroup(\n  form: UseFormReturn<CrupdateLinkGroupPayload>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: CrupdateLinkGroupPayload) => createLinkGroup(props),\n    onSuccess: () => {\n      toast.positive(trans(message('Link group created')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-group'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createLinkGroup(payload: CrupdateLinkGroupPayload): Promise<Response> {\n  return apiClient.post(`link-group`, payload).then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdateLinkGroupForm,\n  CrupdateLinkGroupPayload,\n} from './crupdate-link-group-form';\nimport {useForm} from 'react-hook-form';\nimport {useCreateLinkGroup} from '../requests/use-create-link-group';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\n\nexport function CreateLinkGroupDialog() {\n  const {formId, close} = useDialogContext();\n  const {custom_domains} = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateLinkGroupPayload>({\n    defaultValues: {\n      active: true,\n      hash: nanoid(6),\n      rotator: false,\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n\n  const createGroup = useCreateLinkGroup(form);\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Create link group\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdateLinkGroupForm\n          formId={formId}\n          form={form}\n          onSubmit={async values => {\n            const isValid = await verify();\n            if (isValid) {\n              createGroup.mutate(values, {onSuccess: () => close()});\n            }\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createGroup.isPending || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport React, {Fragment, useEffect, useMemo} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport shareLink from '../../links/share-link.svg';\nimport {DataTableExportCsvButton} from '@common/datatable/csv-export/data-table-export-csv-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {LinkGroupsDatatableColumns} from './link-groups-datatable-columns';\nimport {LinkGroupsDatatableFilters} from './link-groups-datatable-filters';\nimport {CreateLinkGroupDialog} from './crupdate/create-link-group-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinkGroupsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkGroupsDatatablePage({\n  forCurrentUser,\n}: LinkGroupsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? LinkGroupsDatatableColumns\n      : LinkGroupsDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinkGroupsDatatableFilters\n      : LinkGroupsDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  const userId = forCurrentUser ? user?.id : '';\n  return (\n    <DataTablePage\n      endpoint=\"link-group\"\n      queryParams={{\n        userId,\n        withCount: 'links',\n        with: 'user,domain',\n        workspaceId,\n      }}\n      title={<Trans message=\"Link groups\" />}\n      headerContent={<InfoTrigger />}\n      headerItemsAlign=\"items-center\"\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"linkGroup\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={shareLink}\n          title={<Trans message=\"No groups have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching groups\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      dialogSize=\"auto\"\n      title={<Trans message=\"Group links together to:\" />}\n      body={\n        <ul className=\"list-inside list-disc whitespace-nowrap\">\n          <li>\n            <Trans message=\"Simplify multiple link management.\" />\n          </li>\n          <li>\n            <Trans message=\"View aggregated clicks report for the whole group.\" />\n          </li>\n          <li>\n            <Trans message=\"Redirect to a random link from within the group.\" />\n          </li>\n          <li>\n            <Trans message=\"Share all links in the group with one link.\" />\n          </li>\n        </ul>\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <Fragment>\n      <DataTableExportCsvButton endpoint=\"link-group/csv/export\" />\n      <PermissionAwareButton resource=\"linkGroup\" action=\"create\">\n        <DialogTrigger type=\"modal\">\n          <DataTableAddItemButton>\n            <Trans message=\"New group\" />\n          </DataTableAddItemButton>\n          <CreateLinkGroupDialog />\n        </DialogTrigger>\n      </PermissionAwareButton>\n    </Fragment>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {LinkGroup} from '@app/dashboard/link-groups/link-group';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface FetchLinkGroupResponse extends BackendResponse {\n  linkGroup: LinkGroup;\n}\n\nexport function useLinkGroup(groupId: number | string) {\n  return useQuery({\n    queryKey: ['link-group', groupId],\n    queryFn: () => fetchLinkGroup(groupId),\n    initialData: seedInitialDataFromPaginatedList(groupId),\n  });\n}\n\nfunction fetchLinkGroup(\n  groupId: number | string,\n): Promise<FetchLinkGroupResponse> {\n  return apiClient.get(`link-group/${groupId}`).then(response => response.data);\n}\n\nfunction seedInitialDataFromPaginatedList(groupId: number | string) {\n  const linkGroup = queryClient\n    .getQueryData<PaginatedBackendResponse<LinkGroup>>(\n      DatatableDataQueryKey('link-group'),\n    )\n    ?.pagination?.data.find(link => link.id === +groupId);\n  return linkGroup ? {linkGroup} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {useLinkGroup} from '@app/dashboard/link-groups/link-group-links-datatable-page/requests/use-link-group';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport clsx from 'clsx';\n\nexport function LinkGroupClicksReportPage() {\n  const navigate = useNavigate();\n  const {groupId} = useParams();\n  const query = useLinkGroup(groupId!);\n  const group = query.data?.linkGroup;\n\n  return (\n    <ClicksReportPageLayout\n      model={`link-group=${groupId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Link groups\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: group?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        group && (\n          <ShareLinkButton className=\"flex-shrink-0 text-muted\" link={group} />\n        )\n      }\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {Link} from '@app/dashboard/links/link';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\nexport interface GetLinkResponse extends BackendResponse {\n  link: Link;\n}\n\nexport function useLink(linkId: number | string) {\n  return useQuery({\n    queryKey: ['link', linkId],\n    queryFn: () => fetchLink(linkId),\n    initialData: seedInitialDataFromPaginatedList(linkId),\n  });\n}\n\nfunction fetchLink(linkId: number | string): Promise<GetLinkResponse> {\n  return apiClient.get(`link/${linkId}`).then(response => response.data);\n}\n\nfunction seedInitialDataFromPaginatedList(linkId: number | string) {\n  const link = queryClient\n    .getQueryData<PaginatedBackendResponse<Link>>(DatatableDataQueryKey('link'))\n    ?.pagination?.data.find(link => link.id === +linkId);\n  return link ? {link} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {useLink} from '@app/dashboard/layout/sidenav/use-link';\nimport clsx from 'clsx';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\n\nexport function LinkClicksReportPage() {\n  const navigate = useNavigate();\n  const {linkId} = useParams();\n  const query = useLink(linkId!);\n  const link = query.data?.link;\n\n  return (\n    <ClicksReportPageLayout\n      model={`link=${linkId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Links\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: link?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        link && (\n          <ShareLinkButton className=\"flex-shrink-0 text-muted\" link={link} />\n        )\n      }\n    />\n  );\n}\n","export default \"__VITE_ASSET__9a950bec__\"","import world from '@common/custom-domains/datatable/world.svg';\nimport {Trans} from '@common/i18n/trans';\nimport {\n  DataTableEmptyStateMessage,\n  DataTableEmptyStateMessageProps,\n} from '@common/datatable/page/data-table-emty-state-message';\nimport React from 'react';\n\nexport function DomainsEmptyStateMessage(\n  props: Partial<DataTableEmptyStateMessageProps>\n) {\n  return (\n    <DataTableEmptyStateMessage\n      {...props}\n      image={world}\n      title={<Trans message=\"No domains have been connected yet\" />}\n      filteringTitle={<Trans message=\"No matching domains\" />}\n    />\n  );\n}\n","import {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport React from 'react';\n\ninterface BooleanIndicatorProps {\n  value: boolean;\n}\nexport function BooleanIndicator({value}: BooleanIndicatorProps) {\n  if (value) {\n    return <CheckIcon className=\"icon-md text-positive\" />;\n  }\n  return <CloseIcon className=\"icon-md text-danger\" />;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  domain: CustomDomain;\n}\n\nexport function useDeleteDomain() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => deleteDomain(props),\n    onSuccess: (response, props) => {\n      toast.positive(\n        trans(\n          message('“:domain” removed', {\n            values: {domain: removeProtocol(props.domain.host)},\n          }),\n        ),\n      );\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('custom-domain'),\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteDomain({domain}: Payload): Promise<Response> {\n  return apiClient.delete(`custom-domain/${domain.id}`).then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport React from 'react';\nimport {useDeleteDomain} from '@common/custom-domains/datatable/requests/use-delete-domain';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\ninterface DeleteDomainButtonProps {\n  domain: CustomDomain;\n}\nexport function DeleteDomainButton({domain}: DeleteDomainButtonProps) {\n  const deleteDomain = useDeleteDomain();\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          deleteDomain.mutate({domain});\n        }\n      }}\n    >\n      <Button\n        variant=\"outline\"\n        color=\"danger\"\n        size=\"xs\"\n        disabled={deleteDomain.isPending}\n      >\n        <Trans message=\"Remove\" />\n      </Button>\n      <ConfirmationDialog\n        title={<Trans message=\"Remove domain?\" />}\n        body={\n          <Trans\n            message=\"Are you sure you want to remove “:domain“?\"\n            values={{domain: domain.host}}\n          />\n        }\n        confirm={<Trans message=\"Remove\" />}\n        isDanger\n      />\n    </DialogTrigger>\n  );\n}\n","import {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {BooleanIndicator} from '@common/datatable/column-templates/boolean-indicator';\nimport {DeleteDomainButton} from '@common/custom-domains/datatable/delete-domain-button';\n\nexport const domainsDatatableColumns: ColumnConfig<CustomDomain>[] = [\n  {\n    key: 'host',\n    allowsSorting: true,\n    header: () => <Trans message=\"Domain\" />,\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    body: domain => (\n      <div>\n        <div className=\"flex items-center gap-6 whitespace-nowrap\">\n          <RemoteFavicon url={domain.host} />\n          <a\n            className=\"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min\"\n            href={domain.host}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            data-testid=\"host-name\"\n          >\n            {domain.host}\n          </a>\n        </div>\n      </div>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    width: 'flex-2 min-w-140',\n    body: domain => {\n      if (!domain.user) return '';\n      return (\n        <NameWithAvatar\n          image={domain.user.avatar}\n          label={domain.user.display_name}\n          description={domain.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'global',\n    allowsSorting: true,\n    header: () => <Trans message=\"Global\" />,\n    body: domain => <BooleanIndicator value={domain.global} />,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: domain =>\n      domain.updated_at ? <FormattedDate date={domain.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    width: 'w-80 flex-shrink-0',\n    visibleInMode: 'all',\n    align: 'end',\n    body: domain => <DeleteDomainButton domain={domain} />,\n  },\n];\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {USER_MODEL} from '@common/auth/user';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const DomainsDatatableFilters: BackendFilter[] = [\n  {\n    key: 'global',\n    label: message('Global'),\n    description: message('Whether domain is marked as global'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.BooleanToggle,\n      defaultValue: true,\n    },\n  },\n  createdAtFilter({\n    description: message('Date domain was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date domain was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User domain belongs to'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","export function isSubdomain(host: string): boolean {\n  return (host.replace('www.', '').match(/\\./g) || []).length > 1;\n}\n","import {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\n\ninterface DomainProgressIndicatorProps {\n  message?: ReactNode;\n}\nexport function DomainProgressIndicator({\n  message = <Trans message=\"Checking DNS configuration...\" />,\n}: DomainProgressIndicatorProps) {\n  return (\n    <div className=\"flex items-center gap-18 text-base p-12 rounded bg-primary/10 text-primary\">\n      <ProgressCircle isIndeterminate size=\"sm\" />\n      <div>{message}</div>\n    </div>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {isSubdomain} from '@common/custom-domains/datatable/connect-domain-dialog/is-subdomain';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function InfoStep({\n  stepper: {\n    state: {isLoading, host, serverIp},\n  },\n}: ConnectDomainStepProps) {\n  const {base_url} = useSettings();\n\n  if (isLoading) {\n    return <DomainProgressIndicator />;\n  }\n\n  if (isSubdomain(host)) {\n    return (\n      <Message\n        title={\n          <Trans message=\"Add this CNAME record to your domain by visiting your DNS provider or registrar.\" />\n        }\n        record=\"CNAME\"\n        target={base_url}\n      />\n    );\n  }\n\n  return (\n    <Message\n      title={\n        <Trans message=\"Add this A record to your domain by visiting your DNS provider or registrar.\" />\n      }\n      record=\"A\"\n      target={serverIp}\n    />\n  );\n}\n\ninterface MessageProps {\n  title: ReactNode;\n  record: string;\n  target: string;\n}\n\nfunction Message({title, record, target}: MessageProps) {\n  return (\n    <div>\n      <div className=\"text-muted mb-10\">{title}</div>\n      <div className=\"flex items-center gap-12 text-base p-12 rounded bg-primary/10 text-primary font-semibold\">\n        <div>{record}</div>\n        {target}\n      </div>\n    </div>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Fragment} from 'react';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\n\nexport function HostStep({stepper}: ConnectDomainStepProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        autoFocus\n        name=\"host\"\n        required\n        maxLength={100}\n        label={<Trans message=\"Host\" />}\n        placeholder=\"https://example.com\"\n        description={\n          <Trans message=\"Enter the exact domain name you want your items to be accessible with. It can be a subdomain (example.yourdomain.com) or root domain (yourdomain.com).\" />\n        }\n      />\n      {stepper.showGlobalField && (\n        <FormSwitch\n          className=\"mt-24 border-t pt-24\"\n          name=\"global\"\n          description={\n            <Trans message=\"Whether all users should be able to select this domain.\" />\n          }\n        >\n          <Trans message=\"Global\" />\n        </FormSwitch>\n      )}\n    </Fragment>\n  );\n}\n","import {useConnectDomainStepper} from '@common/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper';\n\nexport enum ConnectDomainStep {\n  Host = 1,\n  Info = 2,\n  ValidationFailed = 3,\n  Finalize = 4,\n}\n\nexport interface ConnectDomainStepProps {\n  stepper: ReturnType<typeof useConnectDomainStepper>;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  result: 'connected' | null;\n}\n\ninterface Payload {\n  host: string;\n}\n\nexport function useValidateDomainDns() {\n  return useMutation({\n    mutationFn: (props: Payload) => authorize(props),\n  });\n}\n\nfunction authorize(payload: Payload): Promise<Response> {\n  return apiClient\n    .post('secure/custom-domain/validate/2BrM45vvfS/api', payload)\n    .then(r => r.data);\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {Trans} from '@common/i18n/trans';\nimport {Fragment, ReactNode} from 'react';\nimport {ConnectDomainStepProps} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {useAuth} from '@common/auth/use-auth';\nimport {isSubdomain} from '@common/custom-domains/datatable/connect-domain-dialog/is-subdomain';\nimport {WarningIcon} from '@common/icons/material/Warning';\nimport {useValidateDomainDns} from '@common/custom-domains/datatable/requests/use-validate-domain-dns';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function ValidationFailedStep({\n  stepper: {\n    goToNextStep,\n    state: {host, serverIp, isLoading, validationFailReason},\n  },\n}: ConnectDomainStepProps) {\n  const validateDns = useValidateDomainDns();\n  const {base_url} = useSettings();\n  const {hasPermission} = useAuth();\n  const subdomain = isSubdomain(host);\n  const record = subdomain ? 'CNAME' : 'A';\n  const location = subdomain ? base_url : serverIp;\n\n  if (isLoading) {\n    return <DomainProgressIndicator />;\n  }\n\n  const errorMessage =\n    validationFailReason === 'serverNotConfigured' && hasPermission('admin') ? (\n      <ErrorMessage>\n        <Trans\n          message=\"DNS records for the domain are setup, however it seems that your server is not configured to handle requests from “:host“\"\n          values={{host: location}}\n        />\n      </ErrorMessage>\n    ) : (\n      <ErrorMessage>\n        <Trans\n          message=\"The domain is missing :record record pointing to :location or the changes haven't propagated yet.\"\n          values={{record, location}}\n        />\n      </ErrorMessage>\n    );\n\n  return (\n    <Fragment>\n      {errorMessage}\n      <div className=\"whitespace-nowrap text-xs text-muted mt-10\">\n        <Trans\n          message=\"You can wait and try again later, or <b>refresh</b>\"\n          values={{\n            b: (text: string) => (\n              <button\n                disabled={isLoading}\n                type=\"button\"\n                className=\"text-primary underline\"\n                onClick={() => {\n                  goToNextStep();\n                }}\n              >\n                {text}\n              </button>\n            ),\n          }}\n        />\n      </div>\n    </Fragment>\n  );\n}\n\ninterface ErrorMessageProps {\n  children: ReactNode;\n}\nfunction ErrorMessage({children}: ErrorMessageProps) {\n  return (\n    <div className=\"flex items-center gap-12 text-base p-12 rounded bg-warning/15 text-warning font-medium\">\n      <WarningIcon size=\"lg\" />\n      {children}\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\ninterface Response extends BackendResponse {\n  serverIp: string;\n}\n\nexport interface AuthorizeDomainConnectPayload {\n  host: string;\n}\n\n// check if is this host is not connected already and if user has permissions to connect domains\nexport function useAuthorizeDomainConnect(\n  form: UseFormReturn<AuthorizeDomainConnectPayload>,\n) {\n  return useMutation({\n    mutationFn: (props: AuthorizeDomainConnectPayload) => authorize(props),\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction authorize(payload: AuthorizeDomainConnectPayload): Promise<Response> {\n  return apiClient\n    .post('secure/custom-domain/authorize/store', payload)\n    .then(r => r.data);\n}\n","import {useMutation, useQueryClient} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\n\ninterface Response extends BackendResponse {\n  domain: CustomDomain;\n}\n\ninterface Payload {\n  host: string;\n  global?: boolean;\n}\n\nexport function useConnectDomain() {\n  const {trans} = useTrans();\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (props: Payload) => connectDomain(props),\n    onSuccess: response => {\n      toast.positive(\n        trans(\n          message('“:domain” connected', {\n            values: {domain: response.domain.host},\n          }),\n        ),\n      );\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('custom-domain'),\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction connectDomain(payload: Payload): Promise<Response> {\n  return apiClient.post('custom-domain', payload).then(r => r.data);\n}\n","import {useState} from 'react';\nimport {ConnectDomainStep} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {DomainValidationErrorResponse} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog';\nimport {\n  AuthorizeDomainConnectPayload,\n  useAuthorizeDomainConnect,\n} from '@common/custom-domains/datatable/requests/use-authorize-domain-connect';\nimport {useForm} from 'react-hook-form';\nimport {AxiosError} from 'axios';\nimport {useValidateDomainDns} from '@common/custom-domains/datatable/requests/use-validate-domain-dns';\nimport {useConnectDomain} from '@common/custom-domains/datatable/requests/use-connect-domain';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\n\ninterface ConnectDomainStepperState {\n  isLoading: boolean;\n  currentStep: ConnectDomainStep;\n  host: string;\n  serverIp: string;\n  validationFailReason?: DomainValidationErrorResponse['failReason'];\n}\n\ninterface StepHandlerResult {\n  status: 'success' | 'error';\n  newState?: Partial<ConnectDomainStepperState>;\n}\n\ninterface UseConnectDomainStepperProps {\n  showGlobalField?: boolean;\n}\nexport function useConnectDomainStepper({\n  showGlobalField,\n}: UseConnectDomainStepperProps) {\n  const {close} = useDialogContext();\n  const form = useForm<AuthorizeDomainConnectPayload>();\n  const authorizeDomainConnect = useAuthorizeDomainConnect(form);\n  const validateDns = useValidateDomainDns();\n  const connectDomain = useConnectDomain();\n\n  const [state, setState] = useState<ConnectDomainStepperState>({\n    isLoading: false,\n    currentStep: ConnectDomainStep.Host,\n    host: '',\n    serverIp: '',\n  });\n\n  const startLoading = () => {\n    setState({\n      ...state,\n      isLoading: true,\n    });\n  };\n\n  const handleDomainValidation = (): Promise<StepHandlerResult> => {\n    return new Promise(resolve => {\n      validateDns.mutate(\n        {host: state.host},\n        {\n          onSuccess: () => {\n            resolve({\n              status: 'success',\n              newState: {validationFailReason: undefined},\n            });\n          },\n          onError: err => {\n            resolve({\n              status: 'error',\n              newState: {\n                validationFailReason: (\n                  err as AxiosError<DomainValidationErrorResponse>\n                ).response?.data.failReason,\n              },\n            });\n          },\n        },\n      );\n    });\n  };\n\n  const handleDomainAuthorization = (): Promise<StepHandlerResult> => {\n    return new Promise(resolve => {\n      authorizeDomainConnect.mutate(form.getValues(), {\n        onSuccess: response => {\n          resolve({\n            status: 'success',\n            newState: {\n              host: form.getValues().host,\n              serverIp: response.serverIp,\n            },\n          });\n        },\n        onError: () => {\n          resolve({status: 'error'});\n        },\n      });\n    });\n  };\n\n  const hasPreviousStep = state.currentStep !== ConnectDomainStep.Host;\n\n  const goToPreviousStep = () => {\n    if (!hasPreviousStep || state.isLoading) return;\n\n    if (state.currentStep === ConnectDomainStep.Info) {\n      setState({\n        ...state,\n        currentStep: ConnectDomainStep.Host,\n      });\n    } else if (state.currentStep === ConnectDomainStep.ValidationFailed) {\n      setState({\n        ...state,\n        currentStep: ConnectDomainStep.Info,\n      });\n    }\n  };\n\n  const goToNextStep = async () => {\n    if (state.currentStep === ConnectDomainStep.Host) {\n      startLoading();\n      const result = await handleDomainAuthorization();\n      setState({\n        ...state,\n        ...result.newState,\n        isLoading: false,\n        currentStep:\n          result.status === 'success'\n            ? ConnectDomainStep.Info\n            : ConnectDomainStep.Host,\n      });\n    } else if (\n      state.currentStep === ConnectDomainStep.Info ||\n      state.currentStep === ConnectDomainStep.ValidationFailed\n    ) {\n      startLoading();\n      const validationResult = await handleDomainValidation();\n      const nextStep =\n        validationResult.status === 'success'\n          ? ConnectDomainStep.Finalize\n          : ConnectDomainStep.ValidationFailed;\n      setState({\n        ...state,\n        ...validationResult.newState,\n        isLoading: false,\n        currentStep: nextStep,\n      });\n      if (nextStep === ConnectDomainStep.Finalize) {\n        connectDomain.mutate(form.getValues(), {\n          onSettled: response => {\n            close(response?.domain);\n          },\n        });\n      }\n    }\n  };\n\n  return {\n    form,\n    state,\n    goToNextStep,\n    hasPreviousStep,\n    goToPreviousStep,\n    showGlobalField,\n  };\n}\n","import {Trans} from '@common/i18n/trans';\nimport {DomainProgressIndicator} from '@common/custom-domains/datatable/connect-domain-dialog/domain-progress-indicator';\n\nexport function FinalizeStep() {\n  return (\n    <div>\n      <DomainProgressIndicator\n        message={<Trans message=\"Connecting domain...\" />}\n      />\n      <div className=\"text-muted mt-10 text-xs\">\n        <Trans message=\"Don't close this window until domain is connected.\" />\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {InfoStep} from '@common/custom-domains/datatable/connect-domain-dialog/info-step';\nimport {HostStep} from '@common/custom-domains/datatable/connect-domain-dialog/host-step';\nimport {ConnectDomainStep} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-step';\nimport {BackendErrorResponse} from '@common/errors/backend-error-response';\nimport {ValidationFailedStep} from '@common/custom-domains/datatable/connect-domain-dialog/validation-failed-step';\nimport {useConnectDomainStepper} from '@common/custom-domains/datatable/connect-domain-dialog/use-connect-domain-stepper';\nimport {Form} from '@common/ui/forms/form';\nimport {FinalizeStep} from '@common/custom-domains/datatable/connect-domain-dialog/finalize-step';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\n\nexport interface DomainValidationErrorResponse extends BackendErrorResponse {\n  failReason: 'serverNotConfigured' | 'dnsNotSetup';\n}\n\ninterface ConnectDomainDialogProps {\n  showGlobalField?: boolean;\n}\nexport function ConnectDomainDialog({\n  showGlobalField,\n}: ConnectDomainDialogProps) {\n  const {close, formId} = useDialogContext();\n  const stepper = useConnectDomainStepper({showGlobalField});\n  const StepComponent = getStepComponent(stepper.state.currentStep);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Connect domain\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={stepper.form}\n          id={formId}\n          onSubmit={() => {\n            stepper.goToNextStep();\n          }}\n        >\n          <StepComponent stepper={stepper} />\n        </Form>\n      </DialogBody>\n      <DialogFooter\n        startAction={\n          <Button\n            variant=\"text\"\n            onClick={() => {\n              close();\n            }}\n          >\n            <Trans message=\"Cancel\" />\n          </Button>\n        }\n      >\n        {stepper.hasPreviousStep && (\n          <Button\n            startIcon={<KeyboardArrowLeftIcon />}\n            color=\"primary\"\n            variant=\"text\"\n            onClick={() => {\n              stepper.goToPreviousStep();\n            }}\n            disabled={stepper.state.isLoading}\n          >\n            <Trans message=\"Previous\" />\n          </Button>\n        )}\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          endIcon={<KeyboardArrowRightIcon />}\n          disabled={stepper.state.isLoading}\n        >\n          <Trans message=\"Next\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction getStepComponent(step: ConnectDomainStep) {\n  switch (step) {\n    case ConnectDomainStep.Host:\n      return HostStep;\n    case ConnectDomainStep.Info:\n      return InfoStep;\n    case ConnectDomainStep.ValidationFailed:\n      return ValidationFailedStep;\n    case ConnectDomainStep.Finalize:\n      return FinalizeStep;\n  }\n}\n","import {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport React, {useMemo} from 'react';\nimport {DomainsEmptyStateMessage} from '@common/custom-domains/datatable/domains-empty-state-message';\nimport {domainsDatatableColumns} from '@common/custom-domains/datatable/domains-datatable-columns';\nimport {DomainsDatatableFilters} from '@common/custom-domains/datatable/domains-datatable-filters';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ConnectDomainDialog} from '@common/custom-domains/datatable/connect-domain-dialog/connect-domain-dialog';\nimport {useAuth} from '@common/auth/use-auth';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {DeleteDomainButton} from '@common/custom-domains/datatable/delete-domain-button';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\n\nconst datatableColumns = domainsDatatableColumns.map(col => {\n  if (col.key === 'actions') {\n    return {\n      ...col,\n      body: (domain: CustomDomain) => (\n        <PermissionAwareButton resource={domain} action=\"delete\">\n          <DeleteDomainButton domain={domain} />\n        </PermissionAwareButton>\n      ),\n    };\n  }\n  return col;\n});\n\ninterface DomainsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function DomainsDatatablePage({\n  forCurrentUser,\n}: DomainsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? datatableColumns\n      : datatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? DomainsDatatableFilters\n      : DomainsDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      enableSelection={false}\n      endpoint=\"custom-domain\"\n      queryParams={{userId, workspaceId, with: 'user'}}\n      title={<Trans message=\"Branded domains\" />}\n      headerContent={<InfoTrigger />}\n      headerItemsAlign=\"items-center\"\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      emptyStateMessage={<DomainsEmptyStateMessage />}\n    />\n  );\n}\n\nfunction Actions() {\n  const {hasPermission} = useAuth();\n  return (\n    <PermissionAwareButton resource=\"customDomain\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"Connect domain\" />\n        </DataTableAddItemButton>\n        <ConnectDomainDialog showGlobalField={hasPermission('admin')} />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Create trusted links with your own branded domains. Once connected, you can set the domain as default or only use it for specific links.\" />\n      }\n    />\n  );\n}\n","export interface SupportedTrackingPixel {\n  name: string;\n  type: 'number' | 'text';\n  pattern?: string;\n  docsUrl?: string;\n}\n\nexport const SupportedTrackingPixels: SupportedTrackingPixel[] = [\n  {\n    name: 'facebook',\n    type: 'number',\n    docsUrl:\n      'https://www.facebook.com/business/help/952192354843755?id=1205376682832142',\n  },\n  {\n    name: 'twitter',\n    type: 'number',\n    docsUrl:\n      'https://business.twitter.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html',\n  },\n  {\n    name: 'google-tag-manager',\n    type: 'text',\n    pattern: 'GTM-[a-zA-Z0-9]+',\n    docsUrl: 'https://tagmanager.google.com',\n  },\n  {\n    name: 'google-analytics',\n    type: 'text',\n    docsUrl: 'https://analytics.google.com',\n  },\n  {\n    name: 'adwords',\n    type: 'number',\n    docsUrl: 'https://ads.google.com',\n  },\n  {\n    name: 'bing',\n    type: 'number',\n    docsUrl:\n      'https://about.ads.microsoft.com/en-us/solutions/tools/universal-event-tracking',\n  },\n  {\n    name: 'pinterest',\n    type: 'number',\n    docsUrl:\n      'https://help.pinterest.com/en/business/article/track-conversions-with-pinterest-tag',\n  },\n  {\n    name: 'linkedin',\n    type: 'text',\n    docsUrl:\n      'https://www.linkedin.com/help/lms/answer/a418880/add-the-linkedin-insight-tag-to-your-website',\n  },\n  {\n    name: 'quora',\n    type: 'text',\n    pattern: '[a-z0-9]+',\n    docsUrl:\n      'https://quoraadsupport.zendesk.com/hc/en-us/articles/115010303387-About-the-Quora-Pixel',\n  },\n  {\n    name: 'adroll',\n    type: 'text',\n    docsUrl:\n      'https://help.adroll.com/hc/en-us/articles/211846018-What-is-the-AdRoll-Pixel',\n  },\n  {\n    name: 'nexus-segment',\n    type: 'text',\n    docsUrl: 'https://segment.com/catalog/integrations/appnexus',\n  },\n  {\n    name: 'custom',\n    type: 'text',\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const HelpOutlineIcon = createSvgIcon(\n  <path d=\"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z\" />\n, 'HelpOutlineOutlined');\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {TuneIcon} from '@common/icons/material/Tune';\nimport {Fragment} from 'react';\nimport {HelpOutlineIcon} from '@common/icons/material/HelpOutline';\n\nexport interface CrupdatePixelFormValue {\n  name: string;\n  type: string;\n  pixel_id?: string | number;\n  head_code?: string;\n  body_code?: string;\n}\n\ninterface CrupdatePixelFormProps {\n  formId: string;\n  form: UseFormReturn<CrupdatePixelFormValue>;\n  onSubmit: (value: CrupdatePixelFormValue) => void;\n}\nexport function CrupdatePixelForm({\n  formId,\n  form,\n  onSubmit,\n}: CrupdatePixelFormProps) {\n  const {watch} = form;\n  const type = watch('type');\n  const config = SupportedTrackingPixels.find(p => p.name === type);\n\n  return (\n    <Form id={formId} form={form} onSubmit={onSubmit}>\n      <FormTextField\n        autoFocus\n        required\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-24\"\n      />\n      <FormSelect\n        name=\"type\"\n        selectionMode=\"single\"\n        className=\"mb-24\"\n        label={<Trans message=\"Type\" />}\n        description={\n          config?.docsUrl ? (\n            <div className=\"flex items-center gap-6\">\n              <HelpOutlineIcon size=\"sm\" />\n              <a\n                data-testid=\"pixel-docs-link\"\n                href={config.docsUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"underline\"\n              >\n                <Trans message=\"More information\" />\n              </a>\n            </div>\n          ) : null\n        }\n      >\n        {SupportedTrackingPixels.map(pixel => (\n          <Item\n            capitalizeFirst\n            key={pixel.name}\n            value={pixel.name}\n            startIcon={\n              pixel.docsUrl ? (\n                <RemoteFavicon url={pixel.docsUrl} />\n              ) : (\n                <TuneIcon size=\"xs\" />\n              )\n            }\n          >\n            {pixel.name}\n          </Item>\n        ))}\n      </FormSelect>\n      {type !== 'custom' && (\n        <FormTextField\n          required\n          pattern={config?.pattern}\n          type={config?.type === 'number' ? 'number' : 'text'}\n          name=\"pixel_id\"\n          label={<Trans message=\"Pixel ID\" />}\n        />\n      )}\n      {type === 'custom' && <CustomCodeFields />}\n    </Form>\n  );\n}\n\nfunction CustomCodeFields() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"head_code\"\n        label={<Trans message=\"Custom code for page head\" />}\n        className=\"mb-24\"\n        inputElementType=\"textarea\"\n        rows={5}\n      />\n      <FormTextField\n        name=\"body_code\"\n        label={<Trans message=\"Custom code for page body\" />}\n        inputElementType=\"textarea\"\n        rows={5}\n      />\n    </Fragment>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {CrupdatePixelFormValue} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdatePixel(\n  pixelId: number,\n  form: UseFormReturn<CrupdatePixelFormValue>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: CrupdatePixelFormValue) => createPixel(pixelId, props),\n    onSuccess: () => {\n      toast.positive(trans(message('Pixel updated')));\n      queryClient.invalidateQueries({queryKey: DatatableDataQueryKey('tp')});\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createPixel(\n  pixelId: number,\n  payload: CrupdatePixelFormValue,\n): Promise<Response> {\n  return apiClient.put(`tp/${pixelId}`, payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {\n  CrupdatePixelForm,\n  CrupdatePixelFormValue,\n} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {Trans} from '@common/i18n/trans';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {useUpdatePixel} from '@app/dashboard/tracking-pixels/requests/use-update-pixel';\n\ninterface UpdatePixelDialogProps {\n  pixel: TrackingPixel;\n}\nexport function UpdatePixelDialog({pixel}: UpdatePixelDialogProps) {\n  const form = useForm<CrupdatePixelFormValue>({\n    defaultValues: {\n      name: pixel.name,\n      type: pixel.type,\n      pixel_id: pixel.pixel_id,\n      head_code: pixel.head_code,\n      body_code: pixel.body_code,\n    },\n  });\n  const {formId, close} = useDialogContext();\n  const updatePixel = useUpdatePixel(pixel.id, form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Update “:name“\" values={{name: pixel.name}} />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdatePixelForm\n          formId={formId}\n          form={form}\n          onSubmit={values => {\n            updatePixel.mutate(values, {\n              onSuccess: () => {\n                close();\n              },\n            });\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updatePixel.isPending}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {TrackingPixel} from '@app/dashboard/tracking-pixels/tracking-pixel';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {UpdatePixelDialog} from '@app/dashboard/tracking-pixels/crupdate-dialog/update-pixel-dialog';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const TrackingPixelsDatatableColumns: ColumnConfig<TrackingPixel>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Name\" />,\n    body: pixel => pixel.name,\n  },\n  {\n    key: 'type',\n    allowsSorting: true,\n    header: () => <Trans message=\"Type\" />,\n    body: pixel => {\n      const docsUrl = SupportedTrackingPixels.find(\n        p => p.name === pixel.type\n      )?.docsUrl;\n\n      return (\n        <div>\n          <div className=\"flex items-center gap-10\">\n            {docsUrl ? <RemoteFavicon url={docsUrl} /> : null}\n            {docsUrl ? (\n              <a\n                href={docsUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className={LinkStyle}\n              >\n                {pixel.type}\n              </a>\n            ) : (\n              pixel.type\n            )}\n          </div>\n        </div>\n      );\n    },\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    width: 'flex-2 min-w-140',\n    body: pixel => {\n      if (!pixel.user) return '';\n      return (\n        <NameWithAvatar\n          image={pixel.user.avatar}\n          label={pixel.user.display_name}\n          description={pixel.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'pixel_id',\n    header: () => <Trans message=\"Pixel ID\" />,\n    body: pixel => pixel.pixel_id,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: pixel =>\n      pixel.updated_at ? <FormattedDate date={pixel.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-42 flex-shrink-0',\n    body: pixel => {\n      return (\n        <PermissionAwareButton resource={pixel} action=\"update\">\n          <DialogTrigger type=\"modal\">\n            <IconButton className=\"text-muted\">\n              <EditIcon />\n            </IconButton>\n            <UpdatePixelDialog pixel={pixel} />\n          </DialogTrigger>\n        </PermissionAwareButton>\n      );\n    },\n  },\n];\n","export default \"__VITE_ASSET__537f9c7f__\"","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\nimport {SupportedTrackingPixels} from '@app/dashboard/tracking-pixels/supported-tracking-pixels';\n\nexport const TrackingPixelsDatatableFilters: BackendFilter[] = [\n  {\n    key: 'type',\n    label: message('Type'),\n    description: message('Type of the pixel'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      options: SupportedTrackingPixels.map((pixel, index) => {\n        return {key: pixel.name, value: pixel.name, label: message(pixel.name)};\n      }),\n    },\n  },\n  createdAtFilter({\n    description: message('Date pixel was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date pixel was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User pixel belongs to'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {CrupdatePixelFormValue} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreatePixel(form: UseFormReturn<CrupdatePixelFormValue>) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: CrupdatePixelFormValue) => createPixel(props),\n    onSuccess: () => {\n      toast.positive(trans(message('Pixel created')));\n      queryClient.invalidateQueries({queryKey: DatatableDataQueryKey('tp')});\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createPixel(payload: CrupdatePixelFormValue): Promise<Response> {\n  return apiClient.post('tp', payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCreatePixel} from '@app/dashboard/tracking-pixels/requests/use-create-pixel';\nimport {\n  CrupdatePixelForm,\n  CrupdatePixelFormValue,\n} from '@app/dashboard/tracking-pixels/crupdate-dialog/crupdate-pixel-form';\nimport {Trans} from '@common/i18n/trans';\n\nexport function CreatePixelDialog() {\n  const form = useForm<CrupdatePixelFormValue>({\n    defaultValues: {type: 'facebook'},\n  });\n  const {formId, close} = useDialogContext();\n  const createPixel = useCreatePixel(form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Create pixel\" />\n      </DialogHeader>\n      <DialogBody>\n        <CrupdatePixelForm\n          formId={formId}\n          form={form}\n          onSubmit={values => {\n            createPixel.mutate(values, {\n              onSuccess: () => {\n                close();\n              },\n            });\n          }}\n        />\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createPixel.isPending}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport React, {useMemo} from 'react';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {TrackingPixelsDatatableColumns} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-columns';\nimport locationTracking from './location-tracking.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {TrackingPixelsDatatableFilters} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-filters';\nimport {CreatePixelDialog} from '@app/dashboard/tracking-pixels/crupdate-dialog/create-pixel-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\n\ninterface TrackingPixelsDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function TrackingPixelsDatablePage({\n  forCurrentUser,\n}: TrackingPixelsDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? TrackingPixelsDatatableColumns\n      : TrackingPixelsDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? TrackingPixelsDatatableFilters\n      : TrackingPixelsDatatableFilters.filter(\n          filter => filter.key !== 'user_id',\n        );\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"tp\"\n      queryParams={{userId, with: 'user', workspaceId}}\n      title={<Trans message=\"Tracking pixels\" />}\n      filters={filters}\n      columns={columns}\n      headerContent={<InfoTrigger />}\n      headerItemsAlign=\"items-center\"\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"trackingPixel\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={locationTracking}\n          title={<Trans message=\"No tracking pixels have been added yet\" />}\n          filteringTitle={<Trans message=\"No matching tracking pixels\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"trackingPixel\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"Add pixel\" />\n        </DataTableAddItemButton>\n        <CreatePixelDialog />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Add third party tracking integration to your links using pixels or custom code snippet.\" />\n      }\n    />\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport interface UpdateLinkPageOptionsPayload {\n  hideNavbar: boolean;\n  hideFooter: boolean;\n}\n\nexport function useUpdateLinkPageOptions(\n  pageId: number | string,\n  form: UseFormReturn<UpdateLinkPageOptionsPayload>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: UpdateLinkPageOptionsPayload) =>\n      updatePage(pageId, props),\n    onSuccess: () => {\n      toast.positive(trans(message('Page options updated')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-page'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction updatePage(\n  pageId: number | string,\n  payload: UpdateLinkPageOptionsPayload,\n): Promise<Response> {\n  return apiClient\n    .put(`link-page/${pageId}`, {meta: payload})\n    .then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Form} from '@common/ui/forms/form';\nimport {useForm} from 'react-hook-form';\nimport {\n  UpdateLinkPageOptionsPayload,\n  useUpdateLinkPageOptions,\n} from '@app/dashboard/link-pages/requests/use-update-link-page-options';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {useLinkSummary} from '@app/dashboard/layout/sidenav/use-link-summary';\nimport {useAuth} from '@common/auth/use-auth';\nimport {NoPermissionButton} from '@common/billing/upgrade/no-permission-button';\n\ninterface LinkPageOptionsTriggerProps {\n  page: CustomPage;\n}\nexport function LinkPageOptionsTrigger({page}: LinkPageOptionsTriggerProps) {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Tooltip label={<Trans message=\"Page options\" />}>\n        <IconButton className=\"text-muted\">\n          <SettingsIcon />\n        </IconButton>\n      </Tooltip>\n      <OptionsDialog page={page} />\n    </DialogTrigger>\n  );\n}\n\ninterface OptionsDialogProps {\n  page: CustomPage;\n}\nfunction OptionsDialog({page}: OptionsDialogProps) {\n  const {data} = useLinkSummary();\n  const {hasPermission} = useAuth();\n  const canChangeOptions =\n    data?.usage.custom_pages.options || hasPermission('admin');\n  const {formId, close} = useDialogContext();\n  const form = useForm<UpdateLinkPageOptionsPayload>({\n    defaultValues: {\n      hideFooter: Boolean(page.meta?.hideFooter),\n      hideNavbar: Boolean(page.meta?.hideNavbar),\n    },\n  });\n  const updateOptions = useUpdateLinkPageOptions(page.id, form);\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Link page options\" />\n      </DialogHeader>\n      <DialogBody>\n        {!canChangeOptions && (\n          <NoPermissionButton\n            className=\"mb-24\"\n            message={\n              <Trans message=\"Your current plan does not include link page option editing.\" />\n            }\n          />\n        )}\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            updateOptions.mutate(values, {onSuccess: close});\n          }}\n        >\n          <FormSwitch\n            className=\"mb-24\"\n            name=\"hideNavbar\"\n            disabled={!canChangeOptions}\n            description={\n              <Trans message=\"Whether navbar should be hidden on this link page.\" />\n            }\n          >\n            <Trans message=\"Hide navbar\" />\n          </FormSwitch>\n          <FormSwitch\n            name=\"hideFooter\"\n            disabled={!canChangeOptions}\n            description={\n              <Trans message=\"Whether footer should be hidden on this link page.\" />\n            }\n          >\n            <Trans message=\"Hide footer\" />\n          </FormSwitch>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"text\" onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateOptions.isPending || !canChangeOptions}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport React, {Fragment} from 'react';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {LinkPageOptionsTrigger} from '@app/dashboard/link-pages/link-page-options-trigger';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\n\nexport const LinkPagesDatatableColumns: ColumnConfig<CustomPage>[] = [\n  {\n    key: 'title',\n    allowsSorting: true,\n    width: 'flex-2 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Title\" />,\n    body: page => (\n      <Link target=\"_blank\" to={`/pages/${page.slug}`} className={LinkStyle}>\n        {page.title}\n      </Link>\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    width: 'flex-2 min-w-140',\n    header: () => <Trans message=\"Owner\" />,\n    body: page =>\n      page.user && (\n        <NameWithAvatar\n          image={page.user.avatar}\n          label={page.user.display_name}\n          description={page.user.email}\n        />\n      ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    width: 'w-100',\n    header: () => <Trans message=\"Last updated\" />,\n    body: page => <FormattedDate date={page.updated_at} />,\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-84 flex-shrink-0',\n    visibleInMode: 'all',\n    body: page => (\n      <Fragment>\n        <LinkPageOptionsTrigger page={page} />\n        <PermissionAwareButton resource={page} action=\"update\">\n          <Tooltip label={<Trans message=\"Edit page\" />}>\n            <IconButton\n              size=\"md\"\n              className=\"text-muted\"\n              elementType={Link}\n              to={`${page.id}/edit`}\n            >\n              <EditIcon />\n            </IconButton>\n          </Tooltip>\n        </PermissionAwareButton>\n      </Fragment>\n    ),\n  },\n];\n","import {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {CustomPageDatatableFilters} from '@common/admin/custom-pages/custom-page-datatable-filters';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {useAuth} from '@common/auth/use-auth';\nimport React, {useContext, useMemo} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport articlesSvg from '@common/admin/custom-pages/articles.svg';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {LinkPagesDatatableColumns} from '@app/dashboard/link-pages/link-pages-datatable-columns';\n\ninterface CustomPageDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkPagesDatatablePage({\n  forCurrentUser,\n}: CustomPageDatablePageProps) {\n  const config = useContext(SiteConfigContext);\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? LinkPagesDatatableColumns\n      : LinkPagesDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? CustomPageDatatableFilters(config)\n      : CustomPageDatatableFilters(config).filter(\n          filter => filter.key !== 'user_id',\n        );\n\n    return {filters, columns};\n  }, [forCurrentUser, config]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"link-page\"\n      title={<Trans message=\"Link pages\" />}\n      filters={filters}\n      columns={columns}\n      headerContent={<InfoTrigger />}\n      headerItemsAlign=\"items-center\"\n      queryParams={{userId, with: 'user', workspaceId}}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"customPage\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={articlesSvg}\n          title={<Trans message=\"No link pages have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching link pages\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"customPage\" action=\"create\">\n      <DataTableAddItemButton elementType={Link} to=\"new\">\n        <Trans message=\"New page\" />\n      </DataTableAddItemButton>\n    </PermissionAwareButton>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Show a transitional page with fully custom markup. Users who visit the short url will briefly see the page before being redirected to destination url.\" />\n      }\n    />\n  );\n}\n","export default \"__VITE_ASSET__0aad6980__\"","import {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {Link} from 'react-router-dom';\nimport {ColorIcon} from '@common/admin/appearance/sections/themes/color-icon';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\nexport const LinkOverlaysDatatableColumns: ColumnConfig<LinkOverlay>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    width: 'flex-1 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Name\" />,\n    body: overlay => overlay.name,\n  },\n  {\n    key: 'message',\n    allowsSorting: true,\n    header: () => <Trans message=\"Message\" />,\n    body: overlay => overlay.message,\n  },\n  {\n    key: 'btn_text',\n    allowsSorting: true,\n    header: () => <Trans message=\"Button text\" />,\n    body: overlay => overlay.btn_text,\n  },\n  {\n    key: 'color',\n    header: () => <Trans message=\"Color\" />,\n    body: overlay => (\n      <ColorIcon\n        viewBox=\"0 0 48 48\"\n        className=\"icon-lg\"\n        style={{fill: overlay.colors['bg-color']}}\n      />\n    ),\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    width: 'flex-2 min-w-140',\n    body: overlay => {\n      if (!overlay.user) return '';\n      return (\n        <NameWithAvatar\n          image={overlay.user.avatar}\n          label={overlay.user.display_name}\n          description={overlay.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: pixel =>\n      pixel.updated_at ? <FormattedDate date={pixel.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-42 flex-shrink-0',\n    body: overlay => {\n      return (\n        <PermissionAwareButton resource={overlay} action=\"update\">\n          <IconButton\n            className=\"text-muted\"\n            elementType={Link}\n            to={`${overlay.id}/edit`}\n          >\n            <EditIcon />\n          </IconButton>\n        </PermissionAwareButton>\n      );\n    },\n  },\n];\n","import {message} from '@common/i18n/message';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport const LinkOverlayThemes = [\n  {key: 'default', label: message('Default')},\n  {key: 'full-width', label: message('Full width')},\n  {key: 'rounded', label: message('Rounded')},\n  {key: 'pill', label: message('Pill')},\n];\n\nexport const LinkOverlayPositions = [\n  {key: 'top-left', label: message('Top left')},\n  {key: 'top-right', label: message('Top right')},\n  {key: 'bottom-left', label: message('Bottom left')},\n  {key: 'bottom-right', label: message('Bottom right')},\n];\n\nexport const LinkOverlayColors: {\n  key: keyof LinkOverlay['colors'];\n  label: MessageDescriptor;\n}[] = [\n  {key: 'bg-color', label: message('Background color')},\n  {key: 'text-color', label: message('Text color')},\n  {key: 'btn-bg-color', label: message('Button background')},\n  {key: 'btn-text-color', label: message('Button text')},\n  {key: 'label-bg-color', label: message('Label background')},\n  {key: 'label-color', label: message('Label text')},\n];\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\nimport {\n  LinkOverlayPositions,\n  LinkOverlayThemes,\n} from '@app/dashboard/link-overlays/crupdate/link-overlay-constants';\n\nexport const LinkOverlaysDatatableFilters: BackendFilter[] = [\n  {\n    key: 'theme',\n    label: message('Theme'),\n    description: message('Theme for the overlay'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: 'default',\n      options: LinkOverlayThemes.map(theme => ({\n        key: theme.key,\n        value: theme.key,\n        label: theme.label,\n      })),\n    },\n  },\n  {\n    key: 'position',\n    label: message('Position'),\n    description: message('Position for the overlay'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: 'bottom-left',\n      options: LinkOverlayPositions.map(position => ({\n        key: position.key,\n        value: position.key,\n        label: position.label,\n      })),\n    },\n  },\n  createdAtFilter({\n    description: message('Date overlay was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date overlay was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User overlay belongs to'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {useAuth} from '@common/auth/use-auth';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport React, {useMemo} from 'react';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport preferencesPopup from './preferences-popup.svg';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {Link} from 'react-router-dom';\nimport {LinkOverlaysDatatableColumns} from '@app/dashboard/link-overlays/link-overlays-datatable-columns';\nimport {LinkOverlaysDatatableFilters} from '@app/dashboard/link-overlays/link-overlays-datatable-filters';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface TrackingPixelsDatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function LinkOverlaysDatatablePage({\n  forCurrentUser,\n}: TrackingPixelsDatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? LinkOverlaysDatatableColumns\n      : LinkOverlaysDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? LinkOverlaysDatatableFilters\n      : LinkOverlaysDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  const userId = forCurrentUser ? user?.id : '';\n\n  return (\n    <DataTablePage\n      endpoint=\"link-overlay\"\n      queryParams={{userId, with: 'user', workspaceId}}\n      title={<Trans message=\"Call-to-action overlays\" />}\n      headerContent={<InfoTrigger />}\n      headerItemsAlign=\"items-center\"\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"linkOverlay\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={preferencesPopup}\n          title={<Trans message=\"No overlays have been added yet\" />}\n          filteringTitle={<Trans message=\"No matching overlays\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      body={\n        <Trans message=\"Display fully customizable, non-intrusive overlay with a message and call-to-action button over destination website.\" />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"linkOverlay\" action=\"create\">\n      <DataTableAddItemButton to=\"new\" elementType={Link}>\n        <Trans message=\"Add overlay\" />\n      </DataTableAddItemButton>\n    </PermissionAwareButton>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useCreateLinkOverlay(\n  form: UseFormReturn<CrupdateLinkOverlayPayload>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateLinkOverlayPayload) => createOverlay(payload),\n    onSuccess: () => {\n      toast.positive(trans(message('Overlay created')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-overlay'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createOverlay(payload: CrupdateLinkOverlayPayload): Promise<Response> {\n  return apiClient.post('link-overlay', payload).then(r => r.data);\n}\n","export function OverlayWebsiteBackground() {\n  return (\n    <div className=\"bg-card h-full overflow-hidden\">\n      <div className=\"navbar flex items-center bg-alt h-40 w-full\">\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#d7665d'}}\n        />\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#deab54'}}\n        />\n        <div\n          className=\"os-button w-20 h-20 rounded-full ml-14\"\n          style={{background: '#6fb54c'}}\n        />\n      </div>\n\n      <div className=\"page-body p-24\">\n        <div className=\"top-row flex items-center h-60 bg-alt p-10 mb-24\">\n          <div className=\"circle w-40 h-40 rounded-full mr-auto bg-disabled-bg\"></div>\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n          <div className=\"line w-1/6 h-20 rounded bg-disabled-bg ml-14\" />\n        </div>\n\n        <div className=\"middle-row flex items-center justify-center flex-col h-[260px] bg-alt my-24\">\n          <div className=\"line rounded h-36 mb-20 w-3/5 bg-disabled-bg\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n          <div className=\"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5\" />\n        </div>\n\n        <div className=\"flex-container flex\">\n          <div className=\"left w-1/3\">\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-6\" />\n            <div className=\"line fat-line h-36 mb-10 rounded bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"separator h-1 bg-divider my-24\"></div>\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-10\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"rect h-144 bg-disabled-bg/5 mb-6\" />\n          </div>\n\n          <div className=\"right w-2/3 pl-24\">\n            <div className=\"rect h-288 mb-32 bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"line fat-line h-36 mb-10 rounded bg-disabled-bg/5\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"separator h-1 bg-divider my-24\" />\n            <div className=\"line mb-10 h-20 rounded bg-disabled-bg\" />\n            <div className=\"rect h-288 mb-32 bg-disabled-bg/5\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import {useFormContext, UseFormReturn} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@common/i18n/trans';\nimport {TabPanel, TabPanels} from '@common/ui/tabs/tab-panels';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {\n  LinkOverlayColors,\n  LinkOverlayPositions,\n  LinkOverlayThemes,\n} from '@app/dashboard/link-overlays/crupdate/link-overlay-constants';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {OverlayWebsiteBackground} from './overlay-website-background';\nimport {Fragment, ReactElement} from 'react';\nimport {FloatingLinkOverlay} from '@app/short-links/floating-link-overlay';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ColorIcon} from '@common/admin/appearance/sections/themes/color-icon';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\n\ninterface CrupdateLinkOverlayFormProps {\n  isLoading: boolean;\n  form: UseFormReturn<CrupdateLinkOverlayPayload>;\n  onSubmit: (values: CrupdateLinkOverlayPayload) => void;\n}\nexport function CrupdateLinkOverlayForm({\n  form,\n  isLoading,\n  onSubmit,\n}: CrupdateLinkOverlayFormProps) {\n  return (\n    <Form form={form} onSubmit={onSubmit} className=\"flex h-full\">\n      <div className=\"h-full w-full flex-shrink-0 overflow-y-auto px-16 md:w-288 md:border-r md:shadow-lg\">\n        <Tabs>\n          <TabList expand>\n            <Tab>\n              <Trans message=\"General\" />\n            </Tab>\n            <Tab>\n              <Trans message=\"Style\" />\n            </Tab>\n          </TabList>\n          <TabPanels className=\"my-24\">\n            <TabPanel>\n              <GeneralFields />\n              <SaveButton disabled={isLoading} />\n            </TabPanel>\n            <TabPanel>\n              <StyleFields />\n              <SaveButton disabled={isLoading} className=\"mt-14\" />\n            </TabPanel>\n          </TabPanels>\n        </Tabs>\n      </div>\n      <div className=\"relative hidden flex-auto md:block\">\n        <OverlayWebsiteBackground />\n        <OverlayPreview />\n      </div>\n    </Form>\n  );\n}\n\nfunction SaveButton(props: ButtonProps) {\n  return (\n    <Button type=\"submit\" variant=\"flat\" color=\"primary\" {...props}>\n      <Trans message=\"Save\" />\n    </Button>\n  );\n}\n\nfunction BackgroundField() {\n  return (\n    <FormImageSelector\n      className=\"mb-20\"\n      name=\"colors.bg-image\"\n      label={<Trans message=\"Background image\" />}\n      diskPrefix=\"overlays\"\n      showRemoveButton\n    />\n  );\n}\n\ninterface ColorFieldProps {\n  name: keyof LinkOverlay['colors'];\n  children: ReactElement;\n}\nfunction ColorField({name, children}: ColorFieldProps) {\n  const {watch, setValue} = useFormContext<CrupdateLinkOverlayPayload>();\n  const color = watch(`colors.${name}`);\n\n  return (\n    <DialogTrigger\n      value={color}\n      type=\"popover\"\n      placement=\"right\"\n      offset={10}\n      onClose={newColor => setValue(`colors.${name}`, newColor)}\n      onValueChange={newColor => setValue(`colors.${name}`, newColor)}\n    >\n      <ButtonBase className=\"relative mb-10 flex h-54 w-full items-center gap-10 rounded border bg px-14 text-sm hover:bg-hover\">\n        <ColorIcon\n          viewBox=\"0 0 48 48\"\n          className=\"icon-lg\"\n          style={{fill: color}}\n        />\n        <div>{children}</div>\n        <KeyboardArrowRightIcon className=\"ml-auto text-muted icon-sm\" />\n      </ButtonBase>\n      <ColorPickerDialog />\n    </DialogTrigger>\n  );\n}\n\nfunction StyleFields() {\n  return (\n    <Fragment>\n      <FileUploadProvider>\n        <BackgroundField />\n      </FileUploadProvider>\n      {LinkOverlayColors.map(({key, label}) => (\n        <ColorField name={key} key={key}>\n          <Trans {...label} />\n        </ColorField>\n      ))}\n    </Fragment>\n  );\n}\n\nfunction GeneralFields() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-24\"\n        required\n      />\n      <FormSelect\n        name=\"position\"\n        selectionMode=\"single\"\n        label={<Trans message=\"Position\" />}\n        className=\"mb-24\"\n      >\n        {LinkOverlayPositions.map(position => (\n          <Item key={position.key} value={position.key}>\n            <Trans {...position.label} />\n          </Item>\n        ))}\n      </FormSelect>\n      <FormSelect\n        name=\"theme\"\n        selectionMode=\"single\"\n        label={<Trans message=\"Theme\" />}\n        className=\"mb-24\"\n      >\n        {LinkOverlayThemes.map(theme => (\n          <Item key={theme.key} value={theme.key}>\n            <Trans {...theme.label} />\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        name=\"message\"\n        label={<Trans message=\"Message\" />}\n        inputElementType=\"textarea\"\n        maxLength={200}\n        rows={2}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        name=\"label\"\n        label={<Trans message=\"Label\" />}\n        maxLength={8}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        type=\"url\"\n        name=\"btn_link\"\n        label={<Trans message=\"Button link\" />}\n        className=\"mb-24\"\n      />\n      <FormTextField\n        name=\"btn_text\"\n        label={<Trans message=\"Button text\" />}\n        maxLength={30}\n        className=\"mb-24\"\n      />\n    </Fragment>\n  );\n}\n\nfunction OverlayPreview() {\n  const {watch} = useFormContext<CrupdateLinkOverlayPayload>();\n  const values = watch();\n  return <FloatingLinkOverlay overlay={values} />;\n}\n","import {useForm} from 'react-hook-form';\nimport {useCreateLinkOverlay} from '@app/dashboard/link-overlays/requests/use-create-link-overlay';\nimport {CrupdateLinkOverlayForm} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\n\nexport function CreateLinkOverlayPage() {\n  const {trans} = useTrans();\n  const navigate = useNavigate();\n  const form = useForm<CrupdateLinkOverlayPayload>({\n    defaultValues: {\n      position: 'bottom-left',\n      theme: 'default',\n      label: trans(message('Label')),\n      message: trans(message('Your message here')),\n      btn_text: trans(message('Button text')),\n      btn_link: 'https://google.com',\n      colors: {\n        'bg-color': 'rgb(61, 75, 101)',\n        'text-color': 'rgb(255, 255, 255)',\n        'label-bg-color': 'rgb(255, 255, 255)',\n        'label-color': 'rgb(0, 0, 0)',\n      },\n    },\n  });\n  const createOverlay = useCreateLinkOverlay(form);\n  return (\n    <CrupdateLinkOverlayForm\n      form={form}\n      isLoading={createOverlay.isPending}\n      onSubmit={values => {\n        createOverlay.mutate(values, {\n          onSuccess: () => navigate('..', {relative: 'path'}),\n        });\n      }}\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\n\nexport const linkOverlayEndpoint = (overlayId: number | string) =>\n  `link-overlay/${overlayId}`;\n\nexport interface GetLinkOverlayResponse extends BackendResponse {\n  linkOverlay: LinkOverlay;\n}\n\nexport function useLinkOverlay(overlayId: number | string) {\n  return useQuery({\n    queryKey: [linkOverlayEndpoint(overlayId)],\n    queryFn: () => getLinkOverlay(overlayId),\n  });\n}\n\nfunction getLinkOverlay(\n  overlayId: number | string,\n): Promise<GetLinkOverlayResponse> {\n  return apiClient\n    .get(linkOverlayEndpoint(overlayId))\n    .then(response => response.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {linkOverlayEndpoint} from '@app/dashboard/link-overlays/requests/use-link-overlay';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateLinkOverlay(\n  overlayId: number | string,\n  form: UseFormReturn<CrupdateLinkOverlayPayload>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateLinkOverlayPayload) =>\n      createOverlay(overlayId, payload),\n    onSuccess: () => {\n      toast.positive(trans(message('Overlay updated')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-overlay'),\n      });\n      queryClient.invalidateQueries({\n        queryKey: [linkOverlayEndpoint(overlayId)],\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createOverlay(\n  overlayId: number | string,\n  payload: CrupdateLinkOverlayPayload,\n): Promise<Response> {\n  return apiClient.put(`link-overlay/${overlayId}`, payload).then(r => r.data);\n}\n","import {useForm} from 'react-hook-form';\nimport {CrupdateLinkOverlayForm} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-form';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CrupdateLinkOverlayPayload} from '@app/dashboard/link-overlays/crupdate/crupdate-link-overlay-payload';\nimport {useParams} from 'react-router-dom';\nimport {useLinkOverlay} from '@app/dashboard/link-overlays/requests/use-link-overlay';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {LinkOverlay} from '@app/dashboard/link-overlays/link-overlay';\nimport {useUpdateLinkOverlay} from '@app/dashboard/link-overlays/requests/use-update-link-overlay';\n\nexport function UpdateLinkOverlayPage() {\n  const {overlayId} = useParams();\n  const {data, isLoading, isError} = useLinkOverlay(overlayId!);\n\n  if (data) {\n    return <PageContent overlay={data.linkOverlay} />;\n  }\n\n  if (isLoading) {\n    return <FullPageLoader />;\n  }\n\n  if (isError) {\n    return null;\n  }\n}\n\ninterface PageContentProps {\n  overlay: LinkOverlay;\n}\nfunction PageContent({overlay}: PageContentProps) {\n  const navigate = useNavigate();\n  const form = useForm<CrupdateLinkOverlayPayload>({\n    defaultValues: {\n      name: overlay.name,\n      position: overlay.position,\n      theme: overlay.theme,\n      label: overlay.label,\n      message: overlay.message,\n      btn_text: overlay.btn_text,\n      btn_link: overlay.btn_link,\n      colors: overlay.colors,\n    },\n  });\n  const updateOverlay = useUpdateLinkOverlay(overlay.id, form);\n  return (\n    <CrupdateLinkOverlayForm\n      form={form}\n      isLoading={updateOverlay.isPending}\n      onSubmit={values => {\n        updateOverlay.mutate(values, {\n          onSuccess: () => navigate('../..', {relative: 'path'}),\n        });\n      }}\n    />\n  );\n}\n","export default \"__VITE_ASSET__a9c0e6fa__\"","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Link, Link as RouterLink} from 'react-router-dom';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport React, {Fragment} from 'react';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {CustomDomain} from '@common/custom-domains/custom-domain';\nimport {useDefaultCustomDomainHost} from '@common/custom-domains/use-default-custom-domain-host';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {useLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\n\nexport const BiolinksDatatableColumns: ColumnConfig<Biolink>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    body: biolink => (\n      <a\n        className={LinkStyle}\n        href={biolink.short_url}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        {biolink.name}\n      </a>\n    ),\n  },\n  {\n    key: 'clicks_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Clicks\" />,\n    body: biolink =>\n      biolink.clicks_count ? (\n        <FormattedNumber value={biolink.clicks_count} />\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'domain_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Domain\" />,\n    body: biolink => <DomainColumn model={biolink} />,\n  },\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Owner\" />,\n    width: 'flex-2 min-w-140',\n    body: biolink => {\n      if (!biolink.user) return '';\n      return (\n        <NameWithAvatar\n          image={biolink.user.avatar}\n          label={biolink.user.display_name}\n          description={biolink.user.email}\n        />\n      );\n    },\n  },\n  {\n    key: 'links_count',\n    allowsSorting: true,\n    header: () => <Trans message=\"Links\" />,\n    body: biolink =>\n      biolink.links_count ? (\n        <FormattedNumber value={biolink.links_count} />\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'active',\n    allowsSorting: true,\n    header: () => <Trans message=\"Active\" />,\n    body: biolink =>\n      biolink.active ? (\n        <CheckIcon className=\"icon-md text-positive\" />\n      ) : (\n        <CloseIcon className=\"icon-md text-danger\" />\n      ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    body: link =>\n      link.updated_at ? <FormattedDate date={link.updated_at} /> : '',\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    align: 'end',\n    width: 'w-128 flex-shrink-0',\n    visibleInMode: 'all',\n    body: biolink => (\n      <div className=\"text-muted\">\n        <Tooltip label={<Trans message=\"Clicks report\" />}>\n          <RouterLink to={`${biolink.id}`}>\n            <IconButton size=\"md\">\n              <BarChartIcon />\n            </IconButton>\n          </RouterLink>\n        </Tooltip>\n        <ShareLinkButton link={biolink} />\n        <PermissionAwareButton resource={biolink} action=\"update\">\n          <Link to={`${biolink.id}/edit/content`}>\n            <IconButton size=\"md\">\n              <EditIcon />\n            </IconButton>\n          </Link>\n        </PermissionAwareButton>\n      </div>\n    ),\n  },\n];\n\ninterface DomainColumnProps {\n  model: {\n    domain_id?: number;\n    domain?: CustomDomain;\n  };\n}\nexport function DomainColumn({model}: DomainColumnProps) {\n  const {data} = useLinkFormValueLists();\n  const defaultHost = useDefaultCustomDomainHost(data?.domains);\n  if (model.domain_id === 0 && defaultHost) {\n    return <Fragment>{defaultHost}</Fragment>;\n  }\n  if (model.domain_id && model.domain) {\n    return <Fragment>{removeProtocol(model.domain.host)}</Fragment>;\n  }\n  return <Trans message=\"All domains\" />;\n}\n","import {\n  ALL_PRIMITIVE_OPERATORS,\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {USER_MODEL} from '@common/auth/user';\n\nexport const BiolinksDatatableFilters: BackendFilter[] = [\n  {\n    key: 'active',\n    label: message('Status'),\n    description: message('Whether biolink is disabled or not'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('Enabled'),\n          value: true,\n        },\n        {\n          key: '02',\n          label: message('Disabled'),\n          value: false,\n        },\n      ],\n    },\n  },\n  {\n    key: 'clicks_count',\n    label: message('Clicks count'),\n    description: message('Number of times this biolink was visited'),\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n    control: {\n      type: FilterControlType.Input,\n      inputType: 'number',\n      defaultValue: 1,\n    },\n  },\n  {\n    key: 'links_count',\n    label: message('Link count'),\n    description: message('Number of links in the biolink'),\n    defaultOperator: FilterOperator.gte,\n    operators: ALL_PRIMITIVE_OPERATORS,\n    control: {\n      type: FilterControlType.Input,\n      inputType: 'number',\n      defaultValue: 1,\n    },\n  },\n  createdAtFilter({\n    description: message('Date biolink was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date biolink was last updated'),\n  }),\n  {\n    key: 'user_id',\n    label: message('Owner'),\n    description: message('User biolink was created by'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateBiolinkFormValues} from '../crupdate/crupdate-biolink-form-values';\nimport {buildLinkeablePayload} from '@app/dashboard/links/utils/build-linkeable-payload';\nimport {CrupdateBiolinkPayload} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\nexport function useCreateBiolink(\n  form: UseFormReturn<CrupdateBiolinkFormValues>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: CrupdateBiolinkFormValues) => createLinkGroup(props),\n    onSuccess: () => {\n      toast.positive(trans(message('Biolink created')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('biolink'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createLinkGroup(\n  payload: CrupdateBiolinkFormValues,\n): Promise<Response> {\n  return apiClient\n    .post('biolink', buildLinkeablePayload<CrupdateBiolinkPayload>(payload))\n    .then(r => r.data);\n}\n","import {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {CrupdateBiolinkFormValues} from './crupdate-biolink-form-values';\nimport {useForm} from 'react-hook-form';\nimport {useCreateBiolink} from '../requests/use-create-biolink';\nimport {nanoid} from 'nanoid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useRecaptcha} from '@common/recaptcha/use-recaptcha';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\nimport {LinkDomainSelect} from '@app/dashboard/links/forms/link-domain-select';\nimport {FormSwitch} from '@common/ui/forms/toggle/switch';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\n\nexport function CreateBiolinkDialog() {\n  const navigate = useNavigate();\n  const {formId, close} = useDialogContext();\n  const {custom_domains} = useSettings();\n  const {verify, isVerifying} = useRecaptcha('link_creation');\n\n  const form = useForm<CrupdateBiolinkFormValues>({\n    defaultValues: {\n      active: true,\n      hash: nanoid(6),\n      domain_id: custom_domains?.allow_all_option ? undefined : 0,\n    },\n  });\n  const createBiolink = useCreateBiolink(form);\n\n  const handleSubmit = async (values: CrupdateBiolinkFormValues) => {\n    const isValid = await verify();\n    if (isValid) {\n      createBiolink.mutate(values, {\n        onSuccess: response => {\n          close();\n          navigate(`${response.biolink.id}/edit`);\n        },\n      });\n    }\n  };\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Create biolink\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onBeforeSubmit={() => {\n            // hook form won't clear errors for fields that are not bound to input\n            form.clearErrors('hash');\n          }}\n          onSubmit={handleSubmit}\n        >\n          <div className=\"mb-24\">\n            <FormTextField\n              name=\"name\"\n              label={<Trans message=\"Name\" />}\n              minLength={3}\n              className=\"mb-8\"\n              autoFocus\n            />\n            <AliasField form={form} name=\"hash\" />\n          </div>\n          <LinkDomainSelect name=\"domain_id\" className=\"mb-24\" />\n          <FormTextField\n            name=\"description\"\n            className=\"mb-24\"\n            label={<Trans message=\"Description\" />}\n            inputElementType=\"textarea\"\n            rows={2}\n          />\n          <FormSwitch\n            name=\"active\"\n            description={\n              <Trans message=\"Whether this biolink is viewable publicly.\" />\n            }\n            className=\"mb-24\"\n          >\n            <Trans message=\"Active\" />\n          </FormSwitch>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createBiolink.isPending || isVerifying}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport React, {useEffect, useMemo} from 'react';\nimport {DataTablePage} from '@common/datatable/page/data-table-page';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteSelectedItemsAction} from '@common/datatable/page/delete-selected-items-action';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport marketing from './marketing.svg';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {BiolinksDatatableColumns} from './biolinks-datatable-columns';\nimport {BiolinksDatatableFilters} from './biolinks-datatable-filters';\nimport {CreateBiolinkDialog} from './crupdate/create-biolink-dialog';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {PermissionAwareButton} from '@app/dashboard/upgrade/permission-aware-button';\n\ninterface LinkGroupsDatatablePageProps {\n  forCurrentUser?: boolean;\n}\nexport function BioLinksDatatablePage({\n  forCurrentUser,\n}: LinkGroupsDatatablePageProps) {\n  const {user} = useAuth();\n  const {workspaceId} = useActiveWorkspaceId();\n  const {filters, columns} = useMemo(() => {\n    const columns = !forCurrentUser\n      ? BiolinksDatatableColumns\n      : BiolinksDatatableColumns.filter(col => col.key !== 'user_id');\n\n    const filters = !forCurrentUser\n      ? BiolinksDatatableFilters\n      : BiolinksDatatableFilters.filter(filter => filter.key !== 'user_id');\n\n    return {filters, columns};\n  }, [forCurrentUser]);\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, []);\n\n  const userId = forCurrentUser ? user?.id : '';\n  return (\n    <DataTablePage\n      endpoint=\"biolink\"\n      queryParams={{\n        userId,\n        withCount: 'links',\n        with: 'user,domain',\n        workspaceId,\n      }}\n      title={<Trans message=\"Biolinks\" />}\n      headerItemsAlign=\"items-center\"\n      headerContent={<InfoTrigger />}\n      filters={filters}\n      columns={columns}\n      actions={<Actions />}\n      selectedActions={\n        <PermissionAwareButton resource=\"biolink\" action=\"delete\">\n          <DeleteSelectedItemsAction />\n        </PermissionAwareButton>\n      }\n      emptyStateMessage={\n        <DataTableEmptyStateMessage\n          image={marketing}\n          title={<Trans message=\"No biolinks have been created yet\" />}\n          filteringTitle={<Trans message=\"No matching biolinks\" />}\n        />\n      }\n    />\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      title={<Trans message=\"Link in bio\" />}\n      body={\n        <Trans message=\"Offer multiple choices to your followers when they click on your Biolink. Share all your Social Media profiles, videos, songs, articles and other important links with just one url.\" />\n      }\n    />\n  );\n}\n\nfunction Actions() {\n  return (\n    <PermissionAwareButton resource=\"biolink\" action=\"create\">\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"New biolink\" />\n        </DataTableAddItemButton>\n        <CreateBiolinkDialog />\n      </DialogTrigger>\n    </PermissionAwareButton>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {useParams} from 'react-router-dom';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\nexport interface FetchBiolinkResponse extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface FetchBiolinkParams {\n  loadContent?: boolean;\n}\n\nexport const biolinkQueryKey = (\n  biolinkId: string | number,\n  params?: FetchBiolinkParams,\n) => {\n  return DatatableDataQueryKey(\n    `biolink/${biolinkId}`,\n    params as Record<string, string | boolean> | undefined,\n  );\n};\n\nexport function useBiolink() {\n  const {biolinkId} = useParams();\n  return useQuery({\n    queryKey: biolinkQueryKey(biolinkId!),\n    queryFn: () => fetchBiolink(biolinkId!),\n    initialData: seedInitialDataFromPaginatedList(biolinkId!),\n  });\n}\n\nexport async function fetchBiolink(\n  biolinkId: number | string,\n  params?: FetchBiolinkParams,\n  onLoad?: (data: FetchBiolinkResponse) => void,\n): Promise<FetchBiolinkResponse> {\n  const response = await apiClient\n    .get(`biolink/${biolinkId}`, {params})\n    .then(response => response.data);\n  onLoad?.(response);\n  return response;\n}\n\nfunction seedInitialDataFromPaginatedList(biolinkId: number | string) {\n  const biolink = queryClient\n    .getQueryData<PaginatedBackendResponse<Biolink>>(\n      DatatableDataQueryKey('biolink'),\n    )\n    ?.pagination?.data.find(link => link.id === +biolinkId);\n  return biolink ? {biolink} : undefined;\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ClicksReportPageLayout} from '@app/dashboard/reports/clicks/clicks-report-page-layout';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\nimport clsx from 'clsx';\nimport {useBiolink} from '@app/dashboard/biolink/biolinks-datatable-page/requests/use-biolink';\n\nexport function BiolinkClicksReportPage() {\n  const navigate = useNavigate();\n  const {biolinkId} = useParams();\n  const query = useBiolink();\n  const biolink = query.data?.biolink;\n\n  return (\n    <ClicksReportPageLayout\n      model={`biolink=${biolinkId}`}\n      title={\n        <Breadcrumb size=\"xl\" className={clsx(query.isLoading && 'invisible')}>\n          <BreadcrumbItem\n            onSelected={() => {\n              navigate('..', {relative: 'path'});\n            }}\n          >\n            <Trans message=\"Biolinks\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem className=\"first-letter:capitalize\">\n            <Trans message=\"“:name“ clicks\" values={{name: biolink?.name}} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n      }\n      actions={\n        biolink && (\n          <ShareLinkButton\n            className=\"flex-shrink-0 text-muted\"\n            link={biolink}\n          />\n        )\n      }\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const WidgetsIcon = createSvgIcon(\n  <path d=\"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z\" />\n, 'WidgetsOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AnimationIcon = createSvgIcon(\n  <path d=\"M15 2c-2.71 0-5.05 1.54-6.22 3.78-1.28.67-2.34 1.72-3 3C3.54 9.95 2 12.29 2 15c0 3.87 3.13 7 7 7 2.71 0 5.05-1.54 6.22-3.78 1.28-.67 2.34-1.72 3-3C20.46 14.05 22 11.71 22 9c0-3.87-3.13-7-7-7zM9 20c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.87 3.13 7 7 7-.84.63-1.88 1-3 1zm3-3c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.86 3.13 6.99 7 7-.84.63-1.88 1-3 1zm4.7-3.3c-.53.19-1.1.3-1.7.3-2.76 0-5-2.24-5-5 0-.6.11-1.17.3-1.7.53-.19 1.1-.3 1.7-.3 2.76 0 5 2.24 5 5 0 .6-.11 1.17-.3 1.7zM19 12c0-3.86-3.13-6.99-7-7 .84-.63 1.87-1 3-1 2.76 0 5 2.24 5 5 0 1.12-.37 2.16-1 3z\" />\n, 'AnimationOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ShortcutIcon = createSvgIcon(\n  <path d=\"m15 5-1.41 1.41L15 7.83 17.17 10H8c-2.76 0-5 2.24-5 5v4h2v-4c0-1.65 1.35-3 3-3h9.17L15 14.17l-1.41 1.41L15 17l6-6-6-6z\" />\n, 'ShortcutOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreTimeIcon = createSvgIcon(\n  [<path d=\"M10 8v6l4.7 2.9.8-1.2-4-2.4V8z\" key=\"0\" />,<path d=\"M17.92 12c.05.33.08.66.08 1 0 3.9-3.1 7-7 7s-7-3.1-7-7 3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23-5 0-9 4-9 9s4 9 9 9 9-4 9-9c0-.34-.02-.67-.06-1h-2.02z\" key=\"1\" />,<path d=\"M20 5V2h-2v3h-3v2h3v3h2V7h3V5z\" key=\"2\" />,]\n, 'MoreTimeOutlined');\n","import {ColorPresets} from '@common/ui/color-picker/color-presets';\nimport {message} from '@common/i18n/message';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nexport const BaseColorBg: BackgroundSelectorConfig = {\n  type: 'color',\n  id: 'c-custom',\n  label: message('Custom color'),\n};\n\nexport const ColorBackgrounds: BackgroundSelectorConfig[] = ColorPresets.map(\n  (preset, index) => {\n    return {\n      ...BaseColorBg,\n      id: `c${index}`,\n      backgroundColor: preset.color,\n      label: preset.name,\n      color: preset.foreground,\n    };\n  },\n);\n","import {create} from 'zustand';\nimport {immer} from 'zustand/middleware/immer';\nimport {Biolink, BiolinkAppearance} from '@app/dashboard/biolink/biolink';\nimport {BaseColorBg} from '@common/background-selector/color-backgrounds';\n\ninterface BiolinkEditorState {\n  appearance: BiolinkAppearance;\n  appearanceIsDirty: boolean;\n  setAppearanceIsDirty: (isDirty: boolean) => void;\n  biolink: Omit<Biolink, 'appearance'> | null;\n  updateAppearance: (payload: BiolinkAppearance) => void;\n  setBiolink: (biolink: Biolink) => void;\n}\n\nconst defaultAppearance: BiolinkAppearance = {\n  bgConfig: {\n    ...BaseColorBg,\n    backgroundColor: '',\n    color: '',\n  },\n};\n\nexport const useBiolinkEditorStore = create<BiolinkEditorState>()(\n  immer((set, get) => ({\n    appearance: defaultAppearance,\n    appearanceIsDirty: false,\n    setAppearanceIsDirty: (isDirty: boolean) => {\n      set(state => {\n        state.appearanceIsDirty = isDirty;\n      });\n    },\n    biolink: null,\n    setBiolink: biolink => {\n      set(state => {\n        state.biolink = biolink;\n        // don't override user appearance changes in the editor when biolink reloads from backend\n        if (!state.appearanceIsDirty) {\n          state.appearance = biolink.appearance?.config || defaultAppearance;\n        }\n      });\n    },\n    updateAppearance(payload: BiolinkAppearance) {\n      set(state => {\n        state.appearanceIsDirty = true;\n        state.appearance = {\n          ...state.appearance,\n          ...payload,\n        };\n      });\n    },\n  })),\n);\n\nexport function biolinkEditorState() {\n  return useBiolinkEditorStore.getState();\n}\n","import {useParams} from 'react-router-dom';\nimport {useQuery} from '@tanstack/react-query';\nimport {\n  biolinkQueryKey,\n  fetchBiolink,\n  FetchBiolinkResponse,\n} from '@app/dashboard/biolink/biolinks-datatable-page/requests/use-biolink';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {queryClient} from '@common/http/query-client';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\nconst params = {\n  loadContent: true,\n};\n\nexport function useEditorBiolink() {\n  const biolinkId = useEditorBiolinkId();\n  const biolink = useBiolinkEditorStore(s => s.biolink);\n  const query = useQuery({\n    queryKey: biolinkQueryKey(biolinkId, params),\n    queryFn: () =>\n      fetchBiolink(biolinkId, params, data => {\n        biolinkEditorState().setBiolink(data.biolink);\n      }),\n  });\n\n  return {isLoading: query.isLoading, biolink, status: query.status, biolinkId};\n}\n\nexport function useEditorBiolinkId(): number {\n  const {biolinkId} = useParams();\n  return +biolinkId!;\n}\n\nexport function setEditorBiolink(biolink: Biolink) {\n  biolinkEditorState().setBiolink(biolink);\n  queryClient.setQueryData<FetchBiolinkResponse>(\n    biolinkQueryKey(biolink.id, params),\n    {biolink},\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  item: BiolinkLink | BiolinkWidget;\n  values: BiolinkItemPayload;\n}\n\nexport function useUpdateBiolinkContentItem() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation({\n    mutationFn: ({item, values}: Payload) =>\n      updateItem(biolinkId, item, values),\n    onSuccess: response => {\n      setEditorBiolink(response.biolink);\n    },\n    onError: err =>\n      showHttpErrorToast(err, message('Could not update content item')),\n  });\n}\n\nfunction updateItem(\n  biolinkId: number,\n  item: BiolinkLink | BiolinkWidget,\n  editorPayload: BiolinkItemPayload,\n): Promise<Response> {\n  const backendPayload: BiolinkItemPayload & {\n    item_id: number;\n    item_model_type: string;\n  } = {\n    ...editorPayload,\n    item_id: item.id,\n    item_model_type: item.model_type,\n  };\n  return apiClient\n    .put(`biolink/${biolinkId}/content-item`, backendPayload)\n    .then(r => r.data);\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {Fragment, ReactNode, useMemo} from 'react';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {parseAbsolute} from '@internationalized/date';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkScheduleDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkScheduleDialog({link}: LinkScheduleDialogProps) {\n  const now = useCurrentDateTime();\n  const timezone = useUserTimezone();\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      activates_at: link.activates_at,\n      expires_at: link.expires_at,\n    },\n  });\n  const updateItem = useUpdateBiolinkContentItem();\n  const activationDate = form.watch('activates_at');\n\n  const expirationMinDate = useMemo(() => {\n    if (activationDate) {\n      return parseAbsolute(activationDate, timezone);\n    }\n    return now;\n  }, [activationDate, now, timezone]);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Schedule\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Schedule updated'));\n                  close();\n                },\n              },\n            );\n          }}\n        >\n          <FormDatePicker\n            name=\"activates_at\"\n            min={now}\n            className=\"mb-24\"\n            label={<Trans message=\"Start date\" />}\n            showCalendarFooter\n          />\n          <FormDatePicker\n            name=\"expires_at\"\n            min={expirationMinDate}\n            className=\"mb-24\"\n            label={<Trans message=\"End date\" />}\n            showCalendarFooter\n          />\n        </Form>\n        <InfoSection />\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isPending || !form.formState.isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction InfoSection() {\n  const values = {\n    b: (parts: ReactNode) => <span className=\"font-bold\">{parts}</span>,\n  };\n\n  return (\n    <SectionHelper\n      description={\n        <Fragment>\n          <div>\n            <Trans\n              message=\"Leave <b>start date</b> blank to display this link immediately.\"\n              values={values}\n            />\n          </div>\n          <div>\n            <Trans\n              message=\"Leave <b>end date</b> blank to display this link forever.\"\n              values={values}\n            />\n          </div>\n        </Fragment>\n      }\n    />\n  );\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {FormDatePicker} from '@common/ui/forms/input-field/date/date-picker/date-picker';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkScheduleDialogProps {\n  link: BiolinkLink;\n}\nexport function LeapLinkDialog({link}: LinkScheduleDialogProps) {\n  const now = useCurrentDateTime();\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      leap_until: link.leap_until,\n    },\n  });\n  const isDirty = form.formState.isDirty;\n  const updateItem = useUpdateBiolinkContentItem();\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Redirect link\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Redirect link updated'));\n                  close();\n                },\n              },\n            );\n          }}\n        >\n          <FormDatePicker\n            required\n            name=\"leap_until\"\n            min={now}\n            className=\"mb-24\"\n            label={<Trans message=\"Redirect until\" />}\n            showCalendarFooter\n          />\n        </Form>\n        <InfoSection />\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={!isDirty || updateItem.isPending}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction InfoSection() {\n  return (\n    <SectionHelper\n      description={\n        <Trans message=\"Send all visitors straight to this link, instead of your Biolink, until the specified date. After that date, Biolink will resume to showing normally.\" />\n      }\n    />\n  );\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkThumbnailDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkThumbnailDialog({link}: LinkThumbnailDialogProps) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      image: link.image,\n    },\n  });\n  const updateItem = useUpdateBiolinkContentItem();\n  const isDirty = form.formState.isDirty;\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Link thumbnail\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Thumbnail updated'));\n                  close();\n                },\n              },\n            );\n          }}\n        >\n          <FileUploadProvider>\n            <FormImageSelector\n              showRemoveButton\n              name=\"image\"\n              diskPrefix=\"links\"\n            />\n          </FileUploadProvider>\n        </Form>\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isPending || !isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","export const LinkAnimationList = [\n  'none',\n  'bounce',\n  'flash',\n  'pulse',\n  'rubberBand',\n  'shakeX',\n  'shakeY',\n  'headShake',\n  'swing',\n  'tada',\n  'wobble',\n  'jello',\n  'heartBeat',\n];\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useForm, useFormContext} from 'react-hook-form';\nimport {BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Form} from '@common/ui/forms/form';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {LinkAnimationList} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-list';\nimport {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {SectionHelper} from '@common/ui/section-helper';\nimport {BiolinkItemPayload} from '@app/dashboard/biolink/biolink-editor/content/biolink-item-payload';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\n\ninterface LinkAnimationDialogProps {\n  link: BiolinkLink;\n}\nexport function LinkAnimationDialog({link}: LinkAnimationDialogProps) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<BiolinkItemPayload>({\n    defaultValues: {\n      animation: link.animation,\n    },\n  });\n  const isDirty = form.formState.isDirty;\n  const updateItem = useUpdateBiolinkContentItem();\n\n  useEffect(() => {\n    import('./animate.min.css');\n  }, []);\n\n  return (\n    <Dialog size=\"md\">\n      <DialogHeader>\n        <Trans message=\"Link animation\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={async values => {\n            updateItem.mutate(\n              {\n                item: link,\n                values,\n              },\n              {\n                onSuccess: () => {\n                  toast.positive(message('Animation updated'));\n                  close();\n                },\n              },\n            );\n          }}\n        >\n          <SectionHelper\n            className=\"mb-24\"\n            description={\n              <Trans\n                message=\"Add animation to draw attention to this link. :br Selected animation will repeat five times by default.\"\n                values={{br: <br />}}\n              />\n            }\n          />\n          <div className=\"grid gap-14 grid-cols-[repeat(auto-fill,minmax(95px,1fr))]\">\n            {LinkAnimationList.map((animation, index) => (\n              <AnimationItem key={index} animationName={animation} />\n            ))}\n          </div>\n        </Form>\n      </DialogBody>\n      <DialogFooter dividerTop>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={updateItem.isPending || !isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface AnimationItemProps {\n  animationName: string;\n}\nfunction AnimationItem({animationName}: AnimationItemProps) {\n  const [isAnimating, setIsAnimating] = useState(false);\n  const {watch, setValue} = useFormContext<BiolinkItemPayload>();\n  const animation: string | null =\n    animationName === 'none' ? null : animationName;\n  const selectedAnimation = watch('animation');\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => {\n        setValue('animation', animation, {shouldDirty: true});\n      }}\n      onPointerEnter={() => {\n        setIsAnimating(true);\n      }}\n      onPointerLeave={() => {\n        setIsAnimating(false);\n      }}\n      className={clsx(\n        'border border-2 px-10 h-64 uppercase font-medium rounded flex items-center justify-center animate__animated',\n        isAnimating && `animate__${animationName}`,\n        selectedAnimation === animation && 'border-primary',\n      )}\n    >\n      {animationName}\n    </button>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  item: BiolinkLink | BiolinkWidget;\n}\n\nexport function useDetachBiolinkContentItem() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation({\n    mutationFn: (payload: Payload) => detachItem(biolinkId, payload),\n    onSuccess: response => {\n      setEditorBiolink(response.biolink);\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction detachItem(biolinkId: number, payload: Payload): Promise<Response> {\n  return apiClient\n    .post(`biolink/${biolinkId}/content-item/detach`, payload)\n    .then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport {BiolinkLink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {useDetachBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-detach-biolink-content-item';\n\ninterface DetachItemButtonProps {\n  item: BiolinkLink | BiolinkWidget;\n}\nexport function DetachContentItemButton({item}: DetachItemButtonProps) {\n  const detachItem = useDetachBiolinkContentItem();\n  return (\n    <DialogTrigger type=\"modal\">\n      <IconButton\n        className=\"text-muted flex-shrink-0\"\n        disabled={detachItem.isPending}\n      >\n        <CloseIcon />\n      </IconButton>\n      <ConfirmationDialog\n        isDanger\n        onConfirm={() => {\n          detachItem.mutate({item});\n        }}\n        title={<Trans message=\"Remove item\" />}\n        body={\n          <Trans message=\"Are you sure you want to remove this item from the biolink?\" />\n        }\n        confirm={<Trans message=\"Remove\" />}\n      />\n    </DialogTrigger>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {moveItemInNewArray} from '@common/utils/array/move-item-in-new-array';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useEditorBiolinkId} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  oldIndex: number;\n  newIndex: number;\n  // id of widget that should be pinned to top\n  widgetToPin?: number;\n}\n\nexport function useSortBiolinkContent() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation({\n    mutationFn: (payload: Payload) => sortContent(biolinkId, payload),\n  });\n}\n\nfunction sortContent(\n  biolinkId: number,\n  {oldIndex, newIndex, widgetToPin}: Payload,\n): Promise<Response> {\n  const biolink = biolinkEditorState().biolink!;\n  const content = moveItemInNewArray(biolink.content, oldIndex, newIndex);\n  if (widgetToPin) {\n    content[newIndex] = {...content[newIndex], pinned: 'top'};\n  }\n  biolinkEditorState().setBiolink({...biolink, content});\n\n  const order = content.map(item => ({\n    id: item.id,\n    model_type: item.model_type,\n  }));\n\n  return apiClient.post(`biolink/${biolinkId}/change-order`, {\n    order,\n    widgetToPin,\n  });\n}\n","import {DragIndicatorIcon} from '@common/icons/material/DragIndicator';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {Trans} from '@common/i18n/trans';\nimport {DetachContentItemButton} from '@app/dashboard/biolink/biolink-editor/content/detach-content-item-button';\nimport {ReactNode, useRef} from 'react';\nimport {\n  Biolink,\n  BiolinkLink,\n  BiolinkWidget,\n} from '@app/dashboard/biolink/biolink';\nimport {useSortBiolinkContent} from '@app/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content';\nimport clsx from 'clsx';\nimport {useSortable} from '@common/ui/interactions/dnd/sortable/use-sortable';\n\ninterface BiolinkContentItemLayoutProps {\n  item?: BiolinkLink | BiolinkWidget;\n  biolink?: Biolink;\n  title?: ReactNode;\n  updateDialog?: ReactNode;\n  children: ReactNode;\n  actionRow?: ReactNode;\n}\nexport function BiolinkContentItemLayout({\n  item,\n  biolink,\n  title,\n  updateDialog,\n  children,\n  actionRow,\n}: BiolinkContentItemLayoutProps) {\n  const sortContent = useSortBiolinkContent();\n  const itemRef = useRef<HTMLDivElement>(null);\n  const sortDisabled = !item || item.pinned != null;\n\n  const {sortableProps, dragHandleRef} = useSortable({\n    item: item || 'noop',\n    items: biolink?.content || [],\n    type: 'biolinkEditorSortable',\n    ref: itemRef,\n    onSortEnd: (oldIndex, newIndex) => {\n      sortContent.mutate({oldIndex, newIndex});\n    },\n    disabled: sortDisabled,\n  });\n\n  return (\n    <div\n      className=\"mb-20 flex h-172 items-stretch rounded-panel border bg-paper shadow\"\n      ref={itemRef}\n      {...sortableProps}\n    >\n      <button\n        type=\"button\"\n        className={clsx(\n          'flex-shrink-0 border-r px-10 text-muted',\n          !sortDisabled && 'hover:text-primary',\n        )}\n        disabled={sortDisabled}\n        ref={dragHandleRef}\n      >\n        <DragIndicatorIcon />\n      </button>\n      <div className=\"min-w-0 flex-auto p-24\">\n        <div className=\"flex items-center\">\n          {title && (\n            <div className=\"mb-4 mr-auto flex-auto overflow-hidden overflow-ellipsis whitespace-nowrap font-medium\">\n              {title}\n            </div>\n          )}\n          {updateDialog && (\n            <DialogTrigger type=\"modal\">\n              <Button\n                className=\"ml-20 flex-shrink-0\"\n                variant=\"text\"\n                color=\"primary\"\n                startIcon={<EditIcon />}\n              >\n                <Trans message=\"Edit\" />\n              </Button>\n              {updateDialog}\n            </DialogTrigger>\n          )}\n          {biolink && item && <DetachContentItemButton item={item} />}\n        </div>\n        <div className=\"mb-20\">{children}</div>\n        {actionRow}\n      </div>\n    </div>\n  );\n}\n","import {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {Trans} from '@common/i18n/trans';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {Biolink, BiolinkLink} from '@app/dashboard/biolink/biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ImageIcon} from '@common/icons/material/Image';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AnimationIcon} from '@common/icons/material/Animation';\nimport {ShortcutIcon} from '@common/icons/material/Shortcut';\nimport {MoreTimeIcon} from '@common/icons/material/MoreTime';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {LinkScheduleDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-schedule-dialog';\nimport {LeapLinkDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/leap-link-dialog';\nimport {UpdateLinkDialog} from '@app/dashboard/links/dialogs/update-link-dialog';\nimport {HidableLinkSettingsField} from '@app/dashboard/links/forms/link-settings-form';\nimport {LinkThumbnailDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-thumbnail-dialog';\nimport {LinkAnimationDialog} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-animation-dialog';\nimport {BarChartIcon} from '@common/icons/material/BarChart';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport {Link} from 'react-router-dom';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\nimport {\n  setEditorBiolink,\n  useEditorBiolinkId,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {useMediaQuery} from '@common/utils/hooks/use-media-query';\n\nexport const linkDialogHiddenFields: HidableLinkSettingsField[] = [\n  'groups',\n  'seo',\n  'enabled',\n  'alias',\n];\n\ninterface LinkContentItemProps {\n  item: BiolinkLink;\n  biolink: Biolink;\n}\nexport function LinkContentItem({item: link, biolink}: LinkContentItemProps) {\n  const biolinkId = useEditorBiolinkId();\n  const endpoint = `biolink/${biolinkId}/link/${link.id}`;\n\n  return (\n    <BiolinkContentItemLayout\n      item={link}\n      biolink={biolink}\n      title={link.name}\n      actionRow={<ActionRow link={link} biolink={biolink} />}\n      updateDialog={\n        <UpdateLinkDialog\n          endpoint={endpoint}\n          link={link}\n          showButtonLabelField\n          hiddenFields={linkDialogHiddenFields}\n          onSuccess={(response: {biolink: Biolink}) => {\n            setEditorBiolink(response.biolink);\n          }}\n        />\n      }\n    >\n      <div className=\"flex items-center gap-6\">\n        <RemoteFavicon url={link.long_url} />\n        <a\n          href={link.short_url}\n          target=\"_blank\"\n          className=\"hover:underline whitespace-nowrap overflow-hidden overflow-ellipsis text-muted text-sm\"\n          rel=\"noreferrer\"\n        >\n          {removeProtocol(link.long_url)}\n        </a>\n      </div>\n    </BiolinkContentItemLayout>\n  );\n}\n\ninterface ActionRowProps {\n  link: BiolinkLink;\n  biolink: Biolink;\n}\nfunction ActionRow({link, biolink}: ActionRowProps) {\n  const updateItem = useUpdateBiolinkContentItem();\n\n  return (\n    <div className=\"flex md:gap-24 md:justify-between h-42 items-center\">\n      <div className=\"flex items-center text-muted\">\n        <Switch\n          checked={link.active}\n          disabled={link.active_locked || updateItem.isPending}\n          onChange={() => {\n            updateItem.mutate({\n              item: link,\n              values: {active: !link.active},\n            });\n          }}\n        />\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Change thumbnail\" />}>\n            <IconButton className=\"ml-10\" color={link.image ? 'primary' : null}>\n              <ImageIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkThumbnailDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Animation\" />}>\n            <IconButton color={link.animation ? 'primary' : null}>\n              <AnimationIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkAnimationDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Redirect\" />}>\n            <IconButton color={link.leap_until ? 'primary' : null}>\n              <ShortcutIcon />\n            </IconButton>\n          </Tooltip>\n          <LeapLinkDialog link={link} />\n        </DialogTrigger>\n        <DialogTrigger type=\"popover\">\n          <Tooltip label={<Trans message=\"Schedule\" />}>\n            <IconButton\n              color={link.expires_at || link.activates_at ? 'primary' : null}\n            >\n              <MoreTimeIcon />\n            </IconButton>\n          </Tooltip>\n          <LinkScheduleDialog link={link} />\n        </DialogTrigger>\n      </div>\n      <ClicksButton link={link} />\n    </div>\n  );\n}\n\ninterface ClicksButtonProps {\n  link: BiolinkLink;\n}\nfunction ClicksButton({link}: ClicksButtonProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const isVerySmallScreen = useMediaQuery('(max-width: 380px)');\n  if (isVerySmallScreen) {\n    return null;\n  }\n\n  const clicksReportPath = `../../../../links/${link.id}`;\n\n  const button = isMobile ? (\n    <IconButton\n      className=\"text-muted flex-shrink-0\"\n      elementType={Link}\n      to={clicksReportPath}\n      relative=\"path\"\n    >\n      <BarChartIcon />\n    </IconButton>\n  ) : (\n    <Button\n      variant=\"text\"\n      className=\"text-muted\"\n      startIcon={<BarChartIcon />}\n      elementType={Link}\n      to={clicksReportPath}\n      relative=\"path\"\n    >\n      <Trans message=\":count clicks\" values={{count: link.clicks_count}} />\n    </Button>\n  );\n\n  return (\n    <Tooltip\n      label={\n        <Trans\n          message=\":count lifetime clicks\"\n          values={{count: link.clicks_count}}\n        />\n      }\n    >\n      {button}\n    </Tooltip>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CrupdateBiolinkFormValues} from '@app/dashboard/biolink/biolinks-datatable-page/crupdate/crupdate-biolink-form-values';\nimport {\n  buildLinkeablePayload,\n  CrupdateLinkeablePayload,\n} from '@app/dashboard/links/utils/build-linkeable-payload';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\nexport interface CrupdateBiolinkPayload\n  extends Omit<CrupdateBiolinkFormValues, 'utm' | 'groups' | 'pixels' | 'tags'>,\n    CrupdateLinkeablePayload {}\n\ninterface Response extends BackendResponse {}\n\nexport function useUpdateBiolink(\n  form: UseFormReturn<CrupdateBiolinkFormValues>,\n  biolinkId: number,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: CrupdateBiolinkFormValues) =>\n      updateBiolink(biolinkId, payload),\n    onSuccess: () => {\n      toast.positive(trans(message('Biolink updated')));\n      queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('biolink'),\n      });\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction updateBiolink(\n  biolinkId: number,\n  payload: CrupdateBiolinkFormValues,\n): Promise<Response> {\n  return apiClient\n    .put(\n      `biolink/${biolinkId}`,\n      buildLinkeablePayload<CrupdateBiolinkPayload>(payload),\n    )\n    .then(r => r.data);\n}\n","import {\n  HidableLinkSettingsField,\n  LinkSettingsForm,\n} from '@app/dashboard/links/forms/link-settings-form';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {useForm} from 'react-hook-form';\nimport {CrupdateBiolinkFormValues} from '@app/dashboard/biolink/biolinks-datatable-page/crupdate/crupdate-biolink-form-values';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {buildLinkeableDefaultFormValues} from '@app/dashboard/links/utils/build-linkeable-default-form-values';\nimport {useUpdateBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {useEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {AliasField} from '@app/dashboard/links/forms/alias-field';\n\nconst hiddenLinkSettingsFields: HidableLinkSettingsField[] = [\n  'type',\n  'groups',\n  'title',\n];\n\nexport function BiolinkSettingsForm() {\n  const {biolink} = useEditorBiolink();\n\n  if (!biolink) {\n    return (\n      <div className=\"py-24\">\n        <FullPageLoader />\n      </div>\n    );\n  }\n\n  return <SettingsForm biolink={biolink} />;\n}\n\ninterface SettingsFormProps {\n  biolink: Biolink;\n}\nfunction SettingsForm({biolink}: SettingsFormProps) {\n  const form = useForm<CrupdateBiolinkFormValues>({\n    defaultValues: buildLinkeableDefaultFormValues(biolink),\n  });\n  const updateSettings = useUpdateBiolink(form, biolink.id);\n\n  return (\n    <Form\n      form={form}\n      onBeforeSubmit={() => {\n        // hook form won't clear errors for fields that are not bound to input\n        form.clearErrors('hash');\n      }}\n      onSubmit={values => {\n        updateSettings.mutate(values);\n      }}\n    >\n      <div className=\"mb-24\">\n        <Button\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          disabled={updateSettings.isPending || !form.formState.isDirty}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </div>\n      <div className=\"mb-24\">\n        <FormTextField\n          name=\"name\"\n          label={<Trans message=\"Name\" />}\n          minLength={3}\n          className=\"mb-8\"\n          autoFocus\n        />\n        <AliasField form={form} name=\"hash\" />\n      </div>\n      <LinkSettingsForm\n        hiddenFields={hiddenLinkSettingsFields}\n        linkName={<Trans message=\"biolink\" />}\n      />\n    </Form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {setEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\ninterface Response extends BackendResponse {\n  biolink: Biolink;\n}\n\ninterface Payload {\n  widgetId?: number;\n  type: WidgetType;\n  position?: number;\n  config: BiolinkWidget['config'] | null;\n}\n\nexport function useCrupdateBiolinkWidget(\n  biolinkId: number,\n  form: UseFormReturn<BiolinkWidget['config']>,\n) {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: Payload) => createWidget(biolinkId, payload),\n    onSuccess: (response, payload) => {\n      toast.positive(\n        trans(\n          !payload.widgetId\n            ? message('Widget updated')\n            : message('Widget added'),\n        ),\n      );\n      setEditorBiolink(response.biolink);\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction createWidget(\n  biolinkId: number,\n  {widgetId, ...payload}: Payload,\n): Promise<Response> {\n  const request = widgetId\n    ? apiClient.put(`biolink/${biolinkId}/widget/${widgetId}`, payload)\n    : apiClient.post(`biolink/${biolinkId}/widget`, payload);\n  return request.then(r => r.data);\n}\n","import {useForm, UseFormReturn} from 'react-hook-form';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Form} from '@common/ui/forms/form';\nimport {Trans} from '@common/i18n/trans';\nimport {useCrupdateBiolinkWidget} from '@app/dashboard/biolink/biolink-editor/requests/use-crupdate-biolink-widget';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {ReactNode, useMemo} from 'react';\nimport {\n  WidgetList,\n  WidgetType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\ninterface CrupdateWidgetDialogProps {\n  biolink: Biolink;\n  type: WidgetType;\n  widget?: BiolinkWidget;\n  children?: ReactNode;\n  defaultValues?: BiolinkWidget['config'];\n  // allow children to transform or validate values before submitting\n  onSubmit?: (\n    values: BiolinkWidget['config'],\n    form: UseFormReturn<BiolinkWidget['config']>,\n  ) => Promise<BiolinkWidget['config'] | undefined> | void;\n}\nexport function CrupdateWidgetDialog({\n  biolink,\n  widget,\n  type,\n  defaultValues,\n  children,\n  onSubmit,\n}: CrupdateWidgetDialogProps) {\n  const widgetListItem = WidgetList[type];\n\n  // make sure we are not using empty array or string for defaultValues, it will cause errors\n  const cleanedValues = useMemo(() => {\n    const values = widget?.config || defaultValues;\n    const isEmpty = (Array.isArray(values) && values.length === 0) || !values;\n    return isEmpty ? undefined : values;\n  }, [widget?.config, defaultValues]);\n\n  const form = useForm<BiolinkWidget['config']>({\n    defaultValues: cleanedValues,\n  });\n  const {formId, close} = useDialogContext();\n  const addWidget = useCrupdateBiolinkWidget(biolink.id, form);\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans {...widgetListItem.name} />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={async values => {\n            const transformedValues = onSubmit\n              ? await onSubmit(values, form)\n              : values;\n            // \"null\" is needed to clear selected value for widget (socials for example)\n            if (transformedValues === undefined) {\n              return;\n            }\n            addWidget.mutate(\n              {\n                widgetId: widget?.id,\n                config: transformedValues,\n                type,\n                // put socials widget at the end (when creating a new widget), everything else at the start\n                position:\n                  !widget && type === WidgetType.Socials\n                    ? biolink.content.length + 1\n                    : undefined,\n              },\n              {onSuccess: () => close()},\n            );\n          }}\n        >\n          {children}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          variant=\"text\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={addWidget.isPending || !form.formState.isDirty}\n        >\n          {widget ? <Trans message=\"Update\" /> : <Trans message=\"Add\" />}\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {WidgetDialogProps} from '@app/dashboard/biolink/biolink-editor/content/widgets/types/widget-dialog-props';\n\nexport interface ImageWidget extends BiolinkWidget {\n  type: WidgetType.Image;\n  config: {\n    url: string;\n    destinationUrl?: string;\n    type: 'default' | 'avatar';\n  };\n}\n\nexport function ImageWidgetDialog({\n  biolink,\n  widget,\n}: WidgetDialogProps<ImageWidget>) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Image}\n      widget={widget}\n    >\n      <FileUploadProvider>\n        <FormImageSelector name=\"url\" diskPrefix=\"widgets\" required />\n      </FileUploadProvider>\n      <FormSelect\n        className=\"my-24\"\n        name=\"type\"\n        label={<Trans message=\"Style\" />}\n        selectionMode=\"single\"\n      >\n        <Item value=\"default\">\n          <Trans message=\"Default\" />\n        </Item>\n        <Item value=\"avatar\">\n          <Trans message=\"Avatar\" />\n        </Item>\n      </FormSelect>\n      <FormTextField\n        placeholder={trans(message('Optional'))}\n        name=\"destinationUrl\"\n        type=\"url\"\n        label={<Trans message=\"Destination url\" />}\n        description={\n          <Trans message=\"Redirect user to this url when clicking the image.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","export default \"__VITE_ASSET__4ee84a82__\"","export default \"__VITE_ASSET__6f43011e__\"","export default \"__VITE_ASSET__c2cfbca9__\"","export default \"__VITE_ASSET__9e836dc6__\"","export default \"__VITE_ASSET__e9c6ece7__\"","export default \"__VITE_ASSET__5ee3b190__\"","export default \"__VITE_ASSET__f117f6fb__\"","export default \"__VITE_ASSET__36c11155__\"","export default \"__VITE_ASSET__113bafd9__\"","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport getVideoId from 'get-video-id';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface YoutubeWidget extends BiolinkWidget {\n  type: WidgetType.Youtube;\n  config: {\n    url: string;\n  };\n}\n\ninterface YoutubeWidgetDialogProps {\n  biolink: Biolink;\n  widget?: YoutubeWidget;\n}\nexport function YoutubeWidgetDialog({\n  biolink,\n  widget,\n}: YoutubeWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Youtube}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const youtubeId = getVideoId(values.url).id;\n        if (!youtubeId) {\n          form.setError('url', {\n            message: trans(message('Invalid youtube url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.youtube.com/watch?v=YE7VzlLtp-4\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Youtube video url\" />}\n        description={\n          <Trans message=\"Embed this youtube video within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\nexport interface TextWidget extends BiolinkWidget {\n  type: WidgetType.Text;\n  config: {\n    title: string;\n    description?: string;\n  };\n}\n\ninterface TextWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TextWidget;\n}\nexport function TextWidgetDialog({biolink, widget}: TextWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Text}\n      widget={widget}\n    >\n      <FormTextField\n        className=\"mb-24\"\n        required\n        autoFocus\n        name=\"title\"\n        label={<Trans message=\"Title\" />}\n      />\n      <FormTextField\n        name=\"description\"\n        inputElementType=\"textarea\"\n        rows={2}\n        label={<Trans message=\"Description\" />}\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {\n  SocialsList,\n  SocialsType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-list';\nimport {removeEmptyValuesFromObject} from '@common/utils/objects/remove-empty-values-from-object';\n\nexport interface SocialsWidget extends BiolinkWidget {\n  type: WidgetType.Text;\n  config: Record<SocialsType, string>;\n}\n\ninterface TextWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SocialsWidget;\n}\nexport function SocialsWidgetDialog({biolink, widget}: TextWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Socials}\n      widget={widget}\n      onSubmit={values => {\n        // remove key from object, if user empties social's input\n        return Promise.resolve(removeEmptyValuesFromObject(values));\n      }}\n    >\n      {Object.entries(SocialsList).map(([type, social], index) => {\n        const Icon = social.icon;\n        return (\n          <FormTextField\n            autoFocus={index === 0}\n            key={type}\n            className=\"mb-24\"\n            name={type}\n            placeholder={social.placeholder}\n            label={<Trans {...social.name} />}\n            pattern={social.pattern}\n            type={social.inputType}\n            autoComplete=\"off\"\n            startAdornment={Icon && <Icon />}\n          />\n        );\n      })}\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\n\nexport interface TwitchWidget extends BiolinkWidget {\n  type: WidgetType.Image;\n  config: {\n    url: string;\n  };\n}\n\ninterface YoutubeWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TwitchWidget;\n}\nexport function TwitchWidgetDialog({\n  biolink,\n  widget,\n}: YoutubeWidgetDialogProps) {\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Twitch}\n      widget={widget}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.twitch.tv/kasparovchess\"\n        name=\"url\"\n        type=\"url\"\n        pattern=\"https://(www.)?twitch.tv/.*\"\n        label={<Trans message=\"Twitch channel or clip url\" />}\n        description={\n          <Trans message=\"Embed this twitch channel or clip within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface SoundcloudWidget extends BiolinkWidget {\n  type: WidgetType.Soundcloud;\n  config: {\n    url: string;\n    embedUrl: string;\n  };\n}\n\ninterface SoundcloudWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SoundcloudWidget;\n}\nexport function SoundcloudWidgetDialog({\n  biolink,\n  widget,\n}: SoundcloudWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Soundcloud}\n      widget={widget}\n      onSubmit={async (values, form) => {\n        const encodedUrl = encodeURIComponent(values.url);\n        const response = await fetch(\n          `https://soundcloud.com/oembed?format=json&url=${encodedUrl}`\n        ).then(res => res.json());\n        const embedCode = response.html;\n\n        const div = document.createElement('div');\n        div.innerHTML = embedCode;\n        const embedUrl = div.querySelector('iframe')?.src;\n\n        if (embedUrl) {\n          return {\n            ...values,\n            embedUrl,\n          };\n        }\n\n        form.setError('url', {\n          message: trans(message('Invalid soundcloud url')),\n        });\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://soundcloud.com/artist/track\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Soundcloud track url\" />}\n        description={\n          <Trans message=\"Embed this soundcloud track within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport getVideoId from 'get-video-id';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface VimeoWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n  };\n}\n\ninterface VimeoWidgetDialogProps {\n  biolink: Biolink;\n  widget?: VimeoWidget;\n}\nexport function VimeoWidgetDialog({biolink, widget}: VimeoWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Vimeo}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const vimeoId = getVideoId(values.url).id;\n        if (!vimeoId) {\n          form.setError('url', {\n            message: trans(message('Invalid vimeo url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://vimeo.com/1084537\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Vimeo video url\" />}\n        description={<Trans message=\"Embed this vimeo video within biolink.\" />}\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {parse} from '@app/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-uri';\n\nexport interface SpotifyWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n    type?: string;\n  };\n}\n\ninterface SpotifyWidgetDialogProps {\n  biolink: Biolink;\n  widget?: SpotifyWidget;\n}\nexport function SpotifyWidgetDialog({\n  biolink,\n  widget,\n}: SpotifyWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Spotify}\n      widget={widget}\n      onSubmit={(values, form) => {\n        const spotifyInfo = parse(values.url);\n        if (!('id' in spotifyInfo)) {\n          form.setError('url', {\n            message: trans(message('Invalid spotify url')),\n          });\n        } else {\n          return Promise.resolve({\n            ...values,\n            type: spotifyInfo.type,\n          });\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://open.spotify.com/track/2sqfLwGKXDw1nGjFhH3GGX?si=f329040f45804ec5\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Spotify share url\" />}\n        description={\n          <Trans message=\"Any share url from spotify can be used, including artist, album, track, playlist etc.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {CrupdateWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/crupdate-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\nexport interface TiktokWidget extends BiolinkWidget {\n  type: WidgetType.Vimeo;\n  config: {\n    url: string;\n  };\n}\n\ninterface TiktokWidgetDialogProps {\n  biolink: Biolink;\n  widget?: TiktokWidget;\n}\nexport function TiktokWidgetDialog({biolink, widget}: TiktokWidgetDialogProps) {\n  const {trans} = useTrans();\n  return (\n    <CrupdateWidgetDialog\n      biolink={biolink}\n      type={WidgetType.Tiktok}\n      widget={widget}\n      onSubmit={(values, form) => {\n        if (!values.url.includes('tiktok.com/')) {\n          form.setError('url', {\n            message: trans(message('Invalid tiktok url')),\n          });\n        } else {\n          return Promise.resolve(values);\n        }\n      }}\n    >\n      <FormTextField\n        required\n        autoFocus\n        placeholder=\"https://www.tiktok.com/@bts_official_bighit/video/6964945720885464322\"\n        name=\"url\"\n        type=\"url\"\n        label={<Trans message=\"Tiktok url\" />}\n        description={\n          <Trans message=\"Embed this tiktok video within biolink.\" />\n        }\n      />\n    </CrupdateWidgetDialog>\n  );\n}\n","import {ImageWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/image-widget/image-widget-dialog';\nimport {JSXElementConstructor} from 'react';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\nimport imageThumbnail from './widget-selector/widget-images/image.png';\nimport textImage from './widget-selector/widget-images/text.png';\nimport socialsImage from './widget-selector/widget-images/socials.png';\nimport youtubeImage from './widget-selector/widget-images/youtube.png';\nimport soundcloudImage from './widget-selector/widget-images/soundcloud.png';\nimport vimeoImage from './widget-selector/widget-images/vimeo.jpeg';\nimport spotifyImage from './widget-selector/widget-images/spotify.png';\nimport twitchImage from './widget-selector/widget-images/twitch.svg';\nimport tiktokImage from './widget-selector/widget-images/tiktok.png';\nimport {WidgetDialogProps} from '@app/dashboard/biolink/biolink-editor/content/widgets/types/widget-dialog-props';\nimport {YoutubeWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/youtube-widget/youtube-widget-dialog';\nimport {TextWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/text-widget/text-widget-dialog';\nimport {SocialsWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/socials-widget/socials-widget-dialog';\nimport {TwitchWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/twitch-widget/twitch-widget-dialog';\nimport {SoundcloudWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/soundcloud-widget/soundcloud-widget-dialog';\nimport {VimeoWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/vimeo-widget/vimeo-widget-dialog';\nimport {SpotifyWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/spotify-widget/spotify-widget-dialog';\nimport {TiktokWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/tiktok-widget/tiktok-widget-dialog';\n\nexport interface WidgetListItem {\n  name: MessageDescriptor;\n  description: MessageDescriptor;\n  image?: string;\n  dialog: JSXElementConstructor<WidgetDialogProps<any>>;\n}\n\nexport enum WidgetType {\n  Image = 'image',\n  Text = 'text',\n  Socials = 'socials',\n  Youtube = 'youtube',\n  Soundcloud = 'soundcloud',\n  Vimeo = 'video',\n  Spotify = 'spotify',\n  Twitch = 'twitch',\n  Tiktok = 'tiktok',\n}\n\nexport const WidgetList: Record<WidgetType, WidgetListItem> = {\n  [WidgetType.Image]: {\n    name: message('Image'),\n    image: imageThumbnail,\n    description: message(\n      'Upload an image and optionally add a link it will redirect to when clicked.'\n    ),\n    dialog: ImageWidgetDialog,\n  },\n  [WidgetType.Text]: {\n    name: message('Text'),\n    image: textImage,\n    description: message(\n      'Add title and optional description. Can be used as a header for the whole biolink or a group of multiple widgets.'\n    ),\n    dialog: TextWidgetDialog,\n  },\n  [WidgetType.Socials]: {\n    name: message('Social Links'),\n    image: socialsImage,\n    description: message(\n      'Add your socials links to display them as icon buttons.'\n    ),\n    dialog: SocialsWidgetDialog,\n  },\n  [WidgetType.Youtube]: {\n    name: message('Youtube Video'),\n    image: youtubeImage,\n    description: message(\n      'Paste a YouTube video URL to show it as a video embed in your profile.'\n    ),\n    dialog: YoutubeWidgetDialog,\n  },\n  [WidgetType.Soundcloud]: {\n    name: message('Soundcloud Audio'),\n    image: soundcloudImage,\n    description: message(\n      'Paste a SoundCloud URL to show it as a playable song in your profile.'\n    ),\n    dialog: SoundcloudWidgetDialog,\n  },\n  [WidgetType.Vimeo]: {\n    name: message('Vimeo Video'),\n    image: vimeoImage,\n    description: message(\n      'Paste a vimeo URL to show it as a video embed in your profile.'\n    ),\n    dialog: VimeoWidgetDialog,\n  },\n  [WidgetType.Spotify]: {\n    name: message('Spotify Embed'),\n    image: spotifyImage,\n    description: message(\n      'Paste a spotify song, album, artist, playlist, podcast or episode url to show it as an embed in your profile.'\n    ),\n    dialog: SpotifyWidgetDialog,\n  },\n  [WidgetType.Twitch]: {\n    name: message('Twitch Embed'),\n    image: twitchImage,\n    description: message(\n      'Paste twitch profile or clip url to show it as an embed in your profile.'\n    ),\n    dialog: TwitchWidgetDialog,\n  },\n  [WidgetType.Tiktok]: {\n    name: message('TikTok Embed'),\n    image: tiktokImage,\n    description: message(\n      'Paste TikTok video url to show it as an embed in your profile.'\n    ),\n    dialog: TiktokWidgetDialog,\n  },\n};\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {WidgetList} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\n\nexport function SelectWidgetDialog() {\n  const {close} = useDialogContext();\n  return (\n    <Dialog size=\"xl\">\n      <DialogHeader titleTextSize=\"text-md\" padding=\"px-24 pt-14 pb-4\">\n        <Trans message=\"Add widget\" />\n      </DialogHeader>\n      <DialogBody padding=\"p-24\">\n        <div className=\"grid gap-14 grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\n          {Object.entries(WidgetList).map(([widgetType, widget]) => (\n            <div\n              key={widgetType}\n              className=\"bg-paper border rounded p-14 shadow cursor-pointer hover:bg-primary/hover\"\n              role=\"button\"\n              tabIndex={0}\n              onClick={() => {\n                close(widgetType);\n              }}\n            >\n              <img\n                src={widget.image}\n                alt=\"\"\n                className=\"block w-54 h-54 mb-20 mr-auto\"\n              />\n              <div className=\"text-primary text-lg font-semibold whitespace-nowrap overflow-hidden overflow-ellipsis\">\n                <Trans {...widget.name} />\n              </div>\n              <div className=\"text-muted\">\n                <Trans {...widget.description} />\n              </div>\n            </div>\n          ))}\n        </div>\n      </DialogBody>\n    </Dialog>\n  );\n}\n","import {\n  WidgetList,\n  WidgetType,\n} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\n\ninterface WidgetDialogContainerProps {\n  biolink: Biolink;\n  activeWidget: WidgetType | null;\n  onOpenChange: (isOpen: boolean) => void;\n}\nexport function NewWidgetDialogContainer({\n  activeWidget,\n  biolink,\n  onOpenChange,\n}: WidgetDialogContainerProps) {\n  const Dialog = activeWidget ? WidgetList[activeWidget].dialog : null;\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      isOpen={activeWidget != null}\n      onOpenChange={onOpenChange}\n    >\n      {Dialog && <Dialog biolink={biolink} />}\n    </DialogTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowUpwardIcon = createSvgIcon(\n  <path d=\"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\" />\n, 'ArrowUpwardOutlined');\n","import {Biolink, BiolinkWidget} from '@app/dashboard/biolink/biolink';\nimport {WidgetList} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {Trans} from '@common/i18n/trans';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {useUpdateBiolinkContentItem} from '@app/dashboard/biolink/biolink-editor/requests/use-update-biolink-content-item';\nimport {Button} from '@common/ui/buttons/button';\nimport {ArrowUpwardIcon} from '@common/icons/material/ArrowUpward';\nimport {useSortBiolinkContent} from '@app/dashboard/biolink/biolink-editor/requests/use-sort-biolink-content';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ArrowDownwardIcon} from '@common/icons/material/ArrowDownward';\nimport {WidgetRenderers} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-renderers';\n\ninterface WidgetContentItemProps {\n  item: BiolinkWidget;\n  biolink: Biolink;\n}\nexport function WidgetContentItem({\n  item: widget,\n  biolink,\n}: WidgetContentItemProps) {\n  const config = WidgetList[widget.type];\n  const WidgetRenderer = WidgetRenderers[widget.type];\n  const WidgetDialog = config.dialog;\n\n  return (\n    <BiolinkContentItemLayout\n      biolink={biolink}\n      item={widget}\n      title={<Trans {...config.name} />}\n      updateDialog={<WidgetDialog widget={widget} biolink={biolink} />}\n      actionRow={<ActionRow widget={widget} />}\n    >\n      <WidgetRenderer widget={widget} variant=\"editor\" />\n    </BiolinkContentItemLayout>\n  );\n}\n\ninterface ActionRowProps {\n  widget: BiolinkWidget;\n}\nfunction ActionRow({widget}: ActionRowProps) {\n  const updateItem = useUpdateBiolinkContentItem();\n  const sortContent = useSortBiolinkContent();\n\n  const handlePinToTop = () => {\n    const biolink = biolinkEditorState().biolink;\n    if (!biolink) return;\n\n    const pinnedCount = biolink.content.filter(x => x.pinned === 'top').length;\n\n    if (!widget.pinned) {\n      const oldIndex = biolink.content.findIndex(\n        x => x.model_type === widget.model_type && x.id === widget.id,\n      );\n      sortContent.mutate({\n        oldIndex,\n        // pinned widget after any other widgets that are already pinned to top\n        newIndex: pinnedCount,\n        widgetToPin: widget.id,\n      });\n    } else {\n      updateItem.mutate({item: widget, values: {pinned: null}});\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-24 justify-between text-muted h-42\">\n      <Switch\n        checked={widget.active}\n        disabled={updateItem.isPending}\n        onChange={() => {\n          updateItem.mutate({\n            item: widget,\n            values: {\n              active: !widget.active,\n            },\n          });\n        }}\n      />\n      <Button\n        variant=\"outline\"\n        size=\"2xs\"\n        radius=\"rounded-full\"\n        color={widget.pinned === 'top' ? 'primary' : undefined}\n        startIcon={\n          widget.pinned === 'top' ? <ArrowDownwardIcon /> : <ArrowUpwardIcon />\n        }\n        disabled={sortContent.isPending}\n        onClick={handlePinToTop || updateItem.isPending}\n      >\n        {widget.pinned === 'top' ? (\n          <Trans message=\"Unpin from top\" />\n        ) : (\n          <Trans message=\"Pin to top\" />\n        )}\n      </Button>\n    </div>\n  );\n}\n","import {ReactNode} from 'react';\nimport {BiolinkLayout} from '@app/short-links/renderers/biolink-renderer/biolink-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {useBiolinkEditorStore} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\nimport {useEditorBiolink} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\n\nexport function LivePreview() {\n  const {biolink} = useEditorBiolink();\n  const appearance = useBiolinkEditorStore(s => s.appearance);\n  const isTablet = useIsTabletMediaQuery();\n\n  if (isTablet) {\n    return null;\n  }\n\n  return (\n    <div className=\"sticky top-24 h-max flex-shrink-0\">\n      <Chip\n        size=\"sm\"\n        color=\"positive\"\n        radius=\"rounded\"\n        className=\"m-auto mb-24 w-max\"\n      >\n        <Trans message=\"Live preview\" />\n      </Chip>\n      <PhoneSkeleton>\n        {biolink ? (\n          <BiolinkLayout\n            biolink={biolink}\n            appearance={appearance}\n            height=\"h-full\"\n          />\n        ) : null}\n      </PhoneSkeleton>\n      <div className=\"mt-14 text-center text-sm text-muted\">\n        <Trans message=\"Scheduled and disabled content is not shown\" />\n      </div>\n    </div>\n  );\n}\n\ninterface PhoneSkeletonProps {\n  children: ReactNode;\n}\nfunction PhoneSkeleton({children}: PhoneSkeletonProps) {\n  return (\n    <div className=\"h-[724px] w-350 overflow-hidden rounded-[64px] border border-[12px] border-[#444546] shadow-lg\">\n      <div className=\"compact-scrollbar h-full overflow-y-auto\">{children}</div>\n    </div>\n  );\n}\n","export const appearanceHeaderClassnames = {\n  h2: 'text-xl font-semibold mb-20',\n  h3: 'my-12 font-semibold',\n};\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatColorFillIcon = createSvgIcon(\n  <path d=\"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z\" />\n, 'FormatColorFillOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const GradientIcon = createSvgIcon(\n  <path d=\"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z\" />\n, 'GradientOutlined');\n","import clsx from 'clsx';\nimport {ComponentProps, forwardRef, ReactNode} from 'react';\n\ninterface BackgroundSelectorButtonProps extends ComponentProps<'button'> {\n  isActive?: boolean;\n  children?: ReactNode;\n  label: ReactNode;\n}\nexport const BackgroundSelectorButton = forwardRef<\n  HTMLButtonElement,\n  BackgroundSelectorButtonProps\n>(({isActive, children, className, style, label, ...buttonProps}, ref) => {\n  return (\n    <button type=\"button\" {...buttonProps} ref={ref}>\n      <span\n        className={clsx(\n          'flex aspect-square items-center justify-center overflow-hidden rounded-panel border border-[#c3cbdc] outline-none focus-visible:ring',\n          isActive && 'ring-2 ring-primary ring-offset-2',\n          className,\n        )}\n        style={style}\n      >\n        {children}\n      </span>\n      <span className=\"mt-10 block overflow-hidden overflow-ellipsis text-xs\">\n        {label}\n      </span>\n    </button>\n  );\n});\n","import {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {FormatColorFillIcon} from '@common/icons/material/FormatColorFill';\nimport {\n  BaseColorBg,\n  ColorBackgrounds,\n} from '@common/background-selector/color-backgrounds';\nimport {BackgroundSelectorButton} from '@common/background-selector/background-selector-button';\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nexport function ColorBackgroundTab({\n  value,\n  onChange,\n  className,\n  isInsideDialog,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div className={className}>\n      <CustomColorButton\n        value={value}\n        onChange={onChange}\n        isInsideDialog={isInsideDialog}\n      />\n      {ColorBackgrounds.map(background => (\n        <BackgroundSelectorButton\n          key={background.id}\n          label={<Trans {...background.label} />}\n          isActive={value?.id === background.id}\n          style={{backgroundColor: background.backgroundColor}}\n          onClick={() => {\n            onChange?.({\n              ...BaseColorBg,\n              ...background,\n            });\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction CustomColorButton({\n  value,\n  onChange,\n  isInsideDialog,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  const isCustomColor = value?.id === BaseColorBg.id;\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      alwaysReturnCurrentValueOnClose={isInsideDialog}\n      value={value?.backgroundColor}\n      onValueChange={newColor => {\n        // set color on color picker interaction\n        onChange?.({\n          ...BaseColorBg,\n          backgroundColor: newColor,\n        });\n      }}\n      onClose={(newValue: string) => {\n        onChange?.({...BaseColorBg, backgroundColor: newValue});\n      }}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseColorBg.label} />}\n        className=\"border-2 border-dashed\"\n        style={{\n          backgroundColor: isCustomColor ? value?.backgroundColor : undefined,\n        }}\n      >\n        <span className=\"inline-block rounded bg-black/20 p-10 text-white\">\n          <FormatColorFillIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <ColorPickerDialog hideFooter={isInsideDialog} />\n    </DialogTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowForwardIcon = createSvgIcon(\n  <path d=\"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z\" />\n, 'ArrowForwardOutlined');\n","import {message} from '@common/i18n/message';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nexport const BaseGradientBg: BackgroundSelectorConfig = {\n  type: 'gradient',\n  id: 'g-custom',\n  label: message('Custom gradient'),\n};\n\nexport const GradientBackgrounds: BackgroundSelectorConfig[] = [\n  {\n    ...BaseGradientBg,\n    id: 'g1',\n    backgroundImage: 'linear-gradient(45deg, #ff9a9e, #fad0c4)',\n    label: message('Worm flame'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g2',\n    backgroundImage: 'linear-gradient(0deg, #a18cd1, #fbc2eb)',\n    label: message('Night fade'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g3',\n    backgroundImage: 'linear-gradient(120deg, #a1c4fd, #c2e9fb)',\n    label: message('Winter nova'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g4',\n    backgroundImage: 'linear-gradient(0deg, #cfd9df, #e2ebf0)',\n    label: message('Heavy rain'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g5',\n    backgroundImage: 'linear-gradient(120deg, #fdfbfb, #ebedee)',\n    label: message('Cloudy knoxville'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g6',\n    backgroundImage: 'linear-gradient(0deg, #a8edea, #fed6e3)',\n    label: message('Rare wind'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g7',\n    backgroundImage: 'linear-gradient(135deg, #f5f7fa, #c3cfe2)',\n    label: message('Saint petersburg'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g8',\n    backgroundImage: 'linear-gradient(135deg, #fdfcfb, #e2d1c3)',\n    label: message('Everlasting sky'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g9',\n    backgroundImage: 'linear-gradient(0deg, #c1dfc4, #deecdd)',\n    label: message('Soft grass'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g10',\n    backgroundImage: 'linear-gradient(90deg, #E9E4F0, #D3CCE3)',\n    label: message('Delicate'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g11',\n    backgroundImage: 'linear-gradient(90deg, #fffcdc, #d9a7c7)',\n    label: message('Broken hearts'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g12',\n    backgroundImage: 'linear-gradient(90deg, #56ab2f, #a8e063)',\n    label: message('Lush'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g13',\n    backgroundImage: 'linear-gradient(90deg, #606c88, #3f4c6b)',\n    label: message('Ash'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g14',\n    backgroundImage: 'linear-gradient(90deg, #ece9e6, #ffffff)',\n    label: message('Clouds'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g15',\n    backgroundImage: 'linear-gradient(90deg, #f09819, #edde5d)',\n    label: message('Mango pulp'),\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g16',\n    backgroundImage: 'linear-gradient(90deg, #b79891, #94716b)',\n    label: message('Cooper'),\n    color: 'rgb(255, 255, 255)',\n  },\n  {\n    ...BaseGradientBg,\n    id: 'g17',\n    backgroundImage: 'linear-gradient(60deg, #29323c, #485563)',\n    label: message('Vicious stance'),\n    color: 'rgb(255, 255, 255)',\n  },\n];\n","import {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {GradientIcon} from '@common/icons/material/Gradient';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {useCallback, useState} from 'react';\nimport clsx from 'clsx';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ArrowDownwardIcon} from '@common/icons/material/ArrowDownward';\nimport {ArrowForwardIcon} from '@common/icons/material/ArrowForward';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {ArrowUpwardIcon} from '@common/icons/material/ArrowUpward';\nimport {\n  BaseGradientBg,\n  GradientBackgrounds,\n} from '@common/background-selector/gradient-backgrounds';\nimport {BackgroundSelectorButton} from '@common/background-selector/background-selector-button';\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nexport function GradientBackgroundTab({\n  value,\n  onChange,\n  className,\n  isInsideDialog,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div className={className}>\n      <CustomGradientButton\n        value={value}\n        onChange={onChange}\n        isInsideDialog={isInsideDialog}\n      />\n      {GradientBackgrounds.map(gradient => (\n        <BackgroundSelectorButton\n          key={gradient.backgroundImage}\n          label={gradient.label && <Trans {...gradient.label} />}\n          isActive={value?.id === gradient.id}\n          style={{backgroundImage: gradient.backgroundImage}}\n          onClick={() => {\n            onChange?.({\n              ...BaseGradientBg,\n              ...gradient,\n            });\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction CustomGradientButton({\n  value,\n  onChange,\n  isInsideDialog,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  const isCustomGradient = value?.id === BaseGradientBg.id;\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      value={value}\n      onValueChange={newValue => onChange?.(newValue)}\n      alwaysReturnCurrentValueOnClose={isInsideDialog}\n      onOpenChange={isOpen => {\n        // on dialog open set default gradient as active, if no other gradient is selected\n        if (isOpen && !value) {\n          onChange?.(GradientBackgrounds[0]);\n        }\n      }}\n      onClose={gradient => onChange?.(gradient)}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseGradientBg.label} />}\n        className=\"border-2 border-dashed\"\n        style={{\n          backgroundImage: isCustomGradient\n            ? value?.backgroundImage\n            : undefined,\n        }}\n      >\n        <span className=\"inline-block rounded bg-black/20 p-10 text-white\">\n          <GradientIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <CustomGradientDialog hideFooter={isInsideDialog} />\n    </DialogTrigger>\n  );\n}\n\ninterface CustomGradientState {\n  colorOne: string;\n  colorTwo: string;\n  angle: string;\n}\n\ninterface CustomGradientDialogProps {\n  hideFooter?: boolean;\n}\nfunction CustomGradientDialog({hideFooter}: CustomGradientDialogProps) {\n  const {\n    close,\n    value: dialogValue,\n    setValue,\n  } = useDialogContext<BackgroundSelectorConfig>();\n  const [state, setLocalState] = useState<CustomGradientState>(() => {\n    const parts =\n      dialogValue?.backgroundImage?.match(/\\(([0-9]+deg),.?(.+?),.?(.+?)\\)/) ||\n      [];\n    return {\n      angle: parts[1] || '45deg',\n      colorOne: parts[2] || '#ff9a9e',\n      colorTwo: parts[3] || '#fad0c4',\n    };\n  });\n\n  const buildGradientBackground = (s: CustomGradientState) => {\n    return {\n      ...BaseGradientBg,\n      backgroundImage: `linear-gradient(${s.angle}, ${s.colorOne}, ${s.colorTwo})`,\n    };\n  };\n\n  const setState = useCallback(\n    (newValues: Partial<CustomGradientState>) => {\n      const newState = {\n        ...state,\n        ...newValues,\n      };\n      setLocalState(newState);\n      setValue(buildGradientBackground(newState));\n    },\n    [state, setValue],\n  );\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Custom gradient\" />\n      </DialogHeader>\n      <DialogBody>\n        <div className=\"mb-6\">\n          <Trans message=\"Colors\" />\n        </div>\n        <div className=\"mb-20 flex h-40 items-stretch\">\n          <ColorPickerButton\n            className=\"rounded-input\"\n            value={state.colorOne}\n            onChange={value => setState({colorOne: value})}\n          />\n          <div\n            className=\"flex-auto border-y border-[#c3cbdc]\"\n            style={{\n              backgroundImage: buildGradientBackground(state).backgroundImage,\n            }}\n          />\n          <ColorPickerButton\n            className=\"rounded-r-input\"\n            value={state.colorTwo}\n            onChange={value => setState({colorTwo: value})}\n          />\n        </div>\n        <div className=\"mb-6\">\n          <Trans message=\"Direction\" />\n        </div>\n        <DirectionButtons\n          value={state.angle}\n          onChange={value => setState({angle: value})}\n        />\n      </DialogBody>\n      {!hideFooter && (\n        <DialogFooter dividerTop>\n          <Button onClick={() => close()}>\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => close(buildGradientBackground(state))}\n          >\n            <Trans message=\"Apply\" />\n          </Button>\n        </DialogFooter>\n      )}\n    </Dialog>\n  );\n}\n\ninterface ColorPickerButtonProps {\n  className: string;\n  value: string;\n  onChange: (value: string) => void;\n}\nfunction ColorPickerButton({\n  className,\n  value,\n  onChange,\n}: ColorPickerButtonProps) {\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      value={value}\n      onValueChange={onChange}\n      alwaysReturnCurrentValueOnClose\n    >\n      <Tooltip label={<Trans message=\"Click to change color\" />}>\n        <button\n          type=\"button\"\n          className={clsx(\n            'w-40 flex-shrink-0 border border-[#c3cbdc]',\n            className,\n          )}\n          style={{backgroundColor: value}}\n        />\n      </Tooltip>\n      <ColorPickerDialog hideFooter />\n    </DialogTrigger>\n  );\n}\n\ninterface DirectionButtonsProps {\n  value: string;\n  onChange: (value: string) => void;\n}\nfunction DirectionButtons({value, onChange}: DirectionButtonsProps) {\n  const activeStyle = 'text-primary border-primary';\n  return (\n    <div className=\"flex flex-wrap items-center gap-8 text-muted\">\n      <IconButton\n        variant=\"outline\"\n        className={value === '0deg' ? activeStyle : undefined}\n        onClick={() => onChange('0deg')}\n      >\n        <ArrowUpwardIcon />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '180deg' ? activeStyle : undefined}\n        onClick={() => onChange('180deg')}\n      >\n        <ArrowDownwardIcon />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '90deg' ? activeStyle : undefined}\n        onClick={() => onChange('90deg')}\n      >\n        <ArrowForwardIcon />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '135deg' ? activeStyle : undefined}\n        onClick={() => onChange('135deg')}\n      >\n        <ArrowDownwardIcon className=\"-rotate-45\" />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '225deg' ? activeStyle : undefined}\n        onClick={() => onChange('225deg')}\n      >\n        <ArrowDownwardIcon className=\"rotate-45\" />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '45deg' ? activeStyle : undefined}\n        onClick={() => onChange('45deg')}\n      >\n        <ArrowUpwardIcon className=\"rotate-45\" />\n      </IconButton>\n      <IconButton\n        variant=\"outline\"\n        className={value === '325deg' ? activeStyle : undefined}\n        onClick={() => onChange('325deg')}\n      >\n        <ArrowUpwardIcon className=\"-rotate-45\" />\n      </IconButton>\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const UploadIcon = createSvgIcon(\n  <path d=\"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z\" />\n, 'UploadOutlined');\n","export default \"__VITE_ASSET__8bc67d0f__\"","export default \"__VITE_ASSET__41b0e93f__\"","export default \"__VITE_ASSET__b1b6f181__\"","export default \"__VITE_ASSET__4a88b941__\"","export default \"__VITE_ASSET__f6e1169b__\"","export default \"__VITE_ASSET__3293a920__\"","export default \"__VITE_ASSET__6535cdc4__\"","export default \"__VITE_ASSET__f278b47e__\"","export default \"__VITE_ASSET__bcc1c32b__\"","export default \"__VITE_ASSET__2880686e__\"","export default \"__VITE_ASSET__064759e5__\"","export default \"__VITE_ASSET__75287c80__\"","export default \"__VITE_ASSET__de4884cd__\"","export default \"__VITE_ASSET__f68020ea__\"","export default \"__VITE_ASSET__92c4c0e5__\"","export default \"__VITE_ASSET__dfa556bd__\"","export default \"__VITE_ASSET__1fa4c498__\"","import angledFocus from './svg-bgs/Angled-Focus.svg';\nimport circularFocus from './svg-bgs/Circular-Focus.svg';\nimport farseeingEyeball from './svg-bgs/Farseeing-Eyeball.svg';\nimport canyonFunnel from './svg-bgs/Canyon-Funnel.svg';\nimport looneyLoops from './svg-bgs/Looney-Loops.svg';\nimport hurricaneAperture from './svg-bgs/Hurricane-Aperture.svg';\nimport icyExplosion from './svg-bgs/Icy-Explosion.svg';\nimport protrudingSquares from './svg-bgs/Protruding-Squares.svg';\nimport alternatingTriangles from './svg-bgs/Alternating-Triangles.svg';\nimport monsteraPatch from './svg-bgs/Monstera-Patch.svg';\nimport confettiDoodles from './svg-bgs/Confetti-Doodles.svg';\nimport threadsAhead from './svg-bgs/Threads-Ahead.svg';\nimport launchDay from './svg-bgs/Launch-Day.svg';\nimport sprinkle from './svg-bgs/Sprinkle.svg';\nimport circuitBoard from './svg-bgs/Circuit-Board.svg';\nimport nuclearFocalPoint from './svg-bgs/nuclear-focalpoint.svg';\nimport snow from './svg-bgs/Snow.svg';\nimport {message} from '@common/i18n/message';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nexport const BaseImageBg: BackgroundSelectorConfig = {\n  type: 'image',\n  id: 'i-custom',\n  label: message('Custom image'),\n};\n\nexport const ImageBackgrounds: BackgroundSelectorConfig[] = [\n  {\n    ...BaseImageBg,\n    id: 'img0',\n    backgroundColor: '#ee5522',\n    backgroundImage: `url(${protrudingSquares})`,\n    backgroundRepeat: 'repeat',\n    label: message('Protruding squares'),\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img1',\n    backgroundColor: '#00bbff',\n    backgroundImage: `url(${launchDay})`,\n    label: message('Launch day'),\n    backgroundSize: 'contain',\n    backgroundPosition: 'bottom',\n    backgroundRepeat: 'no-repeat',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img2',\n    backgroundColor: '#fff',\n    backgroundImage: `url(${alternatingTriangles})`,\n    label: message('Alternating triangles'),\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img3',\n    backgroundColor: '#002200',\n    backgroundImage: `url(${monsteraPatch})`,\n    label: message('Monstera patch'),\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img4',\n    backgroundColor: '#aa3333',\n    backgroundImage: `url(${confettiDoodles})`,\n    label: message('Confetti doodles'),\n    color: '#fff',\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'contain',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img5',\n    backgroundColor: '#070014',\n    backgroundImage: `url(${hurricaneAperture})`,\n    label: message('Hurricane aperture'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img6',\n    backgroundColor: '#11ddaa',\n    backgroundImage: `url(${looneyLoops})`,\n    label: message('Looney loops'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img7',\n    backgroundColor: '#ccffff',\n    backgroundImage: `url(${icyExplosion})`,\n    label: message('Icy explosion'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#000',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img8',\n    backgroundColor: '#442233',\n    backgroundImage: `url(${nuclearFocalPoint})`,\n    label: message('Nuclear point'),\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center center',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img9',\n    backgroundColor: '#ffdd55',\n    backgroundImage: `url(${angledFocus})`,\n    label: message('Angled focus'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img10',\n    backgroundColor: '#220044',\n    backgroundImage: `url(${circularFocus})`,\n    label: message('Circular focus'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img11',\n    backgroundColor: '#000000',\n    backgroundImage: `url(${farseeingEyeball})`,\n    label: message('Farseeing eyeball'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img12',\n    backgroundColor: '#ff0000',\n    backgroundImage: `url(${canyonFunnel})`,\n    label: message('Canyon funnel'),\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    color: '#fff',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img13',\n    backgroundColor: '#ffdd99',\n    backgroundImage: `url(${threadsAhead})`,\n    label: message('Threads ahead'),\n    color: '#000',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'auto',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img14',\n    backgroundImage: `url(${sprinkle})`,\n    label: message('Sprinkle'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img15',\n    backgroundImage: `url(${circuitBoard})`,\n    label: message('Circuit board'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n  {\n    ...BaseImageBg,\n    id: 'img16',\n    backgroundImage: `url(${snow})`,\n    label: message('Snow'),\n    backgroundRepeat: 'repeat',\n    backgroundPosition: 'center center',\n  },\n];\n","import {RadioGroup} from '@common/ui/forms/radio-group/radio-group';\nimport {Radio} from '@common/ui/forms/radio-group/radio';\nimport {Trans} from '@common/i18n/trans';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {message} from '@common/i18n/message';\n\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nconst BackgroundPositions: Record<\n  'cover' | 'contain' | 'repeat',\n  {\n    label: MessageDescriptor;\n    bgConfig: Partial<BackgroundSelectorConfig>;\n  }\n> = {\n  cover: {\n    label: message('Stretch to fit'),\n    bgConfig: {\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n    },\n  },\n  contain: {\n    label: message('Fit image'),\n    bgConfig: {\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'contain',\n      backgroundPosition: 'center top',\n    },\n  },\n  repeat: {\n    label: message('Repeat image'),\n    bgConfig: {\n      backgroundRepeat: 'repeat',\n      backgroundSize: undefined,\n      backgroundPosition: 'left top',\n    },\n  },\n};\n\nexport function SimpleBackgroundPositionSelector({\n  value: imageBgValue,\n  onChange,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  const selectedPosition = positionKeyFromValue(imageBgValue);\n  return (\n    <div className=\"mt-20 border-t pt-14\">\n      <RadioGroup size=\"sm\" disabled={!imageBgValue}>\n        {Object.entries(BackgroundPositions).map(([key, position]) => (\n          <Radio\n            key={key}\n            name=\"background-position\"\n            value={key}\n            checked={key === selectedPosition}\n            onChange={e => {\n              if (imageBgValue) {\n                onChange?.({\n                  ...imageBgValue,\n                  ...position.bgConfig,\n                });\n              }\n            }}\n          >\n            <Trans {...position.label} />\n          </Radio>\n        ))}\n      </RadioGroup>\n    </div>\n  );\n}\n\nfunction positionKeyFromValue(\n  value?: BackgroundSelectorConfig,\n): keyof typeof BackgroundPositions {\n  if (value?.backgroundSize === 'cover') {\n    return 'cover';\n  } else if (value?.backgroundSize === 'contain') {\n    return 'contain';\n  } else {\n    return 'repeat';\n  }\n}\n","import React, {forwardRef, Ref} from 'react';\nimport clsx from 'clsx';\nimport {useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {useAutoFocus} from '../../focus/use-auto-focus';\nimport {RadioProps} from '../radio-group/radio';\n\nexport interface SegmentedRadioProps extends RadioProps {\n  labelRef?: Ref<HTMLLabelElement>;\n  isSelected?: boolean;\n}\nexport const SegmentedRadio = forwardRef<HTMLInputElement, SegmentedRadioProps>(\n  (props, ref) => {\n    const {\n      children,\n      autoFocus,\n      size,\n      invalid,\n      isFirst,\n      labelRef,\n      isSelected,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const sizeClassNames = getSizeClassNames(size);\n\n    return (\n      <label\n        ref={labelRef}\n        className={clsx(\n          'relative z-20 inline-flex flex-auto cursor-pointer select-none items-center justify-center gap-8 whitespace-nowrap align-middle font-medium transition-colors hover:text-main',\n          isSelected ? 'text-main' : 'text-muted',\n          !isFirst && '',\n          sizeClassNames,\n          props.disabled && 'pointer-events-none text-disabled',\n          props.invalid && 'text-danger',\n        )}\n      >\n        <input\n          type=\"radio\"\n          className=\"pointer-events-none absolute left-0 top-0 h-full w-full appearance-none rounded focus-visible:outline\"\n          ref={inputRef}\n          {...domProps}\n        />\n        {children && <span>{children}</span>}\n      </label>\n    );\n  },\n);\n\nfunction getSizeClassNames(size?: InputSize): string {\n  switch (size) {\n    case 'xs':\n      return 'px-6 py-3 text-xs';\n    case 'sm':\n      return 'px-10 py-5 text-sm';\n    case 'lg':\n      return 'px-16 py-6 text-lg';\n    default:\n      return 'px-16 py-8 text-sm';\n  }\n}\n","import {RefObject, useEffect, useState} from 'react';\nimport {m} from 'framer-motion';\n\ninterface ActiveIndicatorProps {\n  selectedValue?: string;\n  labelsRef: RefObject<Record<string, HTMLLabelElement>>;\n}\nexport function ActiveIndicator({\n  selectedValue,\n  labelsRef,\n}: ActiveIndicatorProps) {\n  const [style, setStyle] = useState<{\n    width: number;\n    height: number;\n    left: number;\n  } | null>(null);\n\n  useEffect(() => {\n    if (selectedValue != null && labelsRef.current) {\n      const el = labelsRef.current[selectedValue];\n      if (!el) return;\n      setStyle({\n        width: el.offsetWidth,\n        height: el.offsetHeight,\n        left: el.offsetLeft,\n      });\n    }\n  }, [setStyle, selectedValue, labelsRef]);\n\n  if (!style) {\n    return null;\n  }\n\n  return (\n    <m.div\n      animate={style}\n      initial={false}\n      className=\"bg-paper shadow rounded absolute z-10 pointer-events-none\"\n    />\n  );\n}\n","import {\n  Children,\n  cloneElement,\n  forwardRef,\n  isValidElement,\n  useId,\n  useRef,\n} from 'react';\nimport {RadioGroupProps} from '../radio-group/radio-group';\nimport {SegmentedRadioProps} from './segmented-radio';\nimport {ActiveIndicator} from './active-indicator';\nimport {useControlledState} from '@react-stately/utils';\nimport clsx from 'clsx';\n\nexport interface SegmentedRadioGroupProps\n  extends Omit<RadioGroupProps, 'orientation'> {\n  value?: string;\n  onChange?: (value: string) => void;\n  defaultValue?: string;\n  width?: string;\n}\nexport const SegmentedRadioGroup = forwardRef<\n  HTMLFieldSetElement,\n  SegmentedRadioGroupProps\n>((props, ref) => {\n  const {children, size, className} = props;\n\n  const id = useId();\n  const name = props.name || id;\n\n  const labelsRef = useRef<Record<string, HTMLLabelElement>>({});\n  const [selectedValue, setSelectedValue] = useControlledState(\n    props.value,\n    props.defaultValue,\n    props.onChange,\n  );\n\n  return (\n    <fieldset ref={ref} className={clsx(className, props.width ?? 'w-min')}>\n      <div className=\"relative isolate flex rounded bg-chip p-4\">\n        <ActiveIndicator selectedValue={selectedValue} labelsRef={labelsRef} />\n        {Children.map(children, (child, index) => {\n          if (isValidElement<SegmentedRadioProps>(child)) {\n            return cloneElement<SegmentedRadioProps>(child, {\n              isFirst: index === 0,\n              name,\n              size,\n              onChange: e => {\n                setSelectedValue(e.target.value);\n                child.props.onChange?.(e);\n              },\n              labelRef: el => {\n                if (el) {\n                  labelsRef.current[child.props.value] = el;\n                }\n              },\n              isSelected: selectedValue === child.props.value,\n            });\n          }\n        })}\n      </div>\n    </fieldset>\n  );\n});\n","import {message} from '@common/i18n/message';\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {\n  BackgroundSelectorConfig,\n  EditableBackgroundProps,\n} from '@common/background-selector/background-selector-config';\nimport {Trans} from '@common/i18n/trans';\nimport {RadioGroup} from '@common/ui/forms/radio-group/radio-group';\nimport {Radio} from '@common/ui/forms/radio-group/radio';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport clsx from 'clsx';\nimport {SegmentedRadio} from '@common/ui/forms/segmented-radio-group/segmented-radio';\nimport {SegmentedRadioGroup} from '@common/ui/forms/segmented-radio-group/segmented-radio-group';\n\nconst repeat = [\n  {\n    value: 'no-repeat',\n    label: message(\"Don't repeat\"),\n  },\n  {\n    value: 'repeat-x',\n    label: message('Horizontal'),\n  },\n  {\n    value: 'repeat-y',\n    label: message('Vertical'),\n  },\n  {\n    value: 'repeat',\n    label: message('Both'),\n  },\n];\n\nconst size = [\n  {\n    value: 'auto',\n    label: message('Auto'),\n  },\n  {\n    value: 'cover',\n    label: message('Stretch to fit'),\n  },\n  {\n    value: 'contain',\n    label: message('Fit image'),\n  },\n];\n\nconst position = [\n  'left top',\n  'center top',\n  'right top',\n  'left center',\n  'center center',\n  'right center',\n  'left bottom',\n  'center bottom',\n  'right bottom',\n];\n\nexport function AdvancedBackgroundPositionSelector({\n  value,\n  onChange,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div className=\"mt-14 border-t pt-14\">\n      <div className=\"flex gap-60\">\n        <RepeatSelector value={value} onChange={onChange} />\n        <SizeSelector value={value} onChange={onChange} />\n        <PositionSelector value={value} onChange={onChange} />\n      </div>\n      <SegmentedRadioGroup\n        size=\"xs\"\n        className=\"mt-20\"\n        value={value?.backgroundAttachment ?? 'scroll'}\n        onChange={newValue => {\n          onChange?.({\n            ...value!,\n            backgroundAttachment:\n              newValue as EditableBackgroundProps['backgroundAttachment'],\n          });\n        }}\n      >\n        <SegmentedRadio value=\"fixed\">\n          <Trans message=\"Fixed\" />\n        </SegmentedRadio>\n        <SegmentedRadio value=\"scroll\">\n          <Trans message=\"Not fixed\" />\n        </SegmentedRadio>\n      </SegmentedRadioGroup>\n    </div>\n  );\n}\n\nfunction RepeatSelector({\n  value,\n  onChange,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div>\n      <div className=\"mb-10\">\n        <Trans message=\"Repeat\" />\n      </div>\n      <RadioGroup orientation=\"vertical\" size=\"sm\" disabled={!value}>\n        {repeat.map(({value: repeatValue, label}) => (\n          <Radio\n            key={repeatValue}\n            value={repeatValue}\n            checked={value?.backgroundRepeat === repeatValue}\n            onChange={() => {\n              onChange?.({\n                ...value!,\n                backgroundRepeat:\n                  repeatValue as EditableBackgroundProps['backgroundRepeat'],\n              });\n            }}\n          >\n            <Trans {...label} />\n          </Radio>\n        ))}\n      </RadioGroup>\n    </div>\n  );\n}\n\nfunction SizeSelector({\n  value,\n  onChange,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div>\n      <div className=\"mb-10\">\n        <Trans message=\"Size\" />\n      </div>\n      <RadioGroup orientation=\"vertical\" size=\"sm\" disabled={!value}>\n        {size.map(({value: sizeValue, label}) => (\n          <Radio\n            key={sizeValue}\n            value={sizeValue}\n            checked={value?.backgroundSize === sizeValue}\n            onChange={() => {\n              onChange?.({\n                ...value!,\n                backgroundSize:\n                  sizeValue as EditableBackgroundProps['backgroundSize'],\n              });\n            }}\n          >\n            <Trans {...label} />\n          </Radio>\n        ))}\n      </RadioGroup>\n    </div>\n  );\n}\n\nfunction PositionSelector({\n  value,\n  onChange,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div>\n      <div className=\"mb-10\">\n        <Trans message=\"Position\" />\n      </div>\n      <div className=\"grid grid-cols-3 gap-8\">\n        {position.map(position => (\n          <PositionSelectorButton\n            disabled={!value}\n            key={position}\n            value={value}\n            onChange={onChange}\n            position={position}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface PositionSelectorButtonProps {\n  value: BackgroundSelectorConfig | undefined;\n  onChange: (value: BackgroundSelectorConfig) => void;\n  position: string;\n  disabled: boolean;\n}\nfunction PositionSelectorButton({\n  value,\n  onChange,\n  position,\n  disabled,\n}: PositionSelectorButtonProps) {\n  return (\n    <ButtonBase\n      disabled={disabled}\n      onClick={() => {\n        onChange({\n          ...value!,\n          backgroundPosition: position,\n        });\n      }}\n      className={clsx(\n        'h-26 w-26 rounded border',\n        value?.backgroundPosition === position ? 'bg-primary' : 'bg-alt',\n      )}\n    />\n  );\n}\n","import {CSSProperties} from 'react';\nimport {\n  BaseGradientBg,\n  GradientBackgrounds,\n} from '@common/background-selector/gradient-backgrounds';\nimport {\n  BaseImageBg,\n  ImageBackgrounds,\n} from '@common/background-selector/image-backgrounds';\nimport {\n  BackgroundSelectorConfig,\n  EditableBackgroundProps,\n} from '@common/background-selector/background-selector-config';\nimport {\n  BaseColorBg,\n  ColorBackgrounds,\n} from '@common/background-selector/color-backgrounds';\n\nexport function bgConfigFromCssProps(\n  cssProps: CSSProperties | CSSStyleDeclaration,\n): BackgroundSelectorConfig | undefined {\n  if (cssProps.backgroundImage?.includes('-gradient(')) {\n    return gradientConfigFromCssProps(cssProps);\n  } else if (cssProps.backgroundImage?.includes('url(')) {\n    return imageConfigFromCssProps(cssProps);\n  } else if (\n    cssProps.backgroundColor &&\n    cssProps.backgroundColor !== 'rgba(0, 0, 0, 0)'\n  ) {\n    return solidColorConfigFromCssProps(cssProps);\n  }\n}\n\nfunction gradientConfigFromCssProps(\n  cssProps: CSSProperties | CSSStyleDeclaration,\n): BackgroundSelectorConfig {\n  const preset =\n    GradientBackgrounds.find(g =>\n      compareCssStrings(g.backgroundImage, cssProps.backgroundImage),\n    ) ?? BaseGradientBg;\n  return {\n    ...preset,\n    backgroundImage: cssProps.backgroundImage,\n    backgroundColor: cssProps.backgroundColor,\n    color: cssProps.color,\n  };\n}\n\nfunction imageConfigFromCssProps(\n  cssProps: CSSProperties | CSSStyleDeclaration,\n): BackgroundSelectorConfig {\n  const preset =\n    ImageBackgrounds.find(b =>\n      compareCssStrings(b.backgroundImage, cssProps.backgroundImage),\n    ) ?? BaseImageBg;\n  return {\n    ...preset,\n    backgroundImage: cssProps.backgroundImage,\n    backgroundColor: cssProps.backgroundColor,\n    backgroundAttachment:\n      cssProps.backgroundAttachment as EditableBackgroundProps['backgroundAttachment'],\n    color: cssProps.color,\n  };\n}\n\nfunction solidColorConfigFromCssProps(\n  cssProps: CSSProperties | CSSStyleDeclaration,\n): BackgroundSelectorConfig {\n  const preset =\n    ColorBackgrounds.find(b =>\n      compareCssStrings(b.backgroundColor, cssProps.backgroundColor),\n    ) ?? BaseColorBg;\n  return {\n    ...preset,\n    color: cssProps.color,\n    backgroundColor: cssProps.backgroundColor,\n  };\n}\n\nfunction compareCssStrings(a: string | undefined, b: string | undefined) {\n  if (!a || !b) {\n    return false;\n  }\n  return normalizeCssValue(a) === normalizeCssValue(b);\n}\n\nfunction normalizeCssValue(value: string) {\n  return value.replaceAll(' ', '').replaceAll('\"', '').replaceAll(\"'\", '');\n}\n\nexport function urlFromBackgroundImage(\n  backgroundImage: string | undefined,\n): string | undefined {\n  if (backgroundImage) {\n    const match = backgroundImage.match(/url\\(['\"]?(.*?)['\"]?\\)/);\n    return match?.[1];\n  }\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Trans} from '@common/i18n/trans';\nimport {UploadIcon} from '@common/icons/material/Upload';\nimport {useForm} from 'react-hook-form';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Form} from '@common/ui/forms/form';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {\n  BaseImageBg,\n  ImageBackgrounds,\n} from '@common/background-selector/image-backgrounds';\nimport {BackgroundSelectorButton} from '@common/background-selector/background-selector-button';\nimport {cssPropsFromBgConfig} from '@common/background-selector/css-props-from-bg-config';\nimport {SimpleBackgroundPositionSelector} from '@common/background-selector/image-background-tab/simple-background-position-selector';\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\nimport {AdvancedBackgroundPositionSelector} from '@common/background-selector/image-background-tab/advanced-background-position-selector';\nimport {urlFromBackgroundImage} from '@common/background-selector/bg-config-from-css-props';\n\nexport function ImageBackgroundTab({\n  value,\n  onChange,\n  className,\n  positionSelector,\n  diskPrefix,\n  isInsideDialog,\n}: BgSelectorTabProps<BackgroundSelectorConfig>) {\n  return (\n    <div>\n      <div className={className}>\n        <CustomImageTrigger\n          value={value}\n          onChange={onChange}\n          diskPrefix={diskPrefix}\n          hideFooter={isInsideDialog}\n        />\n        {ImageBackgrounds.map(background => (\n          <BackgroundSelectorButton\n            key={background.id}\n            onClick={() =>\n              onChange?.({\n                ...BaseImageBg,\n                ...background,\n              })\n            }\n            isActive={value?.id === background.id}\n            style={{\n              ...cssPropsFromBgConfig(background),\n              backgroundAttachment: 'initial',\n            }}\n            label={<Trans {...background.label} />}\n          />\n        ))}\n      </div>\n      {positionSelector === 'advanced' ? (\n        <AdvancedBackgroundPositionSelector value={value} onChange={onChange} />\n      ) : (\n        <SimpleBackgroundPositionSelector value={value} onChange={onChange} />\n      )}\n    </div>\n  );\n}\n\ninterface CustomImageTrigger {\n  value?: BackgroundSelectorConfig;\n  onChange?: (value: BackgroundSelectorConfig | null) => void;\n  diskPrefix?: string;\n  hideFooter?: boolean;\n}\nfunction CustomImageTrigger({\n  value,\n  onChange,\n  diskPrefix,\n  hideFooter,\n}: CustomImageTrigger) {\n  // only seed form with custom uploaded image\n  value = value?.id === BaseImageBg.id ? value : undefined;\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      onClose={(imageUrl?: string) => {\n        onChange?.(\n          imageUrl\n            ? {\n                ...BaseImageBg,\n                backgroundImage: `url(${imageUrl})`,\n              }\n            : null,\n        );\n      }}\n    >\n      <BackgroundSelectorButton\n        label={<Trans {...BaseImageBg.label} />}\n        isActive={\n          value?.id === BaseImageBg.id && value?.backgroundImage !== 'none'\n        }\n        className=\"border-2 border-dashed\"\n        style={cssPropsFromBgConfig(value)}\n      >\n        <span className=\"inline-block rounded bg-black/20 p-10 text-white\">\n          <UploadIcon size=\"lg\" />\n        </span>\n      </BackgroundSelectorButton>\n      <CustomImageDialog\n        value={value}\n        diskPrefix={diskPrefix}\n        hideFooter={hideFooter}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface CustomImageDialogProps {\n  value?: BackgroundSelectorConfig;\n  diskPrefix?: string;\n  hideFooter?: boolean;\n}\nexport function CustomImageDialog({\n  value,\n  diskPrefix,\n  hideFooter,\n}: CustomImageDialogProps) {\n  const defaultValue =\n    !value?.backgroundImage || !value.backgroundImage.includes('url(')\n      ? undefined\n      : urlFromBackgroundImage(value.backgroundImage);\n  const form = useForm<{imageUrl: string}>({\n    defaultValues: {imageUrl: defaultValue},\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Upload image\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => close(values.imageUrl)}\n        >\n          <FileUploadProvider>\n            <FormImageSelector\n              autoFocus\n              name=\"imageUrl\"\n              diskPrefix={diskPrefix || 'biolinks'}\n              showRemoveButton\n              onChange={hideFooter ? imageUrl => close(imageUrl) : undefined}\n            />\n          </FileUploadProvider>\n        </Form>\n      </DialogBody>\n      {!hideFooter && (\n        <DialogFooter>\n          <Button onClick={() => close()}>\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button variant=\"flat\" color=\"primary\" type=\"submit\" form={formId}>\n            <Trans message=\"Select\" />\n          </Button>\n        </DialogFooter>\n      )}\n    </Dialog>\n  );\n}\n","import clsx from 'clsx';\nimport {Trans} from '@common/i18n/trans';\nimport {ImageIcon} from '@common/icons/material/Image';\nimport {FormatColorFillIcon} from '@common/icons/material/FormatColorFill';\nimport {GradientIcon} from '@common/icons/material/Gradient';\nimport {ReactElement, ReactNode, useState} from 'react';\nimport {BgSelectorTabProps} from '@common/background-selector/bg-selector-tab-props';\nimport {ColorBackgroundTab} from '@common/background-selector/color-background-tab';\nimport {GradientBackgroundTab} from '@common/background-selector/gradient-background-tab';\nimport {ImageBackgroundTab} from '@common/background-selector/image-background-tab/image-background-tab';\nimport {BackgroundSelectorConfig} from '@common/background-selector/background-selector-config';\n\nconst TabMap: Record<\n  'color' | 'gradient' | 'image',\n  (value: BgSelectorTabProps<any>) => ReactElement\n> = {\n  color: ColorBackgroundTab,\n  gradient: GradientBackgroundTab,\n  image: ImageBackgroundTab,\n};\ntype TabName = keyof typeof TabMap;\n\ninterface BackgroundSelectorProps {\n  className?: string;\n  value: BackgroundSelectorConfig | undefined;\n  onChange: (newValue: BackgroundSelectorConfig) => void;\n  tabColWidth?: string;\n  isInsideDialog?: boolean;\n  positionSelector?: 'simple' | 'advanced';\n  diskPrefix?: string;\n}\nexport function BackgroundSelector({\n  className,\n  value,\n  onChange,\n  tabColWidth,\n  isInsideDialog,\n  positionSelector = 'simple',\n  diskPrefix,\n}: BackgroundSelectorProps) {\n  const [activeTab, setActiveTab] = useState<TabName>(() => {\n    if (value?.type === 'image') return 'image';\n    if (value?.type === 'gradient') return 'gradient';\n    return 'color';\n  });\n\n  const Tab = TabMap[activeTab];\n\n  return (\n    <div className={className}>\n      <TypeSelector activeTab={activeTab} onTabChange={setActiveTab} />\n      <Tab\n        value={value}\n        onChange={onChange}\n        isInsideDialog={isInsideDialog}\n        positionSelector={positionSelector}\n        diskPrefix={diskPrefix}\n        className={clsx(\n          'grid items-start gap-14',\n          tabColWidth || 'grid-cols-[repeat(auto-fill,minmax(90px,1fr))]',\n        )}\n      />\n    </div>\n  );\n}\n\ninterface TypeSelectorProps {\n  activeTab: TabName;\n  onTabChange: (tab: TabName) => void;\n}\nfunction TypeSelector({activeTab, onTabChange}: TypeSelectorProps) {\n  return (\n    <div className=\"mb-20 flex items-center gap-20 border-b pb-20\">\n      <TypeButton\n        isActive={activeTab === 'color'}\n        icon={<FormatColorFillIcon />}\n        title={<Trans message=\"Flat color\" />}\n        onClick={() => onTabChange('color')}\n      />\n      <TypeButton\n        isActive={activeTab === 'gradient'}\n        icon={<GradientIcon />}\n        title={<Trans message=\"Gradient\" />}\n        onClick={() => onTabChange('gradient')}\n      />\n      <TypeButton\n        isActive={activeTab === 'image'}\n        icon={<ImageIcon />}\n        title={<Trans message=\"Image\" />}\n        onClick={() => onTabChange('image')}\n      />\n    </div>\n  );\n}\n\ninterface TypeButtonProps {\n  isActive: boolean;\n  icon: ReactNode;\n  title: ReactNode;\n  onClick?: () => void;\n}\nfunction TypeButton({isActive, icon, title, onClick}: TypeButtonProps) {\n  return (\n    <div role=\"button\" className=\"block\" onClick={onClick}>\n      <div\n        className={clsx(\n          'mx-auto mb-8 flex h-50 w-50 items-center justify-center rounded-panel border text-muted',\n          isActive && 'border-primary ring',\n        )}\n      >\n        {icon}\n      </div>\n      <div className=\"text-center text-sm text-primary\">{title}</div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\nimport {BackgroundSelector} from '@common/background-selector/background-selector';\n\ninterface BackgroundSelectorProps {\n  className?: string;\n}\nexport function BiolinkBackgroundSelector({\n  className,\n}: BackgroundSelectorProps) {\n  const value = useBiolinkEditorStore(s => s.appearance?.bgConfig);\n  return (\n    <div className={className}>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Background\" />\n      </h2>\n      <BackgroundSelector\n        value={value}\n        onChange={newValue =>\n          biolinkEditorState().updateAppearance({bgConfig: newValue})\n        }\n      />\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {BiolinkBtnConfig} from '@app/dashboard/biolink/biolink';\nimport {Button} from '@common/ui/buttons/button';\nimport clsx from 'clsx';\nimport {message} from '@common/i18n/message';\nimport {ButtonVariant} from '@common/ui/buttons/get-shared-button-style';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport React, {useCallback} from 'react';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\n\nconst AvailableVariants: Record<\n  NonNullable<Exclude<ButtonVariant, 'text' | 'raised' | 'link'>>,\n  MessageDescriptor\n> = {\n  flat: message('Fill'),\n  outline: message('Outline'),\n} as const;\n\nconst AvailableRadius: Record<\n  NonNullable<BiolinkBtnConfig['radius']>,\n  MessageDescriptor\n> = {\n  'rounded-none': message('Square'),\n  rounded: message('Rounded'),\n  'rounded-full': message('Pill'),\n} as const;\n\ninterface ButtonStyleSelectorProps {\n  className?: string;\n}\nexport function ButtonStyleSelector({className}: ButtonStyleSelectorProps) {\n  const value = useBiolinkEditorStore(s => s.appearance?.btnConfig);\n\n  const setValue = useCallback(\n    (newValue: Partial<BiolinkBtnConfig>) => {\n      biolinkEditorState().updateAppearance({\n        btnConfig: {\n          ...value,\n          ...newValue,\n        },\n      });\n    },\n    [value],\n  );\n\n  return (\n    <div className={className}>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Buttons\" />\n      </h2>\n      <StyleSelector value={value} onChange={setValue} />\n      <ShadowSelector value={value} onChange={setValue} />\n    </div>\n  );\n}\n\ninterface StyleSelectorProps {\n  value?: BiolinkBtnConfig;\n  onChange: (newValue: BiolinkBtnConfig) => void;\n}\nfunction StyleSelector({value, onChange}: StyleSelectorProps) {\n  const selectedVariant = value?.variant ?? 'flat';\n  const selectedRadius = value?.radius ?? 'rounded';\n\n  return (\n    <div>\n      {Object.entries(AvailableVariants).map(([variant, variantLabel]) => (\n        <div key={variant}>\n          <h3 className={appearanceHeaderClassnames.h3}>\n            <Trans {...variantLabel} />\n          </h3>\n          <div className=\"grid grid-cols-2 gap-24 md:grid-cols-3\">\n            {Object.entries(AvailableRadius).map(([radius, radiusLabel]) => (\n              <div\n                key={radius}\n                className={clsx(\n                  'rounded',\n                  variant === selectedVariant &&\n                    selectedRadius === radius &&\n                    'ring ring-primary-light ring-offset-4',\n                )}\n              >\n                <Button\n                  variant={variant as ButtonVariant}\n                  color=\"primary\"\n                  radius={radius}\n                  className=\"w-full\"\n                  onClick={() => {\n                    onChange({\n                      variant: variant as BiolinkBtnConfig['variant'],\n                      radius: radius as BiolinkBtnConfig['radius'],\n                    });\n                  }}\n                >\n                  <Trans {...radiusLabel} />\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nconst AvailableShadows: Record<string, MessageDescriptor> = {\n  'shadow-none': message('No shadow'),\n  'rgb(0 0 0 / 20%) 0.2rem 0.2rem 0.4rem 0px': message('Light shadow'),\n  'rgb(0 0 0 / 75%) 0.3rem 0.4rem 0px': message('Hard shadow'),\n} as const;\nfunction ShadowSelector({value, onChange}: StyleSelectorProps) {\n  const selectedShadow = value?.shadow ?? 'shadow-none';\n  return (\n    <div>\n      <h3 className=\"my-12 font-semibold\">\n        <Trans message=\"Shadow\" />\n      </h3>\n      <div className=\"flex gap-24\">\n        {Object.entries(AvailableShadows).map(([shadow, shadowLabel]) => (\n          <div\n            key={shadow}\n            style={{boxShadow: shadow}}\n            className=\"h-40 w-70 overflow-hidden rounded-button\"\n          >\n            <ButtonBase\n              display=\"block\"\n              radius=\"rounded-button\"\n              className={clsx(\n                'h-full w-full border',\n                selectedShadow === shadow && 'border-primary',\n              )}\n              onClick={() => {\n                onChange({\n                  shadow: shadow === 'shadow-none' ? undefined : shadow,\n                });\n              }}\n            >\n              <span className=\"sr-only\">\n                <Trans {...shadowLabel} />\n              </span>\n            </ButtonBase>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","export default \"__VITE_ASSET__03cbd387__\"","import {useTrans} from '@common/i18n/use-trans';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {message} from '@common/i18n/message';\nimport {Select} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\nexport interface FontSelectorFilterValue {\n  query: string;\n  category: string;\n}\n\ninterface FiltersHeaderProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorFilters({\n  state: {filters, setFilters},\n}: FiltersHeaderProps) {\n  const {trans} = useTrans();\n  return (\n    <div className=\"mb-24 items-center gap-24 @xs:flex\">\n      <TextField\n        className=\"mb-12 flex-auto @xs:mb-0\"\n        value={filters.query}\n        onChange={e => {\n          setFilters({\n            ...filters,\n            query: e.target.value,\n          });\n        }}\n        startAdornment={<SearchIcon />}\n        placeholder={trans(message('Search fonts'))}\n      />\n      <Select\n        className=\"flex-auto\"\n        selectionMode=\"single\"\n        selectedValue={filters.category}\n        onSelectionChange={value => {\n          setFilters({\n            ...filters,\n            category: value as string,\n          });\n        }}\n      >\n        <Item value=\"\">\n          <Trans message=\"All categories\" />\n        </Item>\n        <Item value=\"serif\">\n          <Trans message=\"Serif\" />\n        </Item>\n        <Item value=\"sans-serif\">\n          <Trans message=\"Sans serif\" />\n        </Item>\n        <Item value=\"display\">\n          <Trans message=\"Display\" />\n        </Item>\n        <Item value=\"handwriting\">\n          <Trans message=\"Handwriting\" />\n        </Item>\n        <Item value=\"monospace\">\n          <Trans message=\"Monospace\" />\n        </Item>\n      </Select>\n    </div>\n  );\n}\n","import {useCollator} from './use-collator';\n\ninterface Filter {\n  /** Returns whether a string starts with a given substring. */\n  startsWith(string: string, substring: string): boolean;\n  /** Returns whether a string ends with a given substring. */\n  endsWith(string: string, substring: string): boolean;\n  /** Returns whether a string contains a given substring. */\n  contains(string: string, substring: string): boolean;\n}\n\nexport function useFilter(options?: Intl.CollatorOptions): Filter {\n  const collator = useCollator({\n    usage: 'search',\n    ...options,\n  });\n\n  return {\n    startsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return (\n        collator.compare(string.slice(0, substring.length), substring) === 0\n      );\n    },\n    endsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return collator.compare(string.slice(-substring.length), substring) === 0;\n    },\n    contains(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n\n      let scan = 0;\n      const sliceLen = substring.length;\n      for (; scan + sliceLen <= string.length; scan++) {\n        const slice = string.slice(scan, scan + sliceLen);\n        if (collator.compare(substring, slice) === 0) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n  };\n}\n","import {FontConfig} from '@common/http/value-lists';\nimport {message} from '@common/i18n/message';\n\nexport const BrowserSafeFonts: FontConfig[] = [\n  {\n    label: message('System'),\n    family:\n      'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"',\n    category: 'sans-serif',\n  },\n  {family: 'Impact, Charcoal, sans-serif', category: 'sans-serif'},\n  {family: 'Arial, Helvetica Neue, Helvetica, sans-serif', category: 'serif'},\n  {family: '\"Comic Sans MS\", cursive, sans-serif', category: 'Handwriting'},\n  {family: 'Century Gothic, sans-serif', category: 'sans-serif'},\n  {family: '\"Courier New\", Courier, monospace', category: 'monospace'},\n  {\n    family: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n    category: 'sans-serif',\n  },\n  {family: '\"Times New Roman\", Times, serif', category: 'serif'},\n  {family: '\"Lucida Console\", Monaco, monospace', category: 'monospace'},\n  {family: '\"Andele Mono\", monospace, sans-serif', category: 'sans-serif'},\n  {family: 'Verdana, Geneva, sans-serif', category: 'sans-serif'},\n  {\n    family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\n    category: 'sans-serif',\n  },\n];\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport {FontSelectorFilterValue} from '@common/ui/font-selector/font-selector-filters';\nimport {FontConfig, useValueLists} from '@common/http/value-lists';\nimport {useFilter} from '@common/i18n/use-filter';\nimport {BrowserSafeFonts} from '@common/ui/font-picker/browser-safe-fonts';\nimport {chunkArray} from '@common/utils/array/chunk-array';\nimport {loadFonts} from '@common/ui/font-picker/load-fonts';\n\nexport interface FontSelectorState extends UseFontSelectorProps {\n  fonts: FontConfig[];\n  filteredFonts: FontConfig[];\n  pages: FontConfig[][];\n  isLoading: boolean;\n  filters: FontSelectorFilterValue;\n  setFilters: (filters: FontSelectorFilterValue) => void;\n  currentPage: number;\n  setCurrentPage: (page: number) => void;\n}\n\nexport interface UseFontSelectorProps {\n  value?: FontConfig;\n  onChange: (value: FontConfig) => void;\n}\nexport function useFontSelectorState({\n  value,\n  onChange,\n}: UseFontSelectorProps): FontSelectorState {\n  const {data, isLoading} = useValueLists(['googleFonts']);\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const [filters, setFilterState] = useState<FontSelectorFilterValue>({\n    query: '',\n    category: value?.category ?? '',\n  });\n  const {contains} = useFilter({\n    sensitivity: 'base',\n  });\n\n  const setFilters = useCallback((filters: FontSelectorFilterValue) => {\n    setFilterState(filters);\n    // reset to first page when searching or changing category\n    setCurrentPage(0);\n  }, []);\n\n  const allFonts = useMemo(() => {\n    return BrowserSafeFonts.concat(data?.googleFonts ?? []);\n  }, [data?.googleFonts]);\n\n  const filteredFonts = useMemo(() => {\n    return allFonts.filter(font => {\n      return (\n        contains(font.family, filters.query) &&\n        (!filters.category ||\n          font.category?.toLowerCase() === filters.category.toLowerCase())\n      );\n    });\n  }, [allFonts, filters, contains]);\n\n  const pages = useMemo(() => {\n    return chunkArray(filteredFonts, 20);\n  }, [filteredFonts]);\n  const fonts = pages[currentPage];\n\n  useEffect(() => {\n    const id = 'font-selector';\n    if (fonts?.length) {\n      loadFonts(fonts, {id});\n    }\n  }, [fonts, currentPage]);\n\n  return {\n    fonts: fonts || [],\n    currentPage,\n    filteredFonts: filteredFonts || [],\n    setCurrentPage,\n    isLoading,\n    filters,\n    setFilters,\n    value,\n    onChange,\n    pages,\n  };\n}\n","import {Trans} from '@common/i18n/trans';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\ninterface FontSelectorPaginationProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorPagination({\n  state: {currentPage = 0, setCurrentPage, filteredFonts, pages},\n}: FontSelectorPaginationProps) {\n  const total = filteredFonts?.length || 0;\n\n  return (\n    <div className=\"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t\">\n      {total > 0 && (\n        <div>\n          <Trans\n            message=\":from - :to of :total\"\n            values={{\n              from: currentPage * 20 + 1,\n              to: Math.min((currentPage + 1) * 20, total),\n              total,\n            }}\n          />\n        </div>\n      )}\n      <div className=\"text-muted\">\n        <IconButton\n          disabled={currentPage < 1}\n          onClick={() => {\n            setCurrentPage(Math.max(0, currentPage - 1));\n          }}\n        >\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton\n          disabled={currentPage >= pages.length - 1}\n          onClick={() => {\n            setCurrentPage(currentPage + 1);\n          }}\n        >\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport clsx from 'clsx';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport fontImage from './font.svg';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport {FontSelectorFilters} from '@common/ui/font-selector/font-selector-filters';\nimport {\n  FontSelectorState,\n  UseFontSelectorProps,\n  useFontSelectorState,\n} from '@common/ui/font-selector/font-selector-state';\nimport {FontSelectorPagination} from '@common/ui/font-selector/font-selector-pagination';\nimport {FontConfig} from '@common/http/value-lists';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\n\ninterface FontSelectorProps extends UseFontSelectorProps {\n  className?: string;\n}\nexport function FontSelector(props: FontSelectorProps) {\n  const state = useFontSelectorState(props);\n  return (\n    <div className={props.className}>\n      <FontSelectorFilters state={state} />\n      <AnimatePresence initial={false} mode=\"wait\">\n        <FontList state={state} />\n      </AnimatePresence>\n      <FontSelectorPagination state={state} />\n    </div>\n  );\n}\n\ninterface FontListProps {\n  state: FontSelectorState;\n}\nfunction FontList({state}: FontListProps) {\n  const {isLoading, fonts} = state;\n\n  const gridClassName =\n    'grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start';\n\n  if (isLoading) {\n    return <FontListSkeleton className={gridClassName} />;\n  }\n\n  if (!fonts?.length) {\n    return (\n      <IllustratedMessage\n        className=\"mt-60\"\n        size=\"sm\"\n        image={<SvgImage src={fontImage} />}\n        title={<Trans message=\"No matching fonts\" />}\n        description={\n          <Trans message=\"Try another search query or different category\" />\n        }\n      />\n    );\n  }\n\n  return (\n    <m.div key=\"font-list\" {...opacityAnimation} className={gridClassName}>\n      {fonts?.map(font => (\n        <FontButton key={font.family} font={font} state={state} />\n      ))}\n    </m.div>\n  );\n}\n\ninterface FontButtonProps {\n  font: FontConfig;\n  state: FontSelectorState;\n}\nfunction FontButton({font, state: {value, onChange}}: FontButtonProps) {\n  const isActive = value?.family === font.family;\n  const displayName = font.family.split(',')[0].replace(/\"/g, '');\n\n  return (\n    <ButtonBase\n      key={font.family}\n      display=\"block\"\n      onClick={() => {\n        onChange(font);\n      }}\n    >\n      <span\n        className={clsx(\n          'flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl',\n          isActive && 'ring-2 ring-primary ring-offset-2',\n        )}\n      >\n        <span style={{fontFamily: font.family}}>Aa</span>\n      </span>\n      <span\n        className={clsx(\n          'mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm',\n          isActive && 'text-primary',\n        )}\n      >\n        {font.label ? <Trans {...font.label} /> : displayName}\n      </span>\n    </ButtonBase>\n  );\n}\n\ninterface FontListSkeletonProps {\n  className: string;\n}\nfunction FontListSkeleton({className}: FontListSkeletonProps) {\n  const items = Array.from(Array(20).keys());\n  return (\n    <m.div key=\"font-list-skeleton\" {...opacityAnimation} className={className}>\n      {items.map(index => (\n        <div key={index}>\n          <div className=\"aspect-square\">\n            <Skeleton display=\"block\" variant=\"rect\" />\n          </div>\n          <Skeleton className=\"mt-6 text-sm\" />\n        </div>\n      ))}\n    </m.div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {message} from '@common/i18n/message';\nimport {toast} from '@common/ui/toast/toast';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {biolinkEditorState} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {useEditorBiolinkId} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  appearance: Biolink['appearance'];\n}\n\nexport function useSaveBiolinkAppearance() {\n  const biolinkId = useEditorBiolinkId();\n  return useMutation({\n    mutationFn: () => {\n      const appearance = biolinkEditorState().appearance!;\n      return saveAppearance(biolinkId, {config: appearance});\n    },\n    onSuccess: () => {\n      biolinkEditorState().setAppearanceIsDirty(false);\n      toast.positive(message('Appearance saved'));\n    },\n    onError: err =>\n      showHttpErrorToast(err, message('Could not save appearance')),\n  });\n}\n\nfunction saveAppearance(\n  biolinkId: number,\n  appearance: Biolink['appearance'],\n): Promise<Response> {\n  return apiClient\n    .post(`biolink/${biolinkId}/appearance`, appearance)\n    .then(r => r.data);\n}\n","import {getInputFieldClassNames} from '@common/ui/forms/input-field/get-input-field-class-names';\nimport React, {Fragment, ReactNode, useId} from 'react';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {ColorPickerDialog} from '@common/ui/color-picker/color-picker-dialog';\nimport {HexColorInput} from 'react-colorful';\n\ninterface ColorInputProps {\n  value: string;\n  onChange: (newValue: string) => void;\n  label: ReactNode;\n}\nexport function ColorInput({value, onChange, label}: ColorInputProps) {\n  const style = getInputFieldClassNames({\n    size: 'md',\n    startAppend: <Fragment />,\n  });\n  const id = useId();\n\n  return (\n    <div>\n      <label className={style.label} htmlFor={id}>\n        {label}\n      </label>\n      <div className=\"flex\">\n        <DialogTrigger\n          type=\"popover\"\n          value={value}\n          onValueChange={onChange}\n          onClose={onChange}\n        >\n          <ButtonBase\n            className=\"h-42 w-42 flex-shrink-0 rounded-input border bg-black\"\n            style={{backgroundColor: value}}\n          />\n          <ColorPickerDialog showInput={false} />\n        </DialogTrigger>\n        <HexColorInput\n          id={id}\n          autoComplete=\"off\"\n          role=\"textbox\"\n          autoCorrect=\"off\"\n          spellCheck=\"false\"\n          required\n          prefixed\n          className={style.input}\n          color={value}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport {Button} from '@common/ui/buttons/button';\nimport {BiolinkBackgroundSelector} from '@app/dashboard/biolink/biolink-editor/appearance/biolink-background-selector';\nimport React, {Fragment} from 'react';\nimport {\n  biolinkEditorState,\n  useBiolinkEditorStore,\n} from '@app/dashboard/biolink/biolink-editor/biolink-editor-store';\nimport {ButtonStyleSelector} from '@app/dashboard/biolink/biolink-editor/appearance/button-style-selector';\nimport {FontSelector as CommonFontSelector} from '@common/ui/font-selector/font-selector';\nimport {useSaveBiolinkAppearance} from '@app/dashboard/biolink/biolink-editor/requests/use-save-biolink-appearance';\nimport {BrowserSafeFonts} from '@common/ui/font-picker/browser-safe-fonts';\nimport {ColorInput} from '@app/dashboard/biolink/biolink-editor/appearance/color-input';\nimport {appearanceHeaderClassnames} from '@app/dashboard/biolink/biolink-editor/appearance/header-classnames';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {LockIcon} from '@common/icons/material/Lock';\nimport {useAuth} from '@common/auth/use-auth';\nimport {FeatureLockedDialog} from '@common/billing/upgrade/feature-locked-dialog';\n\nexport function BiolinkAppearanceEditor() {\n  const saveAppearance = useSaveBiolinkAppearance();\n  const isDirty = useBiolinkEditorStore(s => s.appearanceIsDirty);\n\n  return (\n    <Fragment>\n      <header className=\"mb-40\">\n        <h1 className=\"mb-4 text-2xl\">\n          <Trans message=\"Custom appearance\" />\n        </h1>\n        <div className=\"mb-20 text-sm\">\n          <Trans message=\"Fully customize your Biolink. Change background color or select gradients and images. Choose button style, text color, typeface and more.\" />\n        </div>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          onClick={() => saveAppearance.mutate()}\n          disabled={!isDirty || saveAppearance.isPending}\n        >\n          <Trans message=\"Save changes\" />\n        </Button>\n      </header>\n      <BiolinkBackgroundSelector />\n      <ColorSelector />\n      <ButtonStyleSelector className=\"my-60\" />\n      <FontSelector />\n      <BrandingSelector />\n    </Fragment>\n  );\n}\n\nfunction ColorSelector() {\n  const btnConfig = useBiolinkEditorStore(s => s.appearance?.btnConfig);\n  const bgConfig = useBiolinkEditorStore(s => s.appearance?.bgConfig);\n\n  return (\n    <div className=\"my-60\">\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Colors\" />\n      </h2>\n      <div className=\"grid-cols-3 items-center gap-24 md:grid\">\n        <ColorInput\n          label={<Trans message=\"Text color\" />}\n          value={bgConfig?.color || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              bgConfig: {\n                ...bgConfig!,\n                color: newValue,\n              },\n            });\n          }}\n        />\n        <ColorInput\n          label={<Trans message=\"Button color\" />}\n          value={btnConfig?.color || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              btnConfig: {\n                ...btnConfig,\n                color: newValue,\n              },\n            });\n          }}\n        />\n        <ColorInput\n          label={<Trans message=\"Button text color\" />}\n          value={btnConfig?.textColor || '#000'}\n          onChange={newValue => {\n            biolinkEditorState().updateAppearance({\n              btnConfig: {\n                ...btnConfig,\n                textColor: newValue,\n              },\n            });\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction FontSelector() {\n  const currentValue =\n    useBiolinkEditorStore(s => s.appearance?.fontConfig) || BrowserSafeFonts[0];\n  return (\n    <div>\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Font\" />\n      </h2>\n      <CommonFontSelector\n        value={currentValue}\n        onChange={newValue => {\n          biolinkEditorState().updateAppearance({\n            fontConfig: {\n              ...currentValue,\n              ...newValue,\n            },\n          });\n        }}\n      />\n    </div>\n  );\n}\n\nfunction BrandingSelector() {\n  const {branding, biolink} = useSettings();\n  const {isSubscribed} = useAuth();\n  const {billing} = useSettings();\n  const currentValue =\n    useBiolinkEditorStore(s => s.appearance?.hideBranding) || false;\n\n  return (\n    <div className=\"my-60\">\n      <h2 className={appearanceHeaderClassnames.h2}>\n        <Trans message=\"Branding\" />\n      </h2>\n      {billing.enable && (\n        <div className=\"mb-14\">\n          <DialogTrigger type=\"popover\">\n            <Button\n              variant=\"flat\"\n              color=\"primary\"\n              size=\"2xs\"\n              startIcon={<LockIcon />}\n            >\n              <Trans message=\"Upgrade\" />\n            </Button>\n            <FeatureLockedDialog\n              message={\n                <Trans\n                  message=\"Upgrade to remove :site logo.\"\n                  values={{site: branding.site_name}}\n                />\n              }\n              messageSuffix={null}\n            />\n          </DialogTrigger>\n        </div>\n      )}\n      {biolink.show_branding && (\n        <Switch\n          disabled={!isSubscribed}\n          checked={currentValue}\n          onChange={e => {\n            biolinkEditorState().updateAppearance({\n              hideBranding: e.target.checked,\n            });\n          }}\n        >\n          <Trans\n            message=\"Hide :site logo\"\n            values={{site: branding.site_name}}\n          />\n        </Switch>\n      )}\n    </div>\n  );\n}\n","import {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@common/i18n/trans';\nimport {TabPanel, TabPanels} from '@common/ui/tabs/tab-panels';\nimport {Fragment, ReactElement, useEffect, useState} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {WidgetsIcon} from '@common/icons/material/Widgets';\nimport {\n  LinkContentItem,\n  linkDialogHiddenFields,\n} from '@app/dashboard/biolink/biolink-editor/content/link-content-item/link-content-item';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {CreateLinkDialog} from '@app/dashboard/links/dialogs/create-link-dialog';\nimport {BiolinkSettingsForm} from '@app/dashboard/biolink/biolink-editor/biolink-settings-form';\nimport {SelectWidgetDialog} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-selector/select-widget-dialog';\nimport {WidgetType} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-list';\nimport {NewWidgetDialogContainer} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-selector/new-widget-dialog-container';\nimport {WidgetContentItem} from '@app/dashboard/biolink/biolink-editor/content/widgets/widget-content-item';\nimport {LivePreview} from '@app/dashboard/biolink/biolink-editor/live-preview';\nimport {BiolinkAppearanceEditor} from '@app/dashboard/biolink/biolink-editor/appearance/biolink-appearance-editor';\nimport {Link, useParams} from 'react-router-dom';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {BiolinkContentItemLayout} from '@app/dashboard/biolink/biolink-editor/content/biolink-content-item-layout';\nimport {prefetchLinkFormValueLists} from '@app/dashboard/links/requests/use-link-form-value-lists';\nimport {\n  setEditorBiolink,\n  useEditorBiolink,\n} from '@app/dashboard/biolink/biolink-editor/requests/use-editor-biolink';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport notifySvg from '@common/notifications/empty-state/notify.svg';\nimport {Biolink} from '@app/dashboard/biolink/biolink';\nimport {LinkIcon} from '@common/icons/material/Link';\nimport {removeProtocol} from '@common/utils/urls/remove-protocol';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {ShareLinkButton} from '@app/dashboard/links/sharing/share-link-button';\n\nconst TabsMap: Record<string, number> = {\n  content: 0,\n  appearance: 1,\n  settings: 2,\n};\n\nexport function BiolinkEditorPage() {\n  return (\n    <div>\n      <BiolinkEditorHeader />\n      <div className=\"flex gap-60 p-24 container mx-auto\">\n        <BiolinkEditor />\n        <LivePreview />\n      </div>\n    </div>\n  );\n}\n\nfunction BiolinkEditorHeader() {\n  const {biolink} = useEditorBiolink();\n  return (\n    <header className=\"border-b px-10 py-4 flex items-center gap-10 min-h-46\">\n      <LinkIcon className=\"text-muted\" />\n      <AnimatePresence>\n        {biolink && (\n          <m.a\n            key=\"link\"\n            className={LinkStyle}\n            href={biolink?.short_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            {...opacityAnimation}\n          >\n            {removeProtocol(biolink.short_url)}\n          </m.a>\n        )}\n        {biolink && (\n          <m.div {...opacityAnimation} key=\"share-button\" className=\"ml-auto\">\n            <ShareLinkButton variant=\"text\" link={biolink} />\n          </m.div>\n        )}\n      </AnimatePresence>\n    </header>\n  );\n}\n\nfunction BiolinkEditor() {\n  const {biolinkId} = useParams();\n  const {tabName = 'content'} = useParams();\n  const selectedTab = TabsMap[tabName] ?? TabsMap.content;\n  useEditorBiolink();\n\n  useEffect(() => {\n    prefetchLinkFormValueLists();\n  }, [biolinkId]);\n\n  return (\n    <div className=\"flex-auto min-w-0\">\n      <Tabs overflow=\"overflow-visible\" selectedTab={selectedTab} isLazy>\n        <TabList className=\"sticky top-0 bg dark:bg-alt z-10\">\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../content\"\n            relative=\"path\"\n          >\n            <Trans message=\"Content\" />\n          </Tab>\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../appearance\"\n            relative=\"path\"\n          >\n            <Trans message=\"Appearance\" />\n          </Tab>\n          <Tab\n            padding=\"w-140\"\n            elementType={Link}\n            to=\"../settings\"\n            relative=\"path\"\n          >\n            <Trans message=\"Settings\" />\n          </Tab>\n        </TabList>\n        <TabPanels className=\"py-20\">\n          <TabPanel>{<BiolinkContent />}</TabPanel>\n          <TabPanel>{<BiolinkAppearanceEditor />}</TabPanel>\n          <TabPanel>\n            <BiolinkSettingsForm />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction BiolinkContent() {\n  const {isLoading, status, biolink} = useEditorBiolink();\n  const [activeWidgetDialog, setActiveWidgetDialog] =\n    useState<WidgetType | null>(null);\n\n  let renderedContent: ReactElement;\n\n  if (status === 'success' && !biolink?.content.length) {\n    renderedContent = (\n      <m.div {...opacityAnimation} key=\"no-results\">\n        <IllustratedMessage\n          className=\"mt-60\"\n          image={<SvgImage src={notifySvg} />}\n          title={<Trans message=\"This biolink does not have any content yet\" />}\n        />\n      </m.div>\n    );\n  } else if (isLoading) {\n    renderedContent = <LoadingSkeleton />;\n  } else {\n    renderedContent = <BiolinkItemList biolink={biolink!} />;\n  }\n\n  return (\n    <Fragment>\n      {biolink && (\n        <NewWidgetDialogContainer\n          biolink={biolink}\n          activeWidget={activeWidgetDialog}\n          onOpenChange={isOpen => {\n            if (!isOpen) {\n              setActiveWidgetDialog(null);\n            }\n          }}\n        />\n      )}\n      <div className=\"mb-20\">\n        <AddNewLinkButton />\n        <DialogTrigger\n          type=\"modal\"\n          onClose={(widgetType?: WidgetType) => {\n            if (widgetType) {\n              setActiveWidgetDialog(widgetType);\n            }\n          }}\n        >\n          <Button color=\"primary\" variant=\"outline\" startIcon={<WidgetsIcon />}>\n            <Trans message=\"Add widget\" />\n          </Button>\n          <SelectWidgetDialog />\n        </DialogTrigger>\n      </div>\n      <AnimatePresence initial={false} mode=\"wait\">\n        {renderedContent}\n      </AnimatePresence>\n    </Fragment>\n  );\n}\n\ninterface BiolinkItemListProps {\n  biolink: Biolink;\n}\nfunction BiolinkItemList({biolink}: BiolinkItemListProps) {\n  return (\n    <m.div key=\"content\" {...opacityAnimation}>\n      {biolink?.content.map(contentItem => {\n        const ContentItem =\n          contentItem.model_type === 'biolinkWidget'\n            ? WidgetContentItem\n            : LinkContentItem;\n        return (\n          <ContentItem\n            key={`${contentItem.model_type}-${contentItem.id}`}\n            item={contentItem as never}\n            biolink={biolink}\n          />\n        );\n      })}\n    </m.div>\n  );\n}\n\nfunction AddNewLinkButton() {\n  const {biolink, biolinkId} = useEditorBiolink();\n  const endpoint = `biolink/${biolinkId}/link`;\n\n  const position = biolink?.content.filter(x => x.pinned).length;\n\n  return (\n    <DialogTrigger type=\"modal\">\n      <Button color=\"primary\" variant=\"flat\" className=\"mr-14 min-w-144\">\n        <Trans message=\"Add a link\" />\n      </Button>\n      <CreateLinkDialog\n        endpoint={endpoint}\n        position={position}\n        group={biolink}\n        hiddenFields={linkDialogHiddenFields}\n        showButtonLabelField\n        invalidateQueries={false}\n        onSuccess={(response: {biolink: Biolink}) => {\n          setEditorBiolink(response.biolink);\n        }}\n      />\n    </DialogTrigger>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div key=\"loading-skeleton\" {...opacityAnimation}>\n      {[...Array(4).keys()].map((value, index) => (\n        <BiolinkSkeleton key={index} />\n      ))}\n    </m.div>\n  );\n}\n\nfunction BiolinkSkeleton() {\n  return (\n    <BiolinkContentItemLayout\n      title={<Skeleton className=\"mb-14 text-sm max-w-192\" />}\n      actionRow={<Skeleton className=\"text-xs max-w-288\" />}\n    >\n      <Skeleton className=\"text-xs max-w-400\" />\n      <Skeleton className=\"text-xs max-w-400\" />\n    </BiolinkContentItemLayout>\n  );\n}\n","import React, {useState} from 'react';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {useFormContext} from 'react-hook-form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport clsx from 'clsx';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\n\nexport function ArticleEditorTitle() {\n  const [editingTitle, setEditingTitle] = useState(false);\n  const {trans} = useTrans();\n  const form = useFormContext<CreateCustomPagePayload>();\n  const watchedTitle = form.watch('title');\n\n  const titlePlaceholder = trans({message: 'Title'});\n\n  if (editingTitle) {\n    return (\n      <FormTextField\n        placeholder={titlePlaceholder}\n        autoFocus\n        className=\"mb-30\"\n        onBlur={() => {\n          setEditingTitle(false);\n        }}\n        name=\"title\"\n        required\n      />\n    );\n  }\n  return (\n    <h1\n      tabIndex={0}\n      onClick={() => {\n        setEditingTitle(true);\n      }}\n      onFocus={() => {\n        setEditingTitle(true);\n      }}\n      className={clsx(\n        'hover:bg-primary/focus rounded cursor-pointer',\n        !watchedTitle && 'text-muted'\n      )}\n    >\n      {watchedTitle || titlePlaceholder}\n      <EditIcon className=\"icon-sm mx-8 mt-8 align-top text-muted\" />\n    </h1>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const UndoIcon = createSvgIcon(\n  <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\" />\n, 'UndoOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const RedoIcon = createSvgIcon(\n  <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\" />\n, 'RedoOutlined');\n","import React from 'react';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {UndoIcon} from '../../icons/material/Undo';\nimport {RedoIcon} from '../../icons/material/Redo';\nimport {MenubarButtonProps} from './menubar-button-props';\n\nexport function HistoryButtons({editor}: MenubarButtonProps) {\n  return (\n    <span>\n      <IconButton\n        size=\"md\"\n        disabled={!editor.can().undo()}\n        onClick={() => {\n          editor.commands.focus();\n          editor.commands.undo();\n        }}\n      >\n        <UndoIcon />\n      </IconButton>\n      <IconButton\n        size=\"md\"\n        disabled={!editor.can().redo()}\n        onClick={() => {\n          editor.commands.focus();\n          editor.commands.redo();\n        }}\n      >\n        <RedoIcon />\n      </IconButton>\n    </span>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const CodeIcon = createSvgIcon(\n  <path d=\"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\" />\n, 'CodeOutlined');\n","import {Button} from '../../ui/buttons/button';\nimport {CodeIcon} from '../../icons/material/Code';\nimport {Trans} from '../../i18n/trans';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {AceDialog} from '../../ace-editor/ace-dialog';\nimport {Editor} from '@tiptap/react';\nimport React from 'react';\n\ninterface ModeButtonProps {\n  editor: Editor;\n}\nexport function ModeButton({editor}: ModeButtonProps) {\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={newValue => {\n        if (newValue != null) {\n          editor?.commands.setContent(newValue);\n        }\n      }}\n    >\n      <Button variant=\"text\" startIcon={<CodeIcon />}>\n        <Trans message=\"Source\" />\n      </Button>\n      <AceDialog\n        title={<Trans message=\"Source code\" />}\n        defaultValue={editor.getHTML()}\n      />\n    </DialogTrigger>\n  );\n}\n","export function Divider() {\n  return <div className=\"self-stretch mx-4 w-1 bg-divider flex-shrink-0\" />;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatBoldIcon = createSvgIcon(\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n, 'FormatBoldOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatItalicIcon = createSvgIcon(\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z\" />\n, 'FormatItalicOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatUnderlinedIcon = createSvgIcon(\n  <path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\" />\n, 'FormatUnderlinedOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {FormatBoldIcon} from '../../icons/material/FormatBold';\nimport {FormatItalicIcon} from '../../icons/material/FormatItalic';\nimport {FormatUnderlinedIcon} from '../../icons/material/FormatUnderlined';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nexport function FontStyleButtons({editor, size}: MenubarButtonProps) {\n  return (\n    <span className={clsx('flex-shrink-0 whitespace-nowrap')}>\n      <Tooltip label={<Trans message=\"Bold\" />}>\n        <IconButton\n          size={size}\n          color={editor.isActive('bold') ? 'primary' : null}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.toggleBold();\n          }}\n        >\n          <FormatBoldIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip label={<Trans message=\"Italic\" />}>\n        <IconButton\n          size={size}\n          color={editor.isActive('italic') ? 'primary' : null}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.toggleItalic();\n          }}\n        >\n          <FormatItalicIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip label={<Trans message=\"Underline\" />}>\n        <IconButton\n          size={size}\n          color={editor.isActive('underline') ? 'primary' : null}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.toggleUnderline();\n          }}\n        >\n          <FormatUnderlinedIcon />\n        </IconButton>\n      </Tooltip>\n    </span>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatListBulletedIcon = createSvgIcon(\n  <path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\" />\n, 'FormatListBulletedOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatListNumberedIcon = createSvgIcon(\n  <path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\" />\n, 'FormatListNumberedOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {FormatListBulletedIcon} from '../../icons/material/FormatListBulleted';\nimport {FormatListNumberedIcon} from '../../icons/material/FormatListNumbered';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ListButtons({editor, size}: MenubarButtonProps) {\n  const bulletActive = editor.isActive('bulletList');\n  const orderedActive = editor.isActive('orderedList');\n  return (\n    <span className={clsx('flex-shrink-0', 'whitespace-nowrap')}>\n      <Tooltip label={<Trans message=\"Bulleted list\" />}>\n        <IconButton\n          size={size}\n          color={bulletActive ? 'primary' : null}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.toggleBulletList();\n          }}\n        >\n          <FormatListBulletedIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip label={<Trans message=\"Numbered list\" />}>\n        <IconButton\n          size={size}\n          color={orderedActive ? 'primary' : null}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.toggleOrderedList();\n          }}\n        >\n          <FormatListNumberedIcon />\n        </IconButton>\n      </Tooltip>\n    </span>\n  );\n}\n","import {Editor} from '@tiptap/react';\n\ninterface Props {\n  href: string;\n  target?: string;\n  text?: string;\n}\n\nexport function insertLinkIntoTextEditor(\n  editor: Editor,\n  {text, target, href}: Props\n) {\n  // no selection, insert new link with specified text\n  if (editor.state.selection.empty && text) {\n    editor.commands.insertContent(\n      `<a href=\"${href}\" target=\"${target}\">${text}</a>`\n    );\n  } else if (!editor.state.selection.empty) {\n    // no href provided, remove link from selection\n    if (!href) {\n      editor.chain().focus().extendMarkRange('link').unsetLink().run();\n    } else {\n      // add link to selection\n      editor\n        .chain()\n        .focus()\n        .extendMarkRange('link')\n        .setLink({href: href, target})\n        .run();\n    }\n  }\n}\n","import {useForm} from 'react-hook-form';\nimport React from 'react';\nimport clsx from 'clsx';\nimport {Form} from '../../ui/forms/form';\nimport {FormTextField} from '../../ui/forms/input-field/text-field/text-field';\nimport {DialogFooter} from '../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../ui/buttons/button';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {LinkIcon} from '../../icons/material/Link';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {FormSelect, Option} from '../../ui/forms/select/select';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../../i18n/trans';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {insertLinkIntoTextEditor} from '@common/text-editor/insert-link-into-text-editor';\n\ninterface FormValue {\n  href: string;\n  target?: string;\n  text?: string;\n}\n\nexport function LinkButton({editor, size}: MenubarButtonProps) {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Tooltip label={<Trans message=\"Insert link\" />}>\n        <IconButton size={size} className={clsx('flex-shrink-0')}>\n          <LinkIcon />\n        </IconButton>\n      </Tooltip>\n      <LinkDialog editor={editor} />\n    </DialogTrigger>\n  );\n}\n\nfunction LinkDialog({editor}: MenubarButtonProps) {\n  const previousUrl = editor.getAttributes('link').href;\n  const previousText = editor.state.doc.textBetween(\n    editor.state.selection.from,\n    editor.state.selection.to,\n    '',\n  );\n\n  const form = useForm<FormValue>({\n    defaultValues: {href: previousUrl, text: previousText, target: '_blank'},\n  });\n  const {formId, close} = useDialogContext();\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Insert link\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={value => {\n            insertLinkIntoTextEditor(editor, value);\n            close();\n          }}\n        >\n          <FormTextField\n            name=\"href\"\n            label={<Trans message=\"URL\" />}\n            autoFocus\n            type=\"url\"\n            className=\"mb-20\"\n          />\n          <FormTextField\n            name=\"text\"\n            label={<Trans message=\"Text to display\" />}\n            className=\"mb-20\"\n          />\n          <FormSelect\n            selectionMode=\"single\"\n            name=\"target\"\n            label={<Trans message=\"Open link in...\" />}\n          >\n            <Option value=\"_self\">\n              <Trans message=\"Current window\" />\n            </Option>\n            <Option value=\"_blank\">\n              <Trans message=\"New window\" />\n            </Option>\n          </FormSelect>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={close} variant=\"text\">\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button type=\"submit\" form={formId} variant=\"flat\" color=\"primary\">\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {ImageIcon} from '../../icons/material/Image';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {useActiveUpload} from '../../uploads/uploader/use-active-upload';\nimport {UploadInputType} from '../../uploads/types/upload-input-config';\nimport {Disk} from '../../uploads/types/backend-metadata';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nconst TwoMB = 2097152;\n\ninterface Props extends MenubarButtonProps {\n  diskPrefix?: string;\n}\n\nexport function ImageButton({editor, size, diskPrefix = 'page_media'}: Props) {\n  const {selectAndUploadFile} = useActiveUpload();\n\n  const handleUpload = () => {\n    selectAndUploadFile({\n      showToastOnRestrictionFail: true,\n      restrictions: {\n        allowedFileTypes: [UploadInputType.image],\n        maxFileSize: TwoMB,\n      },\n      metadata: {\n        diskPrefix: diskPrefix,\n        disk: Disk.public,\n      },\n      onSuccess: entry => {\n        editor.commands.focus();\n        editor.commands.setImage({\n          src: entry.url,\n        });\n      },\n    });\n  };\n\n  return (\n    <Tooltip label={<Trans message=\"Insert image\" />}>\n      <IconButton\n        size={size}\n        onClick={handleUpload}\n        className={clsx('flex-shrink-0')}\n      >\n        <ImageIcon />\n      </IconButton>\n    </Tooltip>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatClearIcon = createSvgIcon(\n  <path d=\"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z\" />\n, 'FormatClearOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {FormatClearIcon} from '../../icons/material/FormatClear';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ClearFormatButton({editor, size}: MenubarButtonProps) {\n  return (\n    <Tooltip label={<Trans message=\"Clear formatting\" />}>\n      <IconButton\n        className={clsx('flex-shrink-0')}\n        size={size}\n        onClick={() => {\n          editor.chain().focus().clearNodes().unsetAllMarks().run();\n        }}\n      >\n        <FormatClearIcon />\n      </IconButton>\n    </Tooltip>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const HorizontalRuleIcon = createSvgIcon(\n  <path fillRule=\"evenodd\" d=\"M4 11h16v2H4z\" />\n, 'HorizontalRuleOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const PriorityHighIcon = createSvgIcon(\n  [<circle cx=\"12\" cy=\"19\" r=\"2\" key=\"0\" />,<path d=\"M10 3h4v12h-4z\" key=\"1\" />,]\n, 'PriorityHighOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const NoteIcon = createSvgIcon(\n  <path d=\"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z\" />\n, 'NoteOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SmartDisplayIcon = createSvgIcon(\n  [<path d=\"M9.5 7.5v9l7-4.5z\" key=\"0\" />,<path d=\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z\" key=\"1\" />,]\n, 'SmartDisplayOutlined');\n","import React, {useState} from 'react';\nimport {useForm} from 'react-hook-form';\nimport clsx from 'clsx';\nimport {HorizontalRuleIcon} from '../../icons/material/HorizontalRule';\nimport {PriorityHighIcon} from '../../icons/material/PriorityHigh';\nimport {WarningIcon} from '../../icons/material/Warning';\nimport {NoteIcon} from '../../icons/material/Note';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {MoreVertIcon} from '../../icons/material/MoreVert';\nimport {SmartDisplayIcon} from '../../icons/material/SmartDisplay';\nimport {Form} from '../../ui/forms/form';\nimport {FormTextField} from '../../ui/forms/input-field/text-field/text-field';\nimport {DialogFooter} from '../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../ui/buttons/button';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '../../ui/navigation/menu/menu-trigger';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '../../ui/overlays/dialog/dialog-body';\nimport {Trans} from '../../i18n/trans';\n\nexport function InsertMenuTrigger({editor, size}: MenubarButtonProps) {\n  const [dialog, setDialog] = useState<'embed' | false>(false);\n  return (\n    <>\n      <MenuTrigger\n        onItemSelected={key => {\n          if (key === 'hr') {\n            editor.commands.focus();\n            editor.commands.setHorizontalRule();\n          } else if (key === 'embed') {\n            setDialog('embed');\n          } else {\n            editor.commands.focus();\n            editor.commands.addInfo({type: key as any});\n          }\n        }}\n      >\n        <IconButton\n          variant=\"text\"\n          size={size}\n          className={clsx('flex-shrink-0')}\n        >\n          <MoreVertIcon />\n        </IconButton>\n        <Menu>\n          <MenuItem value=\"hr\" startIcon={<HorizontalRuleIcon />}>\n            <Trans message=\"Horizontal rule\" />\n          </MenuItem>\n          <MenuItem value=\"embed\" startIcon={<SmartDisplayIcon />}>\n            <Trans message=\"Embed\" />\n          </MenuItem>\n          <MenuItem value=\"important\" startIcon={<PriorityHighIcon />}>\n            <Trans message=\"Important\" />\n          </MenuItem>\n          <MenuItem value=\"warning\" startIcon={<WarningIcon />}>\n            <Trans message=\"Warning\" />\n          </MenuItem>\n          <MenuItem value=\"success\" startIcon={<NoteIcon />}>\n            <Trans message=\"Note\" />\n          </MenuItem>\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={!!dialog}\n        onClose={() => {\n          setDialog(false);\n        }}\n      >\n        <EmbedDialog editor={editor} />\n      </DialogTrigger>\n    </>\n  );\n}\n\nfunction EmbedDialog({editor}: MenubarButtonProps) {\n  const previousSrc = editor.getAttributes('embed').src;\n  const form = useForm<{src: string}>({\n    defaultValues: {src: previousSrc},\n  });\n  const {formId, close} = useDialogContext();\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Insert link\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={value => {\n            editor.commands.setEmbed(value);\n            close();\n          }}\n        >\n          <FormTextField\n            name=\"src\"\n            label={<Trans message=\"Embed URL\" />}\n            autoFocus\n            type=\"url\"\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={close} variant=\"text\">\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          type=\"submit\"\n          form={formId}\n          disabled={!form.formState.isValid}\n          variant=\"flat\"\n          color=\"primary\"\n        >\n          <Trans message=\"Add\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ReactNode} from 'react';\nimport {isMac} from '@react-aria/utils';\n\ninterface Props {\n  children: ReactNode;\n  modifier?: boolean;\n  separator?: string;\n}\nexport function Keyboard({children, modifier, separator = '+'}: Props) {\n  const modKey = isMac() ? (\n    <span className=\"text-base align-middle\">⌘</span>\n  ) : (\n    'Ctrl'\n  );\n  return (\n    <kbd className=\"text-xs text-muted\">\n      {modifier && (\n        <>\n          {modKey}\n          {separator}\n        </>\n      )}\n      {children}\n    </kbd>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {Button} from '../../ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '../../icons/material/KeyboardArrowDown';\nimport {Keyboard} from '../../ui/keyboard/keyboard';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '../../ui/navigation/menu/menu-trigger';\nimport {Trans} from '../../i18n/trans';\n\ntype Level = 1 | 2 | 3 | 4;\n\nexport function FormatMenuTrigger({editor, size}: MenubarButtonProps) {\n  return (\n    <MenuTrigger\n      floatingMinWidth=\"w-256\"\n      onItemSelected={key => {\n        editor.commands.focus();\n        if (typeof key === 'string' && key.startsWith('h')) {\n          editor.commands.toggleHeading({\n            level: parseInt(key.replace('h', '')) as Level,\n          });\n        } else if (key === 'code') {\n          editor.commands.toggleCode();\n        } else if (key === 'strike') {\n          editor.commands.toggleStrike();\n        } else if (key === 'super') {\n          editor.commands.toggleSuperscript();\n        } else if (key === 'sub') {\n          editor.commands.toggleSubscript();\n        } else if (key === 'blockquote') {\n          editor.commands.toggleBlockquote();\n        } else if (key === 'paragraph') {\n          editor.commands.setParagraph();\n        }\n      }}\n    >\n      <Button\n        className={clsx('flex-shrink-0')}\n        variant=\"text\"\n        size={size}\n        endIcon={<KeyboardArrowDownIcon />}\n      >\n        <Trans message=\"Format\" />\n      </Button>\n      <Menu>\n        <MenuItem value=\"h1\" endSection={<Keyboard modifier>Alt+1</Keyboard>}>\n          <Trans message=\"Heading :number\" values={{number: 1}} />\n        </MenuItem>\n        <MenuItem value=\"h2\" endSection={<Keyboard modifier>Alt+2</Keyboard>}>\n          <Trans message=\"Heading :number\" values={{number: 2}} />\n        </MenuItem>\n        <MenuItem value=\"h3\" endSection={<Keyboard modifier>Alt+3</Keyboard>}>\n          <Trans message=\"Heading :number\" values={{number: 3}} />\n        </MenuItem>\n        <MenuItem value=\"h4\" endSection={<Keyboard modifier>Alt+4</Keyboard>}>\n          <Trans message=\"Heading :number\" values={{number: 4}} />\n        </MenuItem>\n        <MenuItem value=\"code\" endSection={<Keyboard modifier>E</Keyboard>}>\n          <Trans message=\"Code\" />\n        </MenuItem>\n        <MenuItem\n          value=\"strike\"\n          endSection={<Keyboard modifier>Shift+X</Keyboard>}\n        >\n          <Trans message=\"Strikethrough\" />\n        </MenuItem>\n        <MenuItem\n          value=\"super\"\n          endSection={\n            <Keyboard modifier separator=\" \">\n              .\n            </Keyboard>\n          }\n        >\n          <Trans message=\"Superscript\" />\n        </MenuItem>\n        <MenuItem\n          value=\"sub\"\n          endSection={\n            <Keyboard modifier separator=\" \">\n              ,\n            </Keyboard>\n          }\n        >\n          <Trans message=\"Subscript\" />\n        </MenuItem>\n        <MenuItem\n          value=\"blockquote\"\n          endSection={<Keyboard modifier>Shift+B</Keyboard>}\n        >\n          <Trans message=\"Blockquote\" />\n        </MenuItem>\n        <MenuItem\n          value=\"paragraph\"\n          endSection={<Keyboard modifier>Alt+0</Keyboard>}\n        >\n          <Trans message=\"Paragraph\" />\n        </MenuItem>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatColorTextIcon = createSvgIcon(\n  <path d=\"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z\" />\n, 'FormatColorTextOutlined');\n","import React, {Fragment, useState} from 'react';\nimport clsx from 'clsx';\nimport {FormatColorTextIcon} from '../../icons/material/FormatColorText';\nimport {ColorPickerDialog} from '../../ui/color-picker/color-picker-dialog';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {FormatColorFillIcon} from '../../icons/material/FormatColorFill';\nimport {DialogTrigger} from '../../ui/overlays/dialog/dialog-trigger';\n\nexport function ColorButtons({editor, size}: MenubarButtonProps) {\n  const [dialog, setDialog] = useState<'text' | 'bg' | false>(false);\n  const textActive = editor.getAttributes('textStyle').color;\n  const backgroundActive = editor.getAttributes('textStyle').backgroundColor;\n  return (\n    <Fragment>\n      <span className={clsx('flex-shrink-0 whitespace-nowrap')}>\n        <IconButton\n          size={size}\n          color={textActive ? 'primary' : null}\n          onClick={() => {\n            setDialog('text');\n          }}\n        >\n          <FormatColorTextIcon />\n        </IconButton>\n        <IconButton\n          size={size}\n          color={backgroundActive ? 'primary' : null}\n          onClick={() => {\n            setDialog('bg');\n          }}\n        >\n          <FormatColorFillIcon />\n        </IconButton>\n      </span>\n      <DialogTrigger\n        defaultValue={dialog === 'text' ? '#000000' : '#FFFFFF'}\n        type=\"modal\"\n        isOpen={!!dialog}\n        onClose={newValue => {\n          if (newValue) {\n            if (dialog === 'text') {\n              editor.commands.setColor(newValue);\n            } else {\n              editor.commands.setBackgroundColor(newValue);\n            }\n          }\n          setDialog(false);\n        }}\n      >\n        <ColorPickerDialog />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatAlignLeftIcon = createSvgIcon(\n  <path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\" />\n, 'FormatAlignLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatAlignCenterIcon = createSvgIcon(\n  <path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\" />\n, 'FormatAlignCenterOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatAlignRightIcon = createSvgIcon(\n  <path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\" />\n, 'FormatAlignRightOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatAlignJustifyIcon = createSvgIcon(\n  <path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\" />\n, 'FormatAlignJustifyOutlined');\n","import clsx from 'clsx';\nimport {ComponentType} from 'react';\nimport {FormatAlignLeftIcon} from '../../icons/material/FormatAlignLeft';\nimport {FormatAlignCenterIcon} from '../../icons/material/FormatAlignCenter';\nimport {FormatAlignRightIcon} from '../../icons/material/FormatAlignRight';\nimport {FormatAlignJustifyIcon} from '../../icons/material/FormatAlignJustify';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '../../ui/navigation/menu/menu-trigger';\nimport {Trans} from '../../i18n/trans';\nimport {message} from '../../i18n/message';\n\nconst iconMap = {\n  left: {\n    icon: FormatAlignLeftIcon,\n    label: message('Align left'),\n  },\n  center: {\n    icon: FormatAlignCenterIcon,\n    label: message('Align center'),\n  },\n  right: {\n    icon: FormatAlignRightIcon,\n    label: message('Align right'),\n  },\n  justify: {\n    icon: FormatAlignJustifyIcon,\n    label: message('Justify'),\n  },\n};\n\nexport function AlignButtons({editor, size}: MenubarButtonProps) {\n  const activeKey = (Object.keys(iconMap).find(key => {\n    return editor.isActive({textAlign: key});\n  }) || 'left') as keyof typeof iconMap;\n  const ActiveIcon: ComponentType = activeKey\n    ? iconMap[activeKey].icon\n    : iconMap.left.icon;\n\n  return (\n    <MenuTrigger\n      floatingWidth=\"auto\"\n      selectionMode=\"single\"\n      selectedValue={activeKey}\n      onSelectionChange={key => {\n        editor.commands.focus();\n        editor.commands.setTextAlign(key as string);\n      }}\n    >\n      <IconButton\n        size={size}\n        color={activeKey ? 'primary' : null}\n        className={clsx('flex-shrink-0')}\n      >\n        <ActiveIcon />\n      </IconButton>\n      <Menu>\n        {Object.entries(iconMap).map(([name, config]) => {\n          const Icon = config.icon;\n          return (\n            <MenuItem\n              key={name}\n              value={name}\n              startIcon={<Icon size=\"md\" />}\n              capitalizeFirst\n            >\n              <Trans message={config.label.message} />\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatIndentDecreaseIcon = createSvgIcon(\n  <path d=\"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\" />\n, 'FormatIndentDecreaseOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FormatIndentIncreaseIcon = createSvgIcon(\n  <path d=\"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\" />\n, 'FormatIndentIncreaseOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {FormatIndentDecreaseIcon} from '../../icons/material/FormatIndentDecrease';\nimport {FormatIndentIncreaseIcon} from '../../icons/material/FormatIndentIncrease';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nexport function IndentButtons({editor, size}: MenubarButtonProps) {\n  return (\n    <span className={clsx('flex-shrink-0', 'whitespace-nowrap')}>\n      <Tooltip label={<Trans message=\"Decrease indent\" />}>\n        <IconButton\n          size={size}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.outdent();\n          }}\n        >\n          <FormatIndentDecreaseIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip label={<Trans message=\"Increase indent\" />}>\n        <IconButton\n          size={size}\n          onClick={() => {\n            editor.commands.focus();\n            editor.commands.indent();\n          }}\n        >\n          <FormatIndentIncreaseIcon />\n        </IconButton>\n      </Tooltip>\n    </span>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {CodeIcon} from '../../icons/material/Code';\nimport {MenubarButtonProps} from './menubar-button-props';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '../../ui/navigation/menu/menu-trigger';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\n\nexport function CodeBlockMenuTrigger({editor, size}: MenubarButtonProps) {\n  const language = editor.getAttributes('codeBlock').language || '';\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      selectedValue={language}\n      onSelectionChange={key => {\n        editor.commands.toggleCodeBlock({language: key as string});\n      }}\n    >\n      <Tooltip label={<Trans message=\"Codeblock\" />}>\n        <IconButton\n          className={clsx('flex-shrink-0')}\n          size={size}\n          color={language ? 'primary' : null}\n        >\n          <CodeIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu>\n        <MenuItem value=\"html\">HTML</MenuItem>\n        <MenuItem value=\"javascript\">JavaScript</MenuItem>\n        <MenuItem value=\"css\">CSS</MenuItem>\n        <MenuItem value=\"php\">PHP</MenuItem>\n        <MenuItem value=\"shell\">Shell</MenuItem>\n        <MenuItem value=\"bash\">Bash</MenuItem>\n        <MenuItem value=\"ruby\">Ruby</MenuItem>\n        <MenuItem value=\"python\">Python</MenuItem>\n        <MenuItem value=\"java\">Java</MenuItem>\n        <MenuItem value=\"c++\">C++</MenuItem>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import React, {Fragment, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Divider} from '@common/text-editor/menubar/divider';\nimport {FontStyleButtons} from '@common/text-editor/menubar/font-style-buttons';\nimport {ListButtons} from '@common/text-editor/menubar/list-buttons';\nimport {LinkButton} from '@common/text-editor/menubar/link-button';\nimport {ImageButton} from '@common/text-editor/menubar/image-button';\nimport {ClearFormatButton} from '@common/text-editor/menubar/clear-format-button';\nimport {InsertMenuTrigger} from '@common/text-editor/menubar/insert-menu-trigger';\nimport {FormatMenuTrigger} from '@common/text-editor/menubar/format-menu-trigger';\nimport {ColorButtons} from '@common/text-editor/menubar/color-buttons';\nimport {AlignButtons} from '@common/text-editor/menubar/align-buttons';\nimport {IndentButtons} from '@common/text-editor/menubar/indent-buttons';\nimport {CodeBlockMenuTrigger} from '@common/text-editor/menubar/code-block-menu-trigger';\nimport {MenubarButtonProps} from '@common/text-editor/menubar/menubar-button-props';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {UnfoldMoreIcon} from '@common/icons/material/UnfoldMore';\nimport {UnfoldLessIcon} from '@common/icons/material/UnfoldLess';\n\nconst MenubarRowClassName =\n  'flex items-center px-4 h-42 text-muted border-b overflow-hidden';\n\ninterface Props extends MenubarButtonProps {\n  justify?: string;\n  hideInsertButton?: boolean;\n  imageDiskPrefix?: string;\n}\nexport function ArticleBodyEditorMenubar({\n  editor,\n  size = 'md',\n  justify = 'justify-center',\n  hideInsertButton = false,\n  imageDiskPrefix,\n}: Props) {\n  const isMobile = useIsMobileMediaQuery();\n  const [extendedVisible, setExtendedVisible] = useState(false);\n  return (\n    <div className={clsx(extendedVisible ? 'h-84' : 'h-42')}>\n      <div className={clsx(MenubarRowClassName, justify, 'relative z-20')}>\n        <FormatMenuTrigger editor={editor} size={size} />\n        <Divider />\n        <FontStyleButtons editor={editor} size={size} />\n        <Divider />\n        <AlignButtons editor={editor} size={size} />\n        <IndentButtons editor={editor} size={size} />\n        <Divider />\n        {isMobile ? (\n          <IconButton\n            className=\"flex-shrink-0\"\n            color={extendedVisible ? 'primary' : null}\n            size={size}\n            onClick={() => {\n              setExtendedVisible(!extendedVisible);\n            }}\n          >\n            {extendedVisible ? <UnfoldLessIcon /> : <UnfoldMoreIcon />}\n          </IconButton>\n        ) : (\n          <ExtendedButtons\n            editor={editor}\n            size={size}\n            hideInsertButton={hideInsertButton}\n            imageDiskPrefix={imageDiskPrefix}\n          />\n        )}\n      </div>\n      <AnimatePresence>\n        {extendedVisible && (\n          <m.div\n            className={clsx(\n              MenubarRowClassName,\n              justify,\n              'absolute flex h-full w-full',\n            )}\n            initial={{y: '-100%'}}\n            animate={{y: 0}}\n            exit={{y: '-100%'}}\n          >\n            <ExtendedButtons\n              editor={editor}\n              size={size}\n              imageDiskPrefix={imageDiskPrefix}\n            />\n          </m.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nfunction ExtendedButtons({\n  editor,\n  size = 'md',\n  hideInsertButton,\n  imageDiskPrefix,\n}: Props) {\n  return (\n    <Fragment>\n      <ListButtons editor={editor} size={size} />\n      <Divider />\n      <LinkButton editor={editor} size={size} />\n      <ImageButton editor={editor} size={size} diskPrefix={imageDiskPrefix} />\n      {!hideInsertButton && <InsertMenuTrigger editor={editor} size={size} />}\n      <Divider />\n      <ColorButtons editor={editor} size={size} />\n      <Divider />\n      <CodeBlockMenuTrigger editor={editor} size={size} />\n      <ClearFormatButton editor={editor} size={size} />\n    </Fragment>\n  );\n}\n","import {SlugEditor, SlugEditorProps} from '@common/ui/slug-editor';\nimport {useController, useFormContext} from 'react-hook-form';\nimport React, {Fragment, ReactNode, useEffect, useRef} from 'react';\nimport clsx from 'clsx';\nimport {useStickySentinel} from '@common/utils/hooks/sticky-sentinel';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {ArrowBackIcon} from '@common/icons/material/ArrowBack';\nimport {Trans} from '@common/i18n/trans';\nimport {HistoryButtons} from '@common/text-editor/menubar/history-buttons';\nimport {ModeButton} from '@common/text-editor/menubar/mode-button';\nimport {ArticleBodyEditorMenubar} from './article-body-editor-menubar';\nimport {Editor} from '@tiptap/react';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\n\ninterface StickyHeaderProps {\n  editor: Editor;\n  allowSlugEditing?: boolean;\n  onSave?: (editorContent: string) => void;\n  saveButton?: ReactNode;\n  backLink: string;\n  isLoading?: boolean;\n  slugPrefix?: string;\n  imageDiskPrefix?: string;\n}\nexport function ArticleEditorStickyHeader({\n  editor,\n  allowSlugEditing = true,\n  onSave,\n  saveButton,\n  isLoading = false,\n  backLink,\n  slugPrefix = 'pages',\n  imageDiskPrefix,\n}: StickyHeaderProps) {\n  const {isSticky, sentinelRef} = useStickySentinel();\n  const isMobile = useIsMobileMediaQuery();\n\n  return (\n    <Fragment>\n      <div ref={sentinelRef} />\n      <div className={clsx('sticky top-0 z-10 mb-20 bg', isSticky && 'shadow')}>\n        <div className=\"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start\">\n          {!isMobile && (\n            <Fragment>\n              <Button\n                variant=\"text\"\n                size=\"sm\"\n                elementType={Link}\n                to={backLink}\n                relative=\"path\"\n                startIcon={<ArrowBackIcon />}\n              >\n                <Trans message=\"Back\" />\n              </Button>\n              <div className=\"mr-auto\">\n                {allowSlugEditing && (\n                  <FormSlugEditor\n                    name=\"slug\"\n                    showLinkIcon={false}\n                    prefix={slugPrefix}\n                  />\n                )}\n              </div>\n            </Fragment>\n          )}\n          {editor && <HistoryButtons editor={editor} />}\n          {!isMobile && <ModeButton editor={editor} />}\n          {onSave && (\n            <SaveButton\n              onSave={() => {\n                onSave(editor.getHTML());\n              }}\n              isLoading={isLoading}\n            />\n          )}\n          {saveButton}\n        </div>\n        <ArticleBodyEditorMenubar\n          editor={editor}\n          size=\"sm\"\n          imageDiskPrefix={imageDiskPrefix}\n        />\n      </div>\n    </Fragment>\n  );\n}\n\ninterface SaveButtonProps {\n  onSave: () => void;\n  isLoading: boolean;\n}\nfunction SaveButton({onSave, isLoading}: SaveButtonProps) {\n  const form = useFormContext();\n  const title = form.watch('title');\n\n  return (\n    <Button\n      variant=\"flat\"\n      size=\"sm\"\n      color=\"primary\"\n      className=\"min-w-90\"\n      disabled={isLoading || !title}\n      onClick={() => onSave()}\n    >\n      <Trans message=\"Save\" />\n    </Button>\n  );\n}\n\ninterface FormSlugEditorProps extends SlugEditorProps {\n  name: string;\n}\nfunction FormSlugEditor({name, ...other}: FormSlugEditorProps) {\n  const {\n    field: {onChange, onBlur, value = '', ref},\n  } = useController({\n    name,\n  });\n  const manuallyChanged = useRef(false);\n\n  const {watch, setValue} = useFormContext<CreateCustomPagePayload>();\n\n  useEffect(() => {\n    const subscription = watch((formVal, {name: fieldName}) => {\n      // if user has not changed slug manually, set it based on page title field changes\n      if (fieldName === 'title' && !manuallyChanged.current) {\n        setValue('slug', formVal.title);\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [watch, setValue]);\n\n  return (\n    <SlugEditor\n      className={clsx(!value && 'invisible')}\n      onChange={e => {\n        manuallyChanged.current = true;\n        onChange(e);\n      }}\n      onInputBlur={onBlur}\n      value={value}\n      inputRef={ref}\n      {...other}\n    />\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\n\ninterface Response extends BackendResponse {\n  page: CustomPage;\n}\n\nexport function useCreateLinkPage() {\n  return useMutation({\n    mutationFn: (payload: CreateCustomPagePayload) => createPage(payload),\n    onError: err => showHttpErrorToast(err),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({queryKey: ['link-page']});\n      toast(message('Page created'));\n    },\n  });\n}\n\nfunction createPage(payload: CreateCustomPagePayload): Promise<Response> {\n  return apiClient.post('link-page', payload).then(r => r.data);\n}\n","import React, {Suspense} from 'react';\nimport {FormProvider, useForm} from 'react-hook-form';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {ArticleEditorTitle} from '@common/article-editor/article-editor-title';\nimport {ArticleEditorStickyHeader} from '@common/article-editor/article-editor-sticky-header';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {useCreateLinkPage} from '@app/dashboard/link-pages/requests/use-create-link-page';\n\nconst ArticleBodyEditor = React.lazy(\n  () => import('@common/article-editor/article-body-editor'),\n);\n\nexport function CreateLinkPage() {\n  const navigate = useNavigate();\n  const createPage = useCreateLinkPage();\n  const form = useForm<CreateCustomPagePayload>();\n\n  const handleSave = (editorContent: string) => {\n    createPage.mutate(\n      {\n        ...form.getValues(),\n        body: editorContent,\n      },\n      {\n        onSuccess: () => navigate('../', {relative: 'path'}),\n      },\n    );\n  };\n\n  return (\n    <Suspense fallback={<FullPageLoader />}>\n      <ArticleBodyEditor>\n        {(content, editor) => (\n          <FileUploadProvider>\n            <FormProvider {...form}>\n              <ArticleEditorStickyHeader\n                editor={editor}\n                isLoading={createPage.isPending}\n                onSave={handleSave}\n                backLink=\"../\"\n                allowSlugEditing={false}\n              />\n              <div className=\"mx-20\">\n                <div className=\"prose dark:prose-invert mx-auto flex-auto\">\n                  <ArticleEditorTitle />\n                  {content}\n                </div>\n              </div>\n            </FormProvider>\n          </FileUploadProvider>\n        )}\n      </ArticleBodyEditor>\n    </Suspense>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {useParams} from 'react-router-dom';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\n\nexport interface FetchCustomPageResponse extends BackendResponse {\n  page: CustomPage;\n}\n\nexport function useLinkPage(pageId?: number | string) {\n  const params = useParams();\n  if (!pageId) {\n    pageId = params.pageId;\n  }\n  return useQuery({\n    queryKey: ['link-page', `${pageId}`],\n    queryFn: () => fetchLinkPage(pageId!),\n  });\n}\n\nfunction fetchLinkPage(\n  slugOrId: number | string,\n): Promise<FetchCustomPageResponse> {\n  return apiClient.get(`link-page/${slugOrId}`).then(response => response.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {useParams} from 'react-router-dom';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\n\ninterface Response extends BackendResponse {\n  page: CustomPage;\n}\n\nexport function useUpdateLinkPage() {\n  const {pageId} = useParams();\n  return useMutation({\n    mutationFn: (payload: CreateCustomPagePayload) =>\n      updatePage(pageId!, payload),\n    onError: err => showHttpErrorToast(err),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('link-page'),\n      });\n      toast(message('Page updated'));\n    },\n  });\n}\n\nfunction updatePage(\n  pageId: number | string,\n  payload: CreateCustomPagePayload,\n): Promise<Response> {\n  return apiClient.put(`link-page/${pageId}`, payload).then(r => r.data);\n}\n","import React, {Fragment, Suspense} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {CustomPage} from '@common/admin/custom-pages/custom-page';\nimport {FormProvider, useForm} from 'react-hook-form';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {ArticleEditorTitle} from '@common/article-editor/article-editor-title';\nimport {ArticleEditorStickyHeader} from '@common/article-editor/article-editor-sticky-header';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {CreateCustomPagePayload} from '@common/admin/custom-pages/requests/use-create-custom-page';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {useLinkPage} from '@app/dashboard/link-pages/requests/use-link-page';\nimport {useUpdateLinkPage} from '@app/dashboard/link-pages/requests/use-update-link-page';\n\nconst ArticleBodyEditor = React.lazy(\n  () => import('@common/article-editor/article-body-editor'),\n);\n\nexport function EditLinkPage() {\n  const query = useLinkPage();\n\n  return query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent page={query.data.page} />\n    </Fragment>\n  ) : (\n    <div className=\"relative w-full h-full\">\n      <PageStatus query={query} />\n    </div>\n  );\n}\n\ninterface PageContentProps {\n  page: CustomPage;\n}\nfunction PageContent({page}: PageContentProps) {\n  const navigate = useNavigate();\n  const updatePage = useUpdateLinkPage();\n  const form = useForm<CreateCustomPagePayload>({\n    defaultValues: {\n      title: page.title,\n      slug: page.slug,\n      body: page.body,\n    },\n  });\n\n  const handleSave = (editorContent: string) => {\n    updatePage.mutate(\n      {\n        ...form.getValues(),\n        body: editorContent,\n      },\n      {\n        onSuccess: () => navigate('../..', {relative: 'path'}),\n      },\n    );\n  };\n\n  return (\n    <Suspense fallback={<FullPageLoader />}>\n      <ArticleBodyEditor initialContent={page.body}>\n        {(content, editor) => (\n          <FileUploadProvider>\n            <FormProvider {...form}>\n              <ArticleEditorStickyHeader\n                editor={editor}\n                backLink=\"../..\"\n                isLoading={updatePage.isPending}\n                onSave={handleSave}\n                allowSlugEditing={false}\n              />\n              <div className=\"mx-20\">\n                <div className=\"prose dark:prose-invert mx-auto flex-auto\">\n                  <ArticleEditorTitle />\n                  {content}\n                </div>\n              </div>\n            </FormProvider>\n          </FileUploadProvider>\n        )}\n      </ArticleBodyEditor>\n    </Suspense>\n  );\n}\n","import {Navigate, RouteObject, useRoutes} from 'react-router-dom';\nimport React from 'react';\nimport {AuthRoute} from '@common/auth/guards/auth-route';\nimport {NotFoundPage} from '@common/ui/not-found-page/not-found-page';\nimport {BelinkDashboardLayout} from './layout/belink-dasbboard-layout';\nimport {AllClicksReportPage} from './all-clicks-report-page';\nimport {LinksDatablePage} from './links/links-datatable-page/links-datatable-page';\nimport {LinkGroupsLinksDatatablePage} from './link-groups/link-group-links-datatable-page/link-group-links-datatable-page';\nimport {LinkGroupsDatatablePage} from './link-groups/link-groups-datatable-page/link-groups-datatable-page';\nimport {LinkGroupClicksReportPage} from '@app/dashboard/link-groups/link-group-clicks-report-page';\nimport {LinkClicksReportPage} from '@app/dashboard/links/link-clicks-report-page';\nimport {DomainsDatatablePage} from '@app/dashboard/custom-domains/domains-datatable-page';\nimport {TrackingPixelsDatablePage} from '@app/dashboard/tracking-pixels/tracking-pixels-datatable-page';\nimport {useActiveWorkspaceId} from '@common/workspace/active-workspace-id-context';\nimport {LinkPagesDatatablePage} from '@app/dashboard/link-pages/link-pages-datatable-page';\nimport {LinkOverlaysDatatablePage} from '@app/dashboard/link-overlays/link-overlays-datatable-page';\nimport {CreateLinkOverlayPage} from '@app/dashboard/link-overlays/crupdate/create-link-overlay-page';\nimport {UpdateLinkOverlayPage} from '@app/dashboard/link-overlays/crupdate/update-link-overlay-page';\nimport {BioLinksDatatablePage} from '@app/dashboard/biolink/biolinks-datatable-page/biolinks-datatable-page';\nimport {BiolinkClicksReportPage} from '@app/dashboard/biolink/biolink-clicks-report-page';\nimport {BiolinkEditorPage} from '@app/dashboard/biolink/biolink-editor/biolink-editor-page';\nimport {CreateLinkPage} from '@app/dashboard/link-pages/create-link-page';\nimport {EditLinkPage} from '@app/dashboard/link-pages/edit-link-page';\n\nexport const SharedDashboardRoutes = ({forCurrentUser = false}) => {\n  return [\n    // links\n    {\n      path: 'links',\n      element: <LinksDatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'links/:linkId',\n      element: <LinkClicksReportPage />,\n    },\n\n    // biolinks\n    {\n      path: 'biolinks',\n      element: <BioLinksDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'biolinks/:biolinkId',\n      element: <BiolinkClicksReportPage />,\n    },\n    {\n      path: 'biolinks/:biolinkId/edit',\n      element: <Navigate to=\"content\" replace />,\n    },\n    {\n      path: 'biolinks/:biolinkId/edit/:tabName',\n      element: <BiolinkEditorPage />,\n    },\n\n    // groups\n    {\n      path: 'link-groups',\n      element: <LinkGroupsDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'link-groups/:groupId',\n      element: <LinkGroupClicksReportPage />,\n    },\n    {\n      path: 'link-groups/:groupId/links',\n      element: <LinkGroupsLinksDatatablePage />,\n    },\n    {\n      path: 'link-groups/:groupId/links/:linkId',\n      element: <LinkClicksReportPage />,\n    },\n\n    // domains\n    {\n      path: 'custom-domains',\n      element: <DomainsDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n\n    // tracking pixels\n    {\n      path: 'pixels',\n      element: <TrackingPixelsDatablePage forCurrentUser={forCurrentUser} />,\n    },\n\n    // overlays\n    {\n      path: 'link-overlays',\n      element: <LinkOverlaysDatatablePage forCurrentUser={forCurrentUser} />,\n    },\n    {\n      path: 'link-overlays/new',\n      element: <CreateLinkOverlayPage />,\n    },\n    {\n      path: 'link-overlays/:overlayId/edit',\n      element: <UpdateLinkOverlayPage />,\n    },\n  ];\n};\n\nexport default function DashboardRoutes() {\n  const {workspaceId} = useActiveWorkspaceId();\n  const DashboardRouteConfig: RouteObject[] = [\n    {\n      path: '/',\n      element: (\n        <AuthRoute>\n          <BelinkDashboardLayout />\n        </AuthRoute>\n      ),\n      children: [\n        {index: true, element: <AllClicksReportPage />},\n\n        // link pages\n        {\n          path: 'link-pages',\n          element: <LinkPagesDatatablePage forCurrentUser={!workspaceId} />,\n        },\n        {\n          path: 'link-pages/new',\n          element: <CreateLinkPage />,\n        },\n        {\n          path: 'link-pages/:pageId/edit',\n          element: <EditLinkPage />,\n        },\n\n        ...SharedDashboardRoutes({forCurrentUser: !workspaceId}),\n      ],\n    },\n    {path: '*', element: <NotFoundPage />},\n  ];\n\n  return useRoutes(DashboardRouteConfig);\n}\n"],"file":"assets/dashboard-routes-8419527f.js"}