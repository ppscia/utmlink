import{J as x,b4 as Dn,bs as ma,$ as Ee,s as ar,j as e,c as k,Y as De,bt as ni,Z as xe,e as z,bq as ai,I as L,aC as tt,bu as ri,bv as rr,m as h,bw as _t,bx as oi,by as nt,bz as at,bA as xa,bB as ha,R as Y,bC as Ln,a7 as Es,ac as ht,aU as or,aV as ir,X as es,bD as ii,bE as li,bF as Ht,bG as hs,bH as dn,bI as un,bJ as Zs,bK as rt,bL as lr,aD as ve,bM as rs,bN as Ts,bO as fs,bP as ci,bQ as di,bR as ui,bS as mi,bT as xi,bU as hi,bV as fi,aj as ft,u as ce,aQ as cr,bW as dr,bX as ur,Q as pt,S as Bt,T as i,bY as mr,W as Vs,h as B,p as X,B as N,D as q,l as K,A as _,bZ as Ms,b_ as Pn,aq as pi,a as Fe,b8 as zn,b as E,b$ as xr,c0 as An,c1 as gi,a9 as hr,ad as He,c2 as ji,a1 as je,c3 as Ut,g as O,c4 as bi,a8 as vi,aE as Fn,a5 as I,c5 as yi,c6 as fr,a4 as Ce,L as fe,c7 as ki,z as se,a2 as os,a0 as Le,n as M,x as qt,c8 as wi,c9 as Rn,ca as Ni,cb as Ci,ap as gt,cc as Os,cd as Si,k as Q,i as ne,F as he,U as Wt,b2 as pr,b7 as Ue,w as qe,aG as Ii,an as Mn,f as G,q as U,t as Z,r as ke,G as gs,at as Kt,au as jt,ae as js,aJ as gr,ce as jr,ab as fa,cf as Di,_ as bt,bk as Li,bj as Pi,cg as We,o as ye,ch as Ie,ci as oe,cj as vt,N as Gt,ck as br,aK as is,aL as ls,aA as bs,cl as vr,cm as zi,cn as Ai,a_ as Be,v as _s,co as Fi,y as Xe,C as Ri,cp as Mi,O as _i,br as Ei,cq as yr,aR as Ti,cr as Vi,aM as ns,aN as Ke,cs as pa,ct as Oi,cu as ot,K as kr,ao as vs,M as yt,cv as wr,aH as _n,cw as Nr,cx as Cr,cy as kt,ar as En,cz as $i,cA as ys,cB as Yt,as as Te,av as ss,cC as Sr,ay as Hi,aB as Bi,cD as Ui,az as Qt,ag as qi,ah as Wi,cE as Tn,cF as Ir,cG as Ki,cH as Gi,cI as Yi,cJ as Qi,cK as Vn,cL as On,cM as Dr,cN as Zi,cO as Ji,cP as Xi,cQ as el,b0 as sl,cR as tl,cS as nl,bd as Lr,bb as al,bc as rl,bh as ol,bi as il,bg as ll,am as cl}from"./main-cdcc8bff.js";import{E as Ye,S as Zt,M as Pr,B as it,a as as}from"./Edit-0f9a2865.js";const Jt=x.createContext(null);function dl(s=!1){x.useEffect(()=>(s?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[s])}function ul({children:s,leftSidenavStatus:t,onLeftSidenavChange:n,rightSidenavStatus:a,initialRightSidenavStatus:r,onRightSidenavChange:o,name:l,leftSidenavCanBeCompact:c,height:d="h-screen",className:u,gridClassName:m="dashboard-grid",blockBodyOverflow:p=!0,...f}){dl(!p);const g=Dn("(max-width: 1024px)"),v=x.useMemo(()=>l?ma(`${l}.sidenav.compact`):!1,[l])?"compact":"open",[y,b]=Ee(t,g?"closed":v,n),w=x.useMemo(()=>{if(g)return"closed";if(r!=null)return r;const C=ma(`${l}.sidenav.right.position`,"open");return C??(r||"closed")},[g,l,r]),[S,D]=Ee(a,w,o),F=x.useCallback(C=>{D(C),ar(`${l}.sidenav.right.position`,C)},[D,l]),V=g&&(y==="open"||S==="open");return e.jsx(Jt.Provider,{value:{leftSidenavStatus:y,setLeftSidenavStatus:b,rightSidenavStatus:S,setRightSidenavStatus:F,leftSidenavCanBeCompact:c,name:l,isMobileMode:g},children:e.jsxs("div",{...f,className:k("relative isolate",m,u,d),children:[s,e.jsx(De,{children:V&&e.jsx(ni,{position:"fixed",onClick:()=>{b("closed"),F("closed")}},"dashboard-underlay")})]})})}function ml({children:s,isScrollable:t=!0}){return x.cloneElement(s,{className:k(s.props.className,t&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function xl({className:s,position:t,children:n,size:a="md",mode:r,overlayPosition:o="fixed",display:l="flex",overflow:c="overflow-hidden",forceClosed:d=!1}){const{isMobileMode:u,leftSidenavStatus:m,setLeftSidenavStatus:p,rightSidenavStatus:f,setRightSidenavStatus:g}=x.useContext(Jt),j=t==="left"?m:f,v=u||r==="overlay",y={open:{display:l,width:null},compact:{display:l,width:null},closed:{width:0,transitionEnd:{display:"none"}}},b=hl(j==="compact"?"compact":a);return e.jsx(xe.div,{variants:y,initial:!1,animate:d?"closed":j,transition:{type:"tween",duration:.15},onClick:w=>{const S=w.target;u&&(S.closest("button")||S.closest("a"))&&(p("closed"),g("closed"))},className:k(s,t==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",c,b,v&&`${o} bottom-0 top-0 z-20 shadow-2xl`,v&&t==="left"&&"left-0",v&&t==="right"&&"right-0"),children:x.cloneElement(n,{className:k(n.props.className,"w-full h-full",j==="compact"&&"compact-scrollbar"),isCompactMode:j==="compact"})})}function hl(s){switch(s){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return s||""}}const fl=z(e.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function pl({children:s,className:t,hideToggleButton:n,...a}){const{isMobileMode:r,leftSidenavStatus:o,setLeftSidenavStatus:l,name:c,leftSidenavCanBeCompact:d}=x.useContext(Jt),u=d&&!r,m=!n&&(r||d),p=()=>{l(o==="open"?"closed":"open")},f=()=>{const g=o==="compact"?"open":"compact";ar(`${c}.sidenav.compact`,g==="compact"),l(g)};return e.jsx(ai,{className:k("dashboard-grid-navbar",t),border:"border-b",size:"sm",toggleButton:m?e.jsx(L,{size:"md",onClick:()=>{u?f():p()},children:e.jsx(fl,{})}):void 0,...a,children:s})}var $=(s=>(s.Select="select",s.DateRangePicker="dateRangePicker",s.SelectModel="selectModel",s.Input="input",s.BooleanToggle="booleanToggle",s.ChipField="chipField",s.Custom="custom",s))($||{}),re=(s=>(s.eq="=",s.ne="!=",s.gt=">",s.gte=">=",s.lt="<",s.lte="<=",s.has="has",s.hasAll="hasAll",s.doesntHave="doesntHave",s.between="between",s))(re||{});const Et=["=","!=",">",">=","<","<="];function zr(s){return s.set({hour:0,minute:0,second:0,millisecond:0})}function Me(s){return s.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function gl(){var n,a,r;const s=(n=tt())==null?void 0:n.settings.dates.default_timezone,t=((r=(a=tt())==null?void 0:a.user)==null?void 0:r.timezone)||s||"auto";return!t||t==="auto"?ri():t}const ue=zr(rr(gl()));var tr,nr;const mn=((nr=(tr=tt())==null?void 0:tr.i18n)==null?void 0:nr.language)||"en",Xt=[{key:0,label:h("Today"),getRangeValue:()=>({preset:0,start:ue,end:Me(ue)})},{key:1,label:h("Yesterday"),getRangeValue:()=>({preset:1,start:ue.subtract({days:1}),end:Me(ue).subtract({days:1})})},{key:2,label:h("This week"),getRangeValue:()=>({preset:2,start:_t(ue,mn),end:oi(Me(ue),mn)})},{key:3,label:h("Last week"),getRangeValue:()=>{const s=_t(ue,mn).subtract({days:7});return{preset:3,start:s,end:s.add({days:6})}}},{key:4,label:h("Last 7 days"),getRangeValue:()=>({preset:4,start:ue.subtract({days:7}),end:Me(ue)})},{key:6,label:h("Last 30 days"),getRangeValue:()=>({preset:6,start:ue.subtract({days:30}),end:Me(ue)})},{key:7,label:h("Last 3 months"),getRangeValue:()=>({preset:7,start:ue.subtract({months:3}),end:Me(ue)})},{key:8,label:h("Last 12 months"),getRangeValue:()=>({preset:8,start:ue.subtract({months:12}),end:Me(ue)})},{key:9,label:h("This month"),getRangeValue:()=>({preset:9,start:nt(ue),end:at(Me(ue))})},{key:10,label:h("This year"),getRangeValue:()=>({preset:10,start:xa(ue),end:ha(Me(ue))})},{key:11,label:h("Last year"),getRangeValue:()=>({preset:11,start:xa(ue).subtract({years:1}),end:ha(Me(ue)).subtract({years:1})})}],$n=z(e.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Ar=Y.forwardRef((s,t)=>{const{children:n,inputProps:a,wrapperProps:r,className:o,autoFocus:l,style:c,onClick:d}=s;return e.jsx("div",{...r,onClick:d,children:e.jsx("div",{...a,role:"group",className:k(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:t,style:c,children:e.jsx(Ln,{autoFocus:l,children:n})})})}),Hn=Y.forwardRef(({inputRef:s,wrapperProps:t,children:n,onBlur:a,...r},o)=>{const l=Es(r),c=ht(o),{fieldProps:d,inputProps:u}=or({...r,focusRef:c,labelElementType:"span"});return l.wrapper=k(l.wrapper,r.disabled&&"pointer-events-none"),e.jsx(ir,{wrapperProps:es(t,{onBlur:m=>{c.current.contains(m.relatedTarget)||a==null||a(m)},onClick:()=>{const m=ii(c);m==null||m.focusFirst()}}),fieldClassNames:l,ref:c,...d,children:e.jsx(Ar,{inputProps:u,className:k(l.input,"gap-10"),ref:s,children:n})})});function jl(s){return s instanceof li?"day":"minute"}function bn(s,t,n){return t!=null&&s.compare(t)<0||n!=null&&s.compare(n)>0}function Fr(s,t){const n=Ht(),[a,r]=x.useState(!1),o=t.closeDialogOnSelection??!0,l=t.granularity||jl(s),c=t.min?hs(t.min,n):void 0,d=t.max?hs(t.max,n):void 0;return{timezone:n,granularity:l,min:c,max:d,calendarIsOpen:a,setCalendarIsOpen:r,closeDialogOnSelection:o}}function $s(){const s=Ht();return x.useMemo(()=>rr(s),[s])}function vn(s){var Re,we;const t=$s(),[n,a]=x.useState({start:(!s.value||!s.value.start)&&!((Re=s.defaultValue)!=null&&Re.start),end:(!s.value||!s.value.end)&&!((we=s.defaultValue)!=null&&we.end)}),r=s.onChange,[o,l]=Ee(s.value?hn(s.value,t):void 0,s.value?void 0:hn(s.defaultValue,t),P=>{a({start:!1,end:!1}),r==null||r(P)}),{min:c,max:d,granularity:u,timezone:m,calendarIsOpen:p,setCalendarIsOpen:f,closeDialogOnSelection:g}=Fr(o.start,s),j=x.useCallback(()=>{a({start:!0,end:!0}),l(hn(null,t)),r==null||r(null),f(!1)},[t,l,r,f]),[v,y]=x.useState(null),[b,w]=x.useState(!1),[S,D]=x.useState(o),[F,V]=x.useState(()=>ga(o,d)),C=x.useCallback(P=>{let H=P.start,ae=P.end;c&&(H=dn(H,c));const Ne=d?un(d,ae):ae;H=un(H,Ne);const us=c?dn(c,H):H;return ae=dn(ae,us),d&&(ae=un(ae,d)),{start:hs(H,m),end:hs(ae,m)}},[c,d,m]),A=x.useCallback(P=>{const H={...C(P),preset:P.preset};l(H),D(H),V(ga(H,d)),a({start:!1,end:!1})},[l,C,d]),T=x.useCallback(P=>!n.start&&Zs(P,S.start)||!n.end&&Zs(P,S.end),[S,n]),ee=x.useCallback(P=>(b||!n.start&&!n.end)&&P.compare(S.start)>=0&&P.compare(S.end)<=0,[S,n,b]),R=x.useCallback(P=>Zs(P,S.start),[S]),W=x.useCallback(P=>Zs(P,S.end),[S]),ge=x.useCallback((P,H)=>({onPointerEnter:()=>{b&&H&&D(xn({start:v,end:P,timezone:m}))},onClick:()=>{if(!b)w(!0),y(P),D(xn({start:P,end:P,timezone:m}));else{const ae=xn({start:v,end:P,timezone:m});ae.start=zr(ae.start),ae.end=Me(ae.end),w(!1),y(null),A==null||A(ae),g&&(f==null||f(!1))}}}),[v,b,A,f,g,m]);return{selectedValue:o,setSelectedValue:A,calendarIsOpen:p,setCalendarIsOpen:f,dayIsActive:T,dayIsHighlighted:ee,dayIsRangeStart:R,dayIsRangeEnd:W,getCellProps:ge,calendarDates:F,setIsPlaceholder:a,isPlaceholder:n,clear:j,setCalendarDates:V,min:c,max:d,granularity:u,timezone:m,closeDialogOnSelection:g}}function ga(s,t){let n=rt(nt(s.start)),a=rt(at(s.end));return lr(n,a)&&(a=at(a.add({months:1}))),t&&a.compare(t)>0&&(a=n,n=nt(n.subtract({months:1}))),[n,a]}function xn(s){const t=hs(s.start,s.timezone),n=hs(s.end,s.timezone);return t.compare(n)>0?{start:n,end:t}:{start:t,end:n}}function hn(s,t){return s!=null&&s.start&&(s!=null&&s.end)?s:!(s!=null&&s.start)&&(s!=null&&s.end)?(s.start=s.end.subtract({months:1}),s):!(s!=null&&s.end)&&(s!=null&&s.start)?(s.end=s.start.add({months:1}),s):{start:t,end:t.add({months:1})}}const Rr=z(e.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function bl(s,t,n,a){switch(t){case"era":case"year":case"month":case"day":return s.cycle(t,n,{round:t==="year"})}if("hour"in s)switch(t){case"dayPeriod":{const r=s.hour,o=r>=12;return s.set({hour:o?r-12:r+12})}case"hour":case"minute":case"second":return s.cycle(t,n,{round:t!=="hour",hourCycle:a.hour12?12:24})}return s}function vl(s,t,n,a){switch(t){case"day":case"month":case"year":return s.set({[t]:n})}if("hour"in s)switch(t){case"dayPeriod":{const r=s.hour,o=r>=12;return n>=12===o?s:s.set({hour:o?r-12:r+12})}case"hour":if(a.hour12){const o=s.hour>=12;!o&&n===12&&(n=0),o&&n<12&&(n+=12)}case"minute":case"second":return s.set({[t]:n})}return s}const ja={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function yl({segment:s,domProps:t,value:n,onChange:a,isPlaceholder:r,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:c}}){const d=ve(),u=x.useRef(""),{localeCode:m}=rs(),p=Ts(),f=fs({timeZone:o}),g=x.useMemo(()=>new ci(m,{maximumFractionDigits:0}),[m]),j=C=>{a(vl(n,s.type,C,f.resolvedOptions()))},v=C=>{a(bl(n,s.type,C,f.resolvedOptions()))},y=()=>{if(g.isValidPartialNumber(s.text)){const C=s.text.slice(0,-1),A=g.parse(C);if(C.length===0||A===0){const T=di(o);s.type in T&&j(T[s.type])}else j(A);u.current=C}else s.type==="dayPeriod"&&v(-1)},b=C=>{var A;if(!(C.ctrlKey||C.metaKey||C.shiftKey||C.altKey)){switch(C.key){case"ArrowLeft":C.preventDefault(),C.stopPropagation(),p==null||p.focusPrevious();break;case"ArrowRight":C.preventDefault(),C.stopPropagation(),p==null||p.focusNext();break;case"Enter":(A=C.target.closest("form"))==null||A.requestSubmit(),c(!l);break;case"Tab":break;case"Backspace":case"Delete":{C.preventDefault(),C.stopPropagation(),y();break}case"ArrowUp":C.preventDefault(),u.current="",v(1);break;case"ArrowDown":C.preventDefault(),u.current="",v(-1);break;case"PageUp":C.preventDefault(),u.current="",v(ja[s.type]||1);break;case"PageDown":C.preventDefault(),u.current="",v(-(ja[s.type]||1));break;case"Home":C.preventDefault(),u.current="",j(s.maxValue);break;case"End":C.preventDefault(),u.current="",j(s.minValue);break}F(C.key)}},w=fs({hour:"numeric",hour12:!0}),S=x.useMemo(()=>{const C=new Date;return C.setHours(0),w.formatToParts(C).find(A=>A.type==="dayPeriod").value},[w]),D=x.useMemo(()=>{const C=new Date;return C.setHours(12),w.formatToParts(C).find(A=>A.type==="dayPeriod").value},[w]),F=C=>{const A=u.current+C;switch(s.type){case"dayPeriod":if(S.toLowerCase().startsWith(C))j(0);else if(D.toLowerCase().startsWith(C))j(12);else break;p==null||p.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!g.isValidPartialNumber(A))return;let T=g.parse(A),ee=T,R=s.minValue===0;if(s.type==="hour"&&f.resolvedOptions().hour12){switch(f.resolvedOptions().hourCycle){case"h11":T>11&&(ee=g.parse(C));break;case"h12":R=!1,T>12&&(ee=g.parse(C));break}s.value>=12&&T>1&&(T+=12)}else T>s.maxValue&&(ee=g.parse(C));if(Number.isNaN(T))return;const W=ee!==0||R;W&&j(ee),+`${T}0`>s.maxValue||A.length>=String(s.maxValue).length?(u.current="",W&&(p==null||p.focusNext())):u.current=A;break}}},V=d?{}:{"aria-label":s.type,"aria-valuetext":r?void 0:`${s.value}`,"aria-valuemin":s.minValue,"aria-valuemax":s.maxValue,"aria-valuenow":r?void 0:s.value,tabIndex:0,onKeyDown:b};return e.jsx("div",{...es(t,{...V,onFocus:C=>{u.current="",C.target.scrollIntoView({block:"nearest"})},onClick:C=>{C.preventDefault(),C.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:s.text.padStart(s.minLength,"0")})}function kl({segment:s,domProps:t}){const n=Ts();return e.jsx("div",{...t,onPointerDown:a=>{a.pointerType==="mouse"&&(a.preventDefault(),n!=null&&n.focusNext({from:a.target})||n==null||n.focusPrevious({from:a.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:s.text})}function wl(s,t,n){switch(t){case"year":return{value:s.year,placeholder:"yyyy",minValue:1,maxValue:s.calendar.getYearsInEra(s)};case"month":return{value:s.month,placeholder:"mm",minValue:mi(s),maxValue:s.calendar.getMonthsInYear(s)};case"day":return{value:s.day,minValue:ui(s),maxValue:s.calendar.getDaysInMonth(s),placeholder:"dd"}}if("hour"in s)switch(t){case"dayPeriod":return{value:s.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(n.hour12){const a=s.hour>=12;return{value:s.hour,minValue:a?12:0,maxValue:a?23:11,placeholder:"--"}}return{value:s.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:s.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function lt({segmentProps:s,state:t,value:n,onChange:a,isPlaceholder:r}){const{granularity:o}=t,l=x.useMemo(()=>{const m={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(m.hour="numeric",m.minute="numeric"),m},[o]),c=fs(l),d=x.useMemo(()=>n.toDate(),[n]),u=x.useMemo(()=>c.formatToParts(d).map(m=>{const p=wl(n,m.type,c.resolvedOptions()),f=r&&m.type!=="literal"?p.placeholder:m.value;return{type:m.type,text:m.value===", "?" ":f,...p,minLength:m.type!=="literal"?String(p.maxValue).length:1}}),[d,c,r,n]);return e.jsx("div",{className:"flex items-center",children:u.map((m,p)=>m.type==="literal"?e.jsx(kl,{domProps:s,segment:m},p):e.jsx(yl,{isPlaceholder:r,domProps:s,state:t,value:n,onChange:a,segment:m},p))})}const Hs=z(e.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function Nl({date:s,currentMonth:t,state:{dayIsActive:n,dayIsHighlighted:a,dayIsRangeStart:r,dayIsRangeEnd:o,getCellProps:l,timezone:c,min:d,max:u}}){const{localeCode:m}=rs(),p=xi(s,m),f=n(s),g=a(s),j=r(s),v=o(s),y=hi(s,c),b=lr(s,t),w=bn(s,d,u);return e.jsxs("div",{role:"button","aria-disabled":w,className:k("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none",!b&&"invisible pointer-events-none"),...l(s,b),children:[e.jsx("span",{className:k("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!f&&!y&&"hover:bg-hover",f&&"bg-primary text-on-primary font-semibold",y&&!f&&"bg-chip"),children:s.day}),g&&b&&e.jsx("span",{className:k("absolute w-full h-full inset-0 bg-primary/focus",(j||p===0||s.day===1)&&"rounded-l-full",(v||p===6||s.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function Cl({startDate:s,state:t,isFirst:n,isLast:a}){const{localeCode:r}=rs(),o=fi(s,r),l=_t(s,r);return e.jsxs("div",{className:"w-280 flex-shrink-0",children:[e.jsx(Sl,{isFirst:n,isLast:a,state:t,currentMonth:s}),e.jsxs("div",{className:"block",role:"grid",children:[e.jsx(Il,{state:t,startDate:s}),[...new Array(o).keys()].map(c=>e.jsx(xe.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(d=>e.jsx(Nl,{date:l.add({weeks:c,days:d}),currentMonth:s,state:t},d))},c))]})]})}function Sl({currentMonth:s,isFirst:t,isLast:n,state:{calendarDates:a,setCalendarDates:r,timezone:o,min:l,max:c}}){const d=f=>{const g=a.length;let j;f==="forward"?j=a.map(v=>at(v.add({months:g}))):j=a.map(v=>at(v.subtract({months:g}))),r(j)},u=fs({month:"long",year:"numeric",era:s.calendar.identifier!=="gregory"?"long":void 0,calendar:s.calendar.identifier}),m=bn(s.subtract({days:1}),l,c),p=bn(nt(s.add({months:1})),l,c);return e.jsxs("div",{className:"flex items-center justify-between gap-10",children:[e.jsx(L,{size:"md",className:k("text-muted",!t&&"invisible"),disabled:!t||m,"aria-hidden":!t,onClick:()=>{d("backward")},children:e.jsx(ft,{})}),e.jsx("div",{className:"text-sm font-semibold select-none",children:u.format(s.toDate(o))}),e.jsx(L,{size:"md",className:k("text-muted",!n&&"invisible"),disabled:!n||p,"aria-hidden":!n,onClick:()=>{d("forward")},children:e.jsx(Hs,{})})]})}function Il({state:{timezone:s},startDate:t}){const{localeCode:n}=rs(),a=fs({weekday:"short"}),r=_t(t,n);return e.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const c=r.add({days:o}).toDate(s),d=a.format(c);return e.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:e.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:d})},o)})})}function Mr({state:s,visibleMonths:t=1}){return ve()&&(t=1),e.jsx(x.Fragment,{children:[...new Array(t).keys()].map(a=>{const r=rt(nt(s.calendarDates[a])),o=a===0,l=a===t-1;return e.jsx(Cl,{state:s,startDate:r,isFirst:o,isLast:l},a)})})}const Bn=x.memo(({start:s,end:t,options:n,preset:a})=>{const{dates:r}=ce(),o=Ht(),l=fs(n||cr[a||(r==null?void 0:r.format)]);if(!s||!t)return null;let c;try{c=l.formatRange(ba(s,o),ba(t,o))}catch{c=""}return e.jsx(x.Fragment,{children:c})},dr);function ba(s,t){return typeof s=="string"?ur(s,t).toDate():"toDate"in s?s.toDate(t):s}function Dl({onPresetSelected:s,selectedValue:t}){return e.jsx(pt,{children:Xt.map(n=>e.jsx(Bt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===n.key,onSelected:()=>{const a=n.getRangeValue();s(a)},children:e.jsx(i,{...n.label})},n.key))})}function _r(s){return Dn("(max-width: 1024px)",s)}const wt=Y.forwardRef((s,t)=>{const{children:n,size:a="sm",description:r,className:o,invalid:l,autoFocus:c,errorMessage:d,iconRight:u,...m}=s,p=ht(t);mr({autoFocus:c},p);const f=Ll(a),g=Es(s),j=x.useId();return e.jsxs("div",{className:k(o,"isolate"),children:[e.jsxs("label",{className:"flex select-none items-center",children:[e.jsx("input",{...m,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":r?j:void 0,ref:p,"aria-checked":m.checked,className:k(f,!l&&"checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark",l&&"checked:border-danger checked:bg-danger","relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary","before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform","checked:before:border-white","focus-visible:ring",s.disabled&&"cursor-not-allowed opacity-80")}),n&&e.jsx("span",{className:k(g.size.font,"ml-12",l&&"text-danger",s.disabled&&"text-disabled"),children:n}),u]}),r&&!d&&e.jsx("div",{id:j,className:g.description,children:r}),d&&e.jsx("div",{id:j,className:g.error,children:d})]})});function ps(s){const{field:{onChange:t,onBlur:n,value:a=!1,ref:r},fieldState:{invalid:o,error:l}}=Vs({name:s.name}),c={onChange:d=>{d.target.value&&d.target.value!=="on"?t(d.target.checked?d.target.value:!1):t(d)},onBlur:n,checked:!!a,invalid:o,errorMessage:l==null?void 0:l.message,name:s.name};return e.jsx(wt,{ref:r,...es(s,c)})}function Ll(s){switch(s){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const Er=[{key:0,label:h("Preceding period"),getRangeValue:s=>{const t=s.start,r=(s.end.toDate().getTime()-t.toDate().getTime())/(1e3*60);return{preset:0,start:t.subtract({minutes:r}),end:t}}},{key:1,label:h("Same period last year"),getRangeValue:s=>({start:s.start.subtract({years:1}),end:s.end.subtract({years:1}),preset:1})},{key:2,label:h("Custom"),getRangeValue:s=>({start:s.start.subtract({weeks:1}),end:s.end.subtract({weeks:1}),preset:2})}];function Pl({originalRangeValue:s,onPresetSelected:t,selectedValue:n}){return e.jsx(pt,{children:Er.map(a=>e.jsx(Bt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===a.key,onSelected:()=>{const r=a.getRangeValue(s);t(r)},children:e.jsx(i,{...a.label})},a.key))})}function Tr({state:s,compareState:t,showInlineDatePickerField:n=!1,compareVisibleDefault:a=!1}){const r=_r(),{close:o}=B(),l=x.useRef(s),c=s.isPlaceholder.start||s.isPlaceholder.end,[d,u]=x.useState(a),m=e.jsxs(X,{dividerTop:!0,startAction:!c&&!r?e.jsx("div",{className:"text-xs",children:e.jsx(Bn,{start:s.selectedValue.start.toDate(),end:s.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[e.jsx(N,{variant:"text",size:"xs",onClick:()=>{s.setSelectedValue(l.current.selectedValue),s.setIsPlaceholder(l.current.isPlaceholder),o()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const p=s.selectedValue;t&&d&&(p.compareStart=t.selectedValue.start,p.compareEnd=t.selectedValue.end),o(p)},children:e.jsx(i,{message:"Select"})})]});return e.jsxs(q,{size:"auto",children:[e.jsxs(K,{className:"flex",padding:"p-0",children:[!r&&e.jsxs("div",{className:"min-w-192 py-14",children:[e.jsx(Dl,{selectedValue:s.selectedValue,onPresetSelected:p=>{s.setSelectedValue(p),s.closeDialogOnSelection&&o(p)}}),!!t&&e.jsxs(x.Fragment,{children:[e.jsx(wt,{className:"mx-20 mb-10 mt-14",checked:d,onChange:p=>u(p.target.checked),children:e.jsx(i,{message:"Compare"})}),d&&e.jsx(Pl,{originalRangeValue:s.selectedValue,selectedValue:t.selectedValue,onPresetSelected:p=>{t.setSelectedValue(p)}})]})]}),e.jsx(De,{initial:!1,children:e.jsx(zl,{state:s,compareState:t,showInlineDatePickerField:n,compareVisible:d})})]}),!s.closeDialogOnSelection&&m]})}function zl({state:s,compareState:t,showInlineDatePickerField:n,compareVisible:a}){return e.jsxs(xe.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[n&&e.jsxs("div",{children:[e.jsx(va,{state:s}),!!t&&a&&e.jsx(va,{state:t,label:e.jsx(i,{message:"Compare"})})]}),e.jsx("div",{className:"flex items-start gap-36",children:e.jsx(Mr,{state:s,visibleMonths:2})})]})}function va({state:s,label:t}){const{selectedValue:n,setSelectedValue:a}=s;return e.jsxs(Hn,{className:"mb-20 mt-10",label:t,children:[e.jsx(lt,{state:s,value:n.start,onChange:r=>{a({...n,start:r})}}),e.jsx(Rr,{className:"block flex-shrink-0 text-muted",size:"md"}),e.jsx(lt,{state:s,value:n.end,onChange:r=>{a({...n,end:r})}})]})}function Al(s){var f,g;const{granularity:t,closeDialogOnSelection:n,...a}=s,r=vn(s),o=x.useRef(null),c=ve()&&t!=="day",d=e.jsx(_,{offset:8,placement:"bottom-start",isOpen:r.calendarIsOpen,onOpenChange:r.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:e.jsx(Tr,{state:r})}),u={onClick:j=>{j.stopPropagation(),j.preventDefault(),Fl(j)?r.setCalendarIsOpen(!1):r.setCalendarIsOpen(!0)}},m=r.selectedValue,p=r.setSelectedValue;return e.jsxs(x.Fragment,{children:[e.jsxs(Hn,{ref:o,wrapperProps:u,endAdornment:c?void 0:e.jsx($n,{}),...a,children:[e.jsx(lt,{isPlaceholder:(f=r.isPlaceholder)==null?void 0:f.start,state:r,segmentProps:u,value:m.start,onChange:j=>{p({start:j,end:m.end})}}),e.jsx(Rr,{className:"block flex-shrink-0 text-muted",size:"md"}),e.jsx(lt,{isPlaceholder:(g=r.isPlaceholder)==null?void 0:g.end,state:r,segmentProps:u,value:m.end,onChange:j=>{p({start:m.start,end:j})}})]}),d]})}function Fl(s){return["hour","minute","dayPeriod"].includes(s.currentTarget.ariaLabel||"")}function Rl(s){const{field:{onChange:t,onBlur:n,value:a,ref:r},fieldState:{invalid:o,error:l}}=Vs({name:s.name}),c={onChange:d=>{t(d?Vr(d):null)},onBlur:n,value:Ml(a),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:r};return e.jsx(Al,{...es(c,s)})}function Ml(s){const{start:t,end:n,preset:a}=s||{},r={preset:a};try{t&&(r.start=typeof t=="string"?Ms(t):t),n&&(r.end=typeof n=="string"?Ms(n):n)}catch{}return r}function Vr({start:s,end:t,preset:n}={}){const a={preset:n};return s&&(a.start=s.toAbsoluteString()),t&&(a.end=t.toAbsoluteString()),a}function Tt(s){var t;return{...s,defaultOperator:re.between,control:{type:$.DateRangePicker,defaultValue:((t=s.control)==null?void 0:t.defaultValue)||Vr(Xt[3].getRangeValue())}}}function ks(s){return Tt({key:"created_at",label:h("Date created"),...s})}function ws(s){return Tt({key:"updated_at",label:h("Last updated"),...s})}const Rt="filters";function _l(s){if(!s)return[];let t=[];try{t=JSON.parse(atob(decodeURIComponent(s))),t.map(n=>(n.valueKey!=null&&(n.value=n.valueKey),n))}catch{}return t}function El(s,t){return!s||(s=t?s.filter(n=>n.value!=="").map(n=>Tl(n,t)):s,s=s.filter(n=>!n.isInactive),!s.length)?"":encodeURIComponent(btoa(JSON.stringify(s)))}function Tl(s,t){var a;const n=t.find(r=>r.key===s.key);if((n==null?void 0:n.control.type)==="select"){const r=(n.control.options||[]).find(o=>o.key===s.value);if(r)return{...s,value:r.value,valueKey:r.key}}return(a=n==null?void 0:n.extraFilters)!=null&&a.length&&(s.extraFilters=n.extraFilters),s}function en(s,t){const[n]=Pn(),a=pi(),r=n.get(Rt),o=x.useMemo(()=>{if(!s)return[];const m=_l(r);return(t||[]).forEach(p=>{if(!m.find(f=>f.key===p)){const f=s.find(g=>g.key===p);m.push({key:p,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),m.sort((p,f)=>s.findIndex(g=>g.key===p.key)-s.findIndex(g=>g.key===f.key)),m},[r,t,s]),l=x.useCallback(m=>{const p=[...o];return m.forEach(f=>{const g=typeof f=="object"?f.key:f,j=p.findIndex(v=>v.key===g);j>-1&&p.splice(j,1)}),p},[o]),c=x.useCallback(m=>{const p=El(m,s);p?n.set(Rt,p):n.delete(Rt),a({search:`?${n}`},{replace:!0})},[s,a,n]),d=x.useCallback(m=>{const f=[...l(m),...m];c(f)},[l,c]),u=x.useCallback(m=>c(l([m])),[l,c]);return{add:d,remove:u,replaceAll:c,decodedFilters:o,encodedFilters:r}}const te=(s,t)=>{const n=s.split("/");return t&&n.push(t),n};function Or(s,t,n,a){return Fe({queryKey:te(s,t),queryFn:({signal:r})=>Vl(s,t,a,r),placeholderData:zn,...n})}async function Vl(s,t,n,a){t.query&&await new Promise(o=>setTimeout(o,300));const r=await E.get(s,{params:t,signal:t.query?a:void 0}).then(o=>o.data);return n==null||n(r),r}const sn=Y.createContext(null);function $r(){return x.useContext(sn)}function Vt(s){return xr()?s.metaKey:s.ctrlKey}function Ol(s){const{cellCount:t,rowCount:n}=s;return{onKeyDown:r=>{switch(r.key){case"ArrowLeft":Oe(r,{cell:{op:"decrement"}},s);break;case"ArrowRight":Oe(r,{cell:{op:"increment"}},s);break;case"ArrowUp":Oe(r,{row:{op:"decrement"}},s);break;case"ArrowDown":Oe(r,{row:{op:"increment"}},s);break;case"PageUp":Oe(r,{row:{op:"decrement",count:5}},s);break;case"PageDown":Oe(r,{row:{op:"increment",count:5}},s);break;case"Tab":$l(r);break;case"Home":Vt(r)?Oe(r,{row:{op:"decrement",count:n},cell:{op:"decrement",count:t}},s):Oe(r,{cell:{op:"decrement",count:t}},s);break;case"End":Vt(r)?Oe(r,{row:{op:"increment",count:n},cell:{op:"increment",count:t}},s):Oe(r,{cell:{op:"increment",count:t}},s);break}}}}function Oe(s,t,{cellCount:n,rowCount:a}){var j,v,y,b,w,S,D;if(((j=document.activeElement)==null?void 0:j.tagName)==="input")return;s.preventDefault();const r=s.currentTarget,o=s.target.closest("[aria-colindex]");if(!o||!r)return;const l=o.closest("[aria-rowindex]");if(!l)return;let c=parseInt(l.getAttribute("aria-rowindex")),d=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(c)||Number.isNaN(d))return;const u=((v=t.row)==null?void 0:v.count)??1;((y=t.row)==null?void 0:y.op)==="increment"?c=Math.min(a,c+u):((b=t.row)==null?void 0:b.op)==="decrement"&&(c=Math.max(1,c-u));const m=((w=t.cell)==null?void 0:w.count)??1;((S=t.cell)==null?void 0:S.op)==="increment"?d=Math.min(n,d+m):((D=t.cell)==null?void 0:D.op)==="decrement"&&(d=Math.max(1,d-m));const p=r.querySelector(`[aria-rowindex="${c}"] [aria-colindex="${d}"]`);if(!p)return;const g=An(p).nextNode()||p;o.setAttribute("tabindex","-1"),g.setAttribute("tabindex","0"),g.focus()}function $l(s){const t=s.currentTarget;if(s.shiftKey)t.focus();else{const n=An(t,{tabbable:!0});let a,r;do r=n.lastChild(),r&&(a=r);while(r);a&&!a.contains(document.activeElement)&&gi(a)}}const Qe=x.createContext(null);function Hr({index:s,isHeader:t}){const{columns:n,cellHeight:a="h-46",headerCellHeight:r="h-46"}=x.useContext(Qe),o=n[s],l=o==null?void 0:o.padding;let c="justify-start";return(o==null?void 0:o.align)==="center"?c="justify-center":(o==null?void 0:o.align)==="end"&&(c="justify-end"),k("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",t?r:a,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,c,l,o==null?void 0:o.className)}function Hl({rowIndex:s,rowIsHovered:t,index:n,item:a,id:r}){const{columns:o}=x.useContext(Qe),l=o[n],c=x.useMemo(()=>({index:s,isHovered:t,isPlaceholder:a.isPlaceholder}),[s,t,a.isPlaceholder]),d=Hr({index:n,isHeader:!1});return e.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":n+1,id:r,className:d,children:e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:l.body(a,c)})})}function Bl({onMoveStart:s,onMove:t,onMoveEnd:n,minimumMovement:a=0,preventDefault:r,stopPropagation:o=!0,onPress:l,onLongPress:c,...d}){const m=x.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:p,removeGlobalListener:f}=hr(),g=b=>{!m.el||(s==null?void 0:s(b,m.el))===!1||(m.originalTouchAction=m.el.style.touchAction,m.el.style.touchAction="none",m.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",m.started=!0)},j=b=>{var w;if(b.button===0&&m.id==null){if(m.started=!1,((w=d.onPointerDown)==null?void 0:w.call(d,b))===!1)return;o&&b.stopPropagation(),r&&b.preventDefault(),m.id=b.pointerId,m.el=b.currentTarget,m.lastPosition={x:b.clientX,y:b.clientY},c&&(m.longPressTimer=setTimeout(()=>{c(b,m.el),m.longPressTriggered=!0},400)),(s||t)&&p(window,"pointermove",v,!1),p(window,"pointerup",y,!1),p(window,"pointercancel",y,!1)}},v=b=>{if(b.pointerId===m.id){const w=b.clientX-m.lastPosition.x,S=b.clientY-m.lastPosition.y;(Math.abs(w)>=a||Math.abs(S)>=a)&&!m.started&&g(b),m.started&&(t==null||t(b,w,S),m.lastPosition={x:b.clientX,y:b.clientY})}},y=b=>{var w;if(b.pointerId===m.id){m.longPressTimer&&clearTimeout(m.longPressTimer);const S=m.longPressTriggered;m.longPressTriggered=!1,m.started&&(n==null||n(b)),m.el&&(b.type!=="pointercancel"&&((w=d.onPointerUp)==null||w.call(d,b,m.el),b.target&&m.el.contains(b.target)&&(S?c==null||c(b,m.el):l==null||l(b,m.el))),document.documentElement.style.userSelect=m.originalUserSelect||"",m.el.style.touchAction=m.originalTouchAction||""),m.id=void 0,m.started=!1,f(window,"pointermove",v,!1),f(window,"pointerup",y,!1),f(window,"pointercancel",y,!1)}};return{domProps:{onPointerDown:He(j)}}}function Ul(s){return s.shiftKey||Vt(s)}function ql({index:s,isSelected:t,isHeader:n}){const a=ji(),r=ve(),{hideBorder:o,enableSelection:l,collapseOnMobile:c,onAction:d}=x.useContext(Qe);return k("flex gap-x-16 break-inside-avoid outline-none border border-transparent",d&&"cursor-pointer",r&&c&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&s===0&&"border-t-divider",t&&!a&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",t&&a&&"bg-selected hover:bg-focus focus-visible:bg-focus",!t&&!n&&(l||d)&&"focus-visible:bg-focus hover:bg-hover")}const Wl=["button","a","input","select","textarea"];function Kl({item:s,index:t,renderAs:n,className:a,style:r}){const{selectedRows:o,columns:l,toggleRow:c,selectRow:d,onAction:u,selectRowOnContextMenu:m,enableSelection:p,selectionStyle:f,hideHeaderRow:g}=x.useContext(Qe),j=x.useRef(!1),v=o.includes(s.id),[y,b]=x.useState(!1),w=R=>R.target.closest(Wl.join(",")),S=R=>{f==="highlight"&&u&&!j.current&&!w(R)&&(R.preventDefault(),R.stopPropagation(),u(s,t))},D=!!o.length,F=R=>{w(R)||(f==="checkbox"?p&&(D||!u)?c(s):u&&u(s,t):f==="highlight"&&(j.current?p&&D?c(s):u==null||u(s,t):p&&d(s,Ul(R))))},{domProps:V}=Bl({onPointerDown:R=>{j.current=R.pointerType==="touch"},onPress:F,onLongPress:p?()=>{j.current&&c(s)}:void 0}),C=R=>{p&&R.key===" "?(R.preventDefault(),R.stopPropagation(),f==="checkbox"?c(s):d(s)):R.key==="Enter"&&!o.length&&u&&(R.preventDefault(),R.stopPropagation(),u(s,t))},A=R=>{m&&p&&(o.includes(s.id)||d(s)),j.current&&(R.preventDefault(),R.stopPropagation())},T=ql({index:t,isSelected:v}),ee=n||"div";return e.jsx(ee,{role:"row","aria-rowindex":t+1+(g?0:1),"aria-selected":v,tabIndex:-1,className:k(a,T),item:ee==="div"?void 0:s,onDoubleClick:He(S),onKeyDown:He(C),onContextMenu:He(A),onPointerEnter:He(()=>b(!0)),onPointerLeave:He(()=>b(!1)),style:r,...V,children:l.map((R,W)=>e.jsx(Hl,{rowIndex:t,rowIsHovered:y,index:W,item:s},`${s.id}-${R.key}`))})}const Gl={key:"checkbox",header:()=>e.jsx(Ql,{}),align:"center",width:"w-24 flex-shrink-0",body:(s,t)=>t.isPlaceholder?e.jsx(je,{size:"w-24 h-24",variant:"rect"}):e.jsx(Yl,{item:s})};function Yl({item:s}){const{selectedRows:t,toggleRow:n}=x.useContext(Qe);return e.jsx(Ut,{checked:t.includes(s.id),onChange:()=>n(s)})}function Ql(){const{trans:s}=O(),{data:t,selectedRows:n,onSelectionChange:a}=x.useContext(Qe),r=!!t.length&&t.length===n.length,o=!r&&!!n.length;return e.jsx(Ut,{"aria-label":s({message:"Select all"}),isIndeterminate:o,checked:r,onChange:()=>{a(r?[]:t.map(l=>l.id))}})}const Js=z(e.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Zl({index:s}){const{columns:t,sortDescriptor:n,onSortChange:a,enableSorting:r}=x.useContext(Qe),o=t[s],l=Hr({index:s,isHeader:!0}),[c,d]=x.useState(!1),u=o.sortingKey||o.key,m=o.allowsSorting&&r,{orderBy:p,orderDir:f}=n||{},g=m&&p===u;let j;g&&f==="asc"?j="ascending":g&&f==="desc"?j="descending":m&&(j="none");const v=()=>{if(!m)return;let w;g&&f==="desc"?w={orderDir:"asc",orderBy:u}:g&&f==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:u},a==null||a(w)},y=g||c,b={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return e.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":s+1,"aria-sort":j,className:k(l,"text-muted font-medium text-xs",m&&"cursor-pointer"),onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),v())},onClick:v,children:[o.hideHeader?e.jsx("div",{className:"sr-only",children:o.header()}):o.header(),e.jsx(De,{children:m&&e.jsx(xe.span,{variants:b,animate:y?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!y,children:e.jsx(Js,{size:"xs",className:k("text-muted",f==="asc"&&p===u&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Jl(){const{columns:s}=x.useContext(Qe);return e.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:s.map((t,n)=>e.jsx(Zl,{index:n},t.key))})}function Xl({className:s,columns:t,collapseOnMobile:n=!0,hideHeaderRow:a=!1,hideBorder:r=!1,data:o,selectedRows:l,defaultSelectedRows:c,onSelectionChange:d,sortDescriptor:u,onSortChange:m,enableSorting:p=!0,onDelete:f,enableSelection:g=!0,selectionStyle:j="checkbox",ariaLabelledBy:v,selectRowOnContextMenu:y,onAction:b,renderRowAs:w,tableBody:S,meta:D,tableRef:F,closeOnInteractOutside:V=!1,cellHeight:C,headerCellHeight:A,...T}){const ee=ve(),R=!!ee&&n;R&&(a=!0,r=!0);const[W,ge]=Ee(l,c||[],d),[Re,we]=Ee(u,void 0,m),P=x.useCallback(ie=>{const Pe=[...W];if(!Pe.includes(ie.id))Pe.push(ie.id);else{const zs=Pe.indexOf(ie.id);Pe.splice(zs,1)}ge(Pe)},[W,ge]),H=x.useCallback((ie,Pe)=>{let zs=[];ie&&(zs=Pe?[...W==null?void 0:W.filter(Ys=>Ys!==ie.id),ie.id]:[ie.id]),ge(zs)},[W,ge]),ae=x.useMemo(()=>{const ie=t.filter(zs=>{const Ys=zs.visibleInMode||"regular";if(Ys==="all"||Ys==="compact"&&R||Ys==="regular"&&!R)return!0});return g&&j!=="highlight"&&!ee&&ie.unshift(Gl),ie},[ee,t,g,j,R]),Ne={isCollapsedMode:R,cellHeight:C,headerCellHeight:A,hideBorder:r,hideHeaderRow:a,selectedRows:W,onSelectionChange:ge,enableSorting:p,enableSelection:g,selectionStyle:j,data:o,columns:ae,sortDescriptor:Re,onSortChange:we,toggleRow:P,selectRow:H,onAction:b,selectRowOnContextMenu:y,meta:D,collapseOnMobile:n},us=Ol({cellCount:g?ae.length+1:ae.length,rowCount:o.length+1}),da={renderRowAs:w};S?S=x.cloneElement(S,da):S=e.jsx(ec,{...da});const ua=ht(F);return bi({ref:ua,onInteractOutside:ie=>{V&&g&&(W!=null&&W.length)&&!ie.target.closest('[role="dialog"]')&&ge([])}}),e.jsx(Qe.Provider,{value:Ne,children:e.jsxs("div",{...es(T,us,{onKeyDown:ie=>{ie.key==="Escape"?(ie.preventDefault(),ie.stopPropagation(),W!=null&&W.length&&ge([])):ie.key==="Delete"?(ie.preventDefault(),ie.stopPropagation(),W!=null&&W.length&&(f==null||f(o.filter(Pe=>W==null?void 0:W.includes(Pe.id))))):Vt(ie)&&ie.key==="a"&&(ie.preventDefault(),ie.stopPropagation(),g&&ge(o.map(Pe=>Pe.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":ae.length+1,ref:ua,"aria-multiselectable":g?!0:void 0,"aria-labelledby":v,className:k(s,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!a&&e.jsx(Jl,{}),S]})})}function ec({renderRowAs:s}){const{data:t}=x.useContext(Qe);return e.jsx(x.Fragment,{children:t.map((n,a)=>e.jsx(Kl,{item:n,index:a,renderAs:s},n.id))})}const sc=15,tc=[{key:10},{key:15},{key:20},{key:50},{key:100}];function nc({query:s,onPerPageChange:t,onPageChange:n,className:a}){var d;const r=ve(),o=vi(),l=(d=s.data)==null?void 0:d.pagination;if(!l)return null;const c=t?e.jsx(Fn,{minWidth:"min-w-auto",selectionMode:"single",disabled:s.isLoading,labelPosition:"side",size:"xs",label:e.jsx(i,{message:"Items per page"}),selectedValue:l.per_page||sc,onSelectionChange:u=>t(u),children:tc.map(u=>e.jsx(I,{value:u.key,children:u.key},u.key))}):null;return e.jsxs("div",{className:k("flex h-54 select-none items-center justify-end gap-20 px-20",a),children:[!r&&c,l.from&&l.to&&"total"in l?e.jsx("div",{className:"text-sm",children:e.jsx(i,{message:":from - :to of :total",values:{from:l.from,to:l.to,total:o.format(l.total)}})}):null,e.jsxs("div",{className:"text-muted",children:[e.jsx(L,{disabled:s.isFetching||l.current_page<2,onClick:()=>{n==null||n((l==null?void 0:l.current_page)-1)},children:e.jsx(ft,{})}),e.jsx(L,{disabled:s.isFetching||!yi(l),onClick:()=>{n==null||n((l==null?void 0:l.current_page)+1)},children:e.jsx(Hs,{})})]})]})}const ac=z(e.jsx("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined"),ya={variants:{open:{height:"auto",visibility:"visible",transitionEnd:{overflow:"auto"}},closed:{height:0,overflow:"hidden",transitionEnd:{visibility:"hidden"}}},transition:{type:"tween",duration:.2}},Br=Y.forwardRef(({variant:s="default",mode:t="single",children:n,className:a,isLazy:r,...o},l)=>{const[c,d]=Ee(o.expandedValues,o.defaultExpandedValues||[],o.onExpandedChange),u=Y.Children.count(n);return e.jsx("div",{className:k(s==="outline"&&"space-y-10",a),ref:l,role:"presentation",children:e.jsx(De,{children:e.jsx(Ln,{children:Y.Children.map(n,(m,p)=>x.isValidElement(m)?x.cloneElement(m,{key:m.key||p,value:m.props.value||p,isFirst:p===0,isLast:p===u-1,mode:t,variant:s,expandedValues:c,setExpandedValues:d,isLazy:r}):null)})})})});function As(s){const{children:t,label:n,disabled:a,bodyClassName:r,labelClassName:o,buttonPadding:l="py-10 pl-14 pr-10",startIcon:c,description:d,endAppend:u,chevronPosition:m="right",isFirst:p,mode:f,isLazy:g,variant:j,footerContent:v,onHeaderMouseEnter:y,onHeaderMouseLeave:b}=s,w=s.expandedValues||[],S=s.value||0,D=s.setExpandedValues||(()=>{}),F=x.useRef(null),V=!a&&w.includes(S),C=x.useRef(!1);V&&(C.current=!0);const A=Ts(),T=x.useId(),ee=`${T}-button`,R=`${T}-panel`,W=we=>{switch(we.key){case"ArrowDown":A==null||A.focusNext();break;case"ArrowUp":A==null||A.focusPrevious();break;case"Home":A==null||A.focusFirst();break;case"End":A==null||A.focusLast();break}},ge=()=>{const we=w.indexOf(S);if(we>-1){const P=[...w];P.splice(we,1),D(P)}else D(f==="single"?[S]:[...w,S])},Re=e.jsx("div",{className:k(j==="minimal"&&""),children:e.jsx(fr,{"aria-hidden":"true",size:"md",className:k(a?"text-disabled":"text-muted",V&&"rotate-180 transition-transform")})});return e.jsxs("div",{className:k(j==="default"&&"border-b",j==="outline"&&"rounded-panel border",a&&"text-disabled"),children:[e.jsxs("h3",{className:k("flex w-full items-center justify-between text-sm",a&&"pointer-events-none",p&&j==="default"&&"border-t",V&&j!=="minimal"?"border-b":"border-b border-b-transparent",j==="outline"?V?"rounded-panel-t":"rounded-panel":void 0),onMouseEnter:y,onMouseLeave:b,children:[e.jsxs("button",{disabled:a,"aria-expanded":V,id:ee,"aria-controls":R,type:"button",ref:F,onKeyDown:W,onClick:()=>{a||ge()},className:k("flex flex-auto items-center gap-10 text-left outline-none hover:bg-hover focus-visible:bg-primary/focus",l),children:[m==="left"&&Re,c&&x.cloneElement(c,{size:"md",className:k(c.props.className,a?"text-disabled":"text-muted")}),e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis",children:[e.jsx("div",{className:o,"data-testid":"accordion-label",children:n}),d&&e.jsx("div",{className:"text-xs text-muted",children:d})]}),m==="right"&&Re]}),u&&e.jsx("div",{className:"flex-shrink-0 px-4 text-sm text-muted",children:u})]}),e.jsxs(xe.div,{"aria-labelledby":T,role:"region",variants:ya.variants,transition:ya.transition,initial:!1,animate:V?"open":"closed",children:[e.jsx("div",{className:k("p-16",r),children:!g||C?t:null}),v]})]})}function Ur({filter:s}){const{trans:t}=O();return e.jsx(Ce,{size:"sm",name:`${s.key}.value`,selectionMode:"single",showSearchField:s.control.showSearchField,placeholder:s.control.placeholder?t(s.control.placeholder):void 0,searchPlaceholder:s.control.searchPlaceholder?t(s.control.searchPlaceholder):void 0,children:s.control.options.map(n=>e.jsx(I,{value:n.key,children:e.jsx(i,{...n.label})},n.key))})}function qr({filter:s}){return e.jsx(Rl,{min:s.control.min,max:s.control.max,size:"sm",name:`${s.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Nt=x.forwardRef(({className:s,circle:t,size:n="md",src:a,link:r,label:o,fallback:l="generic",lazy:c=!0,...d},u)=>{let m=a?e.jsx("img",{ref:u,src:a,alt:o,loading:c?"lazy":void 0,className:"block h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:e.jsx(ki,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(m=e.jsx(se,{label:o,children:m}));const p={...d,className:k(s,"relative block overflow-hidden select-none flex-shrink-0",rc(n),t?"rounded-full":"rounded")};return r?e.jsx(fe,{...p,to:r,children:m}):e.jsx("div",{...p,children:m})});function rc(s){switch(s){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return s}}function oc(s,t,n){return Fe({queryKey:[s,t],queryFn:()=>ic(s,t),placeholderData:zn,...n})}async function ic(s,t){return E.get(s,{params:t}).then(n=>n.data)}function Wr(s,t,n){return Fe({queryKey:[s,t],queryFn:()=>lc(s,t),...n})}async function lc(s,t){return E.get(s,{params:t}).then(n=>n.data)}function cc({label:s,className:t,background:n,value:a,defaultValue:r="",placeholder:o=h("Select item..."),searchPlaceholder:l=h("Find an item..."),onChange:c,description:d,errorMessage:u,invalid:m,autoFocus:p,queryParams:f,endpoint:g,disabled:j,required:v}){var A;const y=x.useRef(null),[b,w]=x.useState(""),[S,D]=Ee(a,r,c),F=oc(g,{query:b,...f}),{trans:V}=O(),C=Es({size:"md"});return S?e.jsxs("div",{className:t,children:[e.jsx("div",{className:C.label,children:s}),e.jsx("div",{className:k("rounded-input border p-8",n,m&&"border-danger"),children:e.jsx(De,{initial:!1,mode:"wait",children:e.jsx(dc,{disabled:j,endpoint:g,modelId:S,queryParams:f,onEditClick:()=>{D(""),w(""),requestAnimationFrame(()=>{var T,ee;(T=y.current)==null||T.focus(),(ee=y.current)==null||ee.click()})}})})}),d&&!u&&e.jsx("div",{className:C.description,children:d}),u&&e.jsx("div",{className:C.error,children:u})]}):e.jsx(Fn,{className:t,showSearchField:!0,invalid:m,errorMessage:u,description:d,color:"white",isAsync:!0,background:n,placeholder:V(o),searchPlaceholder:V(l),label:s,isLoading:F.isFetching,items:(A=F.data)==null?void 0:A.results,inputValue:b,onInputValueChange:w,selectionMode:"single",selectedValue:S,onSelectionChange:D,ref:y,autoFocus:p,disabled:j,required:v,children:T=>e.jsx(I,{value:T.id,description:T.description,startIcon:e.jsx(Nt,{src:T.image}),children:T.name},T.id)})}function dc({modelId:s,onEditClick:t,endpoint:n,disabled:a,queryParams:r}){const{data:o,isLoading:l}=Wr(`${n}/${s}`,r);return l||!(o!=null&&o.model)?e.jsx(uc,{},"skeleton"):e.jsxs(xe.div,{className:k("flex items-center gap-10",a&&"pointer-events-none cursor-not-allowed text-disabled"),...Le,children:[o.model.image&&e.jsx(Nt,{src:o.model.image}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm leading-4",children:o.model.name}),e.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),e.jsx(se,{label:e.jsx(i,{message:"Change item"}),children:e.jsx(L,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:a,children:e.jsx(Ye,{})})})]},"preview")}function uc(){return e.jsxs(xe.div,{className:"flex items-center gap-10",...Le,children:[e.jsx(je,{variant:"rect",size:"w-32 h-32"}),e.jsxs("div",{className:"max-h-[36px] flex-auto",children:[e.jsx(je,{className:"text-xs"}),e.jsx(je,{className:"max-h-8 text-xs"})]}),e.jsx(je,{variant:"icon",size:"w-24 h-24"})]})}function mc({name:s,...t}){const{clearErrors:n}=os(),{field:{onChange:a,value:r=""},fieldState:{invalid:o,error:l}}=Vs({name:s});return e.jsx(cc,{value:r,onChange:c=>{a(c),n(s)},invalid:o,errorMessage:l==null?void 0:l.message,...t})}function Kr({filter:s}){return e.jsx(mc,{name:`${s.key}.value`,endpoint:`normalized-models/${s.control.model}`})}const Gr={"=":h("is"),"!=":h("is not"),">":h("is greater than"),">=":h("is greater than or equal to"),"<":h("is less than"),"<=":h("is less than or equal to"),has:h("Include"),doesntHave:h("Do not include"),between:h("Is between"),hasAll:h("Include all")};function Yr({filter:s}){var n;const t=s.control;return e.jsxs(x.Fragment,{children:[e.jsx(Ce,{selectionMode:"single",name:`${s.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(n=s.operators)==null?void 0:n.map(a=>e.jsx(I,{value:a,children:e.jsx(i,{...Gr[a]})},a))}),e.jsx(M,{size:"sm",name:`${s.key}.value`,type:s.control.inputType,min:"minValue"in t?t.minValue:void 0,max:"maxValue"in t?t.maxValue:void 0,minLength:"minLength"in t?t.minLength:void 0,maxLength:"maxLength"in t?t.maxLength:void 0,required:!0})]})}function xc({filter:s}){return null}function hc({className:s,children:t,size:n,color:a,radius:r,selectable:o,wrap:l=!0}){return e.jsx("div",{className:k("flex items-center gap-8",l&&"flex-wrap",s),children:x.Children.map(t,c=>{if(x.isValidElement(c))return x.cloneElement(c,{size:n,color:a,selectable:o,radius:r})})})}function yn(s){return{id:s,name:`${s}`,description:`${s}`}}function fc(s,t){const n=x.useRef(null),a=ht(t),{displayWith:r=Ne=>Ne.name,validateWith:o,children:l,suggestions:c,isLoading:d,inputValue:u,onInputValueChange:m,onItemSelected:p,placeholder:f,onOpenChange:g,chipSize:j="sm",openMenuOnFocus:v=!0,showEmptyMessage:y,value:b,defaultValue:w,onChange:S,valueKey:D,isAsync:F,allowCustomValue:V=!0,showDropdownArrow:C,onChipClick:A,...T}=s,ee=Es({...s,flexibleHeight:!0}),[R,W]=jc(s),[ge,Re]=x.useState(!1),we=e.jsx(gt,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),P=C?e.jsx(Os,{}):null,{fieldProps:H,inputProps:ae}=or({...T,focusRef:a,endAdornment:d&&ge?we:P});return e.jsx(ir,{fieldClassNames:ee,...H,children:e.jsxs(Ar,{ref:n,className:k("flex flex-wrap items-center",ee.input),onClick:()=>{var Ne;(Ne=a.current)==null||Ne.focus()},children:[e.jsx(pc,{displayChipUsing:r,onChipClick:A,items:R,setItems:W,chipSize:j}),e.jsx(gc,{size:s.size,showEmptyMessage:y,inputProps:ae,inputValue:u,onInputValueChange:m,fieldRef:n,inputRef:a,chips:R,setChips:W,validateWith:o,isLoading:d,suggestions:c,placeholder:f,openMenuOnFocus:v,listboxIsOpen:ge,setListboxIsOpen:Re,allowCustomValue:V,children:l})]})})}function pc({items:s,setItems:t,displayChipUsing:n,chipSize:a,onChipClick:r}){const o=Ts(),l=x.useCallback(c=>{const d=s.findIndex(m=>m.id===c),u=[...s];return d>-1&&(u.splice(d,1),t(u)),u},[s,t]);return e.jsx(hc,{className:k("max-w-full flex-shrink-0 flex-wrap",a==="xs"?"my-6":"my-8"),size:a,selectable:!0,children:s.map(c=>e.jsx(qt,{errorMessage:c.errorMessage,adornment:c.image?e.jsx(Nt,{circle:!0,src:c.image}):null,onClick:()=>r==null?void 0:r(c),onRemove:()=>{l(c.id).length?o==null||o.focusPrevious({tabbable:!0}):o==null||o.focusLast()},children:n(c)},c.id))})}function gc(s){const{inputRef:t,fieldRef:n,validateWith:a,setChips:r,chips:o,suggestions:l,inputProps:c,placeholder:d,openMenuOnFocus:u,listboxIsOpen:m,setListboxIsOpen:p,allowCustomValue:f,isLoading:g,size:j}=s,v=Ts(),y=x.useCallback(P=>{P=(P||[]).filter(H=>{const ae=!H||!H.id||!H.name;return!(o.findIndex(us=>us.id===(H==null?void 0:H.id))>-1)&&!ae}),P.length&&(a&&(P=P.map(H=>a(H))),r([...o,...P]))},[o,r,a]),b=wi({...s,clearInputOnItemSelection:!0,isOpen:m,onOpenChange:p,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:P=>{W(P)}}),{state:{activeIndex:w,setActiveIndex:S,isOpen:D,setIsOpen:F,inputValue:V,setInputValue:C},refs:A,listboxId:T,collection:ee,onInputChange:R}=b,W=P=>{const H=ee.size&&w!=null?[...ee.values()][w]:null;H!=null&&H.item?y([H.item]):f&&y([yn(H?H.value:P)]),C(""),S(null),F(!1)};Rn(()=>{n.current&&A.reference.current!==n.current&&b.reference(n.current)},[n,b,A]);const{handleTriggerKeyDown:ge,handleListboxKeyboardNavigation:Re}=Si(b),we=He(()=>{u&&!D&&F(!0)});return e.jsx(Ni,{listbox:b,mobileOverlay:Ci,isLoading:g,onPointerDown:P=>{P.preventDefault()},children:e.jsx("input",{type:"text",className:k("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",j==="xs"?"h-20":"h-30"),placeholder:d,...es(c,{ref:t,value:V,onChange:R,onPaste:P=>{const ae=P.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(ae){P.preventDefault();const Ne=window.getSelection();Ne!=null&&Ne.rangeCount&&(Ne.deleteFromDocument(),y(ae.map(us=>yn(us))))}},"aria-autocomplete":"list","aria-controls":D?T:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:P=>{const H=P.target;if(P.key==="Enter"){P.preventDefault(),W(H.value);return}if(P.key==="Escape"&&D&&(F(!1),C("")),P.key==="ArrowUp"&&D&&(w===0||w==null)){S(null);return}if(w!=null&&(P.key==="ArrowLeft"||P.key==="ArrowRight")){P.preventDefault();return}if((P.key==="ArrowLeft"||P.key==="Backspace"||P.key==="Delete")&&H.selectionStart===0&&w==null&&o.length){v==null||v.focusPrevious({tabbable:!0});return}ge(P)||Re(P)},onFocus:we,onClick:we})})})}function jc({onChange:s,value:t,defaultValue:n,valueKey:a}){const r=x.useMemo(()=>ka(t),[t]),o=x.useMemo(()=>ka(n),[n]),l=x.useCallback(c=>{const d=a?c.map(u=>u[a]):c;s==null||s(d)},[s,a]);return Ee(r||void 0,o||[],l)}function ka(s){if(s!=null)return s.map(t=>typeof t!="object"?yn(t):t)}const Qr=Y.forwardRef(fc);function tn({children:s,...t}){const{field:{onChange:n,onBlur:a,value:r=[],ref:o},fieldState:{invalid:l,error:c}}=Vs({name:t.name}),d={onChange:n,onBlur:a,value:r,invalid:l,errorMessage:c==null?void 0:c.message};return e.jsx(Qr,{ref:o,...es(d,t),children:s})}function Zr({filter:s}){const{trans:t}=O();return e.jsx(tn,{size:"sm",name:`${s.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:s.control.placeholder?t(s.control.placeholder):void 0,displayWith:n=>{var a;return(a=s.control.options.find(r=>r.key===n.id))==null?void 0:a.label.message},suggestions:s.control.options.map(n=>({id:n.key,name:n.label.message})),children:n=>e.jsx(I,{value:n.id,children:e.jsx(i,{message:n.name})},n.id)})}function bc({filters:s}){const{decodedFilters:t}=en(s),{formId:n}=B(),[a,r]=x.useState(()=>t.map(c=>c.key)),o=e.jsx(N,{size:"xs",variant:"outline",className:"mr-auto",onClick:()=>{r([])},children:e.jsx(i,{message:"Clear"})}),l=e.jsx(N,{size:"xs",variant:"flat",color:"primary",className:"ml-auto",type:"submit",form:n,children:e.jsx(i,{message:"Apply"})});return e.jsxs(q,{className:"min-w-[300px]",maxWidth:"max-w-400",size:"auto",children:[e.jsx(Q,{padding:"px-14 py-10",leftAdornment:o,rightAdornment:l,children:e.jsx(i,{message:"Filter"})}),e.jsx(K,{padding:"p-0",children:e.jsx(vc,{filters:s,expandedFilters:a,setExpandedFilters:r})})]})}function vc({filters:s,expandedFilters:t,setExpandedFilters:n}){const{decodedFilters:a,replaceAll:r}=en(s),o={};s.forEach(u=>{const m=a.find(p=>p.key===u.key);o[u.key]=(m==null?void 0:m.value)!==void 0?m:{value:u.control.defaultValue,operator:u.defaultOperator}});const l=ne({defaultValues:o}),{formId:c,close:d}=B();return e.jsx(he,{form:l,id:c,onSubmit:u=>{const m=Object.entries(u).filter(([p,f])=>t.includes(p)&&f!==void 0).map(([p,f])=>({key:p,...f}));r(m),d()},children:e.jsx(Br,{mode:"multiple",expandedValues:t,onExpandedChange:n,children:s.map(u=>e.jsxs(As,{startIcon:e.jsx(Ut,{checked:t.includes(u.key)}),value:u.key,label:e.jsx(i,{...u.label}),bodyClassName:"max-h-288 overflow-y-auto compact-scrollbar",children:[u.description&&e.jsx("div",{className:k("text-xs text-muted",u.control.type!==$.BooleanToggle&&"mb-14"),children:e.jsx(i,{...u.description})}),e.jsx(yc,{filter:u})]},u.key))})})}function yc({filter:s}){switch(s.control.type){case $.Select:return e.jsx(Ur,{filter:s});case $.ChipField:return e.jsx(Zr,{filter:s});case $.DateRangePicker:return e.jsx(qr,{filter:s});case $.SelectModel:return e.jsx(Kr,{filter:s});case $.Input:return e.jsx(Yr,{filter:s});case $.BooleanToggle:return e.jsx(xc,{filter:s});case"custom":const t=s.control.panel;return e.jsx(t,{filter:s});default:return null}}function kc({filters:s,icon:t=e.jsx(ac,{}),color:n="primary",variant:a="outline",size:r="sm",disabled:o,className:l}){const c=ve(),d=e.jsx(N,{variant:a,color:n,startIcon:t,disabled:o,size:r,className:l,children:e.jsx(i,{message:"Filter"})}),u=e.jsx(L,{color:n,size:"sm",variant:a,disabled:o,className:l,children:t});return e.jsxs(_,{type:"popover",children:[c?u:d,e.jsx(bc,{filters:s})]})}function wc({actions:s,filters:t,filtersLoading:n,searchPlaceholder:a=h("Type to search..."),searchValue:r="",onSearchChange:o}){const{trans:l}=O();return e.jsxs(Jr,{children:[e.jsx(Wt,{size:"sm",className:"mr-auto min-w-180 max-w-440 flex-auto",inputWrapperClassName:"mr-24 md:mr-0",placeholder:l(a),startAdornment:e.jsx(pr,{size:"sm"}),value:r,onChange:c=>{o(c.target.value)}}),t&&e.jsx(kc,{filters:t,disabled:n}),s]})}function Jr({children:s,...t}){return e.jsx("div",{className:"hidden-scrollbar relative mb-24 flex h-42 items-center gap-8 overflow-x-auto text-muted md:gap-12",...t,children:s})}const Xr=x.forwardRef((s,t)=>{const{isInactive:n,filter:a,...r}=s;return n?e.jsx(Nc,{filter:a,...r,ref:t}):e.jsx(Cc,{filter:a,...r,ref:t})}),Nc=x.forwardRef(({filter:s,...t},n)=>e.jsx(N,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:n,endIcon:e.jsx(Os,{}),...t,children:e.jsx(i,{...s.label})})),Cc=x.forwardRef(({filter:s,children:t,...n},a)=>{const r=s.control.type===$.BooleanToggle;return e.jsxs(N,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!r&&e.jsx(Os,{}),ref:a,...n,children:[e.jsx("span",{className:k(!r&&"border-r border-r-primary-light mr-8 pr-8"),children:e.jsx(i,{...s.label})}),t]})});function Ct(s){const{onValueChange:t,isInactive:n,filter:a,label:r}=s;return e.jsxs(_,{offset:10,type:"popover",onClose:o=>{o!==void 0&&t(o)},children:[e.jsx(Xr,{isInactive:n,filter:a,children:r}),e.jsx(Sc,{...s})]})}function Sc({filter:s,panel:t,value:n,operator:a}){const r=ne({defaultValues:{[s.key]:{value:n,operator:a}}}),{close:o,formId:l}=B();return e.jsxs(q,{size:"xs",children:[e.jsx(Q,{children:e.jsx(i,{...s.label})}),e.jsx(K,{padding:"px-14 pt-14 pb-4 max-h-288",children:e.jsxs(he,{form:r,id:l,onSubmit:c=>{o(c[s.key])},children:[s.description&&e.jsx("div",{className:"text-muted text-xs mb-14",children:e.jsx(i,{...s.description})}),t]})}),e.jsx(X,{children:e.jsx(N,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:e.jsx(i,{message:"Apply"})})})]})}function Ic(s){switch(s.filter.control.type){case $.DateRangePicker:return e.jsx(Dc,{...s});case $.BooleanToggle:return e.jsx(Lc,{...s});case $.Select:return e.jsx(Pc,{...s});case $.ChipField:return e.jsx(zc,{...s});case $.Input:return e.jsx(Fc,{...s});case $.SelectModel:return e.jsx(Rc,{...s});case $.Custom:const t=s.filter.control.listItem;return e.jsx(t,{...s});default:return null}}function Dc(s){const{value:t,filter:n}=s;let a;return t.preset!==void 0?a=e.jsx(i,{...Xt[t.preset].label}):a=e.jsx(Bn,{start:new Date(t.start),end:new Date(t.end),options:{dateStyle:"medium"}}),e.jsx(Ct,{...s,label:a,panel:e.jsx(qr,{filter:n})})}function Lc({filter:s,isInactive:t,onValueChange:n}){return e.jsx(Xr,{onClick:()=>{n({value:s.control.defaultValue})},filter:s,isInactive:t})}function Pc(s){const{filter:t,value:n}=s,a=t.control.options.find(r=>r.key===n);return e.jsx(Ct,{...s,label:a?e.jsx(i,{...a.label}):null,panel:e.jsx(Ur,{filter:t})})}function zc(s){return e.jsx(Ct,{...s,label:e.jsx(Ac,{...s}),panel:e.jsx(Zr,{filter:s.filter})})}function Ac(s){const{trans:t}=O(),{filter:n,value:a}=s,r=a.map(d=>n.control.options.find(u=>u.key===d)),o=3,l=a.length-o,c=e.jsx(x.Fragment,{children:r.filter(Boolean).slice(0,o).map((d,u)=>{let m="";return u!==0&&(m+=", "),m+=t(d.label),m})});return l>0?e.jsx(i,{message:":names + :count more",values:{names:c,count:l}}):c}function Fc(s){const{filter:t,value:n,operator:a}=s,r=a?e.jsx(i,{...Gr[a]}):null,o=t.control.inputType==="number"?e.jsx(Ue,{value:n}):n;return e.jsx(Ct,{...s,label:e.jsxs(x.Fragment,{children:[r," ",o]}),panel:e.jsx(Yr,{filter:t})})}function Rc(s){const{value:t,filter:n}=s,{isLoading:a,data:r}=Wr(`normalized-models/${n.control.model}/${t}`,void 0,{enabled:!!t}),o=e.jsxs(x.Fragment,{children:[e.jsx(je,{variant:"avatar",size:"w-18 h-18 mr-6"}),e.jsx(je,{variant:"rect",size:"w-50"})]}),l=e.jsxs(x.Fragment,{children:[e.jsx(Nt,{size:"xs",src:r==null?void 0:r.model.image,className:"mr-6"}),r==null?void 0:r.model.name]}),c=a||!r?o:l;return e.jsx(Ct,{...s,label:c,panel:e.jsx(Kr,{filter:n})})}function Mc({filters:s,pinnedFilters:t,className:n}){const{decodedFilters:a,remove:r,replaceAll:o}=en(s,t);return a.length?e.jsx("div",{className:k("flex items-center gap-6 overflow-x-auto",n),children:a.map((l,c)=>{const d=s.find(m=>m.key===l.key);if(!d)return null;const u=m=>{const p=[...a];p.splice(c,1,{key:d.key,value:m.value,isInactive:!1,operator:m.operator||d.defaultOperator}),o(p)};return e.jsxs("div",{children:[!l.isInactive&&e.jsx(L,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{r(l.key)},children:e.jsx(qe,{})}),e.jsx(Ic,{filter:d,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:u})]},l.key)})}):null}function _c({actions:s,selectedItemsCount:t}){return e.jsxs(Jr,{"data-testid":"datatable-selected-header",children:[e.jsx("div",{className:"mr-auto",children:e.jsx(i,{message:"[one 1 item|other :count items] selected",values:{count:t}})}),s]})}function Ec(){return e.jsxs(xe.div,{className:"flex items-center gap-6 h-30",...Le,children:[e.jsx(je,{variant:"rect",size:"h-full w-144",radius:"rounded-md"}),e.jsx(je,{variant:"rect",size:"h-full w-112",radius:"rounded-md"}),e.jsx(je,{variant:"rect",size:"h-full w-172",radius:"rounded-md"})]},"filter-list-skeleton")}function eo({filters:s,filtersLoading:t,columns:n,searchPlaceholder:a,queryParams:r,endpoint:o,actions:l,selectedActions:c,emptyStateMessage:d,tableDomProps:u,onRowAction:m,enableSelection:p=!0,selectionStyle:f="checkbox",children:g,cellHeight:j,collapseTableOnMobile:v=!0}){var ee;const y=ve(),{trans:b}=O(),{encodedFilters:w}=en(s),[S,D]=x.useState({perPage:15}),[F,V]=x.useState([]),C=Or(o,{...S,...r,[Rt]:w},void 0,()=>V([])),A=!!(S.query||S.filters||w),T=(ee=C.data)==null?void 0:ee.pagination;return e.jsxs(sn.Provider,{value:{selectedRows:F,setSelectedRows:V,endpoint:o,params:S,setParams:D,query:C},children:[g,e.jsx(De,{initial:!1,mode:"wait",children:F.length?e.jsx(_c,{selectedItemsCount:F.length,actions:c},"selected"):e.jsx(wc,{searchPlaceholder:a,searchValue:S.query,onSearchChange:R=>D({...S,query:R}),actions:l,filters:s,filtersLoading:t},"default")}),s&&e.jsx("div",{className:"mb-14",children:e.jsx(De,{initial:!1,mode:"wait",children:t&&w?e.jsx(Ec,{}):e.jsx(xe.div,{...Le,children:e.jsx(Mc,{filters:s})},"filter-list")})}),e.jsxs("div",{className:k("relative rounded-panel",(!y||!v)&&"border"),children:[C.isFetching&&e.jsx(Ii,{isIndeterminate:!0,className:"absolute left-0 top-0 z-10 w-full","aria-label":b({message:"Loading"}),size:"xs"}),e.jsx("div",{className:"relative overflow-x-auto md:overflow-hidden",children:e.jsx(Xl,{...u,columns:n,data:(T==null?void 0:T.data)||[],sortDescriptor:S,onSortChange:R=>{D({...S,...R})},selectedRows:F,enableSelection:p,selectionStyle:f,onSelectionChange:V,onAction:m,collapseOnMobile:v,cellHeight:j})}),(C.isFetched||C.isPlaceholderData)&&!(T!=null&&T.data.length)?e.jsx("div",{className:"pt-50",children:x.cloneElement(d,{isFiltering:A})}):void 0,e.jsx(nc,{query:C,onPageChange:R=>D({...S,page:R}),onPerPageChange:R=>D({...S,perPage:R})})]})]})}function Ns({title:s,headerContent:t,headerItemsAlign:n="items-end",className:a,padding:r,...o}){const l=x.useId();return e.jsxs("div",{className:k(r??"p-12 md:p-24",a),children:[s&&e.jsxs("div",{className:k("mb-16",t&&`flex ${n} gap-4`),children:[e.jsx(Mn,{children:s}),e.jsx("h1",{className:"text-3xl font-light first:capitalize",id:l,children:s}),t]}),e.jsx(eo,{...o,tableDomProps:{"aria-labelledby":s?l:void 0}})]})}function Tc(){const{endpoint:s,selectedRows:t,setSelectedRows:n}=$r();return G({mutationFn:()=>Vc(s,t),onSuccess:async()=>{await U.invalidateQueries({queryKey:te(s)}),Z(h("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),n([])},onError:a=>ke(a,h("Could not delete records"))})}function Vc(s,t){return E.delete(`${s}/${t.join(",")}`).then(n=>n.data)}function Cs(){return e.jsxs(_,{type:"modal",children:[e.jsx(N,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(i,{message:"Delete"})}),e.jsx(Oc,{})]})}function Oc(){const s=Tc(),{selectedRows:t}=$r(),{close:n}=B();return e.jsx(gs,{isLoading:s.isPending,title:e.jsx(i,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:e.jsx(i,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(i,{message:"Delete"}),isDanger:!0,onConfirm:()=>{s.mutate(void 0,{onSuccess:()=>n()})}})}function cs({isFiltering:s,title:t,filteringTitle:n,image:a,size:r,className:o}){const l=ve();return r||(r=l?"sm":"md"),e.jsx(Kt,{className:o,size:r,image:e.jsx(jt,{src:a}),title:s&&n?n:t,description:s&&n?e.jsx(i,{message:"Try another search query or different filters"}):void 0})}const ct=z(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),ds=Y.forwardRef(({children:s,to:t,elementType:n,onClick:a,href:r,download:o,icon:l,disabled:c},d)=>ve()?e.jsx(L,{ref:d,variant:"flat",color:"primary",className:"flex-shrink-0",size:"sm",to:t,href:r,download:o,elementType:n,onClick:a,disabled:c,children:l||e.jsx(ct,{})}):e.jsx(N,{ref:d,startIcon:l||e.jsx(ct,{}),variant:"flat",color:"primary",size:"sm",to:t,href:r,download:o,elementType:n,onClick:a,disabled:c,children:s})),$c=z(e.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Un(s){return G({mutationFn:t=>Hc(s,t),onError:t=>ke(t)})}function Hc(s,t){return E.post(s,t).then(n=>n.data)}function qn(s,t){const n=document.createElement("a");n.href=s,t&&(n.download=t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Wn(){const{close:s}=B();return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Csv export"})}),e.jsx(K,{children:e.jsx(i,{message:`Your request is being processed. We'll email you when the report is ready to download. In
            certain cases, it might take a little longer, depending on the number of items beings
            exported and the volume of activity.`})}),e.jsx(X,{children:e.jsx(N,{variant:"flat",color:"primary",onClick:s,children:e.jsx(i,{message:"Got it"})})})]})}function Bc({endpoint:s,payload:t}){const[n,a]=x.useState(!1),r=Un(s);return e.jsxs(x.Fragment,{children:[e.jsx(L,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",disabled:r.isPending,onClick:()=>{r.mutate(t,{onSuccess:o=>{o.downloadPath?qn(o.downloadPath):a(!0)}})},children:e.jsx($c,{})}),e.jsx(_,{type:"modal",isOpen:n,onOpenChange:a,children:e.jsx(Wn,{})})]})}function Ss({image:s,label:t,description:n,labelClassName:a,avatarSize:r="md"}){return e.jsxs("div",{className:"flex items-center gap-12",children:[s&&e.jsx(Nt,{size:r,className:"flex-shrink-0",src:s}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:k(a,"overflow-hidden overflow-ellipsis"),children:t}),n&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis text-xs text-muted",children:n})]})]})}function Uc(s){const t=$s(),[n,a]=x.useState(!s.value&&!s.defaultValue),r=s.onChange,[o,l]=Ee(s.value||t,s.defaultValue||t,D=>{a(!1),r==null||r(D)}),{min:c,max:d,granularity:u,timezone:m,calendarIsOpen:p,setCalendarIsOpen:f,closeDialogOnSelection:g}=Fr(o,s),j=x.useCallback(()=>{a(!0),l(t),r==null||r(null),f(!1)},[t,l,r,f]),[v,y]=x.useState(()=>[rt(o)]),b=x.useCallback(D=>{c&&D.compare(c)<0?D=c:d&&D.compare(d)>0&&(D=d);const F=o?o.set(D):hs(D,m);l(F),y([rt(F)]),a(!1)},[l,c,d,o,m]),w=x.useCallback(D=>!n&&Zs(o,D),[o,n]),S=x.useCallback(D=>({onClick:()=>{b==null||b(D),g&&(f==null||f(!1))}}),[b,f,g]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:p,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:S,calendarDates:v,setCalendarDates:y,isPlaceholder:n,clear:j,setIsPlaceholder:a,min:c,max:d,granularity:u,timezone:m,closeDialogOnSelection:g}}function qc({showCalendarFooter:s,...t}){const n=Uc(t),a=x.useRef(null),r=$s(),o=s&&e.jsx(X,{padding:"px-14 pb-14",startAction:e.jsx(N,{disabled:n.isPlaceholder,variant:"text",color:"primary",onClick:()=>{n.clear()},children:e.jsx(i,{message:"Clear"})}),children:e.jsx(N,{variant:"text",color:"primary",onClick:()=>{n.setSelectedValue(r),n.setCalendarIsOpen(!1)},children:e.jsx(i,{message:"Today"})})}),l=e.jsx(_,{offset:8,placement:"bottom-start",isOpen:n.calendarIsOpen,onOpenChange:n.setCalendarIsOpen,type:"popover",triggerRef:a,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:e.jsxs(q,{size:"auto",children:[e.jsx(K,{className:"flex items-start gap-40",padding:s?"px-24 pt-20 pb-10":null,children:e.jsx(Mr,{state:n,visibleMonths:1})}),o]})}),c={onClick:d=>{d.stopPropagation(),d.preventDefault(),Wc(d)?n.setCalendarIsOpen(!1):n.setCalendarIsOpen(!0)}};return e.jsxs(x.Fragment,{children:[e.jsx(Hn,{ref:a,wrapperProps:c,endAdornment:e.jsx($n,{className:k(t.disabled&&"text-disabled")}),...t,children:e.jsx(lt,{segmentProps:c,state:n,value:n.selectedValue,onChange:n.setSelectedValue,isPlaceholder:n.isPlaceholder})}),l]})}function dt(s){const{min:t,max:n}=s,{trans:a}=O(),{format:r}=fs(),{field:{onChange:o,onBlur:l,value:c=null,ref:d},fieldState:{invalid:u,error:m}}=Vs({name:s.name,rules:{validate:g=>{if(!g)return;const j=Ms(g);if(t&&j.compare(t)<0)return a({message:"Enter a date after :date",values:{date:r(g)}});if(n&&j.compare(n)>0)return a({message:"Enter a date before :date",values:{date:r(g)}})}}}),p=c?Ms(c):null,f={onChange:g=>{o(g&&g.toAbsoluteString())},onBlur:l,value:p,invalid:u,errorMessage:m==null?void 0:m.message,inputRef:d};return e.jsx(qc,{...es(f,s)})}function Wc(s){return["hour","minute","dayPeriod"].includes(s.currentTarget.ariaLabel||"")}function Kc(s,t){return s.reduce((n,a,r)=>{const o=Math.floor(r/t);return n[o]||(n[o]=[]),n[o].push(a),n},[])}const so=z(e.jsx("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"}));function Bs(){return(Bs=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s}).apply(this,arguments)}function nn(s,t){if(s==null)return{};var n,a,r={},o=Object.keys(s);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=s[n]);return r}function ut(s){var t=x.useRef(s),n=x.useRef(function(a){t.current&&t.current(a)});return t.current=s,n.current}var mt=function(s,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),s>n?n:s<t?t:s},Xs=function(s){return"touches"in s},kn=function(s){return s&&s.ownerDocument.defaultView||self},wa=function(s,t,n){var a=s.getBoundingClientRect(),r=Xs(t)?function(o,l){for(var c=0;c<o.length;c++)if(o[c].identifier===l)return o[c];return o[0]}(t.touches,n):t;return{left:mt((r.pageX-(a.left+kn(s).pageXOffset))/a.width),top:mt((r.pageY-(a.top+kn(s).pageYOffset))/a.height)}},Na=function(s){!Xs(s)&&s.preventDefault()},to=Y.memo(function(s){var t=s.onMove,n=s.onKey,a=nn(s,["onMove","onKey"]),r=x.useRef(null),o=ut(t),l=ut(n),c=x.useRef(null),d=x.useRef(!1),u=x.useMemo(function(){var g=function(y){Na(y),(Xs(y)?y.touches.length>0:y.buttons>0)&&r.current?o(wa(r.current,y,c.current)):v(!1)},j=function(){return v(!1)};function v(y){var b=d.current,w=kn(r.current),S=y?w.addEventListener:w.removeEventListener;S(b?"touchmove":"mousemove",g),S(b?"touchend":"mouseup",j)}return[function(y){var b=y.nativeEvent,w=r.current;if(w&&(Na(b),!function(D,F){return F&&!Xs(D)}(b,d.current)&&w)){if(Xs(b)){d.current=!0;var S=b.changedTouches||[];S.length&&(c.current=S[0].identifier)}w.focus(),o(wa(w,b,c.current)),v(!0)}},function(y){var b=y.which||y.keyCode;b<37||b>40||(y.preventDefault(),l({left:b===39?.05:b===37?-.05:0,top:b===40?.05:b===38?-.05:0}))},v]},[l,o]),m=u[0],p=u[1],f=u[2];return x.useEffect(function(){return f},[f]),Y.createElement("div",Bs({},a,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:r,onKeyDown:p,tabIndex:0,role:"slider"}))}),Kn=function(s){return s.filter(Boolean).join(" ")},no=function(s){var t=s.color,n=s.left,a=s.top,r=a===void 0?.5:a,o=Kn(["react-colorful__pointer",s.className]);return Y.createElement("div",{className:o,style:{top:100*r+"%",left:100*n+"%"}},Y.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},be=function(s,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*s)/n},Gc=function(s){return Xc(wn(s))},wn=function(s){return s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?be(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?be(parseInt(s.substring(6,8),16)/255,2):1}},Yc=function(s){return Jc(Zc(s))},Qc=function(s){var t=s.s,n=s.v,a=s.a,r=(200-t)*n/100;return{h:be(s.h),s:be(r>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0),l:be(r/2),a:be(a,2)}},Nn=function(s){var t=Qc(s);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Zc=function(s){var t=s.h,n=s.s,a=s.v,r=s.a;t=t/360*6,n/=100,a/=100;var o=Math.floor(t),l=a*(1-n),c=a*(1-(t-o)*n),d=a*(1-(1-t+o)*n),u=o%6;return{r:be(255*[a,c,l,l,d,a][u]),g:be(255*[d,a,a,c,l,l][u]),b:be(255*[l,l,d,a,a,c][u]),a:be(r,2)}},zt=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},Jc=function(s){var t=s.r,n=s.g,a=s.b,r=s.a,o=r<1?zt(be(255*r)):"";return"#"+zt(t)+zt(n)+zt(a)+o},Xc=function(s){var t=s.r,n=s.g,a=s.b,r=s.a,o=Math.max(t,n,a),l=o-Math.min(t,n,a),c=l?o===t?(n-a)/l:o===n?2+(a-t)/l:4+(t-n)/l:0;return{h:be(60*(c<0?c+6:c)),s:be(o?l/o*100:0),v:be(o/255*100),a:r}},ed=Y.memo(function(s){var t=s.hue,n=s.onChange,a=Kn(["react-colorful__hue",s.className]);return Y.createElement("div",{className:a},Y.createElement(to,{onMove:function(r){n({h:360*r.left})},onKey:function(r){n({h:mt(t+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":be(t),"aria-valuemax":"360","aria-valuemin":"0"},Y.createElement(no,{className:"react-colorful__hue-pointer",left:t/360,color:Nn({h:t,s:100,v:100,a:1})})))}),sd=Y.memo(function(s){var t=s.hsva,n=s.onChange,a={backgroundColor:Nn({h:t.h,s:100,v:100,a:1})};return Y.createElement("div",{className:"react-colorful__saturation",style:a},Y.createElement(to,{onMove:function(r){n({s:100*r.left,v:100-100*r.top})},onKey:function(r){n({s:mt(t.s+100*r.left,0,100),v:mt(t.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+be(t.s)+"%, Brightness "+be(t.v)+"%"},Y.createElement(no,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Nn(t)})))}),ao=function(s,t){if(s===t)return!0;for(var n in s)if(s[n]!==t[n])return!1;return!0},td=function(s,t){return s.toLowerCase()===t.toLowerCase()||ao(wn(s),wn(t))};function nd(s,t,n){var a=ut(n),r=x.useState(function(){return s.toHsva(t)}),o=r[0],l=r[1],c=x.useRef({color:t,hsva:o});x.useEffect(function(){if(!s.equal(t,c.current.color)){var u=s.toHsva(t);c.current={hsva:u,color:t},l(u)}},[t,s]),x.useEffect(function(){var u;ao(o,c.current.hsva)||s.equal(u=s.fromHsva(o),c.current.color)||(c.current={hsva:o,color:u},a(u))},[o,s,a]);var d=x.useCallback(function(u){l(function(m){return Object.assign({},m,u)})},[]);return[o,d]}var ad=typeof window<"u"?x.useLayoutEffect:x.useEffect,rd=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Ca=new Map,od=function(s){ad(function(){var t=s.current?s.current.ownerDocument:document;if(t!==void 0&&!Ca.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Ca.set(t,n);var a=rd();a&&n.setAttribute("nonce",a),t.head.appendChild(n)}},[])},id=function(s){var t=s.className,n=s.colorModel,a=s.color,r=a===void 0?n.defaultColor:a,o=s.onChange,l=nn(s,["className","colorModel","color","onChange"]),c=x.useRef(null);od(c);var d=nd(n,r,o),u=d[0],m=d[1],p=Kn(["react-colorful",t]);return Y.createElement("div",Bs({},l,{ref:c,className:p}),Y.createElement(sd,{hsva:u,onChange:m}),Y.createElement(ed,{hue:u.h,onChange:m,className:"react-colorful__last-control"}))},ld={defaultColor:"000",toHsva:Gc,fromHsva:function(s){return Yc({h:s.h,s:s.s,v:s.v,a:1})},equal:td},cd=function(s){return Y.createElement(id,Bs({},s,{colorModel:ld}))},dd=/^#?([0-9A-F]{3,8})$/i,ud=function(s){var t=s.color,n=t===void 0?"":t,a=s.onChange,r=s.onBlur,o=s.escape,l=s.validate,c=s.format,d=s.process,u=nn(s,["color","onChange","onBlur","escape","validate","format","process"]),m=x.useState(function(){return o(n)}),p=m[0],f=m[1],g=ut(a),j=ut(r),v=x.useCallback(function(b){var w=o(b.target.value);f(w),l(w)&&g(d?d(w):w)},[o,d,l,g]),y=x.useCallback(function(b){l(b.target.value)||f(o(n)),j(b)},[n,o,l,j]);return x.useEffect(function(){f(o(n))},[n,o]),Y.createElement("input",Bs({},u,{value:c?c(p):p,spellCheck:"false",onChange:v,onBlur:y}))},Sa=function(s){return"#"+s},ro=function(s){var t=s.prefixed,n=s.alpha,a=nn(s,["prefixed","alpha"]),r=x.useCallback(function(l){return l.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),o=x.useCallback(function(l){return function(c,d){var u=dd.exec(c),m=u?u[1].length:0;return m===3||m===6||!!d&&m===4||!!d&&m===8}(l,n)},[n]);return Y.createElement(ud,Bs({},a,{escape:r,format:t?Sa:void 0,process:Sa,validate:o}))};function md({onChange:s,value:t,colors:n}){const a=n.map(r=>{const o=t===r;return e.jsx(js,{onClick:()=>{s==null||s(r)},className:k("relative block flex-shrink-0 w-26 h-26 border rounded",o&&"shadow-md"),style:{backgroundColor:r},children:o&&e.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},r)});return e.jsx("div",{className:"flex flex-wrap gap-6",children:a})}const oo=[{color:"rgb(255, 255, 255)",name:h("White")},{color:"rgb(239,245,245)",name:h("Solitude")},{color:"rgb(245,213,174)",name:h("Wheat")},{color:"rgb(253,227,167)",name:h("Cape Honey")},{color:"rgb(242,222,186)",name:h("Milk punch")},{color:"rgb(97,118,75)",name:h("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:h("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:h("Cosmic Latte")},{color:"rgb(233,119,119)",name:h("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:h("Sundown")},{color:"rgb(30,139,195)",name:h("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:h("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:h("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:h("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:h("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:h("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:h("Comet"),foreground:"rgb(255, 255, 255)"}],xd=oo.map(({color:s})=>s).slice(0,14);function hd({defaultValue:s,onChange:t,colorPresets:n,showInput:a}){const[r,o]=x.useState(s),l=n||xd,c=Es({size:"sm"});return e.jsxs("div",{children:[e.jsx(cd,{className:"!w-auto",color:r,onChange:d=>{t==null||t(d),o(d)}}),e.jsxs("div",{className:"py-20 px-12",children:[l&&e.jsx(md,{colors:l,onChange:d=>{if(d){const u=gr(d).toString("hex");t==null||t(u),o(u)}},value:r}),a&&e.jsx("div",{className:"pt-20",children:e.jsx(ro,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:r,onChange:d=>{t==null||t(d),o(d)}})})]})]})}function St({hideFooter:s=!1,showInput:t=!0}){const{close:n,value:a,setValue:r,initialValue:o}=B();return e.jsxs(q,{size:"2xs",children:[e.jsx(hd,{showInput:t,defaultValue:o||"",onChange:l=>r(l)}),!s&&e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{variant:"text",size:"xs",onClick:()=>n(),children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",size:"xs",onClick:()=>n(a),children:e.jsx(i,{message:"Apply"})})]})]})}const fd=z(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined"),pd=z(e.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Ze=new Map,Ae=new Map,gd=new Map,_e={status:"inactive"};function fn({e:s,rect:t,deltaX:n,deltaY:a}){return{rect:t,x:s.clientX,y:s.clientY,deltaX:n??0,deltaY:a??0,nativeEvent:s}}let io=null;function Ia(s){io=s}function jd(s){return{left:s.left,top:s.top,width:s.width,height:s.height}}function lo(s){const t=new IntersectionObserver(n=>{n.forEach(a=>{const{width:r,height:o,left:l,top:c}=a.boundingClientRect,[d,u]=[...s].find(([,p])=>p.ref.current===a.target)||[];if(d==null||u==null)return;const m={width:r,height:o,left:l,top:c};s.set(d,{...u,rect:m})}),t.disconnect()});[...s.values()].forEach(n=>{n.ref.current&&t.observe(n.ref.current)})}function bd({id:s,disabled:t,ref:n,preview:a,hidePreview:r,...o}){const l=x.useRef(null),{addGlobalListener:c,removeAllGlobalListeners:d}=hr(),u=x.useRef({lastPosition:{x:0,y:0}}).current,m=x.useRef(o);m.current=o,x.useLayoutEffect(()=>(t?Ze.delete(s):Ze.set(s,{...Ze.get(s),id:s,ref:n,type:m.current.type,getData:m.current.getData}),()=>{Ze.delete(s)}),[s,t,m,n]);const p=y=>{gd.forEach(b=>{var w;b.type===((w=Ze.get(s))==null?void 0:w.type)&&y(b)})},f=y=>{var F,V;const b=Ze.get(s),w=n.current,S=!l.current||!u.clickedEl||l.current.contains(u.clickedEl);if(io||!w||!b||!S){y.preventDefault(),y.stopPropagation();return}lo(Ae),Ia("drag"),r&&vd(y),y.dataTransfer.effectAllowed="move",u.lastPosition={x:y.clientX,y:y.clientY},u.currentRect=jd(w.getBoundingClientRect());const D=fn({rect:u.currentRect,e:y});a!=null&&a.current&&a.current(b,C=>{y.dataTransfer.setDragImage(C,0,0)}),_e.status="dragging",_e.dragTargetId=s,n.current&&(n.current.dataset.dragging="true"),(V=(F=m.current).onDragStart)==null||V.call(F,D,b),requestAnimationFrame(()=>{p(C=>{var A;return(A=C.onDragStart)==null?void 0:A.call(C,D,b)})}),c(window,"dragover",g,!0)},g=y=>{var V,C;if(y.preventDefault(),!u.currentRect)return;const b=y.clientX-u.lastPosition.x,w=y.clientY-u.lastPosition.y,S={...u.currentRect,left:u.currentRect.left+b,top:u.currentRect.top+w},D=fn({rect:S,e:y,deltaX:b,deltaY:w}),F=Ze.get(s);F&&((C=(V=m.current).onDragMove)==null||C.call(V,D,F),p(A=>{var T;return(T=A.onDragMove)==null?void 0:T.call(A,D,F)})),u.lastPosition={x:y.clientX,y:y.clientY},u.currentRect=S};return{draggableProps:{draggable:!t,onDragStart:f,onDragEnd:y=>{var S,D;if(d(),!u.currentRect)return;Ia(null),ms&&ms.remove();const b=fn({rect:u.currentRect,e:y}),w=Ze.get(s);w&&((D=(S=m.current).onDragEnd)==null||D.call(S,b,w),p(F=>{var V;return(V=F.onDragEnd)==null?void 0:V.call(F,b,w,_e.status)})),requestAnimationFrame(()=>{_e.dragTargetId=void 0,_e.status="inactive",n.current&&delete n.current.dataset.dragging})},onPointerDown:y=>{u.clickedEl=y.target}},dragHandleRef:l}}let ms;function vd(s){ms||(ms=new Image,document.body.append(ms),ms.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),s.dataTransfer.setDragImage(ms,0,0)}async function*yd(s){const t=[];for(const n of s.items)if(n.kind==="file"){const a=n.webkitGetAsEntry();a&&t.push(a)}for(const n of t)if(n.isFile){if(n.name===".DS_Store")continue;const a=await uo(n);yield new jr(a,n.fullPath)}else n.isDirectory&&(yield*co(n))}async function*co(s){const t=s.createReader();let n;do{n=await new Promise((a,r)=>{t.readEntries(a,r)});for(const a of n)if(a.isFile){if(a.name===".DS_Store")continue;const r=await uo(a);yield new jr(r,a.fullPath)}else a.isDirectory&&(yield*co(a))}while(n.length>0)}function uo(s){return new Promise((t,n)=>s.file(t,n))}async function kd(s){const t=[];for await(const n of s)t.push(n);return t}const wd=400;function Nd({id:s,disabled:t,ref:n,...a}){const r=x.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=x.useRef(a);o.current=a,x.useLayoutEffect(()=>(Ae.set(s,{...Ae.get(s),disabled:t,id:s,ref:n}),()=>{Ae.delete(s)}),[s,o,t,n]);const l=f=>{var v;const g=o.current,j=g.allowDragEventsFromItself||n.current!==((v=f.ref)==null?void 0:v.current);return!!(f!=null&&f.type&&j&&g.types.includes(f.type)&&(!g.acceptsDrop||g.acceptsDrop(f)))},c=f=>{var j,v;const g=Qs(f);g&&((v=(j=o.current).onDragLeave)==null||v.call(j,g))};return{droppableProps:t?{}:{onDragOver:f=>{var j,v;f.preventDefault(),f.stopPropagation();const g=Qs(f);g&&l(g)&&((v=(j=o.current).onDragOver)==null||v.call(j,g,f))},onDragEnter:f=>{var j,v;if(f.stopPropagation(),r.dragOverElements.add(f.target),r.dragOverElements.size>1)return;const g=Qs(f);g&&l(g)&&((v=(j=o.current).onDragEnter)==null||v.call(j,g),clearTimeout(r.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var y,b;g&&((b=(y=o.current).onDropActivate)==null||b.call(y,g))},wd)))},onDragLeave:f=>{f.stopPropagation(),r.dragOverElements.delete(f.target);for(const j of r.dragOverElements)f.currentTarget.contains(j)||r.dragOverElements.delete(j);if(r.dragOverElements.size>0)return;const g=Qs(f);g&&l(g)&&(c(f),clearTimeout(r.dropActivateTimer))},onDrop:async f=>{var j,v,y,b;f.preventDefault(),f.stopPropagation(),r.dragOverElements.clear(),c(f),clearTimeout(r.dropActivateTimer);const g=Qs(f);if(g)if((v=(j=o.current).onDragLeave)==null||v.call(j,g),!l(g))_e.status!=="inactive"&&(_e.status="dropFail");else{const w=(b=(y=o.current).onDrop)==null?void 0:b.call(y,g);_e.status!=="inactive"&&(_e.status=w===!1?"dropFail":"dropSuccess")}}}}}function Qs(s){if(_e.dragTargetId!=null)return Ze.get(_e.dragTargetId);if(s.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>kd(yd(s.dataTransfer))}}const Cd={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e:s,ref:t,item:n,sortSession:a,onDropPositionChange:r})=>{var d;const o=a.dropPosition;let l=null;const c=(d=Ae.get(n))==null?void 0:d.rect;if(c){const u=c.top+c.height/2;s.clientY<=u?l="before":s.clientY>=u&&(l="after")}if(l!==o){const u=a.sortables.indexOf(n);if(a.dropPosition=l,r==null||r(a.dropPosition),Da(a),t.current)if(a.dropPosition==="after")pn(t.current,"bottom",a);else if(u===0)pn(t.current,"top",a);else{const f=a.sortables[u-1],g=Ae.get(f);g!=null&&g.ref.current&&pn(g.ref.current,"bottom",a)}const m=a.sortables.indexOf(n);if(a.activeIndex===m){a.finalIndex=a.activeIndex;return}(u>a.activeIndex?"after":"before")==="after"?a.finalIndex=a.dropPosition==="before"?m-1:m:a.finalIndex=a.dropPosition==="after"?m+1:m}},onDragEnd:s=>{Da(s)}};function Da(s){s!=null&&s.linePreviewEl&&(s.linePreviewEl.style.borderBottomColor="",s.linePreviewEl.style.borderTopColor="",s.linePreviewEl=void 0)}function pn(s,t,n){const a="rgb(var(--be-primary))";t==="top"?s.style.borderTopColor=a:s.style.borderBottomColor=a,n&&(n.linePreviewEl=s)}function mo(s,t,n){const a=fa(t,0,s.length-1),r=fa(n,0,s.length-1);if(a===r)return s;const o=s[a],l=r<a?-1:1;for(let c=a;c!==r;c+=l)s[c]=s[c+l];return s[r]=o,s}function xo(s,t,n){const a=s.slice();return a.splice(n<0?a.length+n:n,0,a.splice(t,1)[0]),a}const Sd="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",Id={onDragStart:s=>{s.sortables.forEach((t,n)=>{const a=Ae.get(t);a!=null&&a.ref.current&&(a.ref.current.style.transition=Sd,(s==null?void 0:s.activeIndex)===n&&(a.ref.current.style.opacity="0.4"))})},onDragEnter:(s,t,n)=>{mo(s.sortables,n,t);const a=s.sortables.map(r=>{var o;return(o=Ae.get(r))==null?void 0:o.rect});s.sortables.forEach((r,o)=>{if(!s)return;const l=xo(a,t,s.activeIndex),c=a[o],d=l[o],u=Ae.get(r);if(u!=null&&u.ref.current&&d&&c){const m=d.left-c.left,p=d.top-c.top;u.ref.current.style.transform=`translate3d(${m}px, ${p}px, 0)`}}),s.finalIndex=t},onDragOver:()=>{},onDragEnd:s=>{s.sortables.forEach(t=>{const n=Ae.get(t);n!=null&&n.ref.current&&(n.ref.current.style.transform="",n.ref.current.style.transition="",n.ref.current.style.opacity="",n.ref.current.style.zIndex="")})}},Dd={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(s,t,n)=>{var r;const a=(r=Ae.get(s.sortables[n]))==null?void 0:r.ref.current;a&&(Ld(a,n,t),mo(s.sortables,n,t),s.finalIndex=t)},onDragEnd:()=>{}};function Ld(s,t,n){const a=s.parentElement;if(n<0)a.prepend(s);else{t>-1&&t<=n&&n++;const r=a.children.item(n);r?r.before(s):a.append(s)}}let J=null;const At={line:Cd,liveSort:Id,moveNode:Dd};function Pd({item:s,items:t,type:n,ref:a,onSortEnd:r,onSortStart:o,onDragEnd:l,preview:c,disabled:d,onDropPositionChange:u,strategy:m="liveSort"}){x.useEffect(()=>{J&&J.sortables.length!==t.length&&(J.sortables=[...t],J.activeIndex=t.indexOf(s))},[t,s]);const{draggableProps:p,dragHandleRef:f}=bd({id:s,ref:a,type:n,preview:c,disabled:d,onDragStart:()=>{var j;J={sortables:[...t],activeSortable:s,activeIndex:t.indexOf(s),finalIndex:t.indexOf(s),dropPosition:null,ref:a,scrollParent:a.current?Di(a.current):void 0,scrollListener:()=>{lo(Ae)}},At[m].onDragStart(J),o==null||o(),(j=J.scrollParent)==null||j.addEventListener("scroll",J.scrollListener)},onDragEnd:()=>{var j;J&&(J.dropPosition=null,u==null||u(J.dropPosition),J.activeIndex!==J.finalIndex&&(r==null||r(J.activeIndex,J.finalIndex)),(j=J.scrollParent)==null||j.removeEventListener("scroll",J.scrollListener),At[m].onDragEnd(J),l==null||l(),J=null)},getData:()=>{}}),{droppableProps:g}=Nd({id:s,ref:a,types:[n],disabled:d,allowDragEventsFromItself:!0,onDragOver:(j,v)=>{J&&At[m].onDragOver({e:v,ref:a,item:s,sortSession:J,onDropPositionChange:u})},onDragEnter:()=>{if(!J)return;const j=J.sortables.indexOf(s),v=J.sortables.indexOf(J.activeSortable);At[m].onDragEnter(J,j,v)},onDragLeave:()=>{J&&(J.dropPosition=null,u==null||u(J.dropPosition))}});return{sortableProps:{...es(p,g)},dragHandleRef:f}}const zd=Y.lazy(()=>bt(()=>import("./ace-editor-118aad33.js"),["./ace-editor-118aad33.js","./main-cdcc8bff.js","./main-08072798.css","./index-41f87533.js"],import.meta.url));function Ad({defaultValue:s,mode:t="html",title:n,onSave:a,isSaving:r,footerStartAction:o,beautify:l,editorRef:c}){const[d,u]=x.useState(s),[m,p]=x.useState(!0);return e.jsxs(q,{size:"fullscreen",className:"h-full w-full",children:[e.jsx(Q,{children:n}),e.jsx(K,{className:"relative flex-auto",padding:"p-0",children:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"flex h-400 w-full items-center justify-center",children:e.jsx(gt,{"aria-label":"Loading editor...",isIndeterminate:!0,size:"md"})}),children:e.jsx(zd,{beautify:l,mode:t,onChange:f=>u(f),defaultValue:d||"",onIsValidChange:p,editorRef:c})})}),e.jsx(Fd,{disabled:!m||r,value:d,onSave:a,startAction:o})]})}function Fd({disabled:s,value:t,onSave:n,startAction:a}){const{close:r}=B();return e.jsxs(X,{dividerTop:!0,startAction:a,children:[e.jsx(N,{onClick:()=>r(),children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{disabled:s,variant:"flat",color:"primary",onClick:()=>{n?n(t):r(t)},children:e.jsx(i,{message:"Save"})})]})}const Rd=""+new URL("articles-8bfd9f17.svg",import.meta.url).href,Is="user",La=s=>{const t=s.customPages.types.length>1?[{control:{type:$.Select,defaultValue:"default",options:s.customPages.types.map(n=>({value:n.type,label:n.label,key:n.type}))},key:"type",label:h("Type"),description:h("Type of the page"),defaultOperator:re.eq}]:[];return[{key:"user_id",label:h("User"),description:h("User page was created by"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}},...t,ks({description:h("Date page was created")}),ws({description:h("Date page was last updated")})]},Md=z(e.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),_d=z(e.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function Pa(s){try{return gr(`rgb(${s.split(" ").join(",")})`).toString("hex")}catch{return s}}const It=Y.createContext(null);function ho(s){const{size:t="md",children:n,className:a,isLazy:r,overflow:o="overflow-hidden"}=s,l=x.useRef([]),c=x.useId(),[d,u]=Ee(s.selectedTab,s.defaultSelectedTab||0,s.onTabChange),m=x.useMemo(()=>({selectedTab:d,setSelectedTab:u,tabsRef:l,size:t,isLazy:r,id:c}),[d,c,r,u,t]);return e.jsx(It.Provider,{value:m,children:e.jsx("div",{className:k(a,o,"max-w-full"),children:n})})}function Ed(){const{tabsRef:s,selectedTab:t}=x.useContext(It),[n,a]=x.useState({width:void 0,transform:void 0,className:void 0});return Rn(()=>{if(t!=null&&s.current){const r=s.current[t];if(!r)return;a(o=>({width:`${r.offsetWidth}px`,transform:`translateX(${r.offsetLeft}px)`,className:o.width===void 0?"":"transition-all"}))}},[a,t,s]),e.jsx("div",{className:k("absolute bottom-0 left-0 h-2 bg-primary",n.className),role:"presentation",style:{width:n.width,transform:n.transform}})}function fo({children:s,center:t,expand:n,className:a}){const r=x.Children.toArray(s);return e.jsx(Ln,{children:e.jsxs("div",{className:k("flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",a),role:"tablist","aria-orientation":"horizontal",children:[r.map((o,l)=>x.isValidElement(o)?x.cloneElement(o,{index:l,className:k(o.props.className,n&&"flex-auto",t&&l===0&&"ml-auto",t&&l===r.length-1&&"mr-auto")}):null),e.jsx(Ed,{})]})})}function et({index:s,className:t,isDisabled:n,children:a,padding:r,elementType:o="button",to:l,relative:c,width:d="min-w-min"}){const{selectedTab:u,setSelectedTab:m,tabsRef:p,size:f="md",id:g}=x.useContext(It),j=s===u,v=Ts(),y=r||(f==="sm"?"px-12":"px-18"),b=k("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",d,Td({isDisabled:n,isSelected:j}),t,f==="md"&&`${y} h-48`,f==="sm"&&`${y} h-32`,n&&"pointer-events-none"),w=F=>{switch(F.key){case"ArrowLeft":v==null||v.focusPrevious();break;case"ArrowRight":v==null||v.focusNext();break;case"Home":v==null||v.focusFirst();break;case"End":v==null||v.focusLast();break}},S=j?0:-1,D=o;return e.jsx(D,{disabled:n,id:`${g}-${s}-tab`,"aria-controls":`${g}-${s}-tabpanel`,type:"button",role:"tab","aria-selected":j,tabIndex:n?void 0:S,onKeyDown:w,onClick:()=>{m(s)},to:l,relative:c,className:b,ref:F=>{p.current&&F&&(p.current[s]=F)},children:a})}function Td({isDisabled:s,isSelected:t}){return s?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function po({children:s,className:t}){const{selectedTab:n,isLazy:a}=x.useContext(It),r=x.Children.toArray(s).filter(l=>!!l);let o;if(a){const l=r[n];o=x.isValidElement(l)?x.cloneElement(r[n],{index:n}):null}else o=r.map((l,c)=>{if(x.isValidElement(l)){const d=c===n;return x.cloneElement(l,{index:c,"aria-hidden":!d,className:d?l.props.className:k(l.props.className,"hidden")})}return null});return e.jsx("div",{className:t,children:o})}function st({className:s,children:t,index:n,...a}){const{id:r}=x.useContext(It),[o,l]=x.useState(0),c=x.useRef(null);return Rn(()=>{if(c!=null&&c.current){const d=()=>{const m=An(c.current,{tabbable:!0});l(m.nextNode()?void 0:0)};d();const u=new MutationObserver(d);return u.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{u.disconnect()}}},[c]),e.jsx("div",{tabIndex:o,ref:c,id:`${r}-${n}-tabpanel`,"aria-labelledby":`${r}-${n}-tab`,className:k(s,"focus-visible:outline-primary-light"),role:"tabpanel",...a,children:t})}function Vd(){const[s,t]=x.useState(!1),n=x.useRef(),a=x.useCallback(r=>{var o;if(r){const l=new IntersectionObserver(([c])=>t(c.intersectionRatio<1),{threshold:[1]});n.current=l,l.observe(r)}else n.current&&((o=n.current)==null||o.disconnect())},[]);return{isSticky:s,sentinelRef:a}}var go={exports:{}};(function(s,t){(function(n,a,r){s.exports=r(),s.exports.default=r()})("slugify",Li,function(){var n=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),a=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function r(o,l){if(typeof o!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var c=a[l.locale]||{},d=l.replacement===void 0?"-":l.replacement,u=l.trim===void 0?!0:l.trim,m=o.normalize().split("").reduce(function(p,f){var g=c[f];return g===void 0&&(g=n[f]),g===void 0&&(g=f),g===d&&(g=" "),p+g.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),u&&(m=m.trim()),m=m.replace(/\s+/g,d),l.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(n,o)},r})})(go);var Od=go.exports;const $d=Pi(Od);function Hd(s,t="-",n=!1){if(!s)return s;let a=$d(s,{lower:!0,replacement:t,strict:n,remove:/[*+~.()'"!:@?\|/\\#]/g});return a||(a=s.replace(/\s+/g,"-").toLowerCase()),a}function Bd(s){return G({mutationFn:t=>Ud(t),onSuccess:()=>{Z(h("Created workspace")),U.invalidateQueries({queryKey:We.fetchUserWorkspaces})},onError:t=>ye(t,s)})}function Ud(s){return E.post("workspace",s).then(t=>t.data)}function qd(){const s=ne(),{formId:t,close:n}=B(),a=Bd(s);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Create workspace"})}),e.jsx(K,{children:e.jsx(he,{form:s,id:t,onSubmit:()=>{a.mutate(s.getValues(),{onSuccess:r=>{n(r.workspace.id)}})},children:e.jsx(M,{name:"name",autoFocus:!0,label:e.jsx(i,{message:"Workspace name"}),minLength:3,required:!0})})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:n,children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:t,disabled:a.isPending,children:e.jsx(i,{message:"Create"})})]})]})}function Wd(s){return E.get(`workspace/${s}`).then(t=>t.data)}function Kd(s){return Fe({queryKey:We.workspaceWithMembers(s),queryFn:()=>Wd(s)})}const Gd=z(e.jsx("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z"}),"GroupOutlined");function Yd({workspaceId:s,...t}){return E.post(`workspace/${s}/invite`,t).then(n=>n.data)}function Qd(){return G({mutationFn:s=>Yd(s),onSuccess:(s,t)=>{U.invalidateQueries({queryKey:We.workspaceWithMembers(t.workspaceId)})},onError:s=>ke(s)})}function Zd({workspaceId:s,inviteId:t,...n}){return E.post(`workspace/${s}/${t}/resend`,n).then(a=>a.data)}function Jd(){return G({mutationFn:s=>Zd(s),onSuccess:()=>{Z("Invite sent")},onError:s=>ke(s)})}const Xd=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function eu(s){return!s||s.length>320?!1:Xd.test(s)}function su({workspaceId:s,member:t,...n}){const a=t.model_type,r=t.model_type==="invite"?t.id:t.member_id;return E.post(`workspace/${s}/${a}/${r}/change-role`,n).then(o=>o.data)}function tu(){return G({mutationFn:s=>su(s),onSuccess:(s,t)=>{Z(h("Role changed")),U.invalidateQueries({queryKey:We.workspaceWithMembers(t.workspaceId)})},onError:s=>ke(s)})}function nu({workspaceId:s,memberId:t,memberType:n}){const a=n==="invite"?`workspace/invite/${t}`:`workspace/${s}/member/${t}`;return E.delete(a).then(r=>r.data)}function jo(){const{workspaceId:s,setWorkspaceId:t}=Ie(),{user:n}=oe();return G({mutationFn:a=>nu(a),onSuccess:(a,r)=>{U.invalidateQueries({queryKey:We.fetchUserWorkspaces}),U.invalidateQueries({queryKey:We.workspaceWithMembers(r.workspaceId)}),r.memberId===(n==null?void 0:n.id)&&s===r.workspaceId&&t(vt.id)},onError:a=>ke(a)})}function bo({onConfirm:s,isLoading:t}){return e.jsx(gs,{isDanger:!0,title:e.jsx(i,{message:"Leave workspace"}),isLoading:t,onConfirm:s,body:e.jsxs("div",{children:[e.jsx(i,{message:"Are you sure you want to leave this workspace?"}),e.jsx("div",{className:"mt-8 font-semibold",children:e.jsx(i,{message:"All resources you've created in the workspace will be transferred to workspace owner."})})]}),confirm:e.jsx(i,{message:"Leave"})})}function au({workspace:s}){const{data:t,isLoading:n}=Kd(s.id);return e.jsxs(q,{size:"lg",children:[e.jsx(Q,{children:e.jsx(i,{message:"Manage workspace members"})}),e.jsx(K,{children:n?e.jsx("div",{className:"flex min-h-[238px] items-center justify-center",children:e.jsx(gt,{isIndeterminate:!0,"aria-label":"Loading workspace..."})}):e.jsx(ru,{workspace:t.workspace})})]})}function ru({workspace:s}){const{user:t}=oe(),n=Gn(s),a=[...s.members||[],...s.invites||[]],r=!n.update&&!n.delete;return e.jsxs("div",{children:[n.invite&&e.jsx(lu,{workspace:s}),e.jsxs("div",{className:"mb-14 flex items-center gap-10 text-base",children:[e.jsx(Gd,{className:"icon-sm"}),e.jsx(i,{message:"Members of `:workspace`",values:{workspace:s.name}})]}),e.jsxs(De,{initial:!1,children:[a.map(o=>r&&o.id!==(t==null?void 0:t.id)?null:e.jsx(ou,{workspace:s,member:o},`${o.model_type}.${o.id}`)),r&&e.jsx("div",{className:"text-muted",children:e.jsx(i,{message:"And [one one other member|:count other members]",values:{count:a.length}})})]})]})}function ou({workspace:s,member:t}){return e.jsxs(xe.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"tween",duration:.125},className:"mb-20 flex items-start gap-14 text-sm",children:[e.jsx("img",{className:"h-36 w-36 flex-shrink-0 rounded",src:t.avatar,alt:""}),e.jsxs("div",{className:"min-w-0 flex-auto items-center justify-between gap-14 md:flex",children:[e.jsxs("div",{className:"mb-10 overflow-hidden md:mb-0 md:mr-10",children:[e.jsxs("div",{className:"flex items-center justify-start gap-6",children:[e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:t.display_name}),e.jsx(uu,{workspace:s,member:t})]}),e.jsx("div",{className:"text-muted",children:t.email})]}),e.jsx(iu,{workspace:s,member:t})]})]},`${t.model_type}.${t.id}`)}function Gn(s){var o;const{user:t}=oe(),n={update:!1,invite:!1,delete:!1},a=["update","invite","delete"],r=(o=s.members)==null?void 0:o.find(l=>l.id===(t==null?void 0:t.id));return r&&a.forEach(l=>{var c;n[l]=r.is_owner||!!((c=r.permissions)!=null&&c.find(d=>d.name===`workspace_members.${l}`))}),n}function iu({workspace:s,member:t}){const[n,a]=x.useState(t.role_id),r=tu(),{user:o}=oe(),l=Gn(s),c=t.model_type==="member"&&t.is_owner,d=t.model_type==="member"&&(o==null?void 0:o.id)===t.id,u=!l.update||c||d?e.jsx("div",{className:"ml-auto text-muted first:capitalize",children:e.jsx(i,{message:t.role_name})}):e.jsx(vo,{className:"ml-auto flex-shrink-0",size:"xs",value:n,isDisabled:r.isPending,onChange:m=>{a(m),r.mutate({roleId:m,workspaceId:s.id,member:t})}});return e.jsxs(e.Fragment,{children:[u,!c&&(d||l.delete)&&e.jsx(cu,{type:d?"leave":"remove",member:t,workspace:s})]})}function lu({workspace:s}){const{trans:t}=O(),[n,a]=x.useState([]),r=n.every(m=>!m.invalid),o=m=>m.description||m.name,[l,c]=x.useState(),d=Qd(),{data:u}=Gt(["workspaceRoles"]);return x.useEffect(()=>{var m;!l&&((m=u==null?void 0:u.workspaceRoles)!=null&&m.length)&&c(u.workspaceRoles[0].id)},[u,l]),e.jsxs("div",{className:"mb-30",children:[e.jsx(Qr,{value:n,onChange:a,displayWith:o,validateWith:m=>{const p=!eu(m.description);return{...m,invalid:p,errorMessage:p?t({message:"Not a valid email"}):void 0}},placeholder:t({message:"Enter email addresses"}),label:e.jsx(i,{message:"Invite people"})}),e.jsxs("div",{className:"mt-14 flex items-center justify-between gap-14",children:[e.jsx(vo,{onChange:c,value:l}),n.length&&l?e.jsx(N,{variant:"flat",color:"primary",size:"sm",disabled:d.isPending||!r,onClick:()=>{d.mutate({emails:n.map(m=>o(m)),roleId:l,workspaceId:s.id},{onSuccess:()=>{a([])}})},children:e.jsx(i,{message:"Invite"})}):null]})]})}function cu({member:s,workspace:t,type:n}){const a=jo(),{close:r}=B();return e.jsxs(_,{type:"modal",onClose:o=>{o&&(a.mutate({workspaceId:t.id,memberId:s.id,memberType:s.model_type}),n==="leave"&&(r(),Z(h("Left workspace"))))},children:[e.jsx(L,{size:"md",className:"flex-shrink-0 text-muted",disabled:a.isPending,children:n==="leave"?e.jsx(br,{}):e.jsx(qe,{})}),n==="leave"?e.jsx(bo,{}):e.jsx(du,{member:s})]})}function du({member:s}){return e.jsx(gs,{isDanger:!0,title:e.jsx(i,{message:"Remove member"}),body:e.jsxs("div",{children:[e.jsx(i,{message:"Are you sure you want to remove `:name`?",values:{name:s.display_name}}),e.jsx("div",{className:"mt-8 font-semibold",children:e.jsx(i,{message:"All workspace resources created by `:name` will be transferred to workspace owner.",values:{name:s.display_name}})})]}),confirm:e.jsx(i,{message:"Remove"})})}function vo({value:s,onChange:t,size:n="xs",className:a,isDisabled:r}){var c;const{data:o}=Gt(["workspaceRoles"]),l=(c=o==null?void 0:o.workspaceRoles)==null?void 0:c.find(d=>d.id===s);return!s||!l||!(o!=null&&o.workspaceRoles)?null:e.jsxs(is,{selectionMode:"single",selectedValue:s,onSelectionChange:d=>{t(d)},children:[e.jsx(N,{className:a,size:n,variant:"flat",color:"chip",disabled:r,endIcon:e.jsx(fr,{}),children:e.jsx(i,{message:l.name})}),e.jsx(ls,{children:o.workspaceRoles.map(d=>e.jsx(I,{value:d.id,description:d.description,children:e.jsx(i,{message:d.name})},d.id))})]})}function uu({member:s,workspace:t}){const{user:n}=oe(),a=Gn(t);return(n==null?void 0:n.id)===s.id?e.jsxs("div",{className:"font-medium",children:["(",e.jsx(i,{message:"You"}),")"]}):s.model_type==="invite"?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{children:"·"}),e.jsx("div",{className:"font-medium",children:e.jsx(i,{message:"Invited"})}),a.invite?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"·"}),e.jsx(mu,{member:s,workspace:t})]}):null]}):null}function mu({member:s,workspace:t}){const n=Jd();return e.jsxs(_,{type:"modal",onClose:a=>{a&&n.mutate({workspaceId:t.id,inviteId:s.id})},children:[e.jsx(N,{variant:"link",size:"sm",color:"primary",disabled:n.isPending,children:e.jsx(i,{message:"Resend invite"})}),e.jsx(gs,{title:e.jsx(i,{message:"Resend invite"}),body:e.jsx(i,{message:"Are you sure you want to send this invite again?"}),confirm:e.jsx(i,{message:"Send"})})]})}const xu=z(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z"}),"PersonAddOutlined");function hu({id:s,...t}){return E.put(`workspace/${s}`,t).then(n=>n.data)}function fu(s){const{close:t}=B();return G({mutationFn:n=>hu(n),onSuccess:n=>{t(),Z(h("Updated workspace")),U.invalidateQueries({queryKey:We.fetchUserWorkspaces}),U.invalidateQueries({queryKey:We.workspaceWithMembers(n.workspace.id)})},onError:n=>ye(n,s)})}function pu({workspace:s}){const t=ne({defaultValues:{id:s.id,name:s.name}}),{formId:n,close:a}=B(),r=fu(t);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Rename workspace"})}),e.jsx(K,{children:e.jsx(he,{form:t,id:n,onSubmit:()=>{r.mutate(t.getValues())},children:e.jsx(M,{name:"name",autoFocus:!0,label:e.jsx(i,{message:"Name"}),minLength:3,required:!0})})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:a,children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:n,disabled:r.isPending,children:e.jsx(i,{message:"Rename"})})]})]})}function gu({id:s}){return E.delete(`workspace/${s}`).then(t=>t.data)}function ju(){const{workspaceId:s,setWorkspaceId:t}=Ie();return G({mutationFn:n=>gu(n),onSuccess:(n,a)=>{Z(h("Deleted workspace")),U.invalidateQueries({queryKey:We.fetchUserWorkspaces}),U.invalidateQueries({queryKey:We.workspaceWithMembers(a.id)}),s===a.id&&t(vt.id)},onError:n=>ke(n)})}function bu({resourceName:s,className:t,size:n="md",color:a="bgAlt",reason:r="overQuota",...o}){const l=o.message??e.jsx(vu,{resourceName:s,reason:r});return e.jsx(Zt,{color:a,size:n,className:t,description:l})}function vu({resourceName:s,reason:t}){const{billing:n}=ce();if(t==="noWorkspacePermission")return e.jsx(i,{message:"You can't create new :name in this workspace.",values:{name:s}});const a={name:s,a:r=>e.jsx(fe,{className:bs,to:"/pricing",children:r})};return t==="overQuota"&&n.enable?e.jsx(i,{message:"Your plan is at its maximum number of :name allowed. <a>Upgrade to add more.</a>",values:a}):t==="noPermission"&&n.enable?e.jsx(i,{message:"To unlock ability to create :name. <a>Upgrade your plan.</a>",values:a}):e.jsx(i,{message:"You don't have permissions to create :name."})}function yo({onChange:s,className:t,trigger:n,placement:a="top"}){const{data:r,isFetched:o,isFetching:l}=zi(),{setWorkspaceId:c}=Ie(),d=Ai(),[u,m]=x.useState(!1),{hasPermission:p}=oe();return x.useEffect(()=>{o&&!l&&!d&&c(vt.id)},[d,r,c,o,l]),!n&&(!d||!p("workspaces.create")&&(r==null?void 0:r.length)===1)?null:e.jsx(x.Fragment,{children:e.jsxs(_,{type:"popover",placement:a,isOpen:u,onClose:()=>{m(!1)},children:[n?x.cloneElement(n,{onClick:()=>m(!u)}):e.jsx(ku,{onClick:()=>m(!u),workspace:d,className:t}),e.jsx(q,{size:"min-w-320",children:e.jsxs(K,{padding:"p-10",children:[e.jsx("div",{className:"mb-16 border-b pb-10",children:r==null?void 0:r.map(f=>e.jsx(wu,{workspace:f,setSelectorIsOpen:m,onChange:s},f.id))}),e.jsx("div",{className:"mb-4 px-4 text-center",children:e.jsx(yu,{onClick:()=>m(!1),onCreated:f=>s==null?void 0:s(f),workspaceCount:r?r.length-1:0})})]})})]})})}function yu({onClick:s,onCreated:t,workspaceCount:n}){const{setWorkspaceId:a}=Ie(),{checkOverQuotaOrNoPermission:r}=oe(),{overQuotaOrNoPermission:o}=r("workspaces.create","count",n);return e.jsxs(x.Fragment,{children:[e.jsx(N,{disabled:o,onClick:async l=>{l.preventDefault(),l.stopPropagation(),s();const c=await Be(qd);c&&(a(c),t==null||t(c))},variant:"outline",startIcon:e.jsx(ct,{}),color:"primary",className:"h-40 w-full",children:e.jsx(i,{message:"Create new workspace"})}),o&&e.jsx(bu,{size:"sm",className:"mt-12 max-w-288",resourceName:e.jsx(i,{message:"worksapces"})})]})}const ku=x.forwardRef(({workspace:s,className:t,onClick:n,...a},r)=>e.jsxs(js,{ref:r,onClick:n,className:k("flex items-center gap-10 rounded ring-inset hover:bg-hover focus-visible:ring-2",t),...a,children:[e.jsxs("span",{className:"mr-auto block flex-auto overflow-hidden text-left",children:[e.jsx("span",{className:"block overflow-hidden overflow-ellipsis text-sm font-medium text-main",children:s.default?e.jsx(i,{message:s.name}):s.name}),e.jsx("span",{className:"block text-xs text-muted",children:s.default?e.jsx(i,{message:"Personal workspace"}):e.jsx(i,{message:":count members",values:{count:s.members_count}})})]}),e.jsx(vr,{className:"shrink-0 icon-md"})]}));function wu({workspace:s,onChange:t,setSelectorIsOpen:n}){const{workspaceId:a,setWorkspaceId:r}=Ie(),o=a===s.id;return e.jsxs("div",{onClick:()=>{r(s.id),t==null||t(s.id),n(!1)},className:k("mb-4 flex cursor-pointer items-center gap-12 rounded-lg p-10 text-left",o&&"bg-primary/5",!o&&"hover:bg-hover"),children:[e.jsx(_s,{size:"sm",className:k("flex-shrink-0 text-primary",!o&&"invisible")}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("div",{className:k("text-sm",o&&"font-semibold"),children:s.name}),e.jsx("div",{className:"text-sm text-muted",children:s.default?e.jsx(i,{message:"Personal workspace"}):e.jsx(i,{message:":count members",values:{count:s.members_count}})})]}),s.id!==0&&e.jsx(Su,{setSelectorIsOpen:n,workspace:s,onChange:t})]})}function Nu({workspace:s,onChange:t}){const n=jo(),{user:a}=oe(),{close:r}=B();return e.jsx(bo,{isLoading:n.isPending,onConfirm:()=>{n.mutate({workspaceId:s.id,memberId:a.id,memberType:"member"},{onSuccess:()=>{r(),t==null||t(vt.id)}})}})}function Cu({workspace:s,onChange:t}){const n=ju(),{close:a}=B();return e.jsx(gs,{isDanger:!0,title:e.jsx(i,{message:"Delete workspace"}),body:e.jsx(i,{message:"Are you sure you want to delete “:name“?",values:{name:s.name}}),confirm:e.jsx(i,{message:"Delete"}),isLoading:n.isPending,onConfirm:()=>{n.mutate({id:s.id},{onSuccess:()=>{a(),t==null||t(vt.id)}})}})}function Su({setSelectorIsOpen:s,workspace:t,onChange:n}){const{user:a}=oe();return e.jsxs(is,{onItemSelected:()=>s(!1),children:[e.jsx(N,{onClick:r=>{r.preventDefault(),r.stopPropagation()},color:"primary",size:"xs",variant:"outline",endIcon:e.jsx(Os,{}),children:e.jsx(i,{message:"Manage"})}),e.jsxs(ls,{children:[e.jsx(I,{onClick:r=>{r.stopPropagation(),Be(au,{workspace:t})},value:"workspaceMembers",startIcon:e.jsx(xu,{}),children:e.jsx(i,{message:"Members"})}),t.owner_id===(a==null?void 0:a.id)&&e.jsx(I,{onClick:r=>{r.stopPropagation(),Be(pu,{workspace:t})},value:"updateWorkspace",startIcon:e.jsx(Ye,{}),children:e.jsx(i,{message:"Rename"})}),t.owner_id!==(a==null?void 0:a.id)&&e.jsx(I,{onClick:r=>{r.stopPropagation(),Be(Nu,{workspace:t,onChange:n})},value:"leaveWorkspace",startIcon:e.jsx(br,{}),children:e.jsx(i,{message:"Leave"})}),t.owner_id===(a==null?void 0:a.id)&&e.jsx(I,{onClick:r=>{r.stopPropagation(),Be(Cu,{workspace:t,onChange:n})},value:"deleteWorkspace",startIcon:e.jsx(pd,{}),children:e.jsx(i,{message:"Delete"})})]})]})}const ko="link/usage";function Dt(){return Fe({queryKey:[ko],queryFn:()=>Iu()})}function Iu(){return E.get(ko).then(s=>s.data)}function Du(s){return e.jsx(Fi,{...s,role:"meter progressbar"})}const Lu=z(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined"),wo={links:h("Links"),biolinks:h("Biolinks"),link_clicks:h("Visitors"),link_overlays:h("Link overlays"),custom_pages:h("Custom link pages"),custom_domains:h("Custom domains"),link_groups:h("Link groups"),tracking_pixels:h("Tracking pixels")};function Pu(){const{data:s}=Dt();if(!s)return null;const t=e.jsx(i,{message:"Unlimited"});return e.jsx("ul",{children:Object.entries(wo).map(([n,a])=>{const r=s==null?void 0:s.usage[n];if(!r)return null;const o=e.jsx(i,{...a});return e.jsx("li",{className:"mt-8",children:r.total?e.jsx(i,{message:":used out of :total :name",values:{used:e.jsx(Ue,{value:r.used}),total:r.total?e.jsx(Ue,{value:r.total}):t,name:o}}):e.jsx(i,{message:":count :name created",values:{count:r.used,name:o}})},n)})})}function No({className:s}){var o,l;const{user:t}=oe(),n=(o=t==null?void 0:t.subscriptions)==null?void 0:o[0],a=(l=n==null?void 0:n.product)==null?void 0:l.name,r=n!=null&&n.renews_at?e.jsx(Xe,{date:n.renews_at}):null;return e.jsxs(_,{type:"popover",triggerOnHover:!0,children:[e.jsx(L,{size:"md",className:s,children:e.jsx(Lu,{})}),e.jsx(q,{size:"auto",children:e.jsxs(K,{children:[e.jsxs("div",{className:"border-b pb-10 mb-10",children:[e.jsx("div",{className:"font-semibold",children:e.jsx(i,{message:"Current plan: :planName",values:{planName:a||e.jsx(i,{message:"Free"})}})}),e.jsx("div",{className:"text-muted text-xs",children:e.jsx(i,{message:"Next payment: :date",values:{date:r||e.jsx(i,{message:"Never"})}})})]}),e.jsx(Pu,{})]})})]})}function zu(){const{isLoading:s,data:t}=Dt(),n=t==null?void 0:t.usage.links;if(!n)return e.jsx("div",{className:"h-[53px] pt-24 mt-24 border-t"});const a=e.jsx("span",{className:k("whitespace-nowrap",s&&"invisible"),children:n.total?e.jsx(i,{message:":used of :available links created",values:{used:e.jsx(Ue,{value:n.used}),available:e.jsx(Ue,{value:n.total})}}):e.jsx(i,{message:":count links created",values:{count:n.used}})});return e.jsxs("div",{className:"border-t items-start gap-8 flex pl-6 pt-24 mt-24",children:[e.jsx(No,{className:"-mt-14"}),e.jsx(Du,{className:"flex-auto max-w-144",size:"xs",value:n.total&&n.used?n.used/n.total*100:0,label:a,showValueLabel:!1,labelPosition:"bottom"})]})}function Co(s){const{isSubscribed:t}=oe();return e.jsx(N,{elementType:fe,to:t?"/billing/change-plan":"/pricing",variant:"outline",color:"primary",size:"xs",...s,children:e.jsx(i,{message:"Upgrade"})})}function Au({className:s,isCompactMode:t}){const{billing:n}=ce();return e.jsxs("div",{className:k("text-sm pt-26 text-muted font-medium bg-alt flex flex-col gap-20 border-r overflow-y-auto relative",s),children:[e.jsxs("div",{className:"flex-auto px-12",children:[e.jsx(Ri,{matchDescendants:a=>a==="/dashboard",menu:"dashboard-sidebar",orientation:"vertical",onlyShowIcons:t,gap:"gap-8",itemClassName:({isActive:a})=>k("block w-full rounded py-12 px-16 border-l-4",a?"bg-primary/hover border-l-primary":"border-l-transparent hover:bg-hover")}),!t&&e.jsx(zu,{}),n.enable&&!t&&e.jsx("div",{className:"mt-14 pl-60",children:e.jsx(Co,{})})]}),!t&&e.jsx(yo,{className:"w-full px-24 py-18 border-t flex-shrink-0 mt-auto"}),t&&e.jsx(No,{className:"flex-shrink-0 mx-auto mb-10"})]})}function Fu(){const{links:{dash_footer:s}}=ce();return e.jsxs(ul,{name:"belink-dashboard",leftSidenavCanBeCompact:!0,children:[e.jsx(Ru,{}),e.jsx(xl,{position:"left",children:e.jsx(Au,{})}),e.jsx(ml,{children:e.jsxs("div",{className:"bg dark:bg-alt",children:[e.jsx(Mi,{slot:"dashboard",className:"mb-20 mt-50"}),e.jsx(_i,{}),s&&e.jsx(Ei,{padding:"px-16 md:px-28 pt-24 pb-28 md:pb-24"})]})})]})}function Ru(s){var o;const{billing:t}=ce(),{leftSidenavStatus:n}=x.useContext(Jt),{selectedTheme:a}=yr(),r=((o=a.values)==null?void 0:o["--be-navbar-color"])==="bg"?"primary":"paper";return e.jsx(pl,{...s,size:"sm",menuPosition:"dashboard-navbar",rightChildren:n==="compact"&&t.enable&&e.jsx(Co,{variant:"flat",color:r}),children:n==="compact"&&e.jsx(yo,{trigger:e.jsx(N,{variant:"text",endIcon:e.jsx(Os,{}),children:e.jsx(i,{message:"Workspaces"})})})})}const Mu={month:"short",day:"2-digit"};function _u({value:s,onChange:t,disabled:n,compactOnMobile:a=!0,enableCompare:r=!1,granularity:o="minute"}){const l=ve();return e.jsxs(_,{type:"popover",onClose:c=>{c&&t(c)},children:[e.jsx(N,{variant:"outline",color:"chip",endIcon:e.jsx($n,{}),disabled:n,children:e.jsx(Bn,{start:s.start,end:s.end,options:l&&a?Mu:cr.short})}),e.jsx(Eu,{value:s,enableCompare:r,granularity:o})]})}function Eu({value:s,enableCompare:t,granularity:n}){const a=ve(),r=vn({granularity:n,defaultValue:{start:s.start,end:s.end,preset:s.preset},closeDialogOnSelection:!1}),o=!!s.compareStart&&!!s.compareEnd,l=vn({granularity:n,defaultValue:o?{start:s.compareStart,end:s.compareEnd,preset:s.comparePreset}:Er[0].getRangeValue(r.selectedValue)});return e.jsx(Tr,{state:r,compareState:t?l:void 0,compareVisibleDefault:o,showInlineDatePickerField:!a})}function Yn(s){const{title:t,description:n,children:a,className:r,contentIsFlex:o=!0,contentClassName:l,contentRef:c,minHeight:d="min-h-440"}=s;return e.jsxs("div",{className:k("rounded-panel flex h-full flex-auto flex-col border bg",d,r),children:[e.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between p-14 text-xs",children:[e.jsx("div",{className:"text-sm font-semibold",children:t}),n&&e.jsx("div",{className:"text-muted",children:n})]}),e.jsx("div",{ref:c,className:k("relative p-14",o&&"flex flex-auto items-center justify-center",l),children:a})]})}function Ot(){return e.jsxs("div",{className:"flex items-center gap-10 text-sm absolute mx-auto",children:[e.jsx(gt,{isIndeterminate:!0,size:"sm"}),e.jsx(i,{message:"Chart loading"})]})}const Tu=x.lazy(()=>bt(()=>import("./lazy-chart-0cf66182.js"),["./lazy-chart-0cf66182.js","./main-cdcc8bff.js","./main-08072798.css"],import.meta.url));function Qn(s){const{title:t,description:n,className:a,contentRef:r,isLoading:o}=s;return e.jsx(Yn,{title:t,description:n,className:a,contentRef:r,children:e.jsxs(x.Suspense,{fallback:e.jsx(Ot,{}),children:[e.jsx(Tu,{...s}),o&&e.jsx(Ot,{})]})})}function Zn(s,{localeCode:t="en",shareFirstDatasetLabels:n=!0}){if(!s)return{datasets:[]};const a=[];return{...s,datasets:s.datasets.map((r,o)=>{const l=r.data.map((c,d)=>{let u;return o===0||!n?(u=Vu(c,s.granularity,t),a[d]=u):u=a[d],{...u,value:c.value}});return{...r,data:l}})}}function Vu(s,t,n){return s.label?{label:s.label}:s.date?Ou(s,t,n):{label:""}}function Ou({date:s,endDate:t},n="day",a){const r=Ms(s).toDate(),o=t?Ms(t).toDate():null;switch(n){case"minute":return{label:ze(a,{second:"2-digit"}).format(r),tooltipTitle:ze(a,{day:"2-digit",hour:"numeric",minute:"numeric",second:"2-digit"}).format(r)};case"hour":return{label:ze(a,{hour:"numeric",minute:"numeric"}).format(r),tooltipTitle:ze(a,{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(r)};case"day":return{label:ze(a,{day:"2-digit",weekday:"short"}).format(r),tooltipTitle:ze(a,{day:"2-digit",weekday:"short",month:"short"}).format(r)};case"week":return{label:ze(a,{month:"short",day:"2-digit"}).format(r),tooltipTitle:ze(a,{day:"2-digit",month:"long",year:"numeric"}).formatRange(r,o)};case"month":return{label:ze(a,{month:"short",year:"numeric"}).format(r),tooltipTitle:ze(a,{month:"long",year:"numeric"}).format(r)};case"year":return{label:ze(a,{year:"numeric"}).format(r),tooltipTitle:ze(a,{year:"numeric"}).format(r)}}}const ze=Ti((s,t)=>new Vi(s,t),{equals:(s,t)=>dr(s,t),callTimeout:void 0}),za=tt().themes.all[0].values["--be-primary"],Je=[[`rgb(${za.replaceAll(" ",",")})`,`rgba(${za.replaceAll(" ",",")},0.2)`],["rgb(255,112,67)","rgb(255,112,67,0.2)"],["rgb(255,167,38)","rgb(255,167,38,0.2)"],["rgb(141,110,99)","rgb(141,110,99,0.2)"],["rgb(102,187,106)","rgba(102,187,106,0.2)"],["rgb(92,107,192)","rgb(92,107,192,0.2)"]],$u={parsing:{xAxisKey:"label",yAxisKey:"value"},datasets:{line:{fill:"origin",tension:.1,pointBorderWidth:4,pointHitRadius:10}},plugins:{tooltip:{intersect:!1,mode:"index"}}};function Hu({data:s,className:t,...n}){const{localeCode:a}=rs(),r=x.useMemo(()=>{const o=Zn(s,{localeCode:a});return o.datasets=o.datasets.map((l,c)=>({...l,backgroundColor:Je[c][1],borderColor:Je[c][0],pointBackgroundColor:Je[c][0]})),o},[s,a]);return e.jsx(Qn,{...n,className:k(t,"min-w-500"),data:r,type:"line",options:$u})}const Bu={parsing:{key:"value"},plugins:{tooltip:{intersect:!0}}};function Aa({data:s,className:t,...n}){const{localeCode:a}=rs(),r=x.useMemo(()=>{var l;const o=Zn(s,{localeCode:a});return o.labels=(l=o.datasets[0])==null?void 0:l.data.map(c=>c.label),o.datasets=o.datasets.map((c,d)=>({...c,backgroundColor:Je.map(u=>u[1]),borderColor:Je.map(u=>u[0]),borderWidth:2})),o},[s,a]);return e.jsx(Qn,{type:"polarArea",data:r,options:Bu,className:k(t,"min-w-500"),...n})}function Uu({data:s,isLoading:t,...n}){const a=(s==null?void 0:s.datasets[0].data)||[];return e.jsxs(Yn,{...n,className:"w-1/2 min-w-500 md:min-w-0",title:e.jsx(i,{message:"Referrers"}),contentIsFlex:t,contentClassName:"max-h-[370px] overflow-y-auto",children:[t&&e.jsx(Ot,{}),a.map((r,o)=>e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-24 text-sm",children:[r.label?e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(ns,{url:r.label}),e.jsx("a",{className:k(bs,"overflow-hidden overflow-ellipsis whitespace-nowrap lowercase"),href:r.label,target:"_blank",rel:"noreferrer",children:Ke(r.label)})]}):e.jsx(i,{message:"Direct, Email, SMS"}),e.jsx(qt,{radius:"rounded",size:"xs",color:"primary",className:"font-semibold",children:r.value})]},r.label||o))]})}const Fa="https://www.gstatic.com/charts/loader.js";function qu({placeholderRef:s,data:t,country:n,onCountrySelected:a}){const{trans:r}=O(),{analytics:o}=ce(),l=o==null?void 0:o.gchart_api_key,{selectedTheme:c}=yr(),d=x.useRef(),u=!!a&&!n,m=x.useCallback(()=>{var y,b;if(typeof google>"u")return;const f=t.map(w=>[w.label,w.value]);f.unshift([r(n?h("City"):h("Country")),r(h("Clicks"))]);const g=`${Pa(c.values["--be-paper"])}`,v={colorAxis:{colors:[`${Pa(c.values["--be-primary"])}`]},backgroundColor:g,region:n?n.toUpperCase():void 0,resolution:n?"provinces":"countries",displayMode:n?"markers":"regions",enableRegionInteractivity:u};!d.current&&s.current&&((y=google==null?void 0:google.visualization)!=null&&y.GeoChart)&&(d.current=new google.visualization.GeoChart(s.current)),(b=d.current)==null||b.draw(google.visualization.arrayToDataTable(f),v)},[c,t,s,r,n,u]),p=x.useCallback(async()=>{pa.isLoadingOrLoaded(Fa)||(await pa.loadAsset(Fa,{type:"js",id:"google-charts-js"}),await google.charts.load("current",{packages:["geochart"],mapsApiKey:l}),m())},[l,m]);return x.useEffect(()=>(d.current&&a&&google.visualization.events.addListener(d.current,"regionClick",f=>a==null?void 0:a(f.region)),()=>{d.current&&google.visualization.events.removeAllListeners(d.current)}),[a,d.current]),x.useEffect(()=>{p()},[p]),x.useEffect(()=>{m()},[c,m,t]),{drawGoogleChart:m}}const So=z(e.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Wu=z(e.jsx("path",{d:"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),"InfoDialogTrigger");function Ds({title:s,body:t,dialogSize:n="sm",className:a}){return e.jsxs(_,{type:"popover",triggerOnHover:!0,children:[e.jsx(L,{className:k("ml-4 text-muted opacity-70",a),iconSize:"xs",size:"2xs",children:e.jsx(Wu,{viewBox:"0 0 16 16"})}),e.jsxs(q,{size:n,children:[s&&e.jsx(Q,{padding:"px-18 pt-12",size:"md",hideDismissButton:!0,children:s}),e.jsx(K,{children:t})]})]})}const Ku=x.memo(({code:s})=>{const{localeCode:t}=rs(),n=new Intl.DisplayNames([t],{type:"region"});let a;try{a=n.of(s.toUpperCase())}catch{}return e.jsx(x.Fragment,{children:a})});function Gu({data:s,isLoading:t,onCountrySelected:n,country:a,...r}){const o=x.useRef(null),l=!!n,c=s==null?void 0:s.datasets[0].data,d=x.useMemo(()=>c||[],[c]);return qu({placeholderRef:o,data:d,country:a,onCountrySelected:n}),e.jsxs(Yn,{...r,className:"min-w-500",title:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{message:"Top Locations"}),a?e.jsxs("span",{className:"pl-4",children:["(",e.jsx(Ku,{code:a}),")"]}):null,l&&e.jsx(Yu,{})]}),contentIsFlex:t,children:[t&&e.jsx(Ot,{}),e.jsxs("div",{className:"flex gap-24",children:[e.jsx("div",{ref:o,className:"flex-auto w-[480px] min-h-[340px]"}),e.jsxs("div",{className:"w-[170px]",children:[e.jsx("div",{className:"text-sm max-h-[340px] w-full flex-initial overflow-y-auto",children:d.map(u=>e.jsxs("div",{className:k("flex items-center gap-4 mb-4",l&&"cursor-pointer hover:underline"),role:l?"button":void 0,onClick:()=>{n==null||n(u.code)},children:[e.jsx("div",{className:"max-w-110 whitespace-nowrap overflow-hidden overflow-ellipsis",children:u.label}),e.jsxs("div",{children:["(",u.percentage,")%"]})]},u.label))}),a&&e.jsx(N,{variant:"outline",size:"xs",className:"mt-14",startIcon:e.jsx(So,{}),onClick:()=>{n==null||n(void 0)},children:e.jsx(i,{message:"Back to countries"})})]})]})]})}function Yu(){return e.jsx(Ds,{title:e.jsx(i,{message:"Zooming in"}),body:e.jsx(i,{message:"Click on a country inside the map or country list to zoom in and see city data for that country."})})}function Qu({data:s,direction:t="vertical",individualBarColors:n=!1,className:a,...r}){const{localeCode:o}=rs(),l=x.useMemo(()=>{const u=Zn(s,{localeCode:o});return u.datasets=u.datasets.map((m,p)=>({...m,backgroundColor:n?Je.map(f=>f[1]):Je[p][1],borderColor:n?Je.map(f=>f[0]):Je[p][0],borderWidth:2})),u},[s,o,n]),c=t==="horizontal",d=x.useMemo(()=>({indexAxis:c?"y":"x",parsing:{xAxisKey:c?"value":"label",yAxisKey:c?"label":"value"}}),[c]);return e.jsx(Qn,{type:"bar",className:k(a,"min-w-500"),data:l,options:d,...r})}const Ra="reports/clicks";function Zu(s,t){return Fe({queryKey:[Ra,s],queryFn:()=>Ju(Ra,s),placeholderData:zn,enabled:t.isEnabled})}function Ju(s,t){var a;const n={model:t.model,metrics:(a=t.metrics)==null?void 0:a.join(","),country:t.country};return n.startDate=t.dateRange.start.toAbsoluteString(),n.endDate=t.dateRange.end.toAbsoluteString(),n.timezone=t.dateRange.start.timeZone,E.get(s,{params:n}).then(r=>r.data)}function Xu({dateRange:s,model:t}){const a="flex flex-col lg:flex-row lg:items-center overflow-x-auto gap-12 md:gap-24 mb-12 md:mb-24";return e.jsxs(x.Fragment,{children:[e.jsxs("div",{className:a,children:[e.jsx(Fs,{metric:"clicks",model:t,dateRange:s,children:({data:r})=>e.jsx(Hu,{className:"flex-auto",title:e.jsx(i,{message:"Click count"}),hideLegend:!0,description:e.jsx(i,{message:":count total clicks",values:{count:e.jsx(Ue,{value:(r==null?void 0:r.report.clicks.total)||0})}})})}),e.jsx(Fs,{metric:"devices",model:t,dateRange:s,children:e.jsx(Aa,{title:e.jsx(i,{message:"Top devices"}),className:"max-w-500"})})]}),e.jsxs("div",{className:a,children:[e.jsx(Fs,{metric:"referrers",model:t,dateRange:s,children:e.jsx(Uu,{})}),e.jsx(em,{dateRange:s,model:t})]}),e.jsxs("div",{className:a,children:[e.jsx(Fs,{metric:"browsers",model:t,dateRange:s,children:e.jsx(Qu,{className:"max-w-500",direction:"horizontal",individualBarColors:!0,hideLegend:!0,title:e.jsx(i,{message:"Top browsers"})})}),e.jsx(Fs,{metric:"platforms",model:t,dateRange:s,children:e.jsx(Aa,{className:"max-w-500",title:e.jsx(i,{message:"Top platforms"})})})]})]})}function em({model:s,dateRange:t}){const[n,a]=Pn(),r=n.get("country")||void 0,o=x.useCallback(l=>{a(c=>(l?c.set("country",l):c.delete("country"),c))},[a]);return e.jsx(Fs,{metric:r?"cities":"countries",model:s,dateRange:t,country:r,children:e.jsx(Gu,{onCountrySelected:o,country:r,className:"flex-auto w-1/2 lg:max-w-[740px]"})})}function Fs({children:s,metric:t,model:n,dateRange:a}){var p,f;const[r,o]=x.useState(!1),[l]=Pn(),c=Zu({metrics:[t],model:n,dateRange:a,country:l.get("country")},{isEnabled:r}),d=typeof s=="function"?s(c):s,u=x.useRef(),m=x.useCallback(g=>{var j;if(g){const v=new IntersectionObserver(([y])=>{var b;y.isIntersecting&&(o(!0),(b=u.current)==null||b.disconnect(),u.current=void 0)},{threshold:.1});u.current=v,v.observe(g)}else u.current&&((j=u.current)==null||j.disconnect())},[]);return x.cloneElement(d,{data:(f=(p=c.data)==null?void 0:p.report)==null?void 0:f[t],isLoading:c.isLoading,contentRef:m})}function an({model:s,title:t,actions:n}){const[a,r]=x.useState(()=>Xt[2].getRangeValue());return e.jsxs("div",{className:"min-h-full gap-12 md:gap-24 p-12 md:p-24",children:[e.jsx(Mn,{children:e.jsx(i,{message:"Clicks report"})}),e.jsxs("div",{className:"md:flex items-center justify-between gap-24 mb-24",children:[t,e.jsxs("div",{className:"flex-shrink-0 flex items-center md:justify-end mt-10 md:mt-0 gap-12",children:[n,e.jsx("div",{className:"text-sm font-semibold",children:e.jsx(_u,{value:a,onChange:r,compactOnMobile:!1})})]})]}),e.jsx(Xu,{dateRange:a,model:s})]})}function sm(){const{workspaceId:s}=Ie(),{user:t}=oe(),n=s&&s>0?`workspace=${s}`:`user=${t==null?void 0:t.id}`;return e.jsx(an,{model:n,title:e.jsx("h1",{className:"text-3xl font-light",children:e.jsx(i,{message:"Clicks report"})})})}const Cn=[{key:"type",label:h("Type"),description:h("Type of the link"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Direct"),value:"direct"},{key:"02",label:h("Overlay"),value:"overlay"},{key:"03",label:h("Frame"),value:"frame"},{key:"04",label:h("Custom page"),value:"link_page"}]}},{key:"active",label:h("Status"),description:h("Whether link is disabled or not"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}},{key:"password",label:h("Password"),description:h("Whether link is password protected"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Has a password"),value:{value:null,operator:re.ne}},{key:"02",label:h("Does not have a password"),value:{value:null,operator:re.eq}}]}},{key:"clicks_count",label:h("Click count"),description:h("Total number of clicks for link"),defaultOperator:re.gte,operators:Et,control:{type:$.Input,inputType:"number",defaultValue:1}},Tt({key:"clicked_at",label:h("Clicked at"),description:h("Date link was last clicked")}),Tt({key:"expires_at",label:h("Expires at"),description:h("Date link will expire")}),ks({description:h("Date link was created")}),ws({description:h("Date link was last updated")}),{key:"user_id",label:h("User"),description:h("User link was created by"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}],Io=["countries","domains","pages","overlays","pixels","groups"];function Ls(){const{user:s}=oe();return Gt(Io,{userId:s==null?void 0:s.id,pageType:"link_page"})}function rn(){var s;Oi(Io,{userId:(s=tt().user)==null?void 0:s.id,pageType:"link_page"})}function tm(){var o,l,c;const{branding:{site_name:s}}=ce(),{data:t}=Ls(),{watch:n,setValue:a}=os(),r=n("type");return e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs(Ce,{className:"mb-24 flex-auto",name:"type",label:e.jsx(i,{message:"Type"}),selectionMode:"single",onSelectionChange:()=>{a("type_id",null)},children:[e.jsx(I,{value:"direct",description:e.jsx(i,{message:"Redirect user to url instantly"}),children:e.jsx(i,{message:"Direct"})}),e.jsx(I,{value:"frame",description:e.jsx(i,{message:" Show url inside iframe with :siteName navigation bar.",values:{siteName:s}}),children:e.jsx(i,{message:"Frame"})}),e.jsx(I,{value:"splash",description:e.jsx(i,{message:"Show splash page with optional ads and redirect user to url after a delay."}),children:e.jsx(i,{message:"Splash"})}),(o=t==null?void 0:t.pages)!=null&&o.length?e.jsx(I,{value:"page",description:e.jsx(i,{message:`Show specified link page with :siteName navigation bar and button to open
      long url.`,values:{siteName:s}}),children:e.jsx(i,{message:"Link page"})}):null,t!=null&&t.overlays.length?e.jsx(I,{value:"overlay",description:e.jsx(i,{message:"Redirect user instantly and show specified overlay over the link."}),children:e.jsx(i,{message:"Overlay"})}):null]}),r==="page"&&e.jsx(Ce,{label:e.jsx(i,{message:"Link page"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(l=t==null?void 0:t.pages)==null?void 0:l.map(d=>e.jsx(I,{value:d.id,children:d.title},d.id))}),r==="overlay"&&e.jsx(Ce,{label:e.jsx(i,{message:"Link overlay"}),name:"type_id",selectionMode:"single",className:"mb-24 flex-auto",required:!0,children:(c=t==null?void 0:t.overlays)==null?void 0:c.map(d=>e.jsx(I,{value:d.id,children:d.name},d.id))})]})}const nm=""+new URL("upgrade-1a8523e3.svg",import.meta.url).href;function Do({message:s,messageSuffix:t}){const{close:n}=B();return e.jsxs(q,{size:"sm",children:[e.jsx(Q,{children:e.jsx(i,{message:"Join the PROs"})}),e.jsxs(K,{children:[e.jsx("div",{className:"mb-20 text-center",children:e.jsx(jt,{src:nm,className:"mx-auto",height:"h-100"})}),e.jsxs("div",{children:[s," ",t]})]}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",size:"xs",onClick:()=>{n()},children:e.jsx(i,{message:"Maybe later"})}),e.jsx(N,{autoFocus:!0,variant:"flat",size:"xs",color:"primary",elementType:fe,to:"/pricing",target:"_blank",onClick:()=>n(),children:e.jsx(i,{message:"Find out more"})})]})]})}function Lo({message:s,messageSuffix:t}){return e.jsx(Do,{message:s,messageSuffix:t===void 0?e.jsx(i,{message:"Upgrade to unlock this feature and many more."}):t})}function on({message:s,className:t,iconButton:n}){const{billing:a}=ce();return a.enable?e.jsxs(_,{type:"popover",triggerOnHover:!0,children:[n?e.jsx(L,{className:t,color:"primary",size:"sm",children:e.jsx(ot,{})}):e.jsx(N,{variant:"flat",color:"primary",size:"2xs",startIcon:e.jsx(ot,{}),className:t,children:e.jsx(i,{message:"Upgrade"})}),e.jsx(Lo,{message:s})]}):e.jsx(am,{className:t})}function am({className:s}){return e.jsx(se,{label:e.jsx(i,{message:"You don't have permissions to access this feature."}),children:e.jsx(ot,{size:"sm",className:k("text-muted",s)})})}function Lt({title:s,description:t,children:n,upgradeMessage:a}){return e.jsxs("div",{className:"border-t pt-24",children:[e.jsxs("div",{className:k("font-semibold",a&&"mb-8 flex items-center gap-10"),children:[e.jsx("div",{className:"text-sm",children:s}),a&&e.jsx(on,{message:a})]}),e.jsx("div",{className:"text-sm text-muted",children:t}),n]})}function Ps(s){const{data:t}=Dt(),{hasPermission:n}=oe();return{disabled:!(t!=null&&t.usage.links[s])&&!n("admin")}}function rm({linkName:s}){const{disabled:t}=Ps("password");return e.jsxs(x.Fragment,{children:[e.jsx(M,{type:"password",name:"password",label:e.jsx(i,{message:"Password"}),autoComplete:"new-password",className:"mb-24",labelSuffix:t&&e.jsx(on,{message:e.jsx(i,{message:"Your current plan doesn't include link password protection."})}),disabled:t}),e.jsx(om,{linkName:s}),e.jsx(im,{linkName:s})]})}function om({linkName:s}){const t=$s(),{disabled:n}=Ps("expiration");return e.jsx(Lt,{title:e.jsx(i,{message:"Schedule"}),description:e.jsx(i,{message:"Specify a date when :name should become active and when it should expire. Both activation and expiration dates are optional.",values:{name:s}}),upgradeMessage:n&&e.jsx(i,{message:"Your current plan doesn't include :name scheduling.",values:{name:s}}),children:e.jsxs("div",{className:"mt-24 block items-center gap-24 md:flex",children:[e.jsx(dt,{showCalendarFooter:!0,label:e.jsx(i,{message:"Activation date"}),min:t,name:"activates_at",className:"mb-24 flex-auto",disabled:n}),e.jsx(dt,{showCalendarFooter:!0,label:e.jsx(i,{message:"Expiration date"}),min:t,name:"expires_at",className:"mb-24 flex-auto",disabled:n})]})})}function im({linkName:s}){const{trans:t}=O(),{disabled:n}=Ps("expiration");return e.jsx(Lt,{title:e.jsx(i,{message:"Expiration clicks"}),description:e.jsx(i,{message:`After :name is visited specified amount of times, it will no longer be accessible.
Optionally, after click amount is reached :name can redirect to specified url instead.`,values:{name:s}}),upgradeMessage:n&&e.jsx(i,{message:"Your current plan doesn't include expiration clicks."}),children:e.jsxs("div",{className:"mt-24 block items-center gap-24 md:flex",children:[e.jsx(M,{type:"number",label:e.jsx(i,{message:"Max clicks"}),name:"exp_clicks_rule.key",className:"mb-24 flex-auto",disabled:n}),e.jsx(M,{type:"url",label:e.jsx(i,{message:"Redirect URL"}),placeholder:t(h("Optional")),name:"exp_clicks_rule.value",className:"mb-24 flex-auto",disabled:n})]})})}const lm=z(e.jsx("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"}),"SwapVertOutlined");function cm(){return e.jsxs("div",{children:[e.jsx(dm,{}),e.jsx(um,{}),e.jsx(mm,{})]})}function dm(){const{trans:s}=O(),{data:t}=Ls();return e.jsx(Jn,{defaultKey:"us",name:"geo_rules",title:e.jsx(i,{message:"Location targeting"}),description:e.jsx(i,{message:"Redirect users to different url based on their location."}),buttonLabel:e.jsx(i,{message:"Add location"}),children:e.jsx(Ce,{required:!0,showSearchField:!0,searchPlaceholder:s(h("Search countries")),selectionMode:"single",items:t==null?void 0:t.countries,name:"temp",label:e.jsx(i,{message:"Country"}),className:"mt-24 flex-auto",children:n=>e.jsx(I,{value:n.code,children:n.name},n.code)})})}function um(){return e.jsx(Jn,{name:"device_rules",title:e.jsx(i,{message:"Device targeting"}),description:e.jsx(i,{message:"Redirect users to different url based on their device."}),buttonLabel:e.jsx(i,{message:"Add device"}),defaultKey:"desktop",children:e.jsxs(Ce,{required:!0,selectionMode:"single",name:"temp",label:e.jsx(i,{message:"Device"}),className:"mt-24 flex-auto",children:[e.jsx(I,{value:"desktop",children:e.jsx(i,{message:"Desktop"})}),e.jsx(I,{value:"table",children:e.jsx(i,{message:"Tablet"})}),e.jsx(I,{value:"mobile",children:e.jsx(i,{message:"Mobile"})})]})})}function mm(){return e.jsx(Jn,{name:"platform_rules",title:e.jsx(i,{message:"Platform targeting"}),description:e.jsx(i,{message:"Redirect users to different url based on their platform."}),defaultKey:"windows",buttonLabel:e.jsx(i,{message:"Add platform"}),children:e.jsxs(Ce,{name:"temp",required:!0,selectionMode:"single",label:e.jsx(i,{message:"Platform"}),className:"mt-24 flex-auto",children:[e.jsx(I,{value:"windows",children:e.jsx(i,{message:"Windows"})}),e.jsx(I,{value:"osx",children:e.jsx(i,{message:"MacOs"})}),e.jsx(I,{value:"ios",children:e.jsx(i,{message:"iOS"})}),e.jsx(I,{value:"android",children:e.jsx(i,{message:"Android"})}),e.jsx(I,{value:"linux",children:e.jsx(i,{message:"Linux"})})]})})}function Jn({name:s,title:t,description:n,buttonLabel:a,defaultKey:r,children:o}){const{fields:l,append:c,remove:d}=kr({name:s}),{disabled:u}=Ps("retargeting");return e.jsxs(Lt,{title:t,description:n,upgradeMessage:u&&e.jsx(i,{message:"Your current plan doesn't include link retargeting."}),children:[l.map((m,p)=>e.jsxs("div",{className:"block items-end gap-14 md:flex",children:[x.cloneElement(o,{name:`${s}.${p}.key`,disabled:u}),e.jsx(M,{required:!0,type:"url",name:`${s}.${p}.value`,label:e.jsx(i,{message:"URL"}),className:"mt-24 flex-auto",disabled:u}),e.jsx(xm,{onClick:()=>d(p)})]},m.id)),e.jsx(N,{className:"my-8",variant:"text",color:"primary",startIcon:e.jsx(ct,{}),onClick:()=>{c({key:r,value:""})},disabled:u,children:a})]})}function xm({onClick:s}){return e.jsxs(x.Fragment,{children:[e.jsx("div",{className:"mt-12 md:hidden",children:e.jsx(N,{variant:"outline",color:"danger",size:"xs",onClick:s,children:e.jsx(i,{message:"Remove"})})}),e.jsx(L,{color:"danger",onClick:s,className:"max-md:hidden",children:e.jsx(qe,{})})]})}const hm=z(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z"}),"PublicOutlined");function fm({hideTitle:s}){return e.jsxs("div",{children:[e.jsxs("div",{className:"block md:flex gap-24 mb-24",children:[e.jsx(vs,{children:e.jsx(yt,{name:"image",diskPrefix:"links",variant:"avatar",previewSize:"w-90 h-90",previewRadius:"rounded",placeholderIcon:e.jsx("div",{className:"w-full h-full bg-alt rounded"}),showRemoveButton:!0})}),e.jsxs("div",{className:"flex-auto my-24 md:my-0",children:[!s&&e.jsx(M,{name:"name",label:e.jsx(i,{message:"Title"}),className:"mb-24"}),e.jsx(M,{inputElementType:"textarea",name:"description",rows:2,label:e.jsx(i,{message:"description"})})]})]}),e.jsx(tn,{name:"tags",label:e.jsx(i,{message:"Tags"}),valueKey:"name"})]})}const pm=z(e.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"}),"AccountTreeOutlined");function gm(){const{trans:s}=O(),{disabled:t}=Ps("utm");return e.jsxs(Lt,{title:e.jsx(i,{message:"UTM tags"}),description:e.jsx(i,{message:"Add UTMs to track web traffic in analytics tools."}),upgradeMessage:t&&e.jsx(i,{message:"Your current plan doesn't include UTM functionality."}),children:[e.jsxs("div",{className:"block md:flex gap-24 items-center mt-24",children:[e.jsx(M,{name:"utm.source",label:e.jsx(i,{message:"Source"}),placeholder:s(h("e.g: adwords, google, facebook")),className:"mb-24 flex-auto",disabled:t}),e.jsx(M,{name:"utm.medium",label:e.jsx(i,{message:"Medium"}),placeholder:s(h("e.g: banner, email, social post")),className:"mb-24 flex-auto",disabled:t})]}),e.jsxs("div",{className:"block md:flex gap-24 items-center",children:[e.jsx(M,{name:"utm.campaign",label:e.jsx(i,{message:"Campaign"}),placeholder:s(h("e.g: holiday special, birthday promo")),className:"mb-24 flex-auto",disabled:t}),e.jsx(M,{name:"utm.term",label:e.jsx(i,{message:"Term"}),placeholder:s(h("Use to identify ppc keywords")),className:"mb-24 flex-auto",disabled:t})]}),e.jsx(M,{name:"utm.content",label:e.jsx(i,{message:"Content"}),placeholder:s(h("Use to differentiate ads or words on a page")),className:"mb-24",disabled:t}),e.jsx(jm,{})]})}function jm(){const{fields:s,append:t,remove:n}=kr({name:"utm_custom"}),{disabled:a}=Ps("utm");return e.jsxs(Lt,{title:e.jsx(i,{message:"Custom parameters"}),description:e.jsx(i,{message:"Add query parameters to track web traffic in analytics tools."}),upgradeMessage:a&&e.jsx(i,{message:"Your current plan doesn't include query parameters functionality."}),children:[s.map((r,o)=>e.jsxs("div",{className:"block md:flex items-end gap-14",children:[e.jsx(M,{required:!0,name:`utm_custom.${o}.key`,label:e.jsx(i,{message:"Key"}),className:"flex-auto mt-24",disabled:a}),e.jsx(M,{required:!0,name:`utm_custom.${o}.value`,label:e.jsx(i,{message:"Value"}),className:"flex-auto mt-24",disabled:a}),e.jsx(bm,{onClick:()=>n(o)})]},r.id)),e.jsx(N,{className:"mb-24 mt-12",variant:"text",color:"primary",startIcon:e.jsx(ct,{}),onClick:()=>{t({key:"",value:""})},disabled:a,children:e.jsx(i,{message:"Add parameter"})})]})}function bm({onClick:s}){return ve()?e.jsx("div",{className:"mt-12",children:e.jsx(N,{variant:"outline",color:"danger",size:"xs",onClick:s,children:e.jsx(i,{message:"Remove"})})}):e.jsx(L,{color:"danger",onClick:s,children:e.jsx(qe,{})})}function Xn(s){const{custom_domains:t,base_url:n}=ce();return x.useMemo(()=>{var r;const a=t==null?void 0:t.default_host;if(a){const o=(r=s==null?void 0:s.find(l=>l.host===a))==null?void 0:r.host;if(o)return o}return n.replace(/\/$/,"").replace(/(^\w+:|^)\/\//,"")},[t,n,s])}function ea({...s}){var o;const{data:t}=Ls(),n=Xn(t==null?void 0:t.domains),{custom_domains:a}=ce(),r=(t==null?void 0:t.domains)||[];return!(a!=null&&a.allow_select)||!r.length?null:e.jsxs(Ce,{selectionMode:"single",label:e.jsx(i,{message:"Domain"}),...s,children:[a.allow_all_option&&e.jsx(I,{value:null,children:e.jsx(i,{message:"All my domains (including default)"})},"all"),e.jsx(I,{value:0,startIcon:e.jsx(ns,{url:n}),children:Ke(n)},"default"),(o=t==null?void 0:t.domains)==null?void 0:o.map(l=>l.host===n?null:e.jsx(I,{value:l.id,startIcon:e.jsx(ns,{url:l.host}),children:Ke(l.host)},l.id))]})}function sa({defaultExpanded:s,multipleLinks:t,hiddenFields:n=[],linkName:a=e.jsx(i,{message:"link"})}){const{links:{retargeting:r}}=ce(),[o,l]=x.useState(s||[]);return e.jsxs(Br,{className:"-ml-14 -mr-14",mode:"multiple",variant:"minimal",expandedValues:o,onExpandedChange:c=>{l(c)},children:[e.jsx(As,{value:"options",label:e.jsx(i,{message:"Settings"}),startIcon:e.jsx(wr,{}),children:e.jsx(vm,{multipleLinks:t,hiddenFields:n,linkName:a})}),e.jsx(As,{value:"restrictions",label:e.jsx(i,{message:"Restrictions"}),startIcon:e.jsx(ot,{}),children:e.jsx(rm,{linkName:a})}),r&&e.jsx(As,{value:"retargeting",label:e.jsx(i,{message:"Retargeting"}),startIcon:e.jsx(lm,{}),children:e.jsx(cm,{})}),!n.includes("seo")&&e.jsx(As,{label:e.jsx(i,{message:"SEO"}),startIcon:e.jsx(hm,{}),value:"seo",children:e.jsx(fm,{hideTitle:n==null?void 0:n.includes("title")})}),e.jsx(As,{value:"utm",label:e.jsx(i,{message:"UTM"}),startIcon:e.jsx(pm,{}),children:e.jsx(gm,{})})]})}function vm({multipleLinks:s,hiddenFields:t,linkName:n}){const{links:{enable_type:a,pixels:r}}=ce(),o=s?2:1,l=t.includes("groups"),c=t.includes("type"),d=t.includes("enabled");return e.jsxs(x.Fragment,{children:[a&&!c&&e.jsx(tm,{}),e.jsx(ea,{name:"domain_id",className:"mb-24",description:e.jsx(i,{message:"Select which domain should [one :name|other :names] be accessible with.",values:{name:n,count:o}})}),!l&&e.jsx(ym,{multipleLinks:s}),r&&e.jsx(km,{multipleLinks:s,linkName:n}),!d&&e.jsx(ps,{name:"active",description:e.jsx(i,{message:"When [one :name is|other :names are] disabled, 404 page will be shown when short URL is visited.",values:{name:n,count:o}}),children:e.jsx(i,{message:"Enabled"})})]})}function ym({multipleLinks:s}){const{data:t}=Ls();return e.jsx(tn,{suggestions:t==null?void 0:t.groups,openMenuOnFocus:!0,allowCustomValue:!1,showDropdownArrow:!0,className:"mb-24",name:"groups",label:e.jsx(i,{message:"Groups"}),description:e.jsx(i,{message:"Which groups should [one link|other these links] belong to.",values:{count:s?2:1}}),children:n=>e.jsx(I,{value:n.id,children:n.name})})}function km({multipleLinks:s,linkName:t}){const{data:n}=Ls();return e.jsx(tn,{suggestions:n==null?void 0:n.pixels,openMenuOnFocus:!0,className:"mb-24",name:"pixels",label:e.jsx(i,{message:"Pixels"}),description:e.jsx(i,{message:"Which tracking pixels should be used for [one this :name|other these :names].",values:{count:s?2:1,name:t}}),children:a=>e.jsx(I,{value:a.id,children:a.name})})}function Po({host:s,value:t="",placeholder:n,onChange:a,className:r,inputRef:o,onInputBlur:l,showLinkIcon:c=!0,pattern:d,minLength:u,maxLength:m,hideButton:p,...f}){const{base_url:g}=ce(),j=f.prefix?`/${f.prefix}`:"",v=f.suffix?`/${f.suffix}`:"",[y,b]=x.useState(!1),[w,S]=x.useState(t);s=s||g,x.useEffect(()=>{S(t)},[t]);const D=()=>{y?(b(!1),w&&(a==null||a(w))):b(!0)};let F="";return w?F=w:n&&(F=Hd(n)),e.jsxs("div",{className:k("flex items-center",r),children:[c&&e.jsx(_n,{className:"icon-md text-muted"}),e.jsxs("div",{className:"text-primary ml-6 mr-14",children:[s,j,!y&&F&&e.jsxs(x.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium",children:F})]}),y?null:v]}),y&&e.jsx(Wt,{pattern:d,minLength:u,maxLength:m,onKeyDown:V=>{V.key==="Enter"&&D()},ref:o,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:w,onBlur:l,onChange:V=>{S(V.target.value)}}),!p&&e.jsx(N,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{D()},children:y?e.jsx(i,{message:"Save"}):e.jsx(i,{message:"Edit"})})]})}function ln({form:s,name:t}){var f,g;const{links:{alias_min:n,alias_max:a}}=ce(),{data:r}=Ls(),o=Xn(r==null?void 0:r.domains),{disabled:l}=Ps("alias"),{watch:c,setValue:d,formState:u}=s,m=c("alias")||c("hash"),p=((f=u.errors.alias)==null?void 0:f.message)||((g=u.errors.hash)==null?void 0:g.message);return e.jsxs("div",{className:"mb-24",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Po,{host:o,pattern:"[A-Za-z0-9\\-]+",minLength:n,maxLength:a,value:m,onChange:j=>{d(t,j,{shouldDirty:!0})},hideButton:l}),l&&e.jsx(on,{message:e.jsx(i,{message:"Your current plan does not include alias editing."})})]}),p&&e.jsx("div",{className:"mt-6 text-xs text-danger",children:p})]})}function zo({form:s,onSubmit:t,formId:n,showButtonLabelField:a,hiddenFields:r}){const{clearErrors:o}=s,{trans:l}=O(),{links:{min_len:c,max_len:d}}=ce(),u=r==null?void 0:r.includes("alias");return e.jsxs(he,{form:s,onSubmit:m=>{Nr(m.long_url)?t(m):s.setError("long_url",{message:l(h("This url is invalid."))})},onBeforeSubmit:()=>{o("alias")},id:n,children:[a&&e.jsx(M,{name:"name",label:e.jsx(i,{message:"Button label"}),className:"mb-24 flex-auto",placeholder:l(h("e.g. My Webpage")),autoFocus:!0}),e.jsx(M,{label:e.jsx(i,{message:"Destination URL"}),name:"long_url",placeholder:"https://example.com",autoComplete:"off",spellCheck:"false",required:!0,className:k(u?"mb-24":"mb-12"),autoFocus:!a,minLength:c,maxLength:d}),!u&&e.jsx(ln,{form:s,name:"alias"}),e.jsx(sa,{hiddenFields:r})]})}const Ao="********";function Fo(s){const t=s.rules||[],n={},a=[];if(s.utm){const r=new URLSearchParams(s.utm);for(const[o,l]of r.entries())wm.includes(o)?n[o]=l:a.push({key:o,value:l})}return{hash:s.hash,active:s.active,activates_at:s.activates_at,expires_at:s.expires_at,name:s.name,description:s.description,image:s.image,geo_rules:t.filter(r=>r.type==="geo"),device_rules:t.filter(r=>r.type==="device"),platform_rules:t.filter(r=>r.type==="platform"),exp_clicks_rule:t.find(r=>r.type==="exp_clicks"),password:s.has_password?Ao:"",utm:n,utm_custom:a,domain_id:s.domain_id,pixels:s.pixels,tags:s.tags}}const wm=["source","medium","campaign","term","content"];function ta(s){var n;s.password===Ao&&delete s.password;let t={...s,utm:null,groups:null,pixels:null,tags:null};return t=Nm(t,s),t.pixels=s.pixels?s.pixels.map(a=>a.id):[],t.tags=(n=s.tags)==null?void 0:n.map(a=>typeof a=="string"?a:a.name),t}function Nm(s,t){var a;if(!t.utm&&!t.utm_custom)return s;const n=Cr(t.utm||{});return(a=t.utm_custom)==null||a.forEach(({key:r,value:o})=>{n[r]=o}),s.utm=new URLSearchParams(n).toString(),s}function na(s){var n;const t=ta(s);return t.groups=(n=s.groups)==null?void 0:n.map(a=>a.id),t}function Cm(s,{endpoint:t,invalidateQueries:n=!0}={}){const{trans:a}=O();return G({mutationFn:r=>Sm(r,t),onSuccess:()=>{Z.positive(a(h("Link created"))),n&&(U.invalidateQueries({queryKey:te("link")}),U.invalidateQueries({queryKey:te("link-group")}),U.invalidateQueries({queryKey:te("biolink")}))},onError:r=>ye(r,s)})}function Sm(s,t){return E.post(t||"link",na(s)).then(n=>n.data)}function aa({group:s,position:t,showButtonLabelField:n,hiddenFields:a,endpoint:r,onSuccess:o,invalidateQueries:l}){const{close:c,formId:d}=B(),{links:{default_type:u},custom_domains:m}=ce(),{verify:p,isVerifying:f}=kt("link_creation"),g=ne({defaultValues:{hash:En(5),active:!0,type:u||"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:s?[s]:[],position:t,utm:{},utm_custom:[],domain_id:m!=null&&m.allow_all_option?void 0:0}}),j=Cm(g,{endpoint:r,invalidateQueries:l});return e.jsxs(q,{size:"lg",children:[e.jsx(Q,{children:e.jsx(i,{message:"Create link"})}),e.jsx(K,{children:e.jsx(zo,{hiddenFields:a,showButtonLabelField:n,formId:d,form:g,onSubmit:async v=>{await p()&&j.mutate(v,{onSuccess:b=>{o==null||o(b),c()}})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{c()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:d,disabled:j.isPending||f,children:e.jsx(i,{message:"Create"})})]})]})}function Im(s,t,{endpoint:n,invalidateQueries:a=!0}={}){const{trans:r}=O();return G({mutationFn:o=>Dm(t,o,n),onSuccess:async()=>{a&&await Promise.allSettled([U.invalidateQueries({queryKey:te("link")}),U.invalidateQueries({queryKey:te("link-group")}),U.invalidateQueries({queryKey:te("biolink")})]),Z.positive(r(h("Link updated")))},onError:o=>ye(o,s)})}function Dm(s,t,n){return E.put(n||`link/${s}`,na(t)).then(a=>a.data)}function Ro({link:s,showButtonLabelField:t,hiddenFields:n,invalidateQueries:a,onSuccess:r,endpoint:o}){const{close:l,formId:c}=B(),{verify:d,isVerifying:u}=kt("link_creation"),m=x.useMemo(()=>Lm(s),[s]),p=ne({defaultValues:m}),f=Im(p,s.id,{endpoint:o,invalidateQueries:a});return e.jsxs(q,{size:"lg",children:[e.jsx(Q,{children:e.jsx(i,{message:"Update link"})}),e.jsx(K,{children:e.jsx(zo,{hiddenFields:n,showButtonLabelField:t,formId:c,form:p,onSubmit:async g=>{await d()&&f.mutate(g,{onSuccess:v=>{r==null||r(v),l()}})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{l()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:c,disabled:f.isPending||u,children:e.jsx(i,{message:"Update"})})]})]})}function Lm(s){return{...Fo(s),long_url:s.long_url,alias:s.alias,type:s.type,type_id:s.type_id,groups:s.groups}}function Mo({link:s,className:t}){return s.image?e.jsx("img",{className:t,alt:"",src:s.image}):e.jsx(ns,{className:t,url:s.long_url})}function Pm({resourceName:s}){const{trans:t}=O();return e.jsx(Do,{message:e.jsx(i,{message:"You've reached the maximum number of :resource allowed for your current plan.",values:{resource:t(s)}}),messageSuffix:e.jsx(i,{message:"Upgrade to increase this limit and unlock other features."})})}const de=x.forwardRef(({children:s,resource:t,action:n,...a},r)=>{const{user:o}=oe(),[l,c]=x.useState(!1),{data:d}=Dt(),u=x.useMemo(()=>{const f=typeof t=="string"?t:t.model_type;return`${zm(f)}s`},[t]),m=d==null?void 0:d.usage[u][n],p=d==null?void 0:d.usage[u].createMsgType;return m||typeof t=="object"&&t.user_id===(o==null?void 0:o.id)?x.cloneElement(s,{...a,ref:r}):!m&&p!=="overQuota"?null:e.jsxs("div",{onPointerDown:He(f=>{f.preventDefault(),f.stopPropagation()}),onClickCapture:He(f=>{f.preventDefault(),f.stopPropagation(),c(!0)}),onKeyDownCapture:He(f=>{const g=f;g.preventDefault(),g.stopPropagation(),(g.key==="Enter"||g.key===" ")&&c(!0)}),children:[s,e.jsx(_,{type:"modal",isOpen:l,onOpenChange:c,children:e.jsx(Pm,{resourceName:wo[u]})})]})});function zm(s){return s.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}const xt=z(e.jsx("path",{d:"M5 9.2h3V19H5V9.2zM10.6 5h2.8v14h-2.8V5zm5.6 8H19v6h-2.8v-6z"}),"BarChartOutlined"),Sn=[{key:"summary",header:()=>e.jsx(i,{message:"Summary"}),width:"flex-3 min-w-200",visibleInMode:"all",body:s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[e.jsx(Mo,{link:s,className:"w-16 h-16"}),e.jsx("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:s.long_url,target:"_blank",rel:"noreferrer","data-testid":"long-url",children:Ke(s.long_url)})]}),e.jsx($i,{link:s,variant:"text",className:"block text-muted hover:underline w-min","data-testid":"short-url"})]})},{key:"user_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Owner"}),width:"flex-2 min-w-140",body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"clicks",sortingKey:"clicks_count",allowsSorting:!0,header:()=>e.jsx(i,{message:"Clicks"}),body:s=>s.clicks_count?e.jsx(Ue,{value:s.clicks_count}):""},{key:"type",sortingKey:"type",allowsSorting:!0,header:()=>e.jsx(i,{message:"Type"}),body:s=>e.jsx(qt,{size:"xs",radius:"rounded",className:"capitalize",children:e.jsx(i,{message:s.type})})},{key:"password",allowsSorting:!0,header:()=>e.jsx(i,{message:"Password"}),body:s=>s.has_password?e.jsx(_s,{className:"icon-md text-positive"}):e.jsx(qe,{className:"icon-md text-danger"})},{key:"expires_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Expires at"}),body:s=>s.expires_at?e.jsx(Xe,{date:s.expires_at}):""},{key:"clicked_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last clicked"}),body:s=>s.clicked_at?e.jsx(Xe,{date:s.clicked_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-128 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(se,{label:e.jsx(i,{message:"Link statistics"}),children:e.jsx(fe,{to:`${s.id}`,children:e.jsx(L,{size:"md",children:e.jsx(xt,{})})})}),e.jsx(ys,{link:s}),e.jsx(de,{resource:s,action:"update",children:e.jsxs(_,{type:"modal",children:[e.jsx(se,{label:e.jsx(i,{message:"Edit link"}),children:e.jsx(L,{size:"md",children:e.jsx(Ye,{})})}),e.jsx(Ro,{link:s})]})})]})}],_o=z(e.jsx("path",{d:"M8 11h8v2H8v-2zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z"}),"AddLinkOutlined"),Eo=z(e.jsx("path",{d:"M 7 2 C 5.895 2 5 2.895 5 4 L 5 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 16 C 2 17.105 2.895 18 4 18 L 5 18 L 5 20 C 5 21.105 5.895 22 7 22 L 15.171875 22 L 13.171875 20 L 7 20 L 7 18 L 17 18 L 17 16 C 17 14.895 17.895 14 19 14 L 21 14 L 21 7 L 16 2 L 7 2 z M 7 4 L 15 4 L 15 8 L 19 8 L 19 9 L 7 9 L 7 4 z M 6 11 C 7.105 11 8 11.895 8 13 L 7 13 C 7 12.449 6.551 12 6 12 C 5.449 12 5 12.449 5 13 L 5 14 C 5 14.551 5.449 15 6 15 C 6.551 15 7 14.551 7 14 L 8 14 C 8 15.105 7.105 16 6 16 C 4.895 16 4 15.105 4 14 L 4 13 C 4 11.895 4.895 11 6 11 z M 10.644531 11 C 12.067531 11.041 12.154297 12.282906 12.154297 12.503906 L 11.1875 12.503906 C 11.1875 12.400906 11.204906 11.806641 10.628906 11.806641 C 10.453906 11.806641 10.059844 11.884188 10.089844 12.367188 C 10.118844 12.810188 10.703547 13.019406 10.810547 13.066406 C 11.034547 13.148406 12.141391 13.642391 12.150391 14.650391 C 12.152391 14.864391 12.097062 15.985 10.664062 16 C 9.1050625 16.017 9 14.675438 9 14.398438 L 9.9746094 14.398438 C 9.9746094 14.545438 9.9870625 15.256172 10.664062 15.201172 C 11.071063 15.167172 11.159828 14.87425 11.173828 14.65625 C 11.196828 14.28925 10.846563 14.068625 10.476562 13.890625 C 9.9565625 13.640625 9.1341406 13.333375 9.1191406 12.359375 C 9.1061406 11.482375 9.7505312 10.975 10.644531 11 z M 13 11 L 14.052734 11 L 14.992188 14.646484 L 15.9375 11 L 17 11 L 15.646484 16 L 14.345703 16 L 13 11 z M 19 16 L 19 20 L 16 20 L 20 24 L 24 20 L 21 20 L 21 16 L 19 16 z"}));function Am(s){const{trans:t}=O();return G({mutationFn:n=>Fm(n),onSuccess:n=>{Z.positive(t(h("[one 1 link|other :count links] shortened",{values:{count:n.links.length}}))),U.invalidateQueries({queryKey:te("link")}),U.invalidateQueries({queryKey:te("link-group")})},onError:n=>ye(n,s)})}function Fm(s){return E.post("link/batch/shorten",Rm(s)).then(t=>t.data)}function Rm(s){const t=na(s),n=s.long_urls.split(/\n/g);return{...t,long_urls:n}}function To({group:s}){const{trans:t}=O(),{close:n,formId:a}=B(),r=ne({defaultValues:{active:!0,type:"direct",geo_rules:[],device_rules:[],platform_rules:[],groups:s?[s]:void 0,utm:{},utm_custom:[]}}),o=Am(r);return e.jsxs(q,{size:"lg",children:[e.jsx(Q,{children:e.jsx(i,{message:"Shorten links"})}),e.jsx(K,{children:e.jsxs(he,{id:a,form:r,onSubmit:l=>{l.long_urls.split(/\r?\n/).some(d=>!Nr(d))?r.setError("long_urls",{message:t(h("Some of the urls are not valid."))}):o.mutate(l,{onSuccess:()=>n()})},children:[e.jsx(M,{label:e.jsx(i,{message:"Multiple URLs (one per line)"}),inputElementType:"textarea",rows:10,name:"long_urls",autoComplete:"off",spellCheck:"false",required:!0,className:"mb-24",autoFocus:!0}),e.jsx(sa,{multipleLinks:!0})]})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{n()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:a,disabled:o.isPending,children:e.jsx(i,{message:"Shorten"})})]})]})}function Mm({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?Sn.filter(d=>d.key!=="user_id"):Sn;return{filters:s?Cn.filter(d=>d.key!=="user_id"):Cn,columns:l}},[s]),o=s?t==null?void 0:t.id:"";return x.useEffect(()=>{rn()},[]),e.jsx(Ns,{endpoint:"link",queryParams:{userId:o,workspaceId:n,with:"user"},title:e.jsx(i,{message:"Links"}),filters:a,columns:r,actions:e.jsx(_m,{}),selectedActions:e.jsx(de,{resource:"link",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:Yt,title:e.jsx(i,{message:"No links have been created yet"}),filteringTitle:e.jsx(i,{message:"No matching links"})})})}function _m(){const s=Un("link/csv/export");return e.jsxs(x.Fragment,{children:[e.jsxs(is,{children:[e.jsx(L,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",children:e.jsx(Pr,{})}),e.jsxs(ls,{children:[e.jsx(I,{value:"addMultiple",startIcon:e.jsx(_o,{}),onSelected:()=>{Be(To)},children:e.jsx(i,{message:"Shorten multiple links"})}),e.jsx(I,{value:"export",startIcon:e.jsx(Eo,{}),onSelected:()=>{s.mutate({},{onSuccess:t=>{t.downloadPath?qn(t.downloadPath):Be(Wn)}})},children:e.jsx(i,{message:"Export links"})})]})]}),e.jsx(de,{resource:"link",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"Shorten link"})}),e.jsx(aa,{})]})})]})}const Em=z(e.jsx("path",{d:"M3 11c0 2.45 1.76 4.47 4.08 4.91l-1.49-1.49L7 13l4 4.01L7 21l-1.41-1.41 1.58-1.58v-.06C3.7 17.54 1 14.58 1 11c0-3.87 3.13-7 7-7h3v2H8c-2.76 0-5 2.24-5 5zm19 0V4h-9v7h9zm-2-2h-5V6h5v3zm-7 4h9v7h-9z"}),"MoveDownOutlined");function Tm(s){const{trans:t}=O();return G({mutationFn:n=>Vm(s.id,n),onSuccess:()=>{Z.positive(t(h("Moved links to “:group“",{values:{group:s.name}}))),U.invalidateQueries({queryKey:te("link-group")})},onError:n=>ke(n)})}function Vm(s,t){return E.post(`link-group/${s}/attach`,t).then(n=>n.data)}function Om({group:s}){const{close:t}=B(),[n,a]=x.useState([]),[r,o]=x.useState({groupId:`!${s.id}`,query:"",perPage:8}),{data:l,isLoading:c}=Or("link",r),d=l==null?void 0:l.pagination,u=Tm(s),m=e.jsxs("div",{className:"text-muted",children:[e.jsx(L,{disabled:c||!(d!=null&&d.prev_page),onClick:()=>{o({...r,page:d==null?void 0:d.prev_page})},children:e.jsx(ft,{})}),e.jsx(L,{disabled:c||!(d!=null&&d.next_page),onClick:()=>{o({...r,page:d==null?void 0:d.next_page})},children:e.jsx(Hs,{})})]}),p=e.jsx(Kt,{image:e.jsx(jt,{src:Yt}),title:e.jsx(i,{message:"No links found"})}),f=e.jsx("div",{className:"min-h-[464px]",children:e.jsx(pt,{children:e.jsx(De,{mode:"wait",children:c?e.jsx(Bm,{}):e.jsx($m,{links:d==null?void 0:d.data,selectedIds:n,setSelectedIds:a})})})});return e.jsxs(q,{size:"lg",children:[e.jsx(Q,{children:e.jsx(i,{message:"Move links to “:group“",values:{group:s.name}})}),e.jsxs(K,{children:[e.jsx(Wt,{className:"mb-14",label:e.jsx(i,{message:"Search for links..."}),value:r.query,onChange:g=>{o({...r,query:g.target.value})}}),!c&&!(d!=null&&d.data.length)?p:f]}),e.jsxs(X,{startAction:m,children:[e.jsx(N,{variant:"text",onClick:t,children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",onClick:()=>{u.mutate({linkIds:n},{onSuccess:t})},disabled:u.isPending,children:e.jsx(i,{message:"Move"})})]})]})}function $m({links:s,selectedIds:t,setSelectedIds:n}){return e.jsx(xe.div,{...Le,children:e.jsx(pt,{children:(s||[]).map(a=>{const r=t.includes(a.id);return e.jsx(Bt,{isSelected:r,onSelected:()=>{n(r?t.filter(o=>o!==a.id):[...t,a.id])},startIcon:e.jsx(Ut,{checked:r}),description:Ke(a.short_url),children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(Mo,{className:"w-14 h-14",link:a}),e.jsx("div",{children:Ke(a.long_url)})]})},a.id)})})},"links-list")}const Hm=8;function Bm(){return e.jsx(xe.div,{...Le,children:e.jsx(pt,{children:Array.from({length:Hm}).map((s,t)=>e.jsx(Bt,{isDisabled:!0,children:e.jsx(je,{variant:"text",className:"min-h-40"})},t))})},"links-skeleton")}function Um(){const{groupId:s}=Te();return e.jsx("div",{className:"p-12 md:p-24",children:e.jsx(eo,{endpoint:`link-group/${s}/links`,filters:Cn,columns:Sn,actions:e.jsx(Wm,{groupId:s?+s:void 0}),selectedActions:e.jsx(de,{resource:"link",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:Yt,title:e.jsx(i,{message:"There are no links in this group yet"}),filteringTitle:e.jsx(i,{message:"No matching links"})}),children:e.jsx(qm,{})})})}function qm(){var r;const s=ss(),{query:t}=x.useContext(sn),n=(r=t.data)==null?void 0:r.linkGroup;if(!n)return e.jsx(it,{size:"xl",className:"mb-16"});const a=e.jsx(i,{message:"“:group“ links",values:{group:n.name}});return e.jsxs(x.Fragment,{children:[e.jsx(Mn,{children:a}),e.jsxs(it,{size:"xl",className:"mb-16",children:[e.jsx(as,{onSelected:()=>{s("/dashboard/link-groups")},children:e.jsx(i,{message:"Link groups"})}),e.jsx(as,{className:"first-letter:capitalize",children:a})]})]})}function Wm({groupId:s}){var r;const t=Un("link/csv/export"),{query:n}=x.useContext(sn),a=(r=n.data)==null?void 0:r.linkGroup;return e.jsxs(x.Fragment,{children:[e.jsxs(is,{children:[e.jsx(L,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",children:e.jsx(Pr,{})}),e.jsxs(ls,{children:[e.jsx(I,{value:"moveLinks",startIcon:e.jsx(Em,{}),onSelected:()=>{Be(Om,{group:a})},children:e.jsx(i,{message:"Move links to this group"})}),e.jsx(I,{value:"addMultiple",startIcon:e.jsx(_o,{}),onSelected:()=>{Be(To,{group:a})},children:e.jsx(i,{message:"Add multiple links"})}),e.jsx(I,{value:"export",startIcon:e.jsx(Eo,{}),onSelected:()=>{t.mutate({groupId:s},{onSuccess:o=>{o.downloadPath?qn(o.downloadPath):Be(Wn)}})},children:e.jsx(i,{message:"Export links"})})]})]}),e.jsx(de,{resource:"link",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"Add link"})}),e.jsx(aa,{group:a})]})})]})}const Km=z(e.jsx("path",{d:"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM19 19H5V5h14v14z"}),"ListAltOutlined");function Vo({onSubmit:s,form:t,formId:n}){const{clearErrors:a}=t;return e.jsxs(he,{form:t,id:n,onBeforeSubmit:()=>{a("hash")},onSubmit:s,children:[e.jsxs("div",{className:"mb-24",children:[e.jsx(M,{name:"name",label:e.jsx(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),e.jsx(ln,{form:t,name:"hash"})]}),e.jsx(ea,{name:"domain_id",className:"mb-24"}),e.jsx(M,{name:"description",className:"mb-24",label:e.jsx(i,{message:"Description"}),inputElementType:"textarea",rows:2}),e.jsx(ps,{name:"active",description:e.jsx(i,{message:"Whether this link group is viewable publicly."}),className:"mb-24",children:e.jsx(i,{message:"Active"})}),e.jsx(ps,{name:"rotator",description:e.jsx(i,{message:"When checked, url above will redirect to random link from the group, instead of showing all links belonging to group."}),children:e.jsx(i,{message:"Rotator"})})]})}function Gm(s,t){const{trans:n}=O();return G({mutationFn:a=>Ym(t,a),onSuccess:()=>{Z.positive(n(h("Link group updated"))),U.invalidateQueries({queryKey:te("link-group")})},onError:a=>ye(a,s)})}function Ym(s,t){return E.put(`link-group/${s}`,t).then(n=>n.data)}function Qm({group:s}){const{verify:t,isVerifying:n}=kt("link_creation"),{formId:a,close:r}=B(),o=ne({defaultValues:{name:s.name,hash:s.hash,description:s.description,active:s.active,rotator:s.rotator}}),l=Gm(o,s.id);return e.jsxs(q,{size:"md",children:[e.jsx(Q,{children:e.jsx(i,{message:"Update link group"})}),e.jsx(K,{children:e.jsx(Vo,{formId:a,form:o,onSubmit:async c=>{await t()&&l.mutate(c,{onSuccess:()=>r()})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{r()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:a,disabled:l.isPending||n,children:e.jsx(i,{message:"Update"})})]})]})}const Ma=[{key:"name",allowsSorting:!0,header:()=>e.jsx(i,{message:"Name"}),width:"flex-3 min-w-200",visibleInMode:"all",body:s=>e.jsx("a",{href:s.short_url,target:"_blank",rel:"noreferrer",className:bs,children:s.name})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(i,{message:"Owner"}),body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>e.jsx(i,{message:"Links"}),body:s=>s.links_count?e.jsx(Ue,{value:s.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>e.jsx(i,{message:"Active"}),body:s=>s.active?e.jsx(_s,{className:"icon-md text-positive"}):e.jsx(qe,{className:"icon-md text-danger"})},{key:"rotator",allowsSorting:!0,header:()=>e.jsx(i,{message:"Rotator"}),body:s=>s.rotator?e.jsx(_s,{className:"icon-md text-positive"}):e.jsx(qe,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last updated"}),body:s=>s.updated_at?e.jsx(Xe,{date:s.updated_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-160 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(se,{label:e.jsx(i,{message:"Clicks report"}),children:e.jsx(fe,{to:`${s.id}`,children:e.jsx(L,{size:"md",children:e.jsx(xt,{})})})}),e.jsx(se,{label:e.jsx(i,{message:"Manage links"}),children:e.jsx(fe,{to:`${s.id}/links`,children:e.jsx(L,{size:"md",children:e.jsx(Km,{})})})}),e.jsx(ys,{link:s}),e.jsx(de,{resource:s,action:"update",children:e.jsxs(_,{type:"modal",children:[e.jsx(se,{label:e.jsx(i,{message:"Edit link"}),children:e.jsx(L,{size:"md",children:e.jsx(Ye,{})})}),e.jsx(Qm,{group:s})]})})]})}],_a=[{key:"rotator",label:h("Type"),defaultOperator:re.eq,description:h("Type of the group"),control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Default"),value:!1},{key:"02",label:h("Rotator"),value:!0}]}},{key:"active",label:h("Status"),description:h("Whether group is disabled or not"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}},{key:"links_count",label:h("Link count"),description:h("Number of links in the group"),defaultOperator:re.gte,operators:Et,control:{type:$.Input,inputType:"number",defaultValue:1}},ks({description:h("Date group was created")}),ws({description:h("Date group was last updated")}),{key:"user_id",label:h("User"),description:h("User group was created by"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}];function Zm(s){const{trans:t}=O();return G({mutationFn:n=>Jm(n),onSuccess:()=>{Z.positive(t(h("Link group created"))),U.invalidateQueries({queryKey:te("link-group")})},onError:n=>ye(n,s)})}function Jm(s){return E.post("link-group",s).then(t=>t.data)}function Xm(){const{formId:s,close:t}=B(),{custom_domains:n}=ce(),{verify:a,isVerifying:r}=kt("link_creation"),o=ne({defaultValues:{active:!0,hash:En(6),rotator:!1,domain_id:n!=null&&n.allow_all_option?void 0:0}}),l=Zm(o);return e.jsxs(q,{size:"md",children:[e.jsx(Q,{children:e.jsx(i,{message:"Create link group"})}),e.jsx(K,{children:e.jsx(Vo,{formId:s,form:o,onSubmit:async c=>{await a()&&l.mutate(c,{onSuccess:()=>t()})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{t()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:s,disabled:l.isPending||r,children:e.jsx(i,{message:"Create"})})]})]})}function ex({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?Ma.filter(d=>d.key!=="user_id"):Ma;return{filters:s?_a.filter(d=>d.key!=="user_id"):_a,columns:l}},[s]);x.useEffect(()=>{rn()},[]);const o=s?t==null?void 0:t.id:"";return e.jsx(Ns,{endpoint:"link-group",queryParams:{userId:o,withCount:"links",with:"user,domain",workspaceId:n},title:e.jsx(i,{message:"Link groups"}),headerContent:e.jsx(sx,{}),headerItemsAlign:"items-center",filters:a,columns:r,actions:e.jsx(tx,{}),selectedActions:e.jsx(de,{resource:"linkGroup",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:Yt,title:e.jsx(i,{message:"No groups have been created yet"}),filteringTitle:e.jsx(i,{message:"No matching groups"})})})}function sx(){return e.jsx(Ds,{dialogSize:"auto",title:e.jsx(i,{message:"Group links together to:"}),body:e.jsxs("ul",{className:"list-inside list-disc whitespace-nowrap",children:[e.jsx("li",{children:e.jsx(i,{message:"Simplify multiple link management."})}),e.jsx("li",{children:e.jsx(i,{message:"View aggregated clicks report for the whole group."})}),e.jsx("li",{children:e.jsx(i,{message:"Redirect to a random link from within the group."})}),e.jsx("li",{children:e.jsx(i,{message:"Share all links in the group with one link."})})]})})}function tx(){return e.jsxs(x.Fragment,{children:[e.jsx(Bc,{endpoint:"link-group/csv/export"}),e.jsx(de,{resource:"linkGroup",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"New group"})}),e.jsx(Xm,{})]})})]})}function nx(s){return Fe({queryKey:["link-group",s],queryFn:()=>ax(s),initialData:rx(s)})}function ax(s){return E.get(`link-group/${s}`).then(t=>t.data)}function rx(s){var n,a;const t=(a=(n=U.getQueryData(te("link-group")))==null?void 0:n.pagination)==null?void 0:a.data.find(r=>r.id===+s);return t?{linkGroup:t}:void 0}function ox(){var r;const s=ss(),{groupId:t}=Te(),n=nx(t),a=(r=n.data)==null?void 0:r.linkGroup;return e.jsx(an,{model:`link-group=${t}`,title:e.jsxs(it,{size:"xl",className:k(n.isLoading&&"invisible"),children:[e.jsx(as,{onSelected:()=>{s("..",{relative:"path"})},children:e.jsx(i,{message:"Link groups"})}),e.jsx(as,{className:"first-letter:capitalize",children:e.jsx(i,{message:"“:name“ clicks",values:{name:a==null?void 0:a.name}})})]}),actions:a&&e.jsx(ys,{className:"flex-shrink-0 text-muted",link:a})})}function ix(s){return Fe({queryKey:["link",s],queryFn:()=>lx(s),initialData:cx(s)})}function lx(s){return E.get(`link/${s}`).then(t=>t.data)}function cx(s){var n,a;const t=(a=(n=U.getQueryData(te("link")))==null?void 0:n.pagination)==null?void 0:a.data.find(r=>r.id===+s);return t?{link:t}:void 0}function Ea(){var r;const s=ss(),{linkId:t}=Te(),n=ix(t),a=(r=n.data)==null?void 0:r.link;return e.jsx(an,{model:`link=${t}`,title:e.jsxs(it,{size:"xl",className:k(n.isLoading&&"invisible"),children:[e.jsx(as,{onSelected:()=>{s("..",{relative:"path"})},children:e.jsx(i,{message:"Links"})}),e.jsx(as,{className:"first-letter:capitalize",children:e.jsx(i,{message:"“:name“ clicks",values:{name:a==null?void 0:a.name}})})]}),actions:a&&e.jsx(ys,{className:"flex-shrink-0 text-muted",link:a})})}const dx=""+new URL("world-ea41c34b.svg",import.meta.url).href;function ux(s){return e.jsx(cs,{...s,image:dx,title:e.jsx(i,{message:"No domains have been connected yet"}),filteringTitle:e.jsx(i,{message:"No matching domains"})})}function mx({value:s}){return s?e.jsx(_s,{className:"icon-md text-positive"}):e.jsx(qe,{className:"icon-md text-danger"})}function xx(){const{trans:s}=O();return G({mutationFn:t=>hx(t),onSuccess:(t,n)=>{Z.positive(s(h("“:domain” removed",{values:{domain:Ke(n.domain.host)}}))),U.invalidateQueries({queryKey:te("custom-domain")})},onError:t=>ke(t)})}function hx({domain:s}){return E.delete(`custom-domain/${s.id}`).then(t=>t.data)}function Oo({domain:s}){const t=xx();return e.jsxs(_,{type:"modal",onClose:n=>{n&&t.mutate({domain:s})},children:[e.jsx(N,{variant:"outline",color:"danger",size:"xs",disabled:t.isPending,children:e.jsx(i,{message:"Remove"})}),e.jsx(gs,{title:e.jsx(i,{message:"Remove domain?"}),body:e.jsx(i,{message:"Are you sure you want to remove “:domain“?",values:{domain:s.host}}),confirm:e.jsx(i,{message:"Remove"}),isDanger:!0})]})}const fx=[{key:"host",allowsSorting:!0,header:()=>e.jsx(i,{message:"Domain"}),width:"flex-3 min-w-200",visibleInMode:"all",body:s=>e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-6 whitespace-nowrap",children:[e.jsx(ns,{url:s.host}),e.jsx("a",{className:"block font-semibold hover:underline overflow-ellipsis overflow-hidden w-min",href:s.host,target:"_blank",rel:"noreferrer","data-testid":"host-name",children:s.host})]})})},{key:"user_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Owner"}),width:"flex-2 min-w-140",body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"global",allowsSorting:!0,header:()=>e.jsx(i,{message:"Global"}),body:s=>e.jsx(mx,{value:s.global})},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last updated"}),body:s=>s.updated_at?e.jsx(Xe,{date:s.updated_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,width:"w-80 flex-shrink-0",visibleInMode:"all",align:"end",body:s=>e.jsx(Oo,{domain:s})}],Ta=[{key:"global",label:h("Global"),description:h("Whether domain is marked as global"),defaultOperator:re.eq,control:{type:$.BooleanToggle,defaultValue:!0}},ks({description:h("Date domain was created")}),ws({description:h("Date domain was last updated")}),{key:"user_id",label:h("Owner"),description:h("User domain belongs to"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}];function $o(s){return(s.replace("www.","").match(/\./g)||[]).length>1}function ra({message:s=e.jsx(i,{message:"Checking DNS configuration..."})}){return e.jsxs("div",{className:"flex items-center gap-18 text-base p-12 rounded bg-primary/10 text-primary",children:[e.jsx(gt,{isIndeterminate:!0,size:"sm"}),e.jsx("div",{children:s})]})}function px({stepper:{state:{isLoading:s,host:t,serverIp:n}}}){const{base_url:a}=ce();return s?e.jsx(ra,{}):$o(t)?e.jsx(Va,{title:e.jsx(i,{message:"Add this CNAME record to your domain by visiting your DNS provider or registrar."}),record:"CNAME",target:a}):e.jsx(Va,{title:e.jsx(i,{message:"Add this A record to your domain by visiting your DNS provider or registrar."}),record:"A",target:n})}function Va({title:s,record:t,target:n}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-muted mb-10",children:s}),e.jsxs("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-primary/10 text-primary font-semibold",children:[e.jsx("div",{children:t}),n]})]})}function gx({stepper:s}){return e.jsxs(x.Fragment,{children:[e.jsx(M,{autoFocus:!0,name:"host",required:!0,maxLength:100,label:e.jsx(i,{message:"Host"}),placeholder:"https://example.com",description:e.jsx(i,{message:"Enter the exact domain name you want your items to be accessible with. It can be a subdomain (example.yourdomain.com) or root domain (yourdomain.com)."})}),s.showGlobalField&&e.jsx(ps,{className:"mt-24 border-t pt-24",name:"global",description:e.jsx(i,{message:"Whether all users should be able to select this domain."}),children:e.jsx(i,{message:"Global"})})]})}var pe=(s=>(s[s.Host=1]="Host",s[s.Info=2]="Info",s[s.ValidationFailed=3]="ValidationFailed",s[s.Finalize=4]="Finalize",s))(pe||{});function Ho(){return G({mutationFn:s=>jx(s)})}function jx(s){return E.post("secure/custom-domain/validate/2BrM45vvfS/api",s).then(t=>t.data)}function bx({stepper:{goToNextStep:s,state:{host:t,serverIp:n,isLoading:a,validationFailReason:r}}}){Ho();const{base_url:o}=ce(),{hasPermission:l}=oe(),c=$o(t),d=c?"CNAME":"A",u=c?o:n;if(a)return e.jsx(ra,{});const m=r==="serverNotConfigured"&&l("admin")?e.jsx(Oa,{children:e.jsx(i,{message:"DNS records for the domain are setup, however it seems that your server is not configured to handle requests from “:host“",values:{host:u}})}):e.jsx(Oa,{children:e.jsx(i,{message:"The domain is missing :record record pointing to :location or the changes haven't propagated yet.",values:{record:d,location:u}})});return e.jsxs(x.Fragment,{children:[m,e.jsx("div",{className:"whitespace-nowrap text-xs text-muted mt-10",children:e.jsx(i,{message:"You can wait and try again later, or <b>refresh</b>",values:{b:p=>e.jsx("button",{disabled:a,type:"button",className:"text-primary underline",onClick:()=>{s()},children:p})}})})]})}function Oa({children:s}){return e.jsxs("div",{className:"flex items-center gap-12 text-base p-12 rounded bg-warning/15 text-warning font-medium",children:[e.jsx(Sr,{size:"lg"}),s]})}function vx(s){return G({mutationFn:t=>yx(t),onError:t=>ye(t,s)})}function yx(s){return E.post("secure/custom-domain/authorize/store",s).then(t=>t.data)}function kx(){const{trans:s}=O(),t=Hi();return G({mutationFn:n=>wx(n),onSuccess:n=>{Z.positive(s(h("“:domain” connected",{values:{domain:n.domain.host}}))),t.invalidateQueries({queryKey:te("custom-domain")})},onError:n=>ke(n)})}function wx(s){return E.post("custom-domain",s).then(t=>t.data)}function Nx({showGlobalField:s}){const{close:t}=B(),n=ne(),a=vx(n),r=Ho(),o=kx(),[l,c]=x.useState({isLoading:!1,currentStep:pe.Host,host:"",serverIp:""}),d=()=>{c({...l,isLoading:!0})},u=()=>new Promise(j=>{r.mutate({host:l.host},{onSuccess:()=>{j({status:"success",newState:{validationFailReason:void 0}})},onError:v=>{var y;j({status:"error",newState:{validationFailReason:(y=v.response)==null?void 0:y.data.failReason}})}})}),m=()=>new Promise(j=>{a.mutate(n.getValues(),{onSuccess:v=>{j({status:"success",newState:{host:n.getValues().host,serverIp:v.serverIp}})},onError:()=>{j({status:"error"})}})}),p=l.currentStep!==pe.Host;return{form:n,state:l,goToNextStep:async()=>{if(l.currentStep===pe.Host){d();const j=await m();c({...l,...j.newState,isLoading:!1,currentStep:j.status==="success"?pe.Info:pe.Host})}else if(l.currentStep===pe.Info||l.currentStep===pe.ValidationFailed){d();const j=await u(),v=j.status==="success"?pe.Finalize:pe.ValidationFailed;c({...l,...j.newState,isLoading:!1,currentStep:v}),v===pe.Finalize&&o.mutate(n.getValues(),{onSettled:y=>{t(y==null?void 0:y.domain)}})}},hasPreviousStep:p,goToPreviousStep:()=>{!p||l.isLoading||(l.currentStep===pe.Info?c({...l,currentStep:pe.Host}):l.currentStep===pe.ValidationFailed&&c({...l,currentStep:pe.Info}))},showGlobalField:s}}function Cx(){return e.jsxs("div",{children:[e.jsx(ra,{message:e.jsx(i,{message:"Connecting domain..."})}),e.jsx("div",{className:"text-muted mt-10 text-xs",children:e.jsx(i,{message:"Don't close this window until domain is connected."})})]})}function Sx({showGlobalField:s}){const{close:t,formId:n}=B(),a=Nx({showGlobalField:s}),r=Ix(a.state.currentStep);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Connect domain"})}),e.jsx(K,{children:e.jsx(he,{form:a.form,id:n,onSubmit:()=>{a.goToNextStep()},children:e.jsx(r,{stepper:a})})}),e.jsxs(X,{startAction:e.jsx(N,{variant:"text",onClick:()=>{t()},children:e.jsx(i,{message:"Cancel"})}),children:[a.hasPreviousStep&&e.jsx(N,{startIcon:e.jsx(ft,{}),color:"primary",variant:"text",onClick:()=>{a.goToPreviousStep()},disabled:a.state.isLoading,children:e.jsx(i,{message:"Previous"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:n,endIcon:e.jsx(Hs,{}),disabled:a.state.isLoading,children:e.jsx(i,{message:"Next"})})]})]})}function Ix(s){switch(s){case pe.Host:return gx;case pe.Info:return px;case pe.ValidationFailed:return bx;case pe.Finalize:return Cx}}const $a=fx.map(s=>s.key==="actions"?{...s,body:t=>e.jsx(de,{resource:t,action:"delete",children:e.jsx(Oo,{domain:t})})}:s);function Dx({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?$a.filter(d=>d.key!=="user_id"):$a;return{filters:s?Ta.filter(d=>d.key!=="user_id"):Ta,columns:l}},[s]),o=s?t==null?void 0:t.id:"";return e.jsx(Ns,{enableSelection:!1,endpoint:"custom-domain",queryParams:{userId:o,workspaceId:n,with:"user"},title:e.jsx(i,{message:"Branded domains"}),headerContent:e.jsx(Px,{}),headerItemsAlign:"items-center",filters:a,columns:r,actions:e.jsx(Lx,{}),emptyStateMessage:e.jsx(ux,{})})}function Lx(){const{hasPermission:s}=oe();return e.jsx(de,{resource:"customDomain",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"Connect domain"})}),e.jsx(Sx,{showGlobalField:s("admin")})]})})}function Px(){return e.jsx(Ds,{body:e.jsx(i,{message:"Create trusted links with your own branded domains. Once connected, you can set the domain as default or only use it for specific links."})})}const $t=[{name:"facebook",type:"number",docsUrl:"https://www.facebook.com/business/help/952192354843755?id=1205376682832142"},{name:"twitter",type:"number",docsUrl:"https://business.twitter.com/en/help/campaign-measurement-and-analytics/conversion-tracking-for-websites.html"},{name:"google-tag-manager",type:"text",pattern:"GTM-[a-zA-Z0-9]+",docsUrl:"https://tagmanager.google.com"},{name:"google-analytics",type:"text",docsUrl:"https://analytics.google.com"},{name:"adwords",type:"number",docsUrl:"https://ads.google.com"},{name:"bing",type:"number",docsUrl:"https://about.ads.microsoft.com/en-us/solutions/tools/universal-event-tracking"},{name:"pinterest",type:"number",docsUrl:"https://help.pinterest.com/en/business/article/track-conversions-with-pinterest-tag"},{name:"linkedin",type:"text",docsUrl:"https://www.linkedin.com/help/lms/answer/a418880/add-the-linkedin-insight-tag-to-your-website"},{name:"quora",type:"text",pattern:"[a-z0-9]+",docsUrl:"https://quoraadsupport.zendesk.com/hc/en-us/articles/115010303387-About-the-Quora-Pixel"},{name:"adroll",type:"text",docsUrl:"https://help.adroll.com/hc/en-us/articles/211846018-What-is-the-AdRoll-Pixel"},{name:"nexus-segment",type:"text",docsUrl:"https://segment.com/catalog/integrations/appnexus"},{name:"custom",type:"text"}],zx=z(e.jsx("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutlineOutlined");function Bo({formId:s,form:t,onSubmit:n}){const{watch:a}=t,r=a("type"),o=$t.find(l=>l.name===r);return e.jsxs(he,{id:s,form:t,onSubmit:n,children:[e.jsx(M,{autoFocus:!0,required:!0,name:"name",label:e.jsx(i,{message:"Name"}),className:"mb-24"}),e.jsx(Ce,{name:"type",selectionMode:"single",className:"mb-24",label:e.jsx(i,{message:"Type"}),description:o!=null&&o.docsUrl?e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(zx,{size:"sm"}),e.jsx("a",{"data-testid":"pixel-docs-link",href:o.docsUrl,target:"_blank",rel:"noreferrer",className:"underline",children:e.jsx(i,{message:"More information"})})]}):null,children:$t.map(l=>e.jsx(I,{capitalizeFirst:!0,value:l.name,startIcon:l.docsUrl?e.jsx(ns,{url:l.docsUrl}):e.jsx(Md,{size:"xs"}),children:l.name},l.name))}),r!=="custom"&&e.jsx(M,{required:!0,pattern:o==null?void 0:o.pattern,type:(o==null?void 0:o.type)==="number"?"number":"text",name:"pixel_id",label:e.jsx(i,{message:"Pixel ID"})}),r==="custom"&&e.jsx(Ax,{})]})}function Ax(){return e.jsxs(x.Fragment,{children:[e.jsx(M,{name:"head_code",label:e.jsx(i,{message:"Custom code for page head"}),className:"mb-24",inputElementType:"textarea",rows:5}),e.jsx(M,{name:"body_code",label:e.jsx(i,{message:"Custom code for page body"}),inputElementType:"textarea",rows:5})]})}function Fx(s,t){const{trans:n}=O();return G({mutationFn:a=>Rx(s,a),onSuccess:()=>{Z.positive(n(h("Pixel updated"))),U.invalidateQueries({queryKey:te("tp")})},onError:a=>ye(a,t)})}function Rx(s,t){return E.put(`tp/${s}`,t).then(n=>n.data)}function Mx({pixel:s}){const t=ne({defaultValues:{name:s.name,type:s.type,pixel_id:s.pixel_id,head_code:s.head_code,body_code:s.body_code}}),{formId:n,close:a}=B(),r=Fx(s.id,t);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Update “:name“",values:{name:s.name}})}),e.jsx(K,{children:e.jsx(Bo,{formId:n,form:t,onSubmit:o=>{r.mutate(o,{onSuccess:()=>{a()}})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{a()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:n,disabled:r.isPending,children:e.jsx(i,{message:"Update"})})]})]})}const Ha=[{key:"name",allowsSorting:!0,width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(i,{message:"Name"}),body:s=>s.name},{key:"type",allowsSorting:!0,header:()=>e.jsx(i,{message:"Type"}),body:s=>{var n;const t=(n=$t.find(a=>a.name===s.type))==null?void 0:n.docsUrl;return e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-10",children:[t?e.jsx(ns,{url:t}):null,t?e.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:bs,children:s.type}):s.type]})})}},{key:"user_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Owner"}),width:"flex-2 min-w-140",body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"pixel_id",header:()=>e.jsx(i,{message:"Pixel ID"}),body:s=>s.pixel_id},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last updated"}),body:s=>s.updated_at?e.jsx(Xe,{date:s.updated_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(de,{resource:s,action:"update",children:e.jsxs(_,{type:"modal",children:[e.jsx(L,{className:"text-muted",children:e.jsx(Ye,{})}),e.jsx(Mx,{pixel:s})]})})}],_x=""+new URL("location-tracking-0df79a5f.svg",import.meta.url).href,Ba=[{key:"type",label:h("Type"),description:h("Type of the pixel"),defaultOperator:re.eq,control:{type:$.Select,options:$t.map((s,t)=>({key:s.name,value:s.name,label:h(s.name)}))}},ks({description:h("Date pixel was created")}),ws({description:h("Date pixel was last updated")}),{key:"user_id",label:h("Owner"),description:h("User pixel belongs to"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}];function Ex(s){const{trans:t}=O();return G({mutationFn:n=>Tx(n),onSuccess:()=>{Z.positive(t(h("Pixel created"))),U.invalidateQueries({queryKey:te("tp")})},onError:n=>ye(n,s)})}function Tx(s){return E.post("tp",s).then(t=>t.data)}function Vx(){const s=ne({defaultValues:{type:"facebook"}}),{formId:t,close:n}=B(),a=Ex(s);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Create pixel"})}),e.jsx(K,{children:e.jsx(Bo,{formId:t,form:s,onSubmit:r=>{a.mutate(r,{onSuccess:()=>{n()}})}})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{n()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:t,disabled:a.isPending,children:e.jsx(i,{message:"Create"})})]})]})}function Ox({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?Ha.filter(d=>d.key!=="user_id"):Ha;return{filters:s?Ba.filter(d=>d.key!=="user_id"):Ba,columns:l}},[s]),o=s?t==null?void 0:t.id:"";return e.jsx(Ns,{endpoint:"tp",queryParams:{userId:o,with:"user",workspaceId:n},title:e.jsx(i,{message:"Tracking pixels"}),filters:a,columns:r,headerContent:e.jsx(Hx,{}),headerItemsAlign:"items-center",actions:e.jsx($x,{}),selectedActions:e.jsx(de,{resource:"trackingPixel",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:_x,title:e.jsx(i,{message:"No tracking pixels have been added yet"}),filteringTitle:e.jsx(i,{message:"No matching tracking pixels"})})})}function $x(){return e.jsx(de,{resource:"trackingPixel",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"Add pixel"})}),e.jsx(Vx,{})]})})}function Hx(){return e.jsx(Ds,{body:e.jsx(i,{message:"Add third party tracking integration to your links using pixels or custom code snippet."})})}function Bx(s,t){const{trans:n}=O();return G({mutationFn:a=>Ux(s,a),onSuccess:()=>{Z.positive(n(h("Page options updated"))),U.invalidateQueries({queryKey:te("link-page")})},onError:a=>ye(a,t)})}function Ux(s,t){return E.put(`link-page/${s}`,{meta:t}).then(n=>n.data)}function qx({page:s}){return e.jsxs(_,{type:"modal",children:[e.jsx(se,{label:e.jsx(i,{message:"Page options"}),children:e.jsx(L,{className:"text-muted",children:e.jsx(wr,{})})}),e.jsx(Wx,{page:s})]})}function Wx({page:s}){var d,u;const{data:t}=Dt(),{hasPermission:n}=oe(),a=(t==null?void 0:t.usage.custom_pages.options)||n("admin"),{formId:r,close:o}=B(),l=ne({defaultValues:{hideFooter:!!((d=s.meta)!=null&&d.hideFooter),hideNavbar:!!((u=s.meta)!=null&&u.hideNavbar)}}),c=Bx(s.id,l);return e.jsxs(q,{size:"sm",children:[e.jsx(Q,{children:e.jsx(i,{message:"Link page options"})}),e.jsxs(K,{children:[!a&&e.jsx(on,{className:"mb-24",message:e.jsx(i,{message:"Your current plan does not include link page option editing."})}),e.jsxs(he,{id:r,form:l,onSubmit:m=>{c.mutate(m,{onSuccess:o})},children:[e.jsx(ps,{className:"mb-24",name:"hideNavbar",disabled:!a,description:e.jsx(i,{message:"Whether navbar should be hidden on this link page."}),children:e.jsx(i,{message:"Hide navbar"})}),e.jsx(ps,{name:"hideFooter",disabled:!a,description:e.jsx(i,{message:"Whether footer should be hidden on this link page."}),children:e.jsx(i,{message:"Hide footer"})})]})]}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>o(),children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:r,disabled:c.isPending||!a,children:e.jsx(i,{message:"Save"})})]})]})}const Ua=[{key:"title",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(i,{message:"Title"}),body:s=>e.jsx(fe,{target:"_blank",to:`/pages/${s.slug}`,className:bs,children:s.title})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(i,{message:"Owner"}),body:s=>s.user&&e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(i,{message:"Last updated"}),body:s=>e.jsx(Xe,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(x.Fragment,{children:[e.jsx(qx,{page:s}),e.jsx(de,{resource:s,action:"update",children:e.jsx(se,{label:e.jsx(i,{message:"Edit page"}),children:e.jsx(L,{size:"md",className:"text-muted",elementType:fe,to:`${s.id}/edit`,children:e.jsx(Ye,{})})})})]})}];function Kx({forCurrentUser:s}){const t=x.useContext(Bi),{user:n}=oe(),{workspaceId:a}=Ie(),{filters:r,columns:o}=x.useMemo(()=>{const c=s?Ua.filter(u=>u.key!=="user_id"):Ua;return{filters:s?La(t).filter(u=>u.key!=="user_id"):La(t),columns:c}},[s,t]),l=s?n==null?void 0:n.id:"";return e.jsx(Ns,{endpoint:"link-page",title:e.jsx(i,{message:"Link pages"}),filters:r,columns:o,headerContent:e.jsx(Yx,{}),headerItemsAlign:"items-center",queryParams:{userId:l,with:"user",workspaceId:a},actions:e.jsx(Gx,{}),selectedActions:e.jsx(de,{resource:"customPage",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:Rd,title:e.jsx(i,{message:"No link pages have been created yet"}),filteringTitle:e.jsx(i,{message:"No matching link pages"})})})}function Gx(){return e.jsx(de,{resource:"customPage",action:"create",children:e.jsx(ds,{elementType:fe,to:"new",children:e.jsx(i,{message:"New page"})})})}function Yx(){return e.jsx(Ds,{body:e.jsx(i,{message:"Show a transitional page with fully custom markup. Users who visit the short url will briefly see the page before being redirected to destination url."})})}const Qx=""+new URL("preferences-popup-824a74c6.svg",import.meta.url).href,qa=[{key:"name",allowsSorting:!0,width:"flex-1 min-w-200",visibleInMode:"all",header:()=>e.jsx(i,{message:"Name"}),body:s=>s.name},{key:"message",allowsSorting:!0,header:()=>e.jsx(i,{message:"Message"}),body:s=>s.message},{key:"btn_text",allowsSorting:!0,header:()=>e.jsx(i,{message:"Button text"}),body:s=>s.btn_text},{key:"color",header:()=>e.jsx(i,{message:"Color"}),body:s=>e.jsx(so,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:s.colors["bg-color"]}})},{key:"user_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Owner"}),width:"flex-2 min-w-140",body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last updated"}),body:s=>s.updated_at?e.jsx(Xe,{date:s.updated_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(de,{resource:s,action:"update",children:e.jsx(L,{className:"text-muted",elementType:fe,to:`${s.id}/edit`,children:e.jsx(Ye,{})})})}],Uo=[{key:"default",label:h("Default")},{key:"full-width",label:h("Full width")},{key:"rounded",label:h("Rounded")},{key:"pill",label:h("Pill")}],qo=[{key:"top-left",label:h("Top left")},{key:"top-right",label:h("Top right")},{key:"bottom-left",label:h("Bottom left")},{key:"bottom-right",label:h("Bottom right")}],Zx=[{key:"bg-color",label:h("Background color")},{key:"text-color",label:h("Text color")},{key:"btn-bg-color",label:h("Button background")},{key:"btn-text-color",label:h("Button text")},{key:"label-bg-color",label:h("Label background")},{key:"label-color",label:h("Label text")}],Wa=[{key:"theme",label:h("Theme"),description:h("Theme for the overlay"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"default",options:Uo.map(s=>({key:s.key,value:s.key,label:s.label}))}},{key:"position",label:h("Position"),description:h("Position for the overlay"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"bottom-left",options:qo.map(s=>({key:s.key,value:s.key,label:s.label}))}},ks({description:h("Date overlay was created")}),ws({description:h("Date overlay was last updated")}),{key:"user_id",label:h("Owner"),description:h("User overlay belongs to"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}];function Jx({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?qa.filter(d=>d.key!=="user_id"):qa;return{filters:s?Wa.filter(d=>d.key!=="user_id"):Wa,columns:l}},[s]),o=s?t==null?void 0:t.id:"";return e.jsx(Ns,{endpoint:"link-overlay",queryParams:{userId:o,with:"user",workspaceId:n},title:e.jsx(i,{message:"Call-to-action overlays"}),headerContent:e.jsx(Xx,{}),headerItemsAlign:"items-center",filters:a,columns:r,actions:e.jsx(eh,{}),selectedActions:e.jsx(de,{resource:"linkOverlay",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:Qx,title:e.jsx(i,{message:"No overlays have been added yet"}),filteringTitle:e.jsx(i,{message:"No matching overlays"})})})}function Xx(){return e.jsx(Ds,{body:e.jsx(i,{message:"Display fully customizable, non-intrusive overlay with a message and call-to-action button over destination website."})})}function eh(){return e.jsx(de,{resource:"linkOverlay",action:"create",children:e.jsx(ds,{to:"new",elementType:fe,children:e.jsx(i,{message:"Add overlay"})})})}function sh(s){const{trans:t}=O();return G({mutationFn:n=>th(n),onSuccess:()=>{Z.positive(t(h("Overlay created"))),U.invalidateQueries({queryKey:te("link-overlay")})},onError:n=>ye(n,s)})}function th(s){return E.post("link-overlay",s).then(t=>t.data)}function nh(){return e.jsxs("div",{className:"bg-card h-full overflow-hidden",children:[e.jsxs("div",{className:"navbar flex items-center bg-alt h-40 w-full",children:[e.jsx("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#d7665d"}}),e.jsx("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#deab54"}}),e.jsx("div",{className:"os-button w-20 h-20 rounded-full ml-14",style:{background:"#6fb54c"}})]}),e.jsxs("div",{className:"page-body p-24",children:[e.jsxs("div",{className:"top-row flex items-center h-60 bg-alt p-10 mb-24",children:[e.jsx("div",{className:"circle w-40 h-40 rounded-full mr-auto bg-disabled-bg"}),e.jsx("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),e.jsx("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"}),e.jsx("div",{className:"line w-1/6 h-20 rounded bg-disabled-bg ml-14"})]}),e.jsxs("div",{className:"middle-row flex items-center justify-center flex-col h-[260px] bg-alt my-24",children:[e.jsx("div",{className:"line rounded h-36 mb-20 w-3/5 bg-disabled-bg"}),e.jsx("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),e.jsx("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"}),e.jsx("div",{className:"line rounded h-14 mb-4 w-1/2 bg-disabled-bg/5"})]}),e.jsxs("div",{className:"flex-container flex",children:[e.jsxs("div",{className:"left w-1/3",children:[e.jsx("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"}),e.jsx("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"separator h-1 bg-divider my-24"}),e.jsx("div",{className:"rect h-144 bg-disabled-bg/5 mb-10"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"rect h-144 bg-disabled-bg/5 mb-6"})]}),e.jsxs("div",{className:"right w-2/3 pl-24",children:[e.jsx("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"line fat-line h-36 mb-10 rounded bg-disabled-bg/5"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"separator h-1 bg-divider my-24"}),e.jsx("div",{className:"line mb-10 h-20 rounded bg-disabled-bg"}),e.jsx("div",{className:"rect h-288 mb-32 bg-disabled-bg/5"})]})]})]})]})}function Wo({form:s,isLoading:t,onSubmit:n}){return e.jsxs(he,{form:s,onSubmit:n,className:"flex h-full",children:[e.jsx("div",{className:"h-full w-full flex-shrink-0 overflow-y-auto px-16 md:w-288 md:border-r md:shadow-lg",children:e.jsxs(ho,{children:[e.jsxs(fo,{expand:!0,children:[e.jsx(et,{children:e.jsx(i,{message:"General"})}),e.jsx(et,{children:e.jsx(i,{message:"Style"})})]}),e.jsxs(po,{className:"my-24",children:[e.jsxs(st,{children:[e.jsx(ih,{}),e.jsx(Ka,{disabled:t})]}),e.jsxs(st,{children:[e.jsx(oh,{}),e.jsx(Ka,{disabled:t,className:"mt-14"})]})]})]})}),e.jsxs("div",{className:"relative hidden flex-auto md:block",children:[e.jsx(nh,{}),e.jsx(lh,{})]})]})}function Ka(s){return e.jsx(N,{type:"submit",variant:"flat",color:"primary",...s,children:e.jsx(i,{message:"Save"})})}function ah(){return e.jsx(yt,{className:"mb-20",name:"colors.bg-image",label:e.jsx(i,{message:"Background image"}),diskPrefix:"overlays",showRemoveButton:!0})}function rh({name:s,children:t}){const{watch:n,setValue:a}=os(),r=n(`colors.${s}`);return e.jsxs(_,{value:r,type:"popover",placement:"right",offset:10,onClose:o=>a(`colors.${s}`,o),onValueChange:o=>a(`colors.${s}`,o),children:[e.jsxs(js,{className:"relative mb-10 flex h-54 w-full items-center gap-10 rounded border bg px-14 text-sm hover:bg-hover",children:[e.jsx(so,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:r}}),e.jsx("div",{children:t}),e.jsx(Hs,{className:"ml-auto text-muted icon-sm"})]}),e.jsx(St,{})]})}function oh(){return e.jsxs(x.Fragment,{children:[e.jsx(vs,{children:e.jsx(ah,{})}),Zx.map(({key:s,label:t})=>e.jsx(rh,{name:s,children:e.jsx(i,{...t})},s))]})}function ih(){return e.jsxs(x.Fragment,{children:[e.jsx(M,{name:"name",label:e.jsx(i,{message:"Name"}),className:"mb-24",required:!0}),e.jsx(Ce,{name:"position",selectionMode:"single",label:e.jsx(i,{message:"Position"}),className:"mb-24",children:qo.map(s=>e.jsx(I,{value:s.key,children:e.jsx(i,{...s.label})},s.key))}),e.jsx(Ce,{name:"theme",selectionMode:"single",label:e.jsx(i,{message:"Theme"}),className:"mb-24",children:Uo.map(s=>e.jsx(I,{value:s.key,children:e.jsx(i,{...s.label})},s.key))}),e.jsx(M,{name:"message",label:e.jsx(i,{message:"Message"}),inputElementType:"textarea",maxLength:200,rows:2,className:"mb-24"}),e.jsx(M,{name:"label",label:e.jsx(i,{message:"Label"}),maxLength:8,className:"mb-24"}),e.jsx(M,{type:"url",name:"btn_link",label:e.jsx(i,{message:"Button link"}),className:"mb-24"}),e.jsx(M,{name:"btn_text",label:e.jsx(i,{message:"Button text"}),maxLength:30,className:"mb-24"})]})}function lh(){const{watch:s}=os(),t=s();return e.jsx(Ui,{overlay:t})}function ch(){const{trans:s}=O(),t=ss(),n=ne({defaultValues:{position:"bottom-left",theme:"default",label:s(h("Label")),message:s(h("Your message here")),btn_text:s(h("Button text")),btn_link:"https://google.com",colors:{"bg-color":"rgb(61, 75, 101)","text-color":"rgb(255, 255, 255)","label-bg-color":"rgb(255, 255, 255)","label-color":"rgb(0, 0, 0)"}}}),a=sh(n);return e.jsx(Wo,{form:n,isLoading:a.isPending,onSubmit:r=>{a.mutate(r,{onSuccess:()=>t("..",{relative:"path"})})}})}const oa=s=>`link-overlay/${s}`;function dh(s){return Fe({queryKey:[oa(s)],queryFn:()=>uh(s)})}function uh(s){return E.get(oa(s)).then(t=>t.data)}function mh(s,t){const{trans:n}=O();return G({mutationFn:a=>xh(s,a),onSuccess:()=>{Z.positive(n(h("Overlay updated"))),U.invalidateQueries({queryKey:te("link-overlay")}),U.invalidateQueries({queryKey:[oa(s)]})},onError:a=>ye(a,t)})}function xh(s,t){return E.put(`link-overlay/${s}`,t).then(n=>n.data)}function hh(){const{overlayId:s}=Te(),{data:t,isLoading:n,isError:a}=dh(s);if(t)return e.jsx(fh,{overlay:t.linkOverlay});if(n)return e.jsx(Qt,{});if(a)return null}function fh({overlay:s}){const t=ss(),n=ne({defaultValues:{name:s.name,position:s.position,theme:s.theme,label:s.label,message:s.message,btn_text:s.btn_text,btn_link:s.btn_link,colors:s.colors}}),a=mh(s.id,n);return e.jsx(Wo,{form:n,isLoading:a.isPending,onSubmit:r=>{a.mutate(r,{onSuccess:()=>t("../..",{relative:"path"})})}})}const ph=""+new URL("marketing-2040a197.svg",import.meta.url).href,Ga=[{key:"name",allowsSorting:!0,header:()=>e.jsx(i,{message:"Name"}),width:"flex-3 min-w-200",visibleInMode:"all",body:s=>e.jsx("a",{className:bs,href:s.short_url,target:"_blank",rel:"noreferrer",children:s.name})},{key:"clicks_count",allowsSorting:!0,header:()=>e.jsx(i,{message:"Clicks"}),body:s=>s.clicks_count?e.jsx(Ue,{value:s.clicks_count}):"-"},{key:"domain_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Domain"}),body:s=>e.jsx(gh,{model:s})},{key:"user_id",allowsSorting:!0,header:()=>e.jsx(i,{message:"Owner"}),width:"flex-2 min-w-140",body:s=>s.user?e.jsx(Ss,{image:s.user.avatar,label:s.user.display_name,description:s.user.email}):""},{key:"links_count",allowsSorting:!0,header:()=>e.jsx(i,{message:"Links"}),body:s=>s.links_count?e.jsx(Ue,{value:s.links_count}):"-"},{key:"active",allowsSorting:!0,header:()=>e.jsx(i,{message:"Active"}),body:s=>s.active?e.jsx(_s,{className:"icon-md text-positive"}):e.jsx(qe,{className:"icon-md text-danger"})},{key:"updated_at",allowsSorting:!0,header:()=>e.jsx(i,{message:"Last updated"}),body:s=>s.updated_at?e.jsx(Xe,{date:s.updated_at}):""},{key:"actions",header:()=>e.jsx(i,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-128 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(se,{label:e.jsx(i,{message:"Clicks report"}),children:e.jsx(fe,{to:`${s.id}`,children:e.jsx(L,{size:"md",children:e.jsx(xt,{})})})}),e.jsx(ys,{link:s}),e.jsx(de,{resource:s,action:"update",children:e.jsx(fe,{to:`${s.id}/edit/content`,children:e.jsx(L,{size:"md",children:e.jsx(Ye,{})})})})]})}];function gh({model:s}){const{data:t}=Ls(),n=Xn(t==null?void 0:t.domains);return s.domain_id===0&&n?e.jsx(x.Fragment,{children:n}):s.domain_id&&s.domain?e.jsx(x.Fragment,{children:Ke(s.domain.host)}):e.jsx(i,{message:"All domains"})}const Ya=[{key:"active",label:h("Status"),description:h("Whether biolink is disabled or not"),defaultOperator:re.eq,control:{type:$.Select,defaultValue:"01",options:[{key:"01",label:h("Enabled"),value:!0},{key:"02",label:h("Disabled"),value:!1}]}},{key:"clicks_count",label:h("Clicks count"),description:h("Number of times this biolink was visited"),defaultOperator:re.gte,operators:Et,control:{type:$.Input,inputType:"number",defaultValue:1}},{key:"links_count",label:h("Link count"),description:h("Number of links in the biolink"),defaultOperator:re.gte,operators:Et,control:{type:$.Input,inputType:"number",defaultValue:1}},ks({description:h("Date biolink was created")}),ws({description:h("Date biolink was last updated")}),{key:"user_id",label:h("Owner"),description:h("User biolink was created by"),defaultOperator:re.eq,control:{type:$.SelectModel,model:Is}}];function jh(s){const{trans:t}=O();return G({mutationFn:n=>bh(n),onSuccess:()=>{Z.positive(t(h("Biolink created"))),U.invalidateQueries({queryKey:te("biolink")})},onError:n=>ye(n,s)})}function bh(s){return E.post("biolink",ta(s)).then(t=>t.data)}function vh(){const s=ss(),{formId:t,close:n}=B(),{custom_domains:a}=ce(),{verify:r,isVerifying:o}=kt("link_creation"),l=ne({defaultValues:{active:!0,hash:En(6),domain_id:a!=null&&a.allow_all_option?void 0:0}}),c=jh(l),d=async u=>{await r()&&c.mutate(u,{onSuccess:p=>{n(),s(`${p.biolink.id}/edit`)}})};return e.jsxs(q,{size:"md",children:[e.jsx(Q,{children:e.jsx(i,{message:"Create biolink"})}),e.jsx(K,{children:e.jsxs(he,{form:l,id:t,onBeforeSubmit:()=>{l.clearErrors("hash")},onSubmit:d,children:[e.jsxs("div",{className:"mb-24",children:[e.jsx(M,{name:"name",label:e.jsx(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),e.jsx(ln,{form:l,name:"hash"})]}),e.jsx(ea,{name:"domain_id",className:"mb-24"}),e.jsx(M,{name:"description",className:"mb-24",label:e.jsx(i,{message:"Description"}),inputElementType:"textarea",rows:2}),e.jsx(ps,{name:"active",description:e.jsx(i,{message:"Whether this biolink is viewable publicly."}),className:"mb-24",children:e.jsx(i,{message:"Active"})})]})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{n()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:t,disabled:c.isPending||o,children:e.jsx(i,{message:"Create"})})]})]})}function yh({forCurrentUser:s}){const{user:t}=oe(),{workspaceId:n}=Ie(),{filters:a,columns:r}=x.useMemo(()=>{const l=s?Ga.filter(d=>d.key!=="user_id"):Ga;return{filters:s?Ya.filter(d=>d.key!=="user_id"):Ya,columns:l}},[s]);x.useEffect(()=>{rn()},[]);const o=s?t==null?void 0:t.id:"";return e.jsx(Ns,{endpoint:"biolink",queryParams:{userId:o,withCount:"links",with:"user,domain",workspaceId:n},title:e.jsx(i,{message:"Biolinks"}),headerItemsAlign:"items-center",headerContent:e.jsx(kh,{}),filters:a,columns:r,actions:e.jsx(wh,{}),selectedActions:e.jsx(de,{resource:"biolink",action:"delete",children:e.jsx(Cs,{})}),emptyStateMessage:e.jsx(cs,{image:ph,title:e.jsx(i,{message:"No biolinks have been created yet"}),filteringTitle:e.jsx(i,{message:"No matching biolinks"})})})}function kh(){return e.jsx(Ds,{title:e.jsx(i,{message:"Link in bio"}),body:e.jsx(i,{message:"Offer multiple choices to your followers when they click on your Biolink. Share all your Social Media profiles, videos, songs, articles and other important links with just one url."})})}function wh(){return e.jsx(de,{resource:"biolink",action:"create",children:e.jsxs(_,{type:"modal",children:[e.jsx(ds,{children:e.jsx(i,{message:"New biolink"})}),e.jsx(vh,{})]})})}const ia=(s,t)=>te(`biolink/${s}`,t);function Nh(){const{biolinkId:s}=Te();return Fe({queryKey:ia(s),queryFn:()=>Ko(s),initialData:Ch(s)})}async function Ko(s,t,n){const a=await E.get(`biolink/${s}`,{params:t}).then(r=>r.data);return n==null||n(a),a}function Ch(s){var n,a;const t=(a=(n=U.getQueryData(te("biolink")))==null?void 0:n.pagination)==null?void 0:a.data.find(r=>r.id===+s);return t?{biolink:t}:void 0}function Sh(){var r;const s=ss(),{biolinkId:t}=Te(),n=Nh(),a=(r=n.data)==null?void 0:r.biolink;return e.jsx(an,{model:`biolink=${t}`,title:e.jsxs(it,{size:"xl",className:k(n.isLoading&&"invisible"),children:[e.jsx(as,{onSelected:()=>{s("..",{relative:"path"})},children:e.jsx(i,{message:"Biolinks"})}),e.jsx(as,{className:"first-letter:capitalize",children:e.jsx(i,{message:"“:name“ clicks",values:{name:a==null?void 0:a.name}})})]}),actions:a&&e.jsx(ys,{className:"flex-shrink-0 text-muted",link:a})})}const Ih=z(e.jsx("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"}),"WidgetsOutlined"),Dh=z(e.jsx("path",{d:"M15 2c-2.71 0-5.05 1.54-6.22 3.78-1.28.67-2.34 1.72-3 3C3.54 9.95 2 12.29 2 15c0 3.87 3.13 7 7 7 2.71 0 5.05-1.54 6.22-3.78 1.28-.67 2.34-1.72 3-3C20.46 14.05 22 11.71 22 9c0-3.87-3.13-7-7-7zM9 20c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.87 3.13 7 7 7-.84.63-1.88 1-3 1zm3-3c-2.76 0-5-2.24-5-5 0-1.12.37-2.16 1-3 0 3.86 3.13 6.99 7 7-.84.63-1.88 1-3 1zm4.7-3.3c-.53.19-1.1.3-1.7.3-2.76 0-5-2.24-5-5 0-.6.11-1.17.3-1.7.53-.19 1.1-.3 1.7-.3 2.76 0 5 2.24 5 5 0 .6-.11 1.17-.3 1.7zM19 12c0-3.86-3.13-6.99-7-7 .84-.63 1.87-1 3-1 2.76 0 5 2.24 5 5 0 1.12-.37 2.16-1 3z"}),"AnimationOutlined"),Lh=z(e.jsx("path",{d:"m15 5-1.41 1.41L15 7.83 17.17 10H8c-2.76 0-5 2.24-5 5v4h2v-4c0-1.65 1.35-3 3-3h9.17L15 14.17l-1.41 1.41L15 17l6-6-6-6z"}),"ShortcutOutlined"),Ph=z([e.jsx("path",{d:"M10 8v6l4.7 2.9.8-1.2-4-2.4V8z"},"0"),e.jsx("path",{d:"M17.92 12c.05.33.08.66.08 1 0 3.9-3.1 7-7 7s-7-3.1-7-7 3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23-5 0-9 4-9 9s4 9 9 9 9-4 9-9c0-.34-.02-.67-.06-1h-2.02z"},"1"),e.jsx("path",{d:"M20 5V2h-2v3h-3v2h3v3h2V7h3V5z"},"2")],"MoreTimeOutlined"),xs={type:"color",id:"c-custom",label:h("Custom color")},zh=oo.map((s,t)=>({...xs,id:`c${t}`,backgroundColor:s.color,label:s.name,color:s.foreground})),Qa={bgConfig:{...xs,backgroundColor:"",color:""}},Ge=qi()(Wi((s,t)=>({appearance:Qa,appearanceIsDirty:!1,setAppearanceIsDirty:n=>{s(a=>{a.appearanceIsDirty=n})},biolink:null,setBiolink:n=>{s(a=>{var r;a.biolink=n,a.appearanceIsDirty||(a.appearance=((r=n.appearance)==null?void 0:r.config)||Qa)})},updateAppearance(n){s(a=>{a.appearanceIsDirty=!0,a.appearance={...a.appearance,...n}})}})));function Se(){return Ge.getState()}const In={loadContent:!0};function Us(){const s=qs(),t=Ge(a=>a.biolink),n=Fe({queryKey:ia(s,In),queryFn:()=>Ko(s,In,a=>{Se().setBiolink(a.biolink)})});return{isLoading:n.isLoading,biolink:t,status:n.status,biolinkId:s}}function qs(){const{biolinkId:s}=Te();return+s}function Pt(s){Se().setBiolink(s),U.setQueryData(ia(s.id,In),{biolink:s})}function Ws(){const s=qs();return G({mutationFn:({item:t,values:n})=>Ah(s,t,n),onSuccess:t=>{Pt(t.biolink)},onError:t=>ke(t,h("Could not update content item"))})}function Ah(s,t,n){const a={...n,item_id:t.id,item_model_type:t.model_type};return E.put(`biolink/${s}/content-item`,a).then(r=>r.data)}function Fh({link:s}){const t=$s(),n=Ht(),{close:a,formId:r}=B(),o=ne({defaultValues:{activates_at:s.activates_at,expires_at:s.expires_at}}),l=Ws(),c=o.watch("activates_at"),d=x.useMemo(()=>c?ur(c,n):t,[c,t,n]);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Schedule"})}),e.jsxs(K,{children:[e.jsxs(he,{id:r,form:o,onSubmit:async u=>{l.mutate({item:s,values:u},{onSuccess:()=>{Z.positive(h("Schedule updated")),a()}})},children:[e.jsx(dt,{name:"activates_at",min:t,className:"mb-24",label:e.jsx(i,{message:"Start date"}),showCalendarFooter:!0}),e.jsx(dt,{name:"expires_at",min:d,className:"mb-24",label:e.jsx(i,{message:"End date"}),showCalendarFooter:!0})]}),e.jsx(Rh,{})]}),e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{variant:"text",onClick:()=>{a()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:r,disabled:l.isPending||!o.formState.isDirty,children:e.jsx(i,{message:"Save"})})]})]})}function Rh(){const s={b:t=>e.jsx("span",{className:"font-bold",children:t})};return e.jsx(Zt,{description:e.jsxs(x.Fragment,{children:[e.jsx("div",{children:e.jsx(i,{message:"Leave <b>start date</b> blank to display this link immediately.",values:s})}),e.jsx("div",{children:e.jsx(i,{message:"Leave <b>end date</b> blank to display this link forever.",values:s})})]})})}function Mh({link:s}){const t=$s(),{close:n,formId:a}=B(),r=ne({defaultValues:{leap_until:s.leap_until}}),o=r.formState.isDirty,l=Ws();return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Redirect link"})}),e.jsxs(K,{children:[e.jsx(he,{id:a,form:r,onSubmit:async c=>{l.mutate({item:s,values:c},{onSuccess:()=>{Z.positive(h("Redirect link updated")),n()}})},children:e.jsx(dt,{required:!0,name:"leap_until",min:t,className:"mb-24",label:e.jsx(i,{message:"Redirect until"}),showCalendarFooter:!0})}),e.jsx(_h,{})]}),e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{variant:"text",onClick:()=>{n()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:a,disabled:!o||l.isPending,children:e.jsx(i,{message:"Save"})})]})]})}function _h(){return e.jsx(Zt,{description:e.jsx(i,{message:"Send all visitors straight to this link, instead of your Biolink, until the specified date. After that date, Biolink will resume to showing normally."})})}function Eh({link:s}){const{close:t,formId:n}=B(),a=ne({defaultValues:{image:s.image}}),r=Ws(),o=a.formState.isDirty;return e.jsxs(q,{size:"sm",children:[e.jsx(Q,{children:e.jsx(i,{message:"Link thumbnail"})}),e.jsx(K,{children:e.jsx(he,{id:n,form:a,onSubmit:async l=>{r.mutate({item:s,values:l},{onSuccess:()=>{Z.positive(h("Thumbnail updated")),t()}})},children:e.jsx(vs,{children:e.jsx(yt,{showRemoveButton:!0,name:"image",diskPrefix:"links"})})})}),e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{variant:"text",onClick:()=>{t()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:n,disabled:r.isPending||!o,children:e.jsx(i,{message:"Save"})})]})]})}const Th=["none","bounce","flash","pulse","rubberBand","shakeX","shakeY","headShake","swing","tada","wobble","jello","heartBeat"];function Vh({link:s}){const{close:t,formId:n}=B(),a=ne({defaultValues:{animation:s.animation}}),r=a.formState.isDirty,o=Ws();return x.useEffect(()=>{bt(()=>Promise.resolve({}),["./animate.min-a0f1ac67.css"],import.meta.url)},[]),e.jsxs(q,{size:"md",children:[e.jsx(Q,{children:e.jsx(i,{message:"Link animation"})}),e.jsx(K,{children:e.jsxs(he,{id:n,form:a,onSubmit:async l=>{o.mutate({item:s,values:l},{onSuccess:()=>{Z.positive(h("Animation updated")),t()}})},children:[e.jsx(Zt,{className:"mb-24",description:e.jsx(i,{message:"Add animation to draw attention to this link. :br Selected animation will repeat five times by default.",values:{br:e.jsx("br",{})}})}),e.jsx("div",{className:"grid gap-14 grid-cols-[repeat(auto-fill,minmax(95px,1fr))]",children:Th.map((l,c)=>e.jsx(Oh,{animationName:l},c))})]})}),e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{variant:"text",onClick:()=>{t()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:n,disabled:o.isPending||!r,children:e.jsx(i,{message:"Save"})})]})]})}function Oh({animationName:s}){const[t,n]=x.useState(!1),{watch:a,setValue:r}=os(),o=s==="none"?null:s,l=a("animation");return e.jsx("button",{type:"button",onClick:()=>{r("animation",o,{shouldDirty:!0})},onPointerEnter:()=>{n(!0)},onPointerLeave:()=>{n(!1)},className:k("border border-2 px-10 h-64 uppercase font-medium rounded flex items-center justify-center animate__animated",t&&`animate__${s}`,l===o&&"border-primary"),children:s})}function $h(){const s=qs();return G({mutationFn:t=>Hh(s,t),onSuccess:t=>{Pt(t.biolink)},onError:t=>ke(t)})}function Hh(s,t){return E.post(`biolink/${s}/content-item/detach`,t).then(n=>n.data)}function Bh({item:s}){const t=$h();return e.jsxs(_,{type:"modal",children:[e.jsx(L,{className:"text-muted flex-shrink-0",disabled:t.isPending,children:e.jsx(qe,{})}),e.jsx(gs,{isDanger:!0,onConfirm:()=>{t.mutate({item:s})},title:e.jsx(i,{message:"Remove item"}),body:e.jsx(i,{message:"Are you sure you want to remove this item from the biolink?"}),confirm:e.jsx(i,{message:"Remove"})})]})}function Go(){const s=qs();return G({mutationFn:t=>Uh(s,t)})}function Uh(s,{oldIndex:t,newIndex:n,widgetToPin:a}){const r=Se().biolink,o=xo(r.content,t,n);a&&(o[n]={...o[n],pinned:"top"}),Se().setBiolink({...r,content:o});const l=o.map(c=>({id:c.id,model_type:c.model_type}));return E.post(`biolink/${s}/change-order`,{order:l,widgetToPin:a})}function la({item:s,biolink:t,title:n,updateDialog:a,children:r,actionRow:o}){const l=Go(),c=x.useRef(null),d=!s||s.pinned!=null,{sortableProps:u,dragHandleRef:m}=Pd({item:s||"noop",items:(t==null?void 0:t.content)||[],type:"biolinkEditorSortable",ref:c,onSortEnd:(p,f)=>{l.mutate({oldIndex:p,newIndex:f})},disabled:d});return e.jsxs("div",{className:"mb-20 flex h-172 items-stretch rounded-panel border bg-paper shadow",ref:c,...u,children:[e.jsx("button",{type:"button",className:k("flex-shrink-0 border-r px-10 text-muted",!d&&"hover:text-primary"),disabled:d,ref:m,children:e.jsx(fd,{})}),e.jsxs("div",{className:"min-w-0 flex-auto p-24",children:[e.jsxs("div",{className:"flex items-center",children:[n&&e.jsx("div",{className:"mb-4 mr-auto flex-auto overflow-hidden overflow-ellipsis whitespace-nowrap font-medium",children:n}),a&&e.jsxs(_,{type:"modal",children:[e.jsx(N,{className:"ml-20 flex-shrink-0",variant:"text",color:"primary",startIcon:e.jsx(Ye,{}),children:e.jsx(i,{message:"Edit"})}),a]}),t&&s&&e.jsx(Bh,{item:s})]}),e.jsx("div",{className:"mb-20",children:r}),o]})]})}const Yo=["groups","seo","enabled","alias"];function qh({item:s,biolink:t}){const a=`biolink/${qs()}/link/${s.id}`;return e.jsx(la,{item:s,biolink:t,title:s.name,actionRow:e.jsx(Wh,{link:s,biolink:t}),updateDialog:e.jsx(Ro,{endpoint:a,link:s,showButtonLabelField:!0,hiddenFields:Yo,onSuccess:r=>{Pt(r.biolink)}}),children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(ns,{url:s.long_url}),e.jsx("a",{href:s.short_url,target:"_blank",className:"hover:underline whitespace-nowrap overflow-hidden overflow-ellipsis text-muted text-sm",rel:"noreferrer",children:Ke(s.long_url)})]})})}function Wh({link:s,biolink:t}){const n=Ws();return e.jsxs("div",{className:"flex md:gap-24 md:justify-between h-42 items-center",children:[e.jsxs("div",{className:"flex items-center text-muted",children:[e.jsx(wt,{checked:s.active,disabled:s.active_locked||n.isPending,onChange:()=>{n.mutate({item:s,values:{active:!s.active}})}}),e.jsxs(_,{type:"popover",children:[e.jsx(se,{label:e.jsx(i,{message:"Change thumbnail"}),children:e.jsx(L,{className:"ml-10",color:s.image?"primary":null,children:e.jsx(Tn,{})})}),e.jsx(Eh,{link:s})]}),e.jsxs(_,{type:"popover",children:[e.jsx(se,{label:e.jsx(i,{message:"Animation"}),children:e.jsx(L,{color:s.animation?"primary":null,children:e.jsx(Dh,{})})}),e.jsx(Vh,{link:s})]}),e.jsxs(_,{type:"popover",children:[e.jsx(se,{label:e.jsx(i,{message:"Redirect"}),children:e.jsx(L,{color:s.leap_until?"primary":null,children:e.jsx(Lh,{})})}),e.jsx(Mh,{link:s})]}),e.jsxs(_,{type:"popover",children:[e.jsx(se,{label:e.jsx(i,{message:"Schedule"}),children:e.jsx(L,{color:s.expires_at||s.activates_at?"primary":null,children:e.jsx(Ph,{})})}),e.jsx(Fh,{link:s})]})]}),e.jsx(Kh,{link:s})]})}function Kh({link:s}){const t=ve();if(Dn("(max-width: 380px)"))return null;const a=`../../../../links/${s.id}`,r=t?e.jsx(L,{className:"text-muted flex-shrink-0",elementType:fe,to:a,relative:"path",children:e.jsx(xt,{})}):e.jsx(N,{variant:"text",className:"text-muted",startIcon:e.jsx(xt,{}),elementType:fe,to:a,relative:"path",children:e.jsx(i,{message:":count clicks",values:{count:s.clicks_count}})});return e.jsx(se,{label:e.jsx(i,{message:":count lifetime clicks",values:{count:s.clicks_count}}),children:r})}function Gh(s,t){const{trans:n}=O();return G({mutationFn:a=>Yh(t,a),onSuccess:()=>{Z.positive(n(h("Biolink updated"))),U.invalidateQueries({queryKey:te("biolink")})},onError:a=>ye(a,s)})}function Yh(s,t){return E.put(`biolink/${s}`,ta(t)).then(n=>n.data)}const Qh=["type","groups","title"];function Zh(){const{biolink:s}=Us();return s?e.jsx(Jh,{biolink:s}):e.jsx("div",{className:"py-24",children:e.jsx(Qt,{})})}function Jh({biolink:s}){const t=ne({defaultValues:Fo(s)}),n=Gh(t,s.id);return e.jsxs(he,{form:t,onBeforeSubmit:()=>{t.clearErrors("hash")},onSubmit:a=>{n.mutate(a)},children:[e.jsx("div",{className:"mb-24",children:e.jsx(N,{type:"submit",variant:"flat",color:"primary",disabled:n.isPending||!t.formState.isDirty,children:e.jsx(i,{message:"Update"})})}),e.jsxs("div",{className:"mb-24",children:[e.jsx(M,{name:"name",label:e.jsx(i,{message:"Name"}),minLength:3,className:"mb-8",autoFocus:!0}),e.jsx(ln,{form:t,name:"hash"})]}),e.jsx(sa,{hiddenFields:Qh,linkName:e.jsx(i,{message:"biolink"})})]})}function Xh(s,t){const{trans:n}=O();return G({mutationFn:a=>ef(s,a),onSuccess:(a,r)=>{Z.positive(n(r.widgetId?h("Widget added"):h("Widget updated"))),Pt(a.biolink)},onError:a=>ye(a,t)})}function ef(s,{widgetId:t,...n}){return(t?E.put(`biolink/${s}/widget/${t}`,n):E.post(`biolink/${s}/widget`,n)).then(r=>r.data)}function ts({biolink:s,widget:t,type:n,defaultValues:a,children:r,onSubmit:o}){const l=cn[n],c=x.useMemo(()=>{const f=(t==null?void 0:t.config)||a;return Array.isArray(f)&&f.length===0||!f?void 0:f},[t==null?void 0:t.config,a]),d=ne({defaultValues:c}),{formId:u,close:m}=B(),p=Xh(s.id,d);return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{...l.name})}),e.jsx(K,{children:e.jsx(he,{form:d,id:u,onSubmit:async f=>{const g=o?await o(f,d):f;g!==void 0&&p.mutate({widgetId:t==null?void 0:t.id,config:g,type:n,position:!t&&n===Ve.Socials?s.content.length+1:void 0},{onSuccess:()=>m()})},children:r})}),e.jsxs(X,{children:[e.jsx(N,{variant:"text",onClick:()=>{m()},children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:u,disabled:p.isPending||!d.formState.isDirty,children:t?e.jsx(i,{message:"Update"}):e.jsx(i,{message:"Add"})})]})]})}function sf({biolink:s,widget:t}){const{trans:n}=O();return e.jsxs(ts,{biolink:s,type:Ve.Image,widget:t,children:[e.jsx(vs,{children:e.jsx(yt,{name:"url",diskPrefix:"widgets",required:!0})}),e.jsxs(Ce,{className:"my-24",name:"type",label:e.jsx(i,{message:"Style"}),selectionMode:"single",children:[e.jsx(I,{value:"default",children:e.jsx(i,{message:"Default"})}),e.jsx(I,{value:"avatar",children:e.jsx(i,{message:"Avatar"})})]}),e.jsx(M,{placeholder:n(h("Optional")),name:"destinationUrl",type:"url",label:e.jsx(i,{message:"Destination url"}),description:e.jsx(i,{message:"Redirect user to this url when clicking the image."})})]})}const tf=""+new URL("image-d8dc8345.png",import.meta.url).href,nf=""+new URL("text-e5f73930.png",import.meta.url).href,af=""+new URL("socials-7d34b331.png",import.meta.url).href,rf=""+new URL("youtube-8639db0d.png",import.meta.url).href,of=""+new URL("soundcloud-a6ae8fd9.png",import.meta.url).href,lf=""+new URL("vimeo-f698adf6.jpeg",import.meta.url).href,cf=""+new URL("spotify-45316d66.png",import.meta.url).href,df=""+new URL("twitch-7d18ac0c.svg",import.meta.url).href,uf=""+new URL("tiktok-956e4d3e.png",import.meta.url).href;function mf({biolink:s,widget:t}){const{trans:n}=O();return e.jsx(ts,{biolink:s,type:Ve.Youtube,widget:t,onSubmit:(a,r)=>{if(!Ir(a.url).id)r.setError("url",{message:n(h("Invalid youtube url"))});else return Promise.resolve(a)},children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://www.youtube.com/watch?v=YE7VzlLtp-4",name:"url",type:"url",label:e.jsx(i,{message:"Youtube video url"}),description:e.jsx(i,{message:"Embed this youtube video within biolink."})})})}function xf({biolink:s,widget:t}){return e.jsxs(ts,{biolink:s,type:Ve.Text,widget:t,children:[e.jsx(M,{className:"mb-24",required:!0,autoFocus:!0,name:"title",label:e.jsx(i,{message:"Title"})}),e.jsx(M,{name:"description",inputElementType:"textarea",rows:2,label:e.jsx(i,{message:"Description"})})]})}function hf({biolink:s,widget:t}){return e.jsx(ts,{biolink:s,type:Ve.Socials,widget:t,onSubmit:n=>Promise.resolve(Cr(n)),children:Object.entries(Ki).map(([n,a],r)=>{const o=a.icon;return e.jsx(M,{autoFocus:r===0,className:"mb-24",name:n,placeholder:a.placeholder,label:e.jsx(i,{...a.name}),pattern:a.pattern,type:a.inputType,autoComplete:"off",startAdornment:o&&e.jsx(o,{})},n)})})}function ff({biolink:s,widget:t}){return e.jsx(ts,{biolink:s,type:Ve.Twitch,widget:t,children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://www.twitch.tv/kasparovchess",name:"url",type:"url",pattern:"https://(www.)?twitch.tv/.*",label:e.jsx(i,{message:"Twitch channel or clip url"}),description:e.jsx(i,{message:"Embed this twitch channel or clip within biolink."})})})}function pf({biolink:s,widget:t}){const{trans:n}=O();return e.jsx(ts,{biolink:s,type:Ve.Soundcloud,widget:t,onSubmit:async(a,r)=>{var m;const o=encodeURIComponent(a.url),c=(await fetch(`https://soundcloud.com/oembed?format=json&url=${o}`).then(p=>p.json())).html,d=document.createElement("div");d.innerHTML=c;const u=(m=d.querySelector("iframe"))==null?void 0:m.src;if(u)return{...a,embedUrl:u};r.setError("url",{message:n(h("Invalid soundcloud url"))})},children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://soundcloud.com/artist/track",name:"url",type:"url",label:e.jsx(i,{message:"Soundcloud track url"}),description:e.jsx(i,{message:"Embed this soundcloud track within biolink."})})})}function gf({biolink:s,widget:t}){const{trans:n}=O();return e.jsx(ts,{biolink:s,type:Ve.Vimeo,widget:t,onSubmit:(a,r)=>{if(!Ir(a.url).id)r.setError("url",{message:n(h("Invalid vimeo url"))});else return Promise.resolve(a)},children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://vimeo.com/1084537",name:"url",type:"url",label:e.jsx(i,{message:"Vimeo video url"}),description:e.jsx(i,{message:"Embed this vimeo video within biolink."})})})}function jf({biolink:s,widget:t}){const{trans:n}=O();return e.jsx(ts,{biolink:s,type:Ve.Spotify,widget:t,onSubmit:(a,r)=>{const o=Gi(a.url);if(!("id"in o))r.setError("url",{message:n(h("Invalid spotify url"))});else return Promise.resolve({...a,type:o.type})},children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://open.spotify.com/track/2sqfLwGKXDw1nGjFhH3GGX?si=f329040f45804ec5",name:"url",type:"url",label:e.jsx(i,{message:"Spotify share url"}),description:e.jsx(i,{message:"Any share url from spotify can be used, including artist, album, track, playlist etc."})})})}function bf({biolink:s,widget:t}){const{trans:n}=O();return e.jsx(ts,{biolink:s,type:Ve.Tiktok,widget:t,onSubmit:(a,r)=>{if(!a.url.includes("tiktok.com/"))r.setError("url",{message:n(h("Invalid tiktok url"))});else return Promise.resolve(a)},children:e.jsx(M,{required:!0,autoFocus:!0,placeholder:"https://www.tiktok.com/@bts_official_bighit/video/6964945720885464322",name:"url",type:"url",label:e.jsx(i,{message:"Tiktok url"}),description:e.jsx(i,{message:"Embed this tiktok video within biolink."})})})}var Ve=(s=>(s.Image="image",s.Text="text",s.Socials="socials",s.Youtube="youtube",s.Soundcloud="soundcloud",s.Vimeo="video",s.Spotify="spotify",s.Twitch="twitch",s.Tiktok="tiktok",s))(Ve||{});const cn={image:{name:h("Image"),image:tf,description:h("Upload an image and optionally add a link it will redirect to when clicked."),dialog:sf},text:{name:h("Text"),image:nf,description:h("Add title and optional description. Can be used as a header for the whole biolink or a group of multiple widgets."),dialog:xf},socials:{name:h("Social Links"),image:af,description:h("Add your socials links to display them as icon buttons."),dialog:hf},youtube:{name:h("Youtube Video"),image:rf,description:h("Paste a YouTube video URL to show it as a video embed in your profile."),dialog:mf},soundcloud:{name:h("Soundcloud Audio"),image:of,description:h("Paste a SoundCloud URL to show it as a playable song in your profile."),dialog:pf},video:{name:h("Vimeo Video"),image:lf,description:h("Paste a vimeo URL to show it as a video embed in your profile."),dialog:gf},spotify:{name:h("Spotify Embed"),image:cf,description:h("Paste a spotify song, album, artist, playlist, podcast or episode url to show it as an embed in your profile."),dialog:jf},twitch:{name:h("Twitch Embed"),image:df,description:h("Paste twitch profile or clip url to show it as an embed in your profile."),dialog:ff},tiktok:{name:h("TikTok Embed"),image:uf,description:h("Paste TikTok video url to show it as an embed in your profile."),dialog:bf}};function vf(){const{close:s}=B();return e.jsxs(q,{size:"xl",children:[e.jsx(Q,{titleTextSize:"text-md",padding:"px-24 pt-14 pb-4",children:e.jsx(i,{message:"Add widget"})}),e.jsx(K,{padding:"p-24",children:e.jsx("div",{className:"grid gap-14 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(cn).map(([t,n])=>e.jsxs("div",{className:"bg-paper border rounded p-14 shadow cursor-pointer hover:bg-primary/hover",role:"button",tabIndex:0,onClick:()=>{s(t)},children:[e.jsx("img",{src:n.image,alt:"",className:"block w-54 h-54 mb-20 mr-auto"}),e.jsx("div",{className:"text-primary text-lg font-semibold whitespace-nowrap overflow-hidden overflow-ellipsis",children:e.jsx(i,{...n.name})}),e.jsx("div",{className:"text-muted",children:e.jsx(i,{...n.description})})]},t))})})]})}function yf({activeWidget:s,biolink:t,onOpenChange:n}){const a=s?cn[s].dialog:null;return e.jsx(_,{type:"modal",isOpen:s!=null,onOpenChange:n,children:a&&e.jsx(a,{biolink:t})})}const Mt=z(e.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpwardOutlined");function kf({item:s,biolink:t}){const n=cn[s.type],a=Yi[s.type],r=n.dialog;return e.jsx(la,{biolink:t,item:s,title:e.jsx(i,{...n.name}),updateDialog:e.jsx(r,{widget:s,biolink:t}),actionRow:e.jsx(wf,{widget:s}),children:e.jsx(a,{widget:s,variant:"editor"})})}function wf({widget:s}){const t=Ws(),n=Go(),a=()=>{const r=Se().biolink;if(!r)return;const o=r.content.filter(l=>l.pinned==="top").length;if(s.pinned)t.mutate({item:s,values:{pinned:null}});else{const l=r.content.findIndex(c=>c.model_type===s.model_type&&c.id===s.id);n.mutate({oldIndex:l,newIndex:o,widgetToPin:s.id})}};return e.jsxs("div",{className:"flex items-center gap-24 justify-between text-muted h-42",children:[e.jsx(wt,{checked:s.active,disabled:t.isPending,onChange:()=>{t.mutate({item:s,values:{active:!s.active}})}}),e.jsx(N,{variant:"outline",size:"2xs",radius:"rounded-full",color:s.pinned==="top"?"primary":void 0,startIcon:s.pinned==="top"?e.jsx(Js,{}):e.jsx(Mt,{}),disabled:n.isPending,onClick:a||t.isPending,children:s.pinned==="top"?e.jsx(i,{message:"Unpin from top"}):e.jsx(i,{message:"Pin to top"})})]})}function Nf(){const{biolink:s}=Us(),t=Ge(a=>a.appearance);return _r()?null:e.jsxs("div",{className:"sticky top-24 h-max flex-shrink-0",children:[e.jsx(qt,{size:"sm",color:"positive",radius:"rounded",className:"m-auto mb-24 w-max",children:e.jsx(i,{message:"Live preview"})}),e.jsx(Cf,{children:s?e.jsx(Qi,{biolink:s,appearance:t,height:"h-full"}):null}),e.jsx("div",{className:"mt-14 text-center text-sm text-muted",children:e.jsx(i,{message:"Scheduled and disabled content is not shown"})})]})}function Cf({children:s}){return e.jsx("div",{className:"h-[724px] w-350 overflow-hidden rounded-[64px] border border-[12px] border-[#444546] shadow-lg",children:e.jsx("div",{className:"compact-scrollbar h-full overflow-y-auto",children:s})})}const Ks={h2:"text-xl font-semibold mb-20",h3:"my-12 font-semibold"},ca=z(e.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined"),Qo=z(e.jsx("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),Gs=x.forwardRef(({isActive:s,children:t,className:n,style:a,label:r,...o},l)=>e.jsxs("button",{type:"button",...o,ref:l,children:[e.jsx("span",{className:k("flex aspect-square items-center justify-center overflow-hidden rounded-panel border border-[#c3cbdc] outline-none focus-visible:ring",s&&"ring-2 ring-primary ring-offset-2",n),style:a,children:t}),e.jsx("span",{className:"mt-10 block overflow-hidden overflow-ellipsis text-xs",children:r})]}));function Sf({value:s,onChange:t,className:n,isInsideDialog:a}){return e.jsxs("div",{className:n,children:[e.jsx(If,{value:s,onChange:t,isInsideDialog:a}),zh.map(r=>e.jsx(Gs,{label:e.jsx(i,{...r.label}),isActive:(s==null?void 0:s.id)===r.id,style:{backgroundColor:r.backgroundColor},onClick:()=>{t==null||t({...xs,...r})}},r.id))]})}function If({value:s,onChange:t,isInsideDialog:n}){const a=(s==null?void 0:s.id)===xs.id;return e.jsxs(_,{type:"popover",alwaysReturnCurrentValueOnClose:n,value:s==null?void 0:s.backgroundColor,onValueChange:r=>{t==null||t({...xs,backgroundColor:r})},onClose:r=>{t==null||t({...xs,backgroundColor:r})},children:[e.jsx(Gs,{label:e.jsx(i,{...xs.label}),className:"border-2 border-dashed",style:{backgroundColor:a?s==null?void 0:s.backgroundColor:void 0},children:e.jsx("span",{className:"inline-block rounded bg-black/20 p-10 text-white",children:e.jsx(ca,{size:"lg"})})}),e.jsx(St,{hideFooter:n})]})}const Df=z(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"}),"ArrowForwardOutlined"),me={type:"gradient",id:"g-custom",label:h("Custom gradient")},Zo=[{...me,id:"g1",backgroundImage:"linear-gradient(45deg, #ff9a9e, #fad0c4)",label:h("Worm flame")},{...me,id:"g2",backgroundImage:"linear-gradient(0deg, #a18cd1, #fbc2eb)",label:h("Night fade")},{...me,id:"g3",backgroundImage:"linear-gradient(120deg, #a1c4fd, #c2e9fb)",label:h("Winter nova")},{...me,id:"g4",backgroundImage:"linear-gradient(0deg, #cfd9df, #e2ebf0)",label:h("Heavy rain")},{...me,id:"g5",backgroundImage:"linear-gradient(120deg, #fdfbfb, #ebedee)",label:h("Cloudy knoxville")},{...me,id:"g6",backgroundImage:"linear-gradient(0deg, #a8edea, #fed6e3)",label:h("Rare wind")},{...me,id:"g7",backgroundImage:"linear-gradient(135deg, #f5f7fa, #c3cfe2)",label:h("Saint petersburg")},{...me,id:"g8",backgroundImage:"linear-gradient(135deg, #fdfcfb, #e2d1c3)",label:h("Everlasting sky")},{...me,id:"g9",backgroundImage:"linear-gradient(0deg, #c1dfc4, #deecdd)",label:h("Soft grass")},{...me,id:"g10",backgroundImage:"linear-gradient(90deg, #E9E4F0, #D3CCE3)",label:h("Delicate")},{...me,id:"g11",backgroundImage:"linear-gradient(90deg, #fffcdc, #d9a7c7)",label:h("Broken hearts")},{...me,id:"g12",backgroundImage:"linear-gradient(90deg, #56ab2f, #a8e063)",label:h("Lush"),color:"rgb(255, 255, 255)"},{...me,id:"g13",backgroundImage:"linear-gradient(90deg, #606c88, #3f4c6b)",label:h("Ash"),color:"rgb(255, 255, 255)"},{...me,id:"g14",backgroundImage:"linear-gradient(90deg, #ece9e6, #ffffff)",label:h("Clouds")},{...me,id:"g15",backgroundImage:"linear-gradient(90deg, #f09819, #edde5d)",label:h("Mango pulp")},{...me,id:"g16",backgroundImage:"linear-gradient(90deg, #b79891, #94716b)",label:h("Cooper"),color:"rgb(255, 255, 255)"},{...me,id:"g17",backgroundImage:"linear-gradient(60deg, #29323c, #485563)",label:h("Vicious stance"),color:"rgb(255, 255, 255)"}];function Lf({value:s,onChange:t,className:n,isInsideDialog:a}){return e.jsxs("div",{className:n,children:[e.jsx(Pf,{value:s,onChange:t,isInsideDialog:a}),Zo.map(r=>e.jsx(Gs,{label:r.label&&e.jsx(i,{...r.label}),isActive:(s==null?void 0:s.id)===r.id,style:{backgroundImage:r.backgroundImage},onClick:()=>{t==null||t({...me,...r})}},r.backgroundImage))]})}function Pf({value:s,onChange:t,isInsideDialog:n}){const a=(s==null?void 0:s.id)===me.id;return e.jsxs(_,{type:"popover",value:s,onValueChange:r=>t==null?void 0:t(r),alwaysReturnCurrentValueOnClose:n,onOpenChange:r=>{r&&!s&&(t==null||t(Zo[0]))},onClose:r=>t==null?void 0:t(r),children:[e.jsx(Gs,{label:e.jsx(i,{...me.label}),className:"border-2 border-dashed",style:{backgroundImage:a?s==null?void 0:s.backgroundImage:void 0},children:e.jsx("span",{className:"inline-block rounded bg-black/20 p-10 text-white",children:e.jsx(Qo,{size:"lg"})})}),e.jsx(zf,{hideFooter:n})]})}function zf({hideFooter:s}){const{close:t,value:n,setValue:a}=B(),[r,o]=x.useState(()=>{var u;const d=((u=n==null?void 0:n.backgroundImage)==null?void 0:u.match(/\(([0-9]+deg),.?(.+?),.?(.+?)\)/))||[];return{angle:d[1]||"45deg",colorOne:d[2]||"#ff9a9e",colorTwo:d[3]||"#fad0c4"}}),l=d=>({...me,backgroundImage:`linear-gradient(${d.angle}, ${d.colorOne}, ${d.colorTwo})`}),c=x.useCallback(d=>{const u={...r,...d};o(u),a(l(u))},[r,a]);return e.jsxs(q,{size:"sm",children:[e.jsx(Q,{children:e.jsx(i,{message:"Custom gradient"})}),e.jsxs(K,{children:[e.jsx("div",{className:"mb-6",children:e.jsx(i,{message:"Colors"})}),e.jsxs("div",{className:"mb-20 flex h-40 items-stretch",children:[e.jsx(Za,{className:"rounded-input",value:r.colorOne,onChange:d=>c({colorOne:d})}),e.jsx("div",{className:"flex-auto border-y border-[#c3cbdc]",style:{backgroundImage:l(r).backgroundImage}}),e.jsx(Za,{className:"rounded-r-input",value:r.colorTwo,onChange:d=>c({colorTwo:d})})]}),e.jsx("div",{className:"mb-6",children:e.jsx(i,{message:"Direction"})}),e.jsx(Af,{value:r.angle,onChange:d=>c({angle:d})})]}),!s&&e.jsxs(X,{dividerTop:!0,children:[e.jsx(N,{onClick:()=>t(),children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",onClick:()=>t(l(r)),children:e.jsx(i,{message:"Apply"})})]})]})}function Za({className:s,value:t,onChange:n}){return e.jsxs(_,{type:"popover",value:t,onValueChange:n,alwaysReturnCurrentValueOnClose:!0,children:[e.jsx(se,{label:e.jsx(i,{message:"Click to change color"}),children:e.jsx("button",{type:"button",className:k("w-40 flex-shrink-0 border border-[#c3cbdc]",s),style:{backgroundColor:t}})}),e.jsx(St,{hideFooter:!0})]})}function Af({value:s,onChange:t}){const n="text-primary border-primary";return e.jsxs("div",{className:"flex flex-wrap items-center gap-8 text-muted",children:[e.jsx(L,{variant:"outline",className:s==="0deg"?n:void 0,onClick:()=>t("0deg"),children:e.jsx(Mt,{})}),e.jsx(L,{variant:"outline",className:s==="180deg"?n:void 0,onClick:()=>t("180deg"),children:e.jsx(Js,{})}),e.jsx(L,{variant:"outline",className:s==="90deg"?n:void 0,onClick:()=>t("90deg"),children:e.jsx(Df,{})}),e.jsx(L,{variant:"outline",className:s==="135deg"?n:void 0,onClick:()=>t("135deg"),children:e.jsx(Js,{className:"-rotate-45"})}),e.jsx(L,{variant:"outline",className:s==="225deg"?n:void 0,onClick:()=>t("225deg"),children:e.jsx(Js,{className:"rotate-45"})}),e.jsx(L,{variant:"outline",className:s==="45deg"?n:void 0,onClick:()=>t("45deg"),children:e.jsx(Mt,{className:"rotate-45"})}),e.jsx(L,{variant:"outline",className:s==="325deg"?n:void 0,onClick:()=>t("325deg"),children:e.jsx(Mt,{className:"-rotate-45"})})]})}const Ff=z(e.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined"),Rf=""+new URL("Angled-Focus-176ea4bb.svg",import.meta.url).href,Mf=""+new URL("Circular-Focus-ca4d12f0.svg",import.meta.url).href,_f=""+new URL("Farseeing-Eyeball-aa4a0249.svg",import.meta.url).href,Ef=""+new URL("Canyon-Funnel-b2e2eaf0.svg",import.meta.url).href,Tf=""+new URL("Looney-Loops-6f56821b.svg",import.meta.url).href,Vf=""+new URL("Hurricane-Aperture-35c89ecf.svg",import.meta.url).href,Of=""+new URL("Icy-Explosion-988bfd47.svg",import.meta.url).href,$f=""+new URL("Protruding-Squares-b00abf9b.svg",import.meta.url).href,Hf=""+new URL("Alternating-Triangles-d5e42a92.svg",import.meta.url).href,Bf=""+new URL("Monstera-Patch-69fc9117.svg",import.meta.url).href,Uf=""+new URL("Confetti-Doodles-d1c20c3c.svg",import.meta.url).href,qf=""+new URL("Threads-Ahead-28db1646.svg",import.meta.url).href,Wf=""+new URL("Launch-Day-f2926785.svg",import.meta.url).href,Kf=""+new URL("Sprinkle-d1a9b59f.svg",import.meta.url).href,Gf=""+new URL("Circuit-Board-b3635293.svg",import.meta.url).href,Yf=""+new URL("nuclear-focalpoint-166680aa.svg",import.meta.url).href,Qf=""+new URL("Snow-424582cb.svg",import.meta.url).href,le={type:"image",id:"i-custom",label:h("Custom image")},Zf=[{...le,id:"img0",backgroundColor:"#ee5522",backgroundImage:`url(${$f})`,backgroundRepeat:"repeat",label:h("Protruding squares"),color:"#fff"},{...le,id:"img1",backgroundColor:"#00bbff",backgroundImage:`url(${Wf})`,label:h("Launch day"),backgroundSize:"contain",backgroundPosition:"bottom",backgroundRepeat:"no-repeat",color:"#fff"},{...le,id:"img2",backgroundColor:"#fff",backgroundImage:`url(${Hf})`,label:h("Alternating triangles"),color:"#000"},{...le,id:"img3",backgroundColor:"#002200",backgroundImage:`url(${Bf})`,label:h("Monstera patch"),color:"#fff"},{...le,id:"img4",backgroundColor:"#aa3333",backgroundImage:`url(${Uf})`,label:h("Confetti doodles"),color:"#fff",backgroundRepeat:"repeat",backgroundPosition:"center center",backgroundSize:"contain"},{...le,id:"img5",backgroundColor:"#070014",backgroundImage:`url(${Vf})`,label:h("Hurricane aperture"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...le,id:"img6",backgroundColor:"#11ddaa",backgroundImage:`url(${Tf})`,label:h("Looney loops"),backgroundPosition:"center center",backgroundSize:"cover",color:"#000"},{...le,id:"img7",backgroundColor:"#ccffff",backgroundImage:`url(${Of})`,label:h("Icy explosion"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#000"},{...le,id:"img8",backgroundColor:"#442233",backgroundImage:`url(${Yf})`,label:h("Nuclear point"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",color:"#fff"},{...le,id:"img9",backgroundColor:"#ffdd55",backgroundImage:`url(${Rf})`,label:h("Angled focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...le,id:"img10",backgroundColor:"#220044",backgroundImage:`url(${Mf})`,label:h("Circular focus"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...le,id:"img11",backgroundColor:"#000000",backgroundImage:`url(${_f})`,label:h("Farseeing eyeball"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...le,id:"img12",backgroundColor:"#ff0000",backgroundImage:`url(${Ef})`,label:h("Canyon funnel"),backgroundPosition:"center center",backgroundSize:"cover",color:"#fff"},{...le,id:"img13",backgroundColor:"#ffdd99",backgroundImage:`url(${qf})`,label:h("Threads ahead"),color:"#000",backgroundRepeat:"no-repeat",backgroundSize:"auto"},{...le,id:"img14",backgroundImage:`url(${Kf})`,label:h("Sprinkle"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...le,id:"img15",backgroundImage:`url(${Gf})`,label:h("Circuit board"),backgroundRepeat:"repeat",backgroundPosition:"center center"},{...le,id:"img16",backgroundImage:`url(${Qf})`,label:h("Snow"),backgroundRepeat:"repeat",backgroundPosition:"center center"}],Jf={cover:{label:h("Stretch to fit"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"cover"}},contain:{label:h("Fit image"),bgConfig:{backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center top"}},repeat:{label:h("Repeat image"),bgConfig:{backgroundRepeat:"repeat",backgroundSize:void 0,backgroundPosition:"left top"}}};function Xf({value:s,onChange:t}){const n=ep(s);return e.jsx("div",{className:"mt-20 border-t pt-14",children:e.jsx(Vn,{size:"sm",disabled:!s,children:Object.entries(Jf).map(([a,r])=>e.jsx(On,{name:"background-position",value:a,checked:a===n,onChange:o=>{s&&(t==null||t({...s,...r.bgConfig}))},children:e.jsx(i,{...r.label})},a))})})}function ep(s){return(s==null?void 0:s.backgroundSize)==="cover"?"cover":(s==null?void 0:s.backgroundSize)==="contain"?"contain":"repeat"}const Ja=x.forwardRef((s,t)=>{const{children:n,autoFocus:a,size:r,invalid:o,isFirst:l,labelRef:c,isSelected:d,...u}=s,m=ht(t);mr({autoFocus:a},m);const p=sp(r);return e.jsxs("label",{ref:c,className:k("relative z-20 inline-flex flex-auto cursor-pointer select-none items-center justify-center gap-8 whitespace-nowrap align-middle font-medium transition-colors hover:text-main",d?"text-main":"text-muted",!l&&"",p,s.disabled&&"pointer-events-none text-disabled",s.invalid&&"text-danger"),children:[e.jsx("input",{type:"radio",className:"pointer-events-none absolute left-0 top-0 h-full w-full appearance-none rounded focus-visible:outline",ref:m,...u}),n&&e.jsx("span",{children:n})]})});function sp(s){switch(s){case"xs":return"px-6 py-3 text-xs";case"sm":return"px-10 py-5 text-sm";case"lg":return"px-16 py-6 text-lg";default:return"px-16 py-8 text-sm"}}function tp({selectedValue:s,labelsRef:t}){const[n,a]=x.useState(null);return x.useEffect(()=>{if(s!=null&&t.current){const r=t.current[s];if(!r)return;a({width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft})}},[a,s,t]),n?e.jsx(xe.div,{animate:n,initial:!1,className:"bg-paper shadow rounded absolute z-10 pointer-events-none"}):null}const np=x.forwardRef((s,t)=>{const{children:n,size:a,className:r}=s,o=x.useId(),l=s.name||o,c=x.useRef({}),[d,u]=Ee(s.value,s.defaultValue,s.onChange);return e.jsx("fieldset",{ref:t,className:k(r,s.width??"w-min"),children:e.jsxs("div",{className:"relative isolate flex rounded bg-chip p-4",children:[e.jsx(tp,{selectedValue:d,labelsRef:c}),x.Children.map(n,(m,p)=>{if(x.isValidElement(m))return x.cloneElement(m,{isFirst:p===0,name:l,size:a,onChange:f=>{var g,j;u(f.target.value),(j=(g=m.props).onChange)==null||j.call(g,f)},labelRef:f=>{f&&(c.current[m.props.value]=f)},isSelected:d===m.props.value})})]})})}),ap=[{value:"no-repeat",label:h("Don't repeat")},{value:"repeat-x",label:h("Horizontal")},{value:"repeat-y",label:h("Vertical")},{value:"repeat",label:h("Both")}],rp=[{value:"auto",label:h("Auto")},{value:"cover",label:h("Stretch to fit")},{value:"contain",label:h("Fit image")}],op=["left top","center top","right top","left center","center center","right center","left bottom","center bottom","right bottom"];function ip({value:s,onChange:t}){return e.jsxs("div",{className:"mt-14 border-t pt-14",children:[e.jsxs("div",{className:"flex gap-60",children:[e.jsx(lp,{value:s,onChange:t}),e.jsx(cp,{value:s,onChange:t}),e.jsx(dp,{value:s,onChange:t})]}),e.jsxs(np,{size:"xs",className:"mt-20",value:(s==null?void 0:s.backgroundAttachment)??"scroll",onChange:n=>{t==null||t({...s,backgroundAttachment:n})},children:[e.jsx(Ja,{value:"fixed",children:e.jsx(i,{message:"Fixed"})}),e.jsx(Ja,{value:"scroll",children:e.jsx(i,{message:"Not fixed"})})]})]})}function lp({value:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10",children:e.jsx(i,{message:"Repeat"})}),e.jsx(Vn,{orientation:"vertical",size:"sm",disabled:!s,children:ap.map(({value:n,label:a})=>e.jsx(On,{value:n,checked:(s==null?void 0:s.backgroundRepeat)===n,onChange:()=>{t==null||t({...s,backgroundRepeat:n})},children:e.jsx(i,{...a})},n))})]})}function cp({value:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10",children:e.jsx(i,{message:"Size"})}),e.jsx(Vn,{orientation:"vertical",size:"sm",disabled:!s,children:rp.map(({value:n,label:a})=>e.jsx(On,{value:n,checked:(s==null?void 0:s.backgroundSize)===n,onChange:()=>{t==null||t({...s,backgroundSize:n})},children:e.jsx(i,{...a})},n))})]})}function dp({value:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10",children:e.jsx(i,{message:"Position"})}),e.jsx("div",{className:"grid grid-cols-3 gap-8",children:op.map(n=>e.jsx(up,{disabled:!s,value:s,onChange:t,position:n},n))})]})}function up({value:s,onChange:t,position:n,disabled:a}){return e.jsx(js,{disabled:a,onClick:()=>{t({...s,backgroundPosition:n})},className:k("h-26 w-26 rounded border",(s==null?void 0:s.backgroundPosition)===n?"bg-primary":"bg-alt")})}function mp(s){if(s){const t=s.match(/url\(['"]?(.*?)['"]?\)/);return t==null?void 0:t[1]}}function xp({value:s,onChange:t,className:n,positionSelector:a,diskPrefix:r,isInsideDialog:o}){return e.jsxs("div",{children:[e.jsxs("div",{className:n,children:[e.jsx(hp,{value:s,onChange:t,diskPrefix:r,hideFooter:o}),Zf.map(l=>e.jsx(Gs,{onClick:()=>t==null?void 0:t({...le,...l}),isActive:(s==null?void 0:s.id)===l.id,style:{...Dr(l),backgroundAttachment:"initial"},label:e.jsx(i,{...l.label})},l.id))]}),a==="advanced"?e.jsx(ip,{value:s,onChange:t}):e.jsx(Xf,{value:s,onChange:t})]})}function hp({value:s,onChange:t,diskPrefix:n,hideFooter:a}){return s=(s==null?void 0:s.id)===le.id?s:void 0,e.jsxs(_,{type:"popover",onClose:r=>{t==null||t(r?{...le,backgroundImage:`url(${r})`}:null)},children:[e.jsx(Gs,{label:e.jsx(i,{...le.label}),isActive:(s==null?void 0:s.id)===le.id&&(s==null?void 0:s.backgroundImage)!=="none",className:"border-2 border-dashed",style:Dr(s),children:e.jsx("span",{className:"inline-block rounded bg-black/20 p-10 text-white",children:e.jsx(Ff,{size:"lg"})})}),e.jsx(fp,{value:s,diskPrefix:n,hideFooter:a})]})}function fp({value:s,diskPrefix:t,hideFooter:n}){const a=!(s!=null&&s.backgroundImage)||!s.backgroundImage.includes("url(")?void 0:mp(s.backgroundImage),r=ne({defaultValues:{imageUrl:a}}),{close:o,formId:l}=B();return e.jsxs(q,{size:"sm",children:[e.jsx(Q,{children:e.jsx(i,{message:"Upload image"})}),e.jsx(K,{children:e.jsx(he,{id:l,form:r,onSubmit:c=>o(c.imageUrl),children:e.jsx(vs,{children:e.jsx(yt,{autoFocus:!0,name:"imageUrl",diskPrefix:t||"biolinks",showRemoveButton:!0,onChange:n?c=>o(c):void 0})})})}),!n&&e.jsxs(X,{children:[e.jsx(N,{onClick:()=>o(),children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",form:l,children:e.jsx(i,{message:"Select"})})]})]})}const pp={color:Sf,gradient:Lf,image:xp};function gp({className:s,value:t,onChange:n,tabColWidth:a,isInsideDialog:r,positionSelector:o="simple",diskPrefix:l}){const[c,d]=x.useState(()=>(t==null?void 0:t.type)==="image"?"image":(t==null?void 0:t.type)==="gradient"?"gradient":"color"),u=pp[c];return e.jsxs("div",{className:s,children:[e.jsx(jp,{activeTab:c,onTabChange:d}),e.jsx(u,{value:t,onChange:n,isInsideDialog:r,positionSelector:o,diskPrefix:l,className:k("grid items-start gap-14",a||"grid-cols-[repeat(auto-fill,minmax(90px,1fr))]")})]})}function jp({activeTab:s,onTabChange:t}){return e.jsxs("div",{className:"mb-20 flex items-center gap-20 border-b pb-20",children:[e.jsx(gn,{isActive:s==="color",icon:e.jsx(ca,{}),title:e.jsx(i,{message:"Flat color"}),onClick:()=>t("color")}),e.jsx(gn,{isActive:s==="gradient",icon:e.jsx(Qo,{}),title:e.jsx(i,{message:"Gradient"}),onClick:()=>t("gradient")}),e.jsx(gn,{isActive:s==="image",icon:e.jsx(Tn,{}),title:e.jsx(i,{message:"Image"}),onClick:()=>t("image")})]})}function gn({isActive:s,icon:t,title:n,onClick:a}){return e.jsxs("div",{role:"button",className:"block",onClick:a,children:[e.jsx("div",{className:k("mx-auto mb-8 flex h-50 w-50 items-center justify-center rounded-panel border text-muted",s&&"border-primary ring"),children:t}),e.jsx("div",{className:"text-center text-sm text-primary",children:n})]})}function bp({className:s}){const t=Ge(n=>{var a;return(a=n.appearance)==null?void 0:a.bgConfig});return e.jsxs("div",{className:s,children:[e.jsx("h2",{className:Ks.h2,children:e.jsx(i,{message:"Background"})}),e.jsx(gp,{value:t,onChange:n=>Se().updateAppearance({bgConfig:n})})]})}const vp={flat:h("Fill"),outline:h("Outline")},yp={"rounded-none":h("Square"),rounded:h("Rounded"),"rounded-full":h("Pill")};function kp({className:s}){const t=Ge(a=>{var r;return(r=a.appearance)==null?void 0:r.btnConfig}),n=x.useCallback(a=>{Se().updateAppearance({btnConfig:{...t,...a}})},[t]);return e.jsxs("div",{className:s,children:[e.jsx("h2",{className:Ks.h2,children:e.jsx(i,{message:"Buttons"})}),e.jsx(wp,{value:t,onChange:n}),e.jsx(Cp,{value:t,onChange:n})]})}function wp({value:s,onChange:t}){const n=(s==null?void 0:s.variant)??"flat",a=(s==null?void 0:s.radius)??"rounded";return e.jsx("div",{children:Object.entries(vp).map(([r,o])=>e.jsxs("div",{children:[e.jsx("h3",{className:Ks.h3,children:e.jsx(i,{...o})}),e.jsx("div",{className:"grid grid-cols-2 gap-24 md:grid-cols-3",children:Object.entries(yp).map(([l,c])=>e.jsx("div",{className:k("rounded",r===n&&a===l&&"ring ring-primary-light ring-offset-4"),children:e.jsx(N,{variant:r,color:"primary",radius:l,className:"w-full",onClick:()=>{t({variant:r,radius:l})},children:e.jsx(i,{...c})})},l))})]},r))})}const Np={"shadow-none":h("No shadow"),"rgb(0 0 0 / 20%) 0.2rem 0.2rem 0.4rem 0px":h("Light shadow"),"rgb(0 0 0 / 75%) 0.3rem 0.4rem 0px":h("Hard shadow")};function Cp({value:s,onChange:t}){const n=(s==null?void 0:s.shadow)??"shadow-none";return e.jsxs("div",{children:[e.jsx("h3",{className:"my-12 font-semibold",children:e.jsx(i,{message:"Shadow"})}),e.jsx("div",{className:"flex gap-24",children:Object.entries(Np).map(([a,r])=>e.jsx("div",{style:{boxShadow:a},className:"h-40 w-70 overflow-hidden rounded-button",children:e.jsx(js,{display:"block",radius:"rounded-button",className:k("h-full w-full border",n===a&&"border-primary"),onClick:()=>{t({shadow:a==="shadow-none"?void 0:a})},children:e.jsx("span",{className:"sr-only",children:e.jsx(i,{...r})})})},a))})]})}const Sp=""+new URL("font-a5a81d1a.svg",import.meta.url).href;function Ip({state:{filters:s,setFilters:t}}){const{trans:n}=O();return e.jsxs("div",{className:"mb-24 items-center gap-24 @xs:flex",children:[e.jsx(Wt,{className:"mb-12 flex-auto @xs:mb-0",value:s.query,onChange:a=>{t({...s,query:a.target.value})},startAdornment:e.jsx(pr,{}),placeholder:n(h("Search fonts"))}),e.jsxs(Fn,{className:"flex-auto",selectionMode:"single",selectedValue:s.category,onSelectionChange:a=>{t({...s,category:a})},children:[e.jsx(I,{value:"",children:e.jsx(i,{message:"All categories"})}),e.jsx(I,{value:"serif",children:e.jsx(i,{message:"Serif"})}),e.jsx(I,{value:"sans-serif",children:e.jsx(i,{message:"Sans serif"})}),e.jsx(I,{value:"display",children:e.jsx(i,{message:"Display"})}),e.jsx(I,{value:"handwriting",children:e.jsx(i,{message:"Handwriting"})}),e.jsx(I,{value:"monospace",children:e.jsx(i,{message:"Monospace"})})]})]})}function Dp(s){const t=Zi({usage:"search",...s});return{startsWith(n,a){return a.length===0?!0:(n=n.normalize("NFC"),a=a.normalize("NFC"),t.compare(n.slice(0,a.length),a)===0)},endsWith(n,a){return a.length===0?!0:(n=n.normalize("NFC"),a=a.normalize("NFC"),t.compare(n.slice(-a.length),a)===0)},contains(n,a){if(a.length===0)return!0;n=n.normalize("NFC"),a=a.normalize("NFC");let r=0;const o=a.length;for(;r+o<=n.length;r++){const l=n.slice(r,r+o);if(t.compare(a,l)===0)return!0}return!1}}}const Jo=[{label:h("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function Lp({value:s,onChange:t}){const{data:n,isLoading:a}=Gt(["googleFonts"]),[r,o]=x.useState(0),[l,c]=x.useState({query:"",category:(s==null?void 0:s.category)??""}),{contains:d}=Dp({sensitivity:"base"}),u=x.useCallback(j=>{c(j),o(0)},[]),m=x.useMemo(()=>Jo.concat((n==null?void 0:n.googleFonts)??[]),[n==null?void 0:n.googleFonts]),p=x.useMemo(()=>m.filter(j=>{var v;return d(j.family,l.query)&&(!l.category||((v=j.category)==null?void 0:v.toLowerCase())===l.category.toLowerCase())}),[m,l,d]),f=x.useMemo(()=>Kc(p,20),[p]),g=f[r];return x.useEffect(()=>{const j="font-selector";g!=null&&g.length&&Ji(g,{id:j})},[g,r]),{fonts:g||[],currentPage:r,filteredFonts:p||[],setCurrentPage:o,isLoading:a,filters:l,setFilters:u,value:s,onChange:t,pages:f}}function Pp({state:{currentPage:s=0,setCurrentPage:t,filteredFonts:n,pages:a}}){const r=(n==null?void 0:n.length)||0;return e.jsxs("div",{className:"flex items-center justify-end gap-24 text-sm mt-30 pt-14 border-t",children:[r>0&&e.jsx("div",{children:e.jsx(i,{message:":from - :to of :total",values:{from:s*20+1,to:Math.min((s+1)*20,r),total:r}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(L,{disabled:s<1,onClick:()=>{t(Math.max(0,s-1))},children:e.jsx(ft,{})}),e.jsx(L,{disabled:s>=a.length-1,onClick:()=>{t(s+1)},children:e.jsx(Hs,{})})]})]})}function zp(s){const t=Lp(s);return e.jsxs("div",{className:s.className,children:[e.jsx(Ip,{state:t}),e.jsx(De,{initial:!1,mode:"wait",children:e.jsx(Ap,{state:t})}),e.jsx(Pp,{state:t})]})}function Ap({state:s}){const{isLoading:t,fonts:n}=s,a="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?e.jsx(Rp,{className:a}):n!=null&&n.length?e.jsx(xe.div,{...Le,className:a,children:n==null?void 0:n.map(r=>e.jsx(Fp,{font:r,state:s},r.family))},"font-list"):e.jsx(Kt,{className:"mt-60",size:"sm",image:e.jsx(jt,{src:Sp}),title:e.jsx(i,{message:"No matching fonts"}),description:e.jsx(i,{message:"Try another search query or different category"})})}function Fp({font:s,state:{value:t,onChange:n}}){const a=(t==null?void 0:t.family)===s.family,r=s.family.split(",")[0].replace(/"/g,"");return e.jsxs(js,{display:"block",onClick:()=>{n(s)},children:[e.jsx("span",{className:k("flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl",a&&"ring-2 ring-primary ring-offset-2"),children:e.jsx("span",{style:{fontFamily:s.family},children:"Aa"})}),e.jsx("span",{className:k("mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",a&&"text-primary"),children:s.label?e.jsx(i,{...s.label}):r})]},s.family)}function Rp({className:s}){const t=Array.from(Array(20).keys());return e.jsx(xe.div,{...Le,className:s,children:t.map(n=>e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square",children:e.jsx(je,{display:"block",variant:"rect"})}),e.jsx(je,{className:"mt-6 text-sm"})]},n))},"font-list-skeleton")}function Mp(){const s=qs();return G({mutationFn:()=>{const t=Se().appearance;return _p(s,{config:t})},onSuccess:()=>{Se().setAppearanceIsDirty(!1),Z.positive(h("Appearance saved"))},onError:t=>ke(t,h("Could not save appearance"))})}function _p(s,t){return E.post(`biolink/${s}/appearance`,t).then(n=>n.data)}function jn({value:s,onChange:t,label:n}){const a=Es({size:"md",startAppend:e.jsx(x.Fragment,{})}),r=x.useId();return e.jsxs("div",{children:[e.jsx("label",{className:a.label,htmlFor:r,children:n}),e.jsxs("div",{className:"flex",children:[e.jsxs(_,{type:"popover",value:s,onValueChange:t,onClose:t,children:[e.jsx(js,{className:"h-42 w-42 flex-shrink-0 rounded-input border bg-black",style:{backgroundColor:s}}),e.jsx(St,{showInput:!1})]}),e.jsx(ro,{id:r,autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,prefixed:!0,className:a.input,color:s,onChange:t})]})]})}function Ep(){const s=Mp(),t=Ge(n=>n.appearanceIsDirty);return e.jsxs(x.Fragment,{children:[e.jsxs("header",{className:"mb-40",children:[e.jsx("h1",{className:"mb-4 text-2xl",children:e.jsx(i,{message:"Custom appearance"})}),e.jsx("div",{className:"mb-20 text-sm",children:e.jsx(i,{message:"Fully customize your Biolink. Change background color or select gradients and images. Choose button style, text color, typeface and more."})}),e.jsx(N,{variant:"flat",color:"primary",type:"submit",onClick:()=>s.mutate(),disabled:!t||s.isPending,children:e.jsx(i,{message:"Save changes"})})]}),e.jsx(bp,{}),e.jsx(Tp,{}),e.jsx(kp,{className:"my-60"}),e.jsx(Vp,{}),e.jsx(Op,{})]})}function Tp(){const s=Ge(n=>{var a;return(a=n.appearance)==null?void 0:a.btnConfig}),t=Ge(n=>{var a;return(a=n.appearance)==null?void 0:a.bgConfig});return e.jsxs("div",{className:"my-60",children:[e.jsx("h2",{className:Ks.h2,children:e.jsx(i,{message:"Colors"})}),e.jsxs("div",{className:"grid-cols-3 items-center gap-24 md:grid",children:[e.jsx(jn,{label:e.jsx(i,{message:"Text color"}),value:(t==null?void 0:t.color)||"#000",onChange:n=>{Se().updateAppearance({bgConfig:{...t,color:n}})}}),e.jsx(jn,{label:e.jsx(i,{message:"Button color"}),value:(s==null?void 0:s.color)||"#000",onChange:n=>{Se().updateAppearance({btnConfig:{...s,color:n}})}}),e.jsx(jn,{label:e.jsx(i,{message:"Button text color"}),value:(s==null?void 0:s.textColor)||"#000",onChange:n=>{Se().updateAppearance({btnConfig:{...s,textColor:n}})}})]})]})}function Vp(){const s=Ge(t=>{var n;return(n=t.appearance)==null?void 0:n.fontConfig})||Jo[0];return e.jsxs("div",{children:[e.jsx("h2",{className:Ks.h2,children:e.jsx(i,{message:"Font"})}),e.jsx(zp,{value:s,onChange:t=>{Se().updateAppearance({fontConfig:{...s,...t}})}})]})}function Op(){const{branding:s,biolink:t}=ce(),{isSubscribed:n}=oe(),{billing:a}=ce(),r=Ge(o=>{var l;return(l=o.appearance)==null?void 0:l.hideBranding})||!1;return e.jsxs("div",{className:"my-60",children:[e.jsx("h2",{className:Ks.h2,children:e.jsx(i,{message:"Branding"})}),a.enable&&e.jsx("div",{className:"mb-14",children:e.jsxs(_,{type:"popover",children:[e.jsx(N,{variant:"flat",color:"primary",size:"2xs",startIcon:e.jsx(ot,{}),children:e.jsx(i,{message:"Upgrade"})}),e.jsx(Lo,{message:e.jsx(i,{message:"Upgrade to remove :site logo.",values:{site:s.site_name}}),messageSuffix:null})]})}),t.show_branding&&e.jsx(wt,{disabled:!n,checked:r,onChange:o=>{Se().updateAppearance({hideBranding:o.target.checked})},children:e.jsx(i,{message:"Hide :site logo",values:{site:s.site_name}})})]})}const Xa={content:0,appearance:1,settings:2};function $p(){return e.jsxs("div",{children:[e.jsx(Hp,{}),e.jsxs("div",{className:"flex gap-60 p-24 container mx-auto",children:[e.jsx(Bp,{}),e.jsx(Nf,{})]})]})}function Hp(){const{biolink:s}=Us();return e.jsxs("header",{className:"border-b px-10 py-4 flex items-center gap-10 min-h-46",children:[e.jsx(_n,{className:"text-muted"}),e.jsxs(De,{children:[s&&e.jsx(xe.a,{className:bs,href:s==null?void 0:s.short_url,target:"_blank",rel:"noreferrer",...Le,children:Ke(s.short_url)},"link"),s&&x.createElement(xe.div,{...Le,key:"share-button",className:"ml-auto"},e.jsx(ys,{variant:"text",link:s}))]})]})}function Bp(){const{biolinkId:s}=Te(),{tabName:t="content"}=Te(),n=Xa[t]??Xa.content;return Us(),x.useEffect(()=>{rn()},[s]),e.jsx("div",{className:"flex-auto min-w-0",children:e.jsxs(ho,{overflow:"overflow-visible",selectedTab:n,isLazy:!0,children:[e.jsxs(fo,{className:"sticky top-0 bg dark:bg-alt z-10",children:[e.jsx(et,{padding:"w-140",elementType:fe,to:"../content",relative:"path",children:e.jsx(i,{message:"Content"})}),e.jsx(et,{padding:"w-140",elementType:fe,to:"../appearance",relative:"path",children:e.jsx(i,{message:"Appearance"})}),e.jsx(et,{padding:"w-140",elementType:fe,to:"../settings",relative:"path",children:e.jsx(i,{message:"Settings"})})]}),e.jsxs(po,{className:"py-20",children:[e.jsx(st,{children:e.jsx(Up,{})}),e.jsx(st,{children:e.jsx(Ep,{})}),e.jsx(st,{children:e.jsx(Zh,{})})]})]})})}function Up(){const{isLoading:s,status:t,biolink:n}=Us(),[a,r]=x.useState(null);let o;return t==="success"&&!(n!=null&&n.content.length)?o=x.createElement(xe.div,{...Le,key:"no-results"},e.jsx(Kt,{className:"mt-60",image:e.jsx(jt,{src:Xi}),title:e.jsx(i,{message:"This biolink does not have any content yet"})})):s?o=e.jsx(Kp,{}):o=e.jsx(qp,{biolink:n}),e.jsxs(x.Fragment,{children:[n&&e.jsx(yf,{biolink:n,activeWidget:a,onOpenChange:l=>{l||r(null)}}),e.jsxs("div",{className:"mb-20",children:[e.jsx(Wp,{}),e.jsxs(_,{type:"modal",onClose:l=>{l&&r(l)},children:[e.jsx(N,{color:"primary",variant:"outline",startIcon:e.jsx(Ih,{}),children:e.jsx(i,{message:"Add widget"})}),e.jsx(vf,{})]})]}),e.jsx(De,{initial:!1,mode:"wait",children:o})]})}function qp({biolink:s}){return e.jsx(xe.div,{...Le,children:s==null?void 0:s.content.map(t=>{const n=t.model_type==="biolinkWidget"?kf:qh;return e.jsx(n,{item:t,biolink:s},`${t.model_type}-${t.id}`)})},"content")}function Wp(){const{biolink:s,biolinkId:t}=Us(),n=`biolink/${t}/link`,a=s==null?void 0:s.content.filter(r=>r.pinned).length;return e.jsxs(_,{type:"modal",children:[e.jsx(N,{color:"primary",variant:"flat",className:"mr-14 min-w-144",children:e.jsx(i,{message:"Add a link"})}),e.jsx(aa,{endpoint:n,position:a,group:s,hiddenFields:Yo,showButtonLabelField:!0,invalidateQueries:!1,onSuccess:r=>{Pt(r.biolink)}})]})}function Kp(){return e.jsx(xe.div,{...Le,children:[...Array(4).keys()].map((s,t)=>e.jsx(Gp,{},t))},"loading-skeleton")}function Gp(){return e.jsxs(la,{title:e.jsx(je,{className:"mb-14 text-sm max-w-192"}),actionRow:e.jsx(je,{className:"text-xs max-w-288"}),children:[e.jsx(je,{className:"text-xs max-w-400"}),e.jsx(je,{className:"text-xs max-w-400"})]})}function Xo(){const[s,t]=x.useState(!1),{trans:n}=O(),r=os().watch("title"),o=n({message:"Title"});return s?e.jsx(M,{placeholder:o,autoFocus:!0,className:"mb-30",onBlur:()=>{t(!1)},name:"title",required:!0}):e.jsxs("h1",{tabIndex:0,onClick:()=>{t(!0)},onFocus:()=>{t(!0)},className:k("hover:bg-primary/focus rounded cursor-pointer",!r&&"text-muted"),children:[r||o,e.jsx(Ye,{className:"icon-sm mx-8 mt-8 align-top text-muted"})]})}const Yp=z(e.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),Qp=z(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function Zp({editor:s}){return e.jsxs("span",{children:[e.jsx(L,{size:"md",disabled:!s.can().undo(),onClick:()=>{s.commands.focus(),s.commands.undo()},children:e.jsx(Yp,{})}),e.jsx(L,{size:"md",disabled:!s.can().redo(),onClick:()=>{s.commands.focus(),s.commands.redo()},children:e.jsx(Qp,{})})]})}const ei=z(e.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"CodeOutlined");function Jp({editor:s}){return e.jsxs(_,{type:"modal",onClose:t=>{t!=null&&(s==null||s.commands.setContent(t))},children:[e.jsx(N,{variant:"text",startIcon:e.jsx(ei,{}),children:e.jsx(i,{message:"Source"})}),e.jsx(Ad,{title:e.jsx(i,{message:"Source code"}),defaultValue:s.getHTML()})]})}function Rs(){return e.jsx("div",{className:"self-stretch mx-4 w-1 bg-divider flex-shrink-0"})}const Xp=z(e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),"FormatBoldOutlined"),eg=z(e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),sg=z(e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined");function tg({editor:s,size:t}){return e.jsxs("span",{className:k("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(se,{label:e.jsx(i,{message:"Bold"}),children:e.jsx(L,{size:t,color:s.isActive("bold")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBold()},children:e.jsx(Xp,{})})}),e.jsx(se,{label:e.jsx(i,{message:"Italic"}),children:e.jsx(L,{size:t,color:s.isActive("italic")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleItalic()},children:e.jsx(eg,{})})}),e.jsx(se,{label:e.jsx(i,{message:"Underline"}),children:e.jsx(L,{size:t,color:s.isActive("underline")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleUnderline()},children:e.jsx(sg,{})})})]})}const ng=z(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulletedOutlined"),ag=z(e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");function rg({editor:s,size:t}){const n=s.isActive("bulletList"),a=s.isActive("orderedList");return e.jsxs("span",{className:k("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(se,{label:e.jsx(i,{message:"Bulleted list"}),children:e.jsx(L,{size:t,color:n?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBulletList()},children:e.jsx(ng,{})})}),e.jsx(se,{label:e.jsx(i,{message:"Numbered list"}),children:e.jsx(L,{size:t,color:a?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleOrderedList()},children:e.jsx(ag,{})})})]})}function og(s,{text:t,target:n,href:a}){s.state.selection.empty&&t?s.commands.insertContent(`<a href="${a}" target="${n}">${t}</a>`):s.state.selection.empty||(a?s.chain().focus().extendMarkRange("link").setLink({href:a,target:n}).run():s.chain().focus().extendMarkRange("link").unsetLink().run())}function ig({editor:s,size:t}){return e.jsxs(_,{type:"modal",children:[e.jsx(se,{label:e.jsx(i,{message:"Insert link"}),children:e.jsx(L,{size:t,className:k("flex-shrink-0"),children:e.jsx(_n,{})})}),e.jsx(lg,{editor:s})]})}function lg({editor:s}){const t=s.getAttributes("link").href,n=s.state.doc.textBetween(s.state.selection.from,s.state.selection.to,""),a=ne({defaultValues:{href:t,text:n,target:"_blank"}}),{formId:r,close:o}=B();return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Insert link"})}),e.jsx(K,{children:e.jsxs(he,{form:a,id:r,onSubmit:l=>{og(s,l),o()},children:[e.jsx(M,{name:"href",label:e.jsx(i,{message:"URL"}),autoFocus:!0,type:"url",className:"mb-20"}),e.jsx(M,{name:"text",label:e.jsx(i,{message:"Text to display"}),className:"mb-20"}),e.jsxs(Ce,{selectionMode:"single",name:"target",label:e.jsx(i,{message:"Open link in..."}),children:[e.jsx(I,{value:"_self",children:e.jsx(i,{message:"Current window"})}),e.jsx(I,{value:"_blank",children:e.jsx(i,{message:"New window"})})]})]})}),e.jsxs(X,{children:[e.jsx(N,{onClick:o,variant:"text",children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{type:"submit",form:r,variant:"flat",color:"primary",children:e.jsx(i,{message:"Save"})})]})]})}const cg=2097152;function dg({editor:s,size:t,diskPrefix:n="page_media"}){const{selectAndUploadFile:a}=el(),r=()=>{a({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[sl.image],maxFileSize:cg},metadata:{diskPrefix:n,disk:tl.public},onSuccess:o=>{s.commands.focus(),s.commands.setImage({src:o.url})}})};return e.jsx(se,{label:e.jsx(i,{message:"Insert image"}),children:e.jsx(L,{size:t,onClick:r,className:k("flex-shrink-0"),children:e.jsx(Tn,{})})})}const ug=z(e.jsx("path",{d:"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z"}),"FormatClearOutlined");function mg({editor:s,size:t}){return e.jsx(se,{label:e.jsx(i,{message:"Clear formatting"}),children:e.jsx(L,{className:k("flex-shrink-0"),size:t,onClick:()=>{s.chain().focus().clearNodes().unsetAllMarks().run()},children:e.jsx(ug,{})})})}const xg=z(e.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined"),hg=z([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHighOutlined"),fg=z(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z"}),"NoteOutlined"),pg=z([e.jsx("path",{d:"M9.5 7.5v9l7-4.5z"},"0"),e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z"},"1")],"SmartDisplayOutlined");function gg({editor:s,size:t}){const[n,a]=x.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(is,{onItemSelected:r=>{r==="hr"?(s.commands.focus(),s.commands.setHorizontalRule()):r==="embed"?a("embed"):(s.commands.focus(),s.commands.addInfo({type:r}))},children:[e.jsx(L,{variant:"text",size:t,className:k("flex-shrink-0"),children:e.jsx(_d,{})}),e.jsxs(ls,{children:[e.jsx(I,{value:"hr",startIcon:e.jsx(xg,{}),children:e.jsx(i,{message:"Horizontal rule"})}),e.jsx(I,{value:"embed",startIcon:e.jsx(pg,{}),children:e.jsx(i,{message:"Embed"})}),e.jsx(I,{value:"important",startIcon:e.jsx(hg,{}),children:e.jsx(i,{message:"Important"})}),e.jsx(I,{value:"warning",startIcon:e.jsx(Sr,{}),children:e.jsx(i,{message:"Warning"})}),e.jsx(I,{value:"success",startIcon:e.jsx(fg,{}),children:e.jsx(i,{message:"Note"})})]})]}),e.jsx(_,{type:"modal",isOpen:!!n,onClose:()=>{a(!1)},children:e.jsx(jg,{editor:s})})]})}function jg({editor:s}){const t=s.getAttributes("embed").src,n=ne({defaultValues:{src:t}}),{formId:a,close:r}=B();return e.jsxs(q,{children:[e.jsx(Q,{children:e.jsx(i,{message:"Insert link"})}),e.jsx(K,{children:e.jsx(he,{form:n,id:a,onSubmit:o=>{s.commands.setEmbed(o),r()},children:e.jsx(M,{name:"src",label:e.jsx(i,{message:"Embed URL"}),autoFocus:!0,type:"url",required:!0})})}),e.jsxs(X,{children:[e.jsx(N,{onClick:r,variant:"text",children:e.jsx(i,{message:"Cancel"})}),e.jsx(N,{type:"submit",form:a,disabled:!n.formState.isValid,variant:"flat",color:"primary",children:e.jsx(i,{message:"Add"})})]})]})}function $e({children:s,modifier:t,separator:n="+"}){const a=xr()?e.jsx("span",{className:"text-base align-middle",children:"⌘"}):"Ctrl";return e.jsxs("kbd",{className:"text-xs text-muted",children:[t&&e.jsxs(e.Fragment,{children:[a,n]}),s]})}function bg({editor:s,size:t}){return e.jsxs(is,{floatingMinWidth:"w-256",onItemSelected:n=>{s.commands.focus(),typeof n=="string"&&n.startsWith("h")?s.commands.toggleHeading({level:parseInt(n.replace("h",""))}):n==="code"?s.commands.toggleCode():n==="strike"?s.commands.toggleStrike():n==="super"?s.commands.toggleSuperscript():n==="sub"?s.commands.toggleSubscript():n==="blockquote"?s.commands.toggleBlockquote():n==="paragraph"&&s.commands.setParagraph()},children:[e.jsx(N,{className:k("flex-shrink-0"),variant:"text",size:t,endIcon:e.jsx(Os,{}),children:e.jsx(i,{message:"Format"})}),e.jsxs(ls,{children:[e.jsx(I,{value:"h1",endSection:e.jsx($e,{modifier:!0,children:"Alt+1"}),children:e.jsx(i,{message:"Heading :number",values:{number:1}})}),e.jsx(I,{value:"h2",endSection:e.jsx($e,{modifier:!0,children:"Alt+2"}),children:e.jsx(i,{message:"Heading :number",values:{number:2}})}),e.jsx(I,{value:"h3",endSection:e.jsx($e,{modifier:!0,children:"Alt+3"}),children:e.jsx(i,{message:"Heading :number",values:{number:3}})}),e.jsx(I,{value:"h4",endSection:e.jsx($e,{modifier:!0,children:"Alt+4"}),children:e.jsx(i,{message:"Heading :number",values:{number:4}})}),e.jsx(I,{value:"code",endSection:e.jsx($e,{modifier:!0,children:"E"}),children:e.jsx(i,{message:"Code"})}),e.jsx(I,{value:"strike",endSection:e.jsx($e,{modifier:!0,children:"Shift+X"}),children:e.jsx(i,{message:"Strikethrough"})}),e.jsx(I,{value:"super",endSection:e.jsx($e,{modifier:!0,separator:" ",children:"."}),children:e.jsx(i,{message:"Superscript"})}),e.jsx(I,{value:"sub",endSection:e.jsx($e,{modifier:!0,separator:" ",children:","}),children:e.jsx(i,{message:"Subscript"})}),e.jsx(I,{value:"blockquote",endSection:e.jsx($e,{modifier:!0,children:"Shift+B"}),children:e.jsx(i,{message:"Blockquote"})}),e.jsx(I,{value:"paragraph",endSection:e.jsx($e,{modifier:!0,children:"Alt+0"}),children:e.jsx(i,{message:"Paragraph"})})]})]})}const vg=z(e.jsx("path",{d:"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z"}),"FormatColorTextOutlined");function yg({editor:s,size:t}){const[n,a]=x.useState(!1),r=s.getAttributes("textStyle").color,o=s.getAttributes("textStyle").backgroundColor;return e.jsxs(x.Fragment,{children:[e.jsxs("span",{className:k("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(L,{size:t,color:r?"primary":null,onClick:()=>{a("text")},children:e.jsx(vg,{})}),e.jsx(L,{size:t,color:o?"primary":null,onClick:()=>{a("bg")},children:e.jsx(ca,{})})]}),e.jsx(_,{defaultValue:n==="text"?"#000000":"#FFFFFF",type:"modal",isOpen:!!n,onClose:l=>{l&&(n==="text"?s.commands.setColor(l):s.commands.setBackgroundColor(l)),a(!1)},children:e.jsx(St,{})})]})}const kg=z(e.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),wg=z(e.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),Ng=z(e.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),Cg=z(e.jsx("path",{d:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"}),"FormatAlignJustifyOutlined"),Ft={left:{icon:kg,label:h("Align left")},center:{icon:wg,label:h("Align center")},right:{icon:Ng,label:h("Align right")},justify:{icon:Cg,label:h("Justify")}};function Sg({editor:s,size:t}){const n=Object.keys(Ft).find(r=>s.isActive({textAlign:r}))||"left",a=n?Ft[n].icon:Ft.left.icon;return e.jsxs(is,{floatingWidth:"auto",selectionMode:"single",selectedValue:n,onSelectionChange:r=>{s.commands.focus(),s.commands.setTextAlign(r)},children:[e.jsx(L,{size:t,color:n?"primary":null,className:k("flex-shrink-0"),children:e.jsx(a,{})}),e.jsx(ls,{children:Object.entries(Ft).map(([r,o])=>{const l=o.icon;return e.jsx(I,{value:r,startIcon:e.jsx(l,{size:"md"}),capitalizeFirst:!0,children:e.jsx(i,{message:o.label.message})},r)})})]})}const Ig=z(e.jsx("path",{d:"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentDecreaseOutlined"),Dg=z(e.jsx("path",{d:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentIncreaseOutlined");function Lg({editor:s,size:t}){return e.jsxs("span",{className:k("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(se,{label:e.jsx(i,{message:"Decrease indent"}),children:e.jsx(L,{size:t,onClick:()=>{s.commands.focus(),s.commands.outdent()},children:e.jsx(Ig,{})})}),e.jsx(se,{label:e.jsx(i,{message:"Increase indent"}),children:e.jsx(L,{size:t,onClick:()=>{s.commands.focus(),s.commands.indent()},children:e.jsx(Dg,{})})})]})}function Pg({editor:s,size:t}){const n=s.getAttributes("codeBlock").language||"";return e.jsxs(is,{selectionMode:"single",selectedValue:n,onSelectionChange:a=>{s.commands.toggleCodeBlock({language:a})},children:[e.jsx(se,{label:e.jsx(i,{message:"Codeblock"}),children:e.jsx(L,{className:k("flex-shrink-0"),size:t,color:n?"primary":null,children:e.jsx(ei,{})})}),e.jsxs(ls,{children:[e.jsx(I,{value:"html",children:"HTML"}),e.jsx(I,{value:"javascript",children:"JavaScript"}),e.jsx(I,{value:"css",children:"CSS"}),e.jsx(I,{value:"php",children:"PHP"}),e.jsx(I,{value:"shell",children:"Shell"}),e.jsx(I,{value:"bash",children:"Bash"}),e.jsx(I,{value:"ruby",children:"Ruby"}),e.jsx(I,{value:"python",children:"Python"}),e.jsx(I,{value:"java",children:"Java"}),e.jsx(I,{value:"c++",children:"C++"})]})]})}const er="flex items-center px-4 h-42 text-muted border-b overflow-hidden";function zg({editor:s,size:t="md",justify:n="justify-center",hideInsertButton:a=!1,imageDiskPrefix:r}){const o=ve(),[l,c]=x.useState(!1);return e.jsxs("div",{className:k(l?"h-84":"h-42"),children:[e.jsxs("div",{className:k(er,n,"relative z-20"),children:[e.jsx(bg,{editor:s,size:t}),e.jsx(Rs,{}),e.jsx(tg,{editor:s,size:t}),e.jsx(Rs,{}),e.jsx(Sg,{editor:s,size:t}),e.jsx(Lg,{editor:s,size:t}),e.jsx(Rs,{}),o?e.jsx(L,{className:"flex-shrink-0",color:l?"primary":null,size:t,onClick:()=>{c(!l)},children:l?e.jsx(nl,{}):e.jsx(vr,{})}):e.jsx(sr,{editor:s,size:t,hideInsertButton:a,imageDiskPrefix:r})]}),e.jsx(De,{children:l&&e.jsx(xe.div,{className:k(er,n,"absolute flex h-full w-full"),initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},children:e.jsx(sr,{editor:s,size:t,imageDiskPrefix:r})})})]})}function sr({editor:s,size:t="md",hideInsertButton:n,imageDiskPrefix:a}){return e.jsxs(x.Fragment,{children:[e.jsx(rg,{editor:s,size:t}),e.jsx(Rs,{}),e.jsx(ig,{editor:s,size:t}),e.jsx(dg,{editor:s,size:t,diskPrefix:a}),!n&&e.jsx(gg,{editor:s,size:t}),e.jsx(Rs,{}),e.jsx(yg,{editor:s,size:t}),e.jsx(Rs,{}),e.jsx(Pg,{editor:s,size:t}),e.jsx(mg,{editor:s,size:t})]})}function si({editor:s,allowSlugEditing:t=!0,onSave:n,saveButton:a,isLoading:r=!1,backLink:o,slugPrefix:l="pages",imageDiskPrefix:c}){const{isSticky:d,sentinelRef:u}=Vd(),m=ve();return e.jsxs(x.Fragment,{children:[e.jsx("div",{ref:u}),e.jsxs("div",{className:k("sticky top-0 z-10 mb-20 bg",d&&"shadow"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start",children:[!m&&e.jsxs(x.Fragment,{children:[e.jsx(N,{variant:"text",size:"sm",elementType:fe,to:o,relative:"path",startIcon:e.jsx(So,{}),children:e.jsx(i,{message:"Back"})}),e.jsx("div",{className:"mr-auto",children:t&&e.jsx(Fg,{name:"slug",showLinkIcon:!1,prefix:l})})]}),s&&e.jsx(Zp,{editor:s}),!m&&e.jsx(Jp,{editor:s}),n&&e.jsx(Ag,{onSave:()=>{n(s.getHTML())},isLoading:r}),a]}),e.jsx(zg,{editor:s,size:"sm",imageDiskPrefix:c})]})]})}function Ag({onSave:s,isLoading:t}){const a=os().watch("title");return e.jsx(N,{variant:"flat",size:"sm",color:"primary",className:"min-w-90",disabled:t||!a,onClick:()=>s(),children:e.jsx(i,{message:"Save"})})}function Fg({name:s,...t}){const{field:{onChange:n,onBlur:a,value:r="",ref:o}}=Vs({name:s}),l=x.useRef(!1),{watch:c,setValue:d}=os();return x.useEffect(()=>{const u=c((m,{name:p})=>{p==="title"&&!l.current&&d("slug",m.title)});return()=>u.unsubscribe()},[c,d]),e.jsx(Po,{className:k(!r&&"invisible"),onChange:u=>{l.current=!0,n(u)},onInputBlur:a,value:r,inputRef:o,...t})}function Rg(){return G({mutationFn:s=>Mg(s),onError:s=>ke(s),onSuccess:async()=>{await U.invalidateQueries({queryKey:["link-page"]}),Z(h("Page created"))}})}function Mg(s){return E.post("link-page",s).then(t=>t.data)}const _g=Y.lazy(()=>bt(()=>import("./article-body-editor-8314358a.js"),["./article-body-editor-8314358a.js","./main-cdcc8bff.js","./main-08072798.css","./c-4af05db8.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Eg(){const s=ss(),t=Rg(),n=ne(),a=r=>{t.mutate({...n.getValues(),body:r},{onSuccess:()=>s("../",{relative:"path"})})};return e.jsx(x.Suspense,{fallback:e.jsx(Qt,{}),children:e.jsx(_g,{children:(r,o)=>e.jsx(vs,{children:e.jsxs(Lr,{...n,children:[e.jsx(si,{editor:o,isLoading:t.isPending,onSave:a,backLink:"../",allowSlugEditing:!1}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Xo,{}),r]})})]})})})})}function Tg(s){const t=Te();return s||(s=t.pageId),Fe({queryKey:["link-page",`${s}`],queryFn:()=>Vg(s)})}function Vg(s){return E.get(`link-page/${s}`).then(t=>t.data)}function Og(){const{pageId:s}=Te();return G({mutationFn:t=>$g(s,t),onError:t=>ke(t),onSuccess:async()=>{await U.invalidateQueries({queryKey:te("link-page")}),Z(h("Page updated"))}})}function $g(s,t){return E.put(`link-page/${s}`,t).then(n=>n.data)}const Hg=Y.lazy(()=>bt(()=>import("./article-body-editor-8314358a.js"),["./article-body-editor-8314358a.js","./main-cdcc8bff.js","./main-08072798.css","./c-4af05db8.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Bg(){const s=Tg();return s.data?e.jsxs(x.Fragment,{children:[e.jsx(al,{query:s}),e.jsx(Ug,{page:s.data.page})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx(rl,{query:s})})}function Ug({page:s}){const t=ss(),n=Og(),a=ne({defaultValues:{title:s.title,slug:s.slug,body:s.body}}),r=o=>{n.mutate({...a.getValues(),body:o},{onSuccess:()=>t("../..",{relative:"path"})})};return e.jsx(x.Suspense,{fallback:e.jsx(Qt,{}),children:e.jsx(Hg,{initialContent:s.body,children:(o,l)=>e.jsx(vs,{children:e.jsxs(Lr,{...a,children:[e.jsx(si,{editor:l,backLink:"../..",isLoading:n.isPending,onSave:r,allowSlugEditing:!1}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Xo,{}),o]})})]})})})})}const ti=({forCurrentUser:s=!1})=>[{path:"links",element:e.jsx(Mm,{forCurrentUser:s})},{path:"links/:linkId",element:e.jsx(Ea,{})},{path:"biolinks",element:e.jsx(yh,{forCurrentUser:s})},{path:"biolinks/:biolinkId",element:e.jsx(Sh,{})},{path:"biolinks/:biolinkId/edit",element:e.jsx(cl,{to:"content",replace:!0})},{path:"biolinks/:biolinkId/edit/:tabName",element:e.jsx($p,{})},{path:"link-groups",element:e.jsx(ex,{forCurrentUser:s})},{path:"link-groups/:groupId",element:e.jsx(ox,{})},{path:"link-groups/:groupId/links",element:e.jsx(Um,{})},{path:"link-groups/:groupId/links/:linkId",element:e.jsx(Ea,{})},{path:"custom-domains",element:e.jsx(Dx,{forCurrentUser:s})},{path:"pixels",element:e.jsx(Ox,{forCurrentUser:s})},{path:"link-overlays",element:e.jsx(Jx,{forCurrentUser:s})},{path:"link-overlays/new",element:e.jsx(ch,{})},{path:"link-overlays/:overlayId/edit",element:e.jsx(hh,{})}];function qg(){const{workspaceId:s}=Ie(),t=[{path:"/",element:e.jsx(ol,{children:e.jsx(Fu,{})}),children:[{index:!0,element:e.jsx(sm,{})},{path:"link-pages",element:e.jsx(Kx,{forCurrentUser:!s})},{path:"link-pages/new",element:e.jsx(Eg,{})},{path:"link-pages/:pageId/edit",element:e.jsx(Bg,{})},...ti({forCurrentUser:!s})]},{path:"*",element:e.jsx(il,{})}];return ll(t)}const Gg=Object.freeze(Object.defineProperty({__proto__:null,SharedDashboardRoutes:ti,default:qg},Symbol.toStringTag,{value:"Module"}));export{Tt as $,Br as A,Pa as B,hc as C,ul as D,ho as E,re as F,fo as G,et as H,po as I,st as J,Hs as K,Qr as L,_d as M,Ss as N,$s as O,Vd as P,te as Q,qn as R,wt as S,Md as T,oc as U,Nt as V,eo as W,$r as X,Hd as Y,$c as Z,Is as _,pl as a,mc as a0,Hu as a1,Aa as a2,Qu as a3,Gu as a4,Xt as a5,_u as a6,Xu as a7,ti as a8,si as a9,eg as aA,ng as aB,ag as aC,sg as aD,Qo as aE,Gd as aF,zx as aG,xg as aH,Km as aI,fl as aJ,Ph as aK,Em as aL,fg as aM,xu as aN,hg as aO,hm as aP,Qp as aQ,Lh as aR,pg as aS,lm as aT,Yp as aU,Ff as aV,Ih as aW,Dp as aX,Gg as aY,Xo as aa,zp as ab,mx as ac,Lu as ad,pm as ae,_o as af,Dh as ag,So as ah,Js as ai,Df as aj,Rr as ak,Mt as al,xt as am,ei as an,$n as ao,ac as ap,wg as aq,Cg as ar,kg as as,Ng as at,Xp as au,ug as av,ca as aw,vg as ax,Ig as ay,Dg as az,xl as b,ml as c,$ as d,ks as e,dt as f,ps as g,Ns as h,Cs as i,cs as j,Bc as k,ds as l,Kc as m,As as n,ct as o,tn as p,Bl as q,so as r,St as s,pd as t,ws as u,Pd as v,fd as w,Ad as x,La as y,Rd as z};
//# sourceMappingURL=dashboard-routes-8419527f.js.map
